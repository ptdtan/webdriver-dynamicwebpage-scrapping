define("home/config",[],function(){return{appRoot:"/"}}),function(){var e=this,t=e._,n={},i=Array.prototype,a=Object.prototype,s=Function.prototype,o=i.push,r=i.slice,l=i.concat,c=a.toString,u=a.hasOwnProperty,d=i.forEach,h=i.map,m=i.reduce,p=i.reduceRight,f=i.filter,g=i.every,v=i.some,w=i.indexOf,b=i.lastIndexOf,y=Array.isArray,x=Object.keys,k=s.bind,C=function(e){return e instanceof C?e:this instanceof C?void(this._wrapped=e):new C(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.6.0";var T=C.each=C.forEach=function(e,t,i){if(null==e)return e;if(d&&e.forEach===d)e.forEach(t,i);else if(e.length===+e.length){for(var a=0,s=e.length;s>a;a++)if(t.call(i,e[a],a,e)===n)return}else for(var o=C.keys(e),a=0,s=o.length;s>a;a++)if(t.call(i,e[o[a]],o[a],e)===n)return;return e};C.map=C.collect=function(e,t,n){var i=[];return null==e?i:h&&e.map===h?e.map(t,n):(T(e,function(e,a,s){i.push(t.call(n,e,a,s))}),i)};var S="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,t,n,i){var a=arguments.length>2;if(null==e&&(e=[]),m&&e.reduce===m)return i&&(t=C.bind(t,i)),a?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){a?n=t.call(i,n,e,s,o):(n=e,a=!0)}),!a)throw new TypeError(S);return n},C.reduceRight=C.foldr=function(e,t,n,i){var a=arguments.length>2;if(null==e&&(e=[]),p&&e.reduceRight===p)return i&&(t=C.bind(t,i)),a?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=C.keys(e);s=o.length}if(T(e,function(r,l,c){l=o?o[--s]:--s,a?n=t.call(i,n,e[l],l,c):(n=e[l],a=!0)}),!a)throw new TypeError(S);return n},C.find=C.detect=function(e,t,n){var i;return _(e,function(e,a,s){return t.call(n,e,a,s)?(i=e,!0):void 0}),i},C.filter=C.select=function(e,t,n){var i=[];return null==e?i:f&&e.filter===f?e.filter(t,n):(T(e,function(e,a,s){t.call(n,e,a,s)&&i.push(e)}),i)},C.reject=function(e,t,n){return C.filter(e,function(e,i,a){return!t.call(n,e,i,a)},n)},C.every=C.all=function(e,t,i){t||(t=C.identity);var a=!0;return null==e?a:g&&e.every===g?e.every(t,i):(T(e,function(e,s,o){return(a=a&&t.call(i,e,s,o))?void 0:n}),!!a)};var _=C.some=C.any=function(e,t,i){t||(t=C.identity);var a=!1;return null==e?a:v&&e.some===v?e.some(t,i):(T(e,function(e,s,o){return a||(a=t.call(i,e,s,o))?n:void 0}),!!a)};C.contains=C.include=function(e,t){return null==e?!1:w&&e.indexOf===w?-1!=e.indexOf(t):_(e,function(e){return e===t})},C.invoke=function(e,t){var n=r.call(arguments,2),i=C.isFunction(t);return C.map(e,function(e){return(i?t:e[t]).apply(e,n)})},C.pluck=function(e,t){return C.map(e,C.property(t))},C.where=function(e,t){return C.filter(e,C.matches(t))},C.findWhere=function(e,t){return C.find(e,C.matches(t))},C.max=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);var i=-1/0,a=-1/0;return T(e,function(e,s,o){var r=t?t.call(n,e,s,o):e;r>a&&(i=e,a=r)}),i},C.min=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);var i=1/0,a=1/0;return T(e,function(e,s,o){var r=t?t.call(n,e,s,o):e;a>r&&(i=e,a=r)}),i},C.shuffle=function(e){var t,n=0,i=[];return T(e,function(e){t=C.random(n++),i[n-1]=i[t],i[t]=e}),i},C.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=C.values(e)),e[C.random(e.length-1)]):C.shuffle(e).slice(0,Math.max(0,t))};var E=function(e){return null==e?C.identity:C.isFunction(e)?e:C.property(e)};C.sortBy=function(e,t,n){return t=E(t),C.pluck(C.map(e,function(e,i,a){return{value:e,index:i,criteria:t.call(n,e,i,a)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var F=function(e){return function(t,n,i){var a={};return n=E(n),T(t,function(s,o){var r=n.call(i,s,o,t);e(a,r,s)}),a}};C.groupBy=F(function(e,t,n){C.has(e,t)?e[t].push(n):e[t]=[n]}),C.indexBy=F(function(e,t,n){e[t]=n}),C.countBy=F(function(e,t){C.has(e,t)?e[t]++:e[t]=1}),C.sortedIndex=function(e,t,n,i){n=E(n);for(var a=n.call(i,t),s=0,o=e.length;o>s;){var r=s+o>>>1;n.call(i,e[r])<a?s=r+1:o=r}return s},C.toArray=function(e){return e?C.isArray(e)?r.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:r.call(e,0,t)},C.initial=function(e,t,n){return r.call(e,0,e.length-(null==t||n?1:t))},C.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:r.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,n){return r.call(e,null==t||n?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var P=function(e,t,n){return t&&C.every(e,C.isArray)?l.apply(n,e):(T(e,function(e){C.isArray(e)||C.isArguments(e)?t?o.apply(n,e):P(e,t,n):n.push(e)}),n)};C.flatten=function(e,t){return P(e,t,[])},C.without=function(e){return C.difference(e,r.call(arguments,1))},C.partition=function(e,t){var n=[],i=[];return T(e,function(e){(t(e)?n:i).push(e)}),[n,i]},C.uniq=C.unique=function(e,t,n,i){C.isFunction(t)&&(i=n,n=t,t=!1);var a=n?C.map(e,n,i):e,s=[],o=[];return T(a,function(n,i){(t?i&&o[o.length-1]===n:C.contains(o,n))||(o.push(n),s.push(e[i]))}),s},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(e){var t=r.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.contains(t,e)})})},C.difference=function(e){var t=l.apply(i,r.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=C.max(C.pluck(arguments,"length").concat(0)),t=Array(e),n=0;e>n;n++)t[n]=C.pluck(arguments,""+n);return t},C.object=function(e,t){if(null==e)return{};for(var n={},i=0,a=e.length;a>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},C.indexOf=function(e,t,n){if(null==e)return-1;var i=0,a=e.length;if(n){if("number"!=typeof n)return i=C.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,a+n):n}if(w&&e.indexOf===w)return e.indexOf(t,n);for(;a>i;i++)if(e[i]===t)return i;return-1},C.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(b&&e.lastIndexOf===b)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var a=i?n:e.length;a--;)if(e[a]===t)return a;return-1},C.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=0,s=Array(i);i>a;)s[a++]=e,e+=n;return s};var M=function(){};C.bind=function(e,t){var n,i;if(k&&e.bind===k)return k.apply(e,r.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return n=r.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(r.call(arguments)));M.prototype=e.prototype;var a=new M;M.prototype=null;var s=e.apply(a,n.concat(r.call(arguments)));return Object(s)===s?s:a}},C.partial=function(e){var t=r.call(arguments,1);return function(){for(var n=0,i=t.slice(),a=0,s=i.length;s>a;a++)i[a]===C&&(i[a]=arguments[n++]);for(;arguments.length>n;)i.push(arguments[n++]);return e.apply(this,i)}},C.bindAll=function(e){var t=r.call(arguments,1);if(0===t.length)throw Error("bindAll must be passed function names");return T(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var n={};return t||(t=C.identity),function(){var i=t.apply(this,arguments);return C.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},C.delay=function(e,t){var n=r.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(r.call(arguments,1)))},C.throttle=function(e,t,n){var i,a,s,o=null,r=0;n||(n={});var l=function(){r=n.leading===!1?0:C.now(),o=null,s=e.apply(i,a),i=a=null};return function(){var c=C.now();r||n.leading!==!1||(r=c);var u=t-(c-r);return i=this,a=arguments,0>=u?(clearTimeout(o),o=null,r=c,s=e.apply(i,a),i=a=null):o||n.trailing===!1||(o=setTimeout(l,u)),s}},C.debounce=function(e,t,n){var i,a,s,o,r,l=function(){var c=C.now()-o;t>c?i=setTimeout(l,t-c):(i=null,n||(r=e.apply(s,a),s=a=null))};return function(){s=this,a=arguments,o=C.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(r=e.apply(s,a),s=a=null),r}},C.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return C.partial(t,e)},C.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},C.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},C.keys=function(e){if(!C.isObject(e))return[];if(x)return x(e);var t=[];for(var n in e)C.has(e,n)&&t.push(n);return t},C.values=function(e){for(var t=C.keys(e),n=t.length,i=Array(n),a=0;n>a;a++)i[a]=e[t[a]];return i},C.pairs=function(e){for(var t=C.keys(e),n=t.length,i=Array(n),a=0;n>a;a++)i[a]=[t[a],e[t[a]]];return i},C.invert=function(e){for(var t={},n=C.keys(e),i=0,a=n.length;a>i;i++)t[e[n[i]]]=n[i];return t},C.functions=C.methods=function(e){var t=[];for(var n in e)C.isFunction(e[n])&&t.push(n);return t.sort()},C.extend=function(e){return T(r.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},C.pick=function(e){var t={},n=l.apply(i,r.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},C.omit=function(e){var t={},n=l.apply(i,r.call(arguments,1));for(var a in e)C.contains(n,a)||(t[a]=e[a]);return t},C.defaults=function(e){return T(r.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var D=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var a=c.call(e);if(a!=c.call(t))return!1;switch(a){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return i[s]==t;var o=e.constructor,r=t.constructor;if(o!==r&&!(C.isFunction(o)&&o instanceof o&&C.isFunction(r)&&r instanceof r)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),i.push(t);var l=0,u=!0;if("[object Array]"==a){if(l=e.length,u=l==t.length)for(;l--&&(u=D(e[l],t[l],n,i)););}else{for(var d in e)if(C.has(e,d)&&(l++,!(u=C.has(t,d)&&D(e[d],t[d],n,i))))break;if(u){for(d in t)if(C.has(t,d)&&!l--)break;u=!l}}return n.pop(),i.pop(),u};C.isEqual=function(e,t){return D(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=y||function(e){return"[object Array]"==c.call(e)},C.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(e){return"function"==typeof e}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return u.call(e,t)},C.noConflict=function(){return e._=t,this},C.identity=function(e){return e},C.constant=function(e){return function(){return e}},C.property=function(e){return function(t){return t[e]}},C.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},C.times=function(e,t,n){for(var i=Array(Math.max(0,e)),a=0;e>a;a++)i[a]=t.call(n,a);return i},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},C.now=Date.now||function(){return(new Date).getTime()};var V={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};V.unescape=C.invert(V.escape);var A={escape:RegExp("["+C.keys(V.escape).join("")+"]","g"),unescape:RegExp("("+C.keys(V.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(A[e],function(t){return V[e][t]})}}),C.result=function(e,t){if(null==e)return void 0;var n=e[t];return C.isFunction(n)?n.call(e):n},C.mixin=function(e){T(C.functions(e),function(t){var n=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),I.call(this,n.apply(C,e))}})};var R=0;C.uniqueId=function(e){var t=++R+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,n){var i;n=C.defaults({},n,C.templateSettings);var a=RegExp([(n.escape||N).source,(n.interpolate||N).source,(n.evaluate||N).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(a,function(t,n,i,a,r){return o+=e.slice(s,r).replace(O,function(e){return"\\"+U[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),a&&(o+="';\n"+a+"\n__p+='"),s=r+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=Function(n.variable||"obj","_",o)}catch(r){throw r.source=o,r}if(t)return i(t,C);var l=function(e){return i.call(this,e,C)};return l.source="function("+(n.variable||"obj")+"){\n"+o+"}",l},C.chain=function(e){return C(e).chain()};var I=function(e){return this._chain?C(e).chain():e};C.mixin(C),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];C.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],I.call(this,n)}}),T(["concat","join","slice"],function(e){var t=i[e];C.prototype[e]=function(){return I.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return C})}.call(this),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=at.type(e);return"function"===n||at.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(at.isFunction(t))return at.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return at.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ht.test(t))return at.filter(t,e,n);t=at.filter(t,e)}return at.grep(e,function(e){return at.inArray(e,t)>=0!==n})}function a(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function s(e){var t=yt[e]={};return at.each(e.match(bt)||[],function(e,n){t[n]=!0}),t}function o(){pt.addEventListener?(pt.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1)):(pt.detachEvent("onreadystatechange",r),e.detachEvent("onload",r))}function r(){(pt.addEventListener||"load"===event.type||"complete"===pt.readyState)&&(o(),at.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(St,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Tt.test(n)?at.parseJSON(n):n}catch(a){}at.data(e,t,n)}else n=void 0}return n}function c(e){var t;for(t in e)if(("data"!==t||!at.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(e,t,n,i){if(at.acceptData(e)){var a,s,o=at.expando,r=e.nodeType,l=r?at.cache:e,c=r?e[o]:e[o]&&o;if(c&&l[c]&&(i||l[c].data)||void 0!==n||"string"!=typeof t)return c||(c=r?e[o]=G.pop()||at.guid++:o),l[c]||(l[c]=r?{}:{toJSON:at.noop}),("object"==typeof t||"function"==typeof t)&&(i?l[c]=at.extend(l[c],t):l[c].data=at.extend(l[c].data,t)),s=l[c],i||(s.data||(s.data={}),s=s.data),void 0!==n&&(s[at.camelCase(t)]=n),"string"==typeof t?(a=s[t],null==a&&(a=s[at.camelCase(t)])):a=s,a}}function d(e,t,n){if(at.acceptData(e)){var i,a,s=e.nodeType,o=s?at.cache:e,r=s?e[at.expando]:at.expando;if(o[r]){if(t&&(i=n?o[r]:o[r].data)){at.isArray(t)?t=t.concat(at.map(t,at.camelCase)):t in i?t=[t]:(t=at.camelCase(t),t=t in i?[t]:t.split(" ")),a=t.length;for(;a--;)delete i[t[a]];if(n?!c(i):!at.isEmptyObject(i))return}(n||(delete o[r].data,c(o[r])))&&(s?at.cleanData([e],!0):nt.deleteExpando||o!=o.window?delete o[r]:o[r]=null)}}}function h(){return!0}function m(){return!1}function p(){try{return pt.activeElement}catch(e){}}function f(e){var t=Ut.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,i,a=0,s=typeof e.getElementsByTagName!==Ct?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Ct?e.querySelectorAll(t||"*"):void 0;if(!s)for(s=[],n=e.childNodes||e;null!=(i=n[a]);a++)!t||at.nodeName(i,t)?s.push(i):at.merge(s,g(i,t));return void 0===t||t&&at.nodeName(e,t)?at.merge([e],s):s}function v(e){Mt.test(e.type)&&(e.defaultChecked=e.checked)}function w(e,t){return at.nodeName(e,"table")&&at.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==at.find.attr(e,"type"))+"/"+e.type,e}function y(e){var t=Yt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function x(e,t){for(var n,i=0;null!=(n=e[i]);i++)at._data(n,"globalEval",!t||at._data(t[i],"globalEval"))}function k(e,t){if(1===t.nodeType&&at.hasData(e)){var n,i,a,s=at._data(e),o=at._data(t,s),r=s.events;if(r){delete o.handle,o.events={};for(n in r)for(i=0,a=r[n].length;a>i;i++)at.event.add(t,n,r[n][i])}o.data&&(o.data=at.extend({},o.data))}}function C(e,t){var n,i,a;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!nt.noCloneEvent&&t[at.expando]){a=at._data(t);for(i in a.events)at.removeEvent(t,i,a.handle);t.removeAttribute(at.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,y(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),nt.html5Clone&&e.innerHTML&&!at.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Mt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function T(t,n){var i,a=at(n.createElement(t)).appendTo(n.body),s=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(a[0]))?i.display:at.css(a[0],"display");return a.detach(),s}function S(e){var t=pt,n=Zt[e];return n||(n=T(e,t),"none"!==n&&n||(Qt=(Qt||at("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Qt[0].contentWindow||Qt[0].contentDocument).document,t.write(),t.close(),n=T(e,t),Qt.detach()),Zt[e]=n),n}function _(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function E(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,a=mn.length;a--;)if(t=mn[a]+n,t in e)return t;return i}function F(e,t){for(var n,i,a,s=[],o=0,r=e.length;r>o;o++)i=e[o],i.style&&(s[o]=at._data(i,"olddisplay"),n=i.style.display,t?(s[o]||"none"!==n||(i.style.display=""),""===i.style.display&&Ft(i)&&(s[o]=at._data(i,"olddisplay",S(i.nodeName)))):(a=Ft(i),(n&&"none"!==n||!a)&&at._data(i,"olddisplay",a?n:at.css(i,"display"))));for(o=0;r>o;o++)i=e[o],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[o]||"":"none"));return e}function P(e,t,n){var i=cn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function M(e,t,n,i,a){for(var s=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=at.css(e,n+Et[s],!0,a)),i?("content"===n&&(o-=at.css(e,"padding"+Et[s],!0,a)),"margin"!==n&&(o-=at.css(e,"border"+Et[s]+"Width",!0,a))):(o+=at.css(e,"padding"+Et[s],!0,a),"padding"!==n&&(o+=at.css(e,"border"+Et[s]+"Width",!0,a)));return o}function D(e,t,n){var i=!0,a="width"===t?e.offsetWidth:e.offsetHeight,s=en(e),o=nt.boxSizing&&"border-box"===at.css(e,"boxSizing",!1,s);if(0>=a||null==a){if(a=tn(e,t,s),(0>a||null==a)&&(a=e.style[t]),an.test(a))return a;i=o&&(nt.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+M(e,t,n||(o?"border":"content"),i,s)+"px"}function V(e,t,n,i,a){return new V.prototype.init(e,t,n,i,a)}function A(){return setTimeout(function(){pn=void 0}),pn=at.now()}function R(e,t){var n,i={height:e},a=0;for(t=t?1:0;4>a;a+=2-t)n=Et[a],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function N(e,t,n){for(var i,a=(yn[t]||[]).concat(yn["*"]),s=0,o=a.length;o>s;s++)if(i=a[s].call(n,t,e))return i}function U(e,t,n){var i,a,s,o,r,l,c,u,d=this,h={},m=e.style,p=e.nodeType&&Ft(e),f=at._data(e,"fxshow");n.queue||(r=at._queueHooks(e,"fx"),null==r.unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,d.always(function(){d.always(function(){r.unqueued--,at.queue(e,"fx").length||r.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[m.overflow,m.overflowX,m.overflowY],c=at.css(e,"display"),u="none"===c?at._data(e,"olddisplay")||S(e.nodeName):c,"inline"===u&&"none"===at.css(e,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==S(e.nodeName)?m.zoom=1:m.display="inline-block")),n.overflow&&(m.overflow="hidden",nt.shrinkWrapBlocks()||d.always(function(){m.overflow=n.overflow[0],m.overflowX=n.overflow[1],m.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],gn.exec(a)){if(delete t[i],s=s||"toggle"===a,a===(p?"hide":"show")){if("show"!==a||!f||void 0===f[i])continue;p=!0}h[i]=f&&f[i]||at.style(e,i)}else c=void 0;if(at.isEmptyObject(h))"inline"===("none"===c?S(e.nodeName):c)&&(m.display=c);else{f?"hidden"in f&&(p=f.hidden):f=at._data(e,"fxshow",{}),s&&(f.hidden=!p),p?at(e).show():d.done(function(){at(e).hide()}),d.done(function(){var t;at._removeData(e,"fxshow");for(t in h)at.style(e,t,h[t])});for(i in h)o=N(p?f[i]:0,i,d),i in f||(f[i]=o.start,p&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function O(e,t){var n,i,a,s,o;for(n in e)if(i=at.camelCase(n),a=t[i],s=e[n],at.isArray(s)&&(a=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),o=at.cssHooks[i],o&&"expand"in o){s=o.expand(s),delete e[i];for(n in s)n in e||(e[n]=s[n],t[n]=a)}else t[i]=a}function I(e,t,n){var i,a,s=0,o=bn.length,r=at.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=pn||A(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,s=1-i,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(s);return r.notifyWith(e,[c,s,n]),1>s&&l?n:(r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:at.extend({},t),opts:at.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:pn||A(),duration:n.duration,tweens:[],createTween:function(t,n){var i=at.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(a)return this;for(a=!0;i>n;n++)c.tweens[n].run(1);return t?r.resolveWith(e,[c,t]):r.rejectWith(e,[c,t]),this}}),u=c.props;for(O(u,c.opts.specialEasing);o>s;s++)if(i=bn[s].call(c,e,u,c.opts))return i;return at.map(u,N,c),at.isFunction(c.opts.start)&&c.opts.start.call(e,c),at.fx.timer(at.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,a=0,s=t.toLowerCase().match(bt)||[];if(at.isFunction(n))for(;i=s[a++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function z(e,t,n,i){function a(r){var l;return s[r]=!0,at.each(e[r]||[],function(e,r){var c=r(t,n,i);return"string"!=typeof c||o||s[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}var s={},o=e===qn;return a(t.dataTypes[0])||!s["*"]&&a("*")}function L(e,t){var n,i,a=at.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((a[i]?e:n||(n={}))[i]=t[i]);return n&&at.extend(!0,e,n),e}function j(e,t,n){for(var i,a,s,o,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(o in r)if(r[o]&&r[o].test(a)){l.unshift(o);break}if(l[0]in n)s=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){s=o;break}i||(i=o)}s=s||i}return s?(s!==l[0]&&l.unshift(s),n[s]):void 0}function $(e,t,n,i){var a,s,o,r,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=c[l+" "+s]||c["* "+s],!o)for(a in c)if(r=a.split(" "),r[1]===s&&(o=c[l+" "+r[0]]||c["* "+r[0]])){o===!0?o=c[a]:c[a]!==!0&&(s=r[0],u.unshift(r[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(d){return{state:"parsererror",error:o?d:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function q(e,t,n,i){var a;if(at.isArray(t))at.each(t,function(t,a){n||Gn.test(e)?i(e,a):q(e+"["+("object"==typeof a?t:"")+"]",a,n,i)});else if(n||"object"!==at.type(t))i(e,t);else for(a in t)q(e+"["+a+"]",t[a],n,i)}function B(){try{return new e.XMLHttpRequest}catch(t){}}function W(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Y(e){return at.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var G=[],J=G.slice,X=G.concat,K=G.push,Q=G.indexOf,Z={},et=Z.toString,tt=Z.hasOwnProperty,nt={},it="1.11.2",at=function(e,t){return new at.fn.init(e,t)},st=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ot=/^-ms-/,rt=/-([\da-z])/gi,lt=function(e,t){return t.toUpperCase()};at.fn=at.prototype={jquery:it,constructor:at,selector:"",length:0,toArray:function(){return J.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:J.call(this)},pushStack:function(e){var t=at.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return at.each(this,e,t)},map:function(e){return this.pushStack(at.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:G.sort,splice:G.splice},at.extend=at.fn.extend=function(){var e,t,n,i,a,s,o=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[r]||{},r++),"object"==typeof o||at.isFunction(o)||(o={}),r===l&&(o=this,r--);l>r;r++)if(null!=(a=arguments[r]))for(i in a)e=o[i],n=a[i],o!==n&&(c&&n&&(at.isPlainObject(n)||(t=at.isArray(n)))?(t?(t=!1,s=e&&at.isArray(e)?e:[]):s=e&&at.isPlainObject(e)?e:{},o[i]=at.extend(c,s,n)):void 0!==n&&(o[i]=n));return o},at.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e)},noop:function(){},isFunction:function(e){return"function"===at.type(e)},isArray:Array.isArray||function(e){return"array"===at.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!at.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==at.type(e)||e.nodeType||at.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[et.call(e)]||"object":typeof e},globalEval:function(t){t&&at.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ot,"ms-").replace(rt,lt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var a,s=0,o=e.length,r=n(e);if(i){if(r)for(;o>s&&(a=t.apply(e[s],i),a!==!1);s++);else for(s in e)if(a=t.apply(e[s],i),a===!1)break}else if(r)for(;o>s&&(a=t.call(e[s],s,e[s]),a!==!1);s++);else for(s in e)if(a=t.call(e[s],s,e[s]),a===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(st,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?at.merge(i,"string"==typeof e?[e]:e):K.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(Q)return Q.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,a=e.length;n>i;)e[a++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[a++]=t[i++];return e.length=a,e},grep:function(e,t,n){for(var i,a=[],s=0,o=e.length,r=!n;o>s;s++)i=!t(e[s],s),i!==r&&a.push(e[s]);return a},map:function(e,t,i){var a,s=0,o=e.length,r=n(e),l=[];if(r)for(;o>s;s++)a=t(e[s],s,i),null!=a&&l.push(a);else for(s in e)a=t(e[s],s,i),null!=a&&l.push(a);return X.apply([],l)},guid:1,proxy:function(e,t){var n,i,a;return"string"==typeof t&&(a=e[t],t=e,e=a),at.isFunction(e)?(n=J.call(arguments,2),i=function(){return e.apply(t||this,n.concat(J.call(arguments)))},i.guid=e.guid=e.guid||at.guid++,i):void 0},now:function(){return+new Date},support:nt}),at.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ct=function(e){function t(e,t,n,i){var a,s,o,r,l,c,d,m,p,f;if((t?t.ownerDocument||t:z)!==V&&D(t),t=t||V,n=n||[],r=t.nodeType,"string"!=typeof e||!e||1!==r&&9!==r&&11!==r)return n;if(!i&&R){if(11!==r&&(a=wt.exec(e)))if(o=a[1]){if(9===r){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&I(t,s)&&s.id===o)return n.push(s),n}else{if(a[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((o=a[3])&&x.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(o)),n}if(x.qsa&&(!N||!N.test(e))){if(m=d=H,p=t,f=1!==r&&e,1===r&&"object"!==t.nodeName.toLowerCase()){for(c=S(e),(d=t.getAttribute("id"))?m=d.replace(yt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",l=c.length;l--;)c[l]=m+h(c[l]);p=bt.test(e)&&u(t.parentNode)||t,f=c.join(",")}if(f)try{return Q.apply(n,p.querySelectorAll(f)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return E(e.replace(lt,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>k.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[H]=!0,e}function a(e){var t=V.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),i=e.length;i--;)k.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function r(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var a,s=e([],n.length,t),o=s.length;o--;)n[a=s[o]]&&(n[a]=!(i[a]=n[a]))})})}function u(e){return e&&void 0!==e.getElementsByTagName&&e}function d(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function m(e,t,n){var i=t.dir,a=n&&"parentNode"===i,s=j++;return t.first?function(t,n,s){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,s)}:function(t,n,o){var r,l,c=[L,s];
if(o){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,o))return!0}else for(;t=t[i];)if(1===t.nodeType||a){if(l=t[H]||(t[H]={}),(r=l[i])&&r[0]===L&&r[1]===s)return c[2]=r[2];if(l[i]=c,c[2]=e(t,n,o))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var a=e.length;a--;)if(!e[a](t,n,i))return!1;return!0}:e[0]}function f(e,n,i){for(var a=0,s=n.length;s>a;a++)t(e,n[a],i);return i}function g(e,t,n,i,a){for(var s,o=[],r=0,l=e.length,c=null!=t;l>r;r++)(s=e[r])&&(!n||n(s,i,a))&&(o.push(s),c&&t.push(r));return o}function v(e,t,n,a,s,o){return a&&!a[H]&&(a=v(a)),s&&!s[H]&&(s=v(s,o)),i(function(i,o,r,l){var c,u,d,h=[],m=[],p=o.length,v=i||f(t||"*",r.nodeType?[r]:r,[]),w=!e||!i&&t?v:g(v,h,e,r,l),b=n?s||(i?e:p||a)?[]:o:w;if(n&&n(w,b,r,l),a)for(c=g(b,m),a(c,[],r,l),u=c.length;u--;)(d=c[u])&&(b[m[u]]=!(w[m[u]]=d));if(i){if(s||e){if(s){for(c=[],u=b.length;u--;)(d=b[u])&&c.push(w[u]=d);s(null,b=[],c,l)}for(u=b.length;u--;)(d=b[u])&&(c=s?et(i,d):h[u])>-1&&(i[c]=!(o[c]=d))}}else b=g(b===o?b.splice(p,b.length):b),s?s(null,o,b,l):Q.apply(o,b)})}function w(e){for(var t,n,i,a=e.length,s=k.relative[e[0].type],o=s||k.relative[" "],r=s?1:0,l=m(function(e){return e===t},o,!0),c=m(function(e){return et(t,e)>-1},o,!0),u=[function(e,n,i){var a=!s&&(i||n!==F)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,a}];a>r;r++)if(n=k.relative[e[r].type])u=[m(p(u),n)];else{if(n=k.filter[e[r].type].apply(null,e[r].matches),n[H]){for(i=++r;a>i&&!k.relative[e[i].type];i++);return v(r>1&&p(u),r>1&&h(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(lt,"$1"),n,i>r&&w(e.slice(r,i)),a>i&&w(e=e.slice(i)),a>i&&h(e))}u.push(n)}return p(u)}function b(e,n){var a=n.length>0,s=e.length>0,o=function(i,o,r,l,c){var u,d,h,m=0,p="0",f=i&&[],v=[],w=F,b=i||s&&k.find.TAG("*",c),y=L+=null==w?1:Math.random()||.1,x=b.length;for(c&&(F=o!==V&&o);p!==x&&null!=(u=b[p]);p++){if(s&&u){for(d=0;h=e[d++];)if(h(u,o,r)){l.push(u);break}c&&(L=y)}a&&((u=!h&&u)&&m--,i&&f.push(u))}if(m+=p,a&&p!==m){for(d=0;h=n[d++];)h(f,v,o,r);if(i){if(m>0)for(;p--;)f[p]||v[p]||(v[p]=X.call(l));v=g(v)}Q.apply(l,v),c&&!i&&v.length>0&&m+n.length>1&&t.uniqueSort(l)}return c&&(L=y,F=w),f};return a?i(o):o}var y,x,k,C,T,S,_,E,F,P,M,D,V,A,R,N,U,O,I,H="sizzle"+1*new Date,z=e.document,L=0,j=0,$=n(),q=n(),B=n(),W=function(e,t){return e===t&&(M=!0),0},Y=1<<31,G={}.hasOwnProperty,J=[],X=J.pop,K=J.push,Q=J.push,Z=J.slice,et=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",at=it.replace("w","w#"),st="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+at+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",rt=RegExp(nt+"+","g"),lt=RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=RegExp("^"+nt+"*,"+nt+"*"),ut=RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),dt=RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=RegExp(ot),mt=RegExp("^"+at+"$"),pt={ID:RegExp("^#("+it+")"),CLASS:RegExp("^\\.("+it+")"),TAG:RegExp("^("+it.replace("w","w*")+")"),ATTR:RegExp("^"+st),PSEUDO:RegExp("^"+ot),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:RegExp("^(?:"+tt+")$","i"),needsContext:RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,wt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,yt=/'|\\/g,xt=RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),kt=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Ct=function(){D()};try{Q.apply(J=Z.call(z.childNodes),z.childNodes)}catch(Tt){Q={apply:J.length?function(e,t){K.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}x=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},D=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:z;return i!==V&&9===i.nodeType&&i.documentElement?(V=i,A=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ct,!1):n.attachEvent&&n.attachEvent("onunload",Ct)),R=!T(i),x.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=a(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(i.getElementsByClassName),x.getById=a(function(e){return A.appendChild(e).id=H,!i.getElementsByName||!i.getElementsByName(H).length}),x.getById?(k.find.ID=function(e,t){if(void 0!==t.getElementById&&R){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},k.filter.ID=function(e){var t=e.replace(xt,kt);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(xt,kt);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),k.find.TAG=x.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],a=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[a++];)1===n.nodeType&&i.push(n);return i}return s},k.find.CLASS=x.getElementsByClassName&&function(e,t){return R?t.getElementsByClassName(e):void 0},U=[],N=[],(x.qsa=vt.test(i.querySelectorAll))&&(a(function(e){A.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||N.push("\\["+nt+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+H+"-]").length||N.push("~="),e.querySelectorAll(":checked").length||N.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||N.push(".#.+[+~]")}),a(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&N.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(x.matchesSelector=vt.test(O=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&a(function(e){x.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),U.push("!=",ot)}),N=N.length&&RegExp(N.join("|")),U=U.length&&RegExp(U.join("|")),t=vt.test(A.compareDocumentPosition),I=t||vt.test(A.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return M=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===z&&I(z,e)?-1:t===i||t.ownerDocument===z&&I(z,t)?1:P?et(P,e)-et(P,t):0:4&n?-1:1)}:function(e,t){if(e===t)return M=!0,0;var n,a=0,s=e.parentNode,r=t.parentNode,l=[e],c=[t];if(!s||!r)return e===i?-1:t===i?1:s?-1:r?1:P?et(P,e)-et(P,t):0;if(s===r)return o(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[a]===c[a];)a++;return a?o(l[a],c[a]):l[a]===z?-1:c[a]===z?1:0},i):V},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==V&&D(e),n=n.replace(dt,"='$1']"),!(!x.matchesSelector||!R||U&&U.test(n)||N&&N.test(n)))try{var i=O.call(e,n);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(a){}return t(n,V,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==V&&D(e),I(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==V&&D(e);var n=k.attrHandle[t.toLowerCase()],i=n&&G.call(k.attrHandle,t.toLowerCase())?n(e,t,!R):void 0;return void 0!==i?i:x.attributes||!R?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,a=0;if(M=!x.detectDuplicates,P=!x.sortStable&&e.slice(0),e.sort(W),M){for(;t=e[a++];)t===e[a]&&(i=n.push(a));for(;i--;)e.splice(n[i],1)}return P=null,e},C=t.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)n+=C(t);return n},k=t.selectors={cacheLength:50,createPseudo:i,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xt,kt),e[3]=(e[3]||e[4]||e[5]||"").replace(xt,kt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ht.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xt,kt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=$[e+" "];return t||(t=RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&$(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(a){var s=t.attr(a,e);return null==s?"!="===n:n?(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s.replace(rt," ")+" ").indexOf(i)>-1:"|="===n?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,a){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),r="of-type"===t;return 1===i&&0===a?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,m,p,f=s!==o?"nextSibling":"previousSibling",g=t.parentNode,v=r&&t.nodeName.toLowerCase(),w=!l&&!r;if(g){if(s){for(;f;){for(d=t;d=d[f];)if(r?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=f="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?g.firstChild:g.lastChild],o&&w){for(u=g[H]||(g[H]={}),c=u[e]||[],m=c[0]===L&&c[1],h=c[0]===L&&c[2],d=m&&g.childNodes[m];d=++m&&d&&d[f]||(h=m=0)||p.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[L,m,h];break}}else if(w&&(c=(t[H]||(t[H]={}))[e])&&c[0]===L)h=c[1];else for(;(d=++m&&d&&d[f]||(h=m=0)||p.pop())&&((r?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(w&&((d[H]||(d[H]={}))[e]=[L,h]),d!==t)););return h-=a,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(e,n){var a,s=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[H]?s(n):s.length>1?(a=[e,e,"",n],k.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,a=s(e,n),o=a.length;o--;)i=et(e,a[o]),e[i]=!(t[i]=a[o])}):function(e){return s(e,0,a)}):s}},pseudos:{not:i(function(e){var t=[],n=[],a=_(e.replace(lt,"$1"));return a[H]?i(function(e,t,n,i){for(var s,o=a(e,null,i,[]),r=e.length;r--;)(s=o[r])&&(e[r]=!(t[r]=s))}):function(e,i,s){return t[0]=e,a(t,null,s,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(xt,kt),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return mt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xt,kt).toLowerCase(),function(t){var n;do if(n=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===A},focus:function(e){return e===V.activeElement&&(!V.hasFocus||V.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(6>e.nodeType)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return ft.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},k.pseudos.nth=k.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[y]=r(y);for(y in{submit:!0,reset:!0})k.pseudos[y]=l(y);return d.prototype=k.filters=k.pseudos,k.setFilters=new d,S=t.tokenize=function(e,n){var i,a,s,o,r,l,c,u=q[e+" "];if(u)return n?0:u.slice(0);for(r=e,l=[],c=k.preFilter;r;){(!i||(a=ct.exec(r)))&&(a&&(r=r.slice(a[0].length)||r),l.push(s=[])),i=!1,(a=ut.exec(r))&&(i=a.shift(),s.push({value:i,type:a[0].replace(lt," ")}),r=r.slice(i.length));for(o in k.filter)!(a=pt[o].exec(r))||c[o]&&!(a=c[o](a))||(i=a.shift(),s.push({value:i,type:o,matches:a}),r=r.slice(i.length));if(!i)break}return n?r.length:r?t.error(e):q(e,l).slice(0)},_=t.compile=function(e,t){var n,i=[],a=[],s=B[e+" "];if(!s){for(t||(t=S(e)),n=t.length;n--;)s=w(t[n]),s[H]?i.push(s):a.push(s);s=B(e,b(a,i)),s.selector=e}return s},E=t.select=function(e,t,n,i){var a,s,o,r,l,c="function"==typeof e&&e,d=!i&&S(e=c.selector||e);if(n=n||[],1===d.length){if(s=d[0]=d[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&x.getById&&9===t.nodeType&&R&&k.relative[s[1].type]){if(t=(k.find.ID(o.matches[0].replace(xt,kt),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(a=pt.needsContext.test(e)?0:s.length;a--&&(o=s[a],!k.relative[r=o.type]);)if((l=k.find[r])&&(i=l(o.matches[0].replace(xt,kt),bt.test(s[0].type)&&u(t.parentNode)||t))){if(s.splice(a,1),e=i.length&&h(s),!e)return Q.apply(n,i),n;break}}return(c||_(e,d))(i,t,!R,n,bt.test(e)&&u(t.parentNode)||t),n},x.sortStable=H.split("").sort(W).join("")===H,x.detectDuplicates=!!M,D(),x.sortDetached=a(function(e){return 1&e.compareDocumentPosition(V.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||s(tt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);at.find=ct,at.expr=ct.selectors,at.expr[":"]=at.expr.pseudos,at.unique=ct.uniqueSort,at.text=ct.getText,at.isXMLDoc=ct.isXML,at.contains=ct.contains;var ut=at.expr.match.needsContext,dt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ht=/^.[^:#\[\.,]*$/;at.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?at.find.matchesSelector(i,e)?[i]:[]:at.find.matches(e,at.grep(t,function(e){return 1===e.nodeType}))},at.fn.extend({find:function(e){var t,n=[],i=this,a=i.length;if("string"!=typeof e)return this.pushStack(at(e).filter(function(){for(t=0;a>t;t++)if(at.contains(i[t],this))return!0}));for(t=0;a>t;t++)at.find(e,i[t],n);return n=this.pushStack(a>1?at.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ut.test(e)?at(e):e||[],!1).length}});var mt,pt=e.document,ft=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=at.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ft.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||mt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof at?t[0]:t,at.merge(this,at.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:pt,!0)),dt.test(n[1])&&at.isPlainObject(t))for(n in t)at.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(i=pt.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return mt.find(e);this.length=1,this[0]=i}return this.context=pt,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):at.isFunction(e)?void 0!==mt.ready?mt.ready(e):e(at):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),at.makeArray(e,this))};gt.prototype=at.fn,mt=at(pt);var vt=/^(?:parents|prev(?:Until|All))/,wt={children:!0,contents:!0,next:!0,prev:!0};at.extend({dir:function(e,t,n){for(var i=[],a=e[t];a&&9!==a.nodeType&&(void 0===n||1!==a.nodeType||!at(a).is(n));)1===a.nodeType&&i.push(a),a=a[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),at.fn.extend({has:function(e){var t,n=at(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(at.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,a=this.length,s=[],o=ut.test(e)||"string"!=typeof e?at(e,t||this.context):0;a>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&at.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?at.unique(s):s)},index:function(e){return e?"string"==typeof e?at.inArray(this[0],at(e)):at.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(at.unique(at.merge(this.get(),at(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),at.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return at.dir(e,"parentNode")},parentsUntil:function(e,t,n){return at.dir(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return at.dir(e,"nextSibling")},prevAll:function(e){return at.dir(e,"previousSibling")},nextUntil:function(e,t,n){return at.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return at.dir(e,"previousSibling",n)},siblings:function(e){return at.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return at.sibling(e.firstChild)},contents:function(e){return at.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:at.merge([],e.childNodes)}},function(e,t){at.fn[e]=function(n,i){var a=at.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(a=at.filter(i,a)),this.length>1&&(wt[e]||(a=at.unique(a)),vt.test(e)&&(a=a.reverse())),this.pushStack(a)}});var bt=/\S+/g,yt={};at.Callbacks=function(e){e="string"==typeof e?yt[e]||s(e):at.extend({},e);var t,n,i,a,o,r,l=[],c=!e.once&&[],u=function(s){for(n=e.memory&&s,i=!0,o=r||0,r=0,a=l.length,t=!0;l&&a>o;o++)if(l[o].apply(s[0],s[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,l&&(c?c.length&&u(c.shift()):n?l=[]:d.disable())},d={add:function(){if(l){var i=l.length;!function s(t){at.each(t,function(t,n){var i=at.type(n);"function"===i?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==i&&s(n)})}(arguments),t?a=l.length:n&&(r=i,u(n))}return this},remove:function(){return l&&at.each(arguments,function(e,n){for(var i;(i=at.inArray(n,l,i))>-1;)l.splice(i,1),t&&(a>=i&&a--,o>=i&&o--)}),this},has:function(e){return e?at.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=c=n=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,n||d.disable(),this},locked:function(){return!c},fireWith:function(e,n){return!l||i&&!c||(n=n||[],n=[e,n.slice?n.slice():n],t?c.push(n):u(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},at.extend({Deferred:function(e){var t=[["resolve","done",at.Callbacks("once memory"),"resolved"],["reject","fail",at.Callbacks("once memory"),"rejected"],["notify","progress",at.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return at.Deferred(function(n){at.each(t,function(t,s){var o=at.isFunction(e[t])&&e[t];a[s[1]](function(){var e=o&&o.apply(this,arguments);e&&at.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?at.extend(e,i):i}},a={};return i.pipe=i.then,at.each(t,function(e,s){var o=s[2],r=s[3];i[s[1]]=o.add,r&&o.add(function(){n=r},t[1^e][2].disable,t[2][2].lock),a[s[0]]=function(){return a[s[0]+"With"](this===a?i:this,arguments),this},a[s[0]+"With"]=o.fireWith}),i.promise(a),e&&e.call(a,a),a},when:function(e){var t,n,i,a=0,s=J.call(arguments),o=s.length,r=1!==o||e&&at.isFunction(e.promise)?o:0,l=1===r?e:at.Deferred(),c=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?J.call(arguments):a,i===t?l.notifyWith(n,i):--r||l.resolveWith(n,i)}};if(o>1)for(t=Array(o),n=Array(o),i=Array(o);o>a;a++)s[a]&&at.isFunction(s[a].promise)?s[a].promise().done(c(a,i,s)).fail(l.reject).progress(c(a,n,t)):--r;return r||l.resolveWith(i,s),l.promise()}});var xt;at.fn.ready=function(e){return at.ready.promise().done(e),this},at.extend({isReady:!1,readyWait:1,holdReady:function(e){e?at.readyWait++:at.ready(!0)},ready:function(e){if(e===!0?!--at.readyWait:!at.isReady){if(!pt.body)return setTimeout(at.ready);at.isReady=!0,e!==!0&&--at.readyWait>0||(xt.resolveWith(pt,[at]),at.fn.triggerHandler&&(at(pt).triggerHandler("ready"),at(pt).off("ready")))}}}),at.ready.promise=function(t){if(!xt)if(xt=at.Deferred(),"complete"===pt.readyState)setTimeout(at.ready);else if(pt.addEventListener)pt.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1);else{pt.attachEvent("onreadystatechange",r),e.attachEvent("onload",r);var n=!1;try{n=null==e.frameElement&&pt.documentElement}catch(i){}n&&n.doScroll&&!function a(){if(!at.isReady){try{n.doScroll("left")}catch(e){return setTimeout(a,50)}o(),at.ready()}}()}return xt.promise(t)};var kt,Ct="undefined";for(kt in at(nt))break;nt.ownLast="0"!==kt,nt.inlineBlockNeedsLayout=!1,at(function(){var e,t,n,i;n=pt.getElementsByTagName("body")[0],n&&n.style&&(t=pt.createElement("div"),i=pt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==Ct&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=pt.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(t){nt.deleteExpando=!1}}e=null}(),at.acceptData=function(e){var t=at.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,St=/([A-Z])/g;at.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?at.cache[e[at.expando]]:e[at.expando],!!e&&!c(e)},data:function(e,t,n){return u(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return u(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),at.fn.extend({data:function(e,t){var n,i,a,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(a=at.data(s),1===s.nodeType&&!at._data(s,"parsedAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=at.camelCase(i.slice(5)),l(s,i,a[i])));at._data(s,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){at.data(this,e)}):arguments.length>1?this.each(function(){at.data(this,e,t)}):s?l(s,e,at.data(s,e)):void 0},removeData:function(e){return this.each(function(){at.removeData(this,e)})}}),at.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=at._data(e,t),n&&(!i||at.isArray(n)?i=at._data(e,t,at.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=at.queue(e,t),i=n.length,a=n.shift(),s=at._queueHooks(e,t),o=function(){at.dequeue(e,t)};"inprogress"===a&&(a=n.shift(),i--),a&&("fx"===t&&n.unshift("inprogress"),delete s.stop,a.call(e,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return at._data(e,n)||at._data(e,n,{empty:at.Callbacks("once memory").add(function(){at._removeData(e,t+"queue"),at._removeData(e,n)})})}}),at.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),n>arguments.length?at.queue(this[0],e):void 0===t?this:this.each(function(){var n=at.queue(this,e,t);at._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&at.dequeue(this,e)})},dequeue:function(e){return this.each(function(){at.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,a=at.Deferred(),s=this,o=this.length,r=function(){--i||a.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=at._data(s[o],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(r));return r(),a.promise(t)}});var _t=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Et=["Top","Right","Bottom","Left"],Ft=function(e,t){return e=t||e,"none"===at.css(e,"display")||!at.contains(e.ownerDocument,e)},Pt=at.access=function(e,t,n,i,a,s,o){var r=0,l=e.length,c=null==n;if("object"===at.type(n)){a=!0;for(r in n)at.access(e,t,r,n[r],!0,s,o)}else if(void 0!==i&&(a=!0,at.isFunction(i)||(o=!0),c&&(o?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(at(e),n)})),t))for(;l>r;r++)t(e[r],n,o?i:i.call(e[r],r,t(e[r],n)));return a?e:c?t.call(e):l?t(e[0],n):s},Mt=/^(?:checkbox|radio)$/i;!function(){var e=pt.createElement("input"),t=pt.createElement("div"),n=pt.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===t.firstChild.nodeType,nt.tbody=!t.getElementsByTagName("tbody").length,nt.htmlSerialize=!!t.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==pt.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),nt.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){nt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(i){nt.deleteExpando=!1}}}(),function(){var t,n,i=pt.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(nt[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),nt[t+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Dt=/^(?:input|select|textarea)$/i,Vt=/^key/,At=/^(?:mouse|pointer|contextmenu)|click/,Rt=/^(?:focusinfocus|focusoutblur)$/,Nt=/^([^.]*)(?:\.(.+)|)$/;at.event={global:{},add:function(e,t,n,i,a){var s,o,r,l,c,u,d,h,m,p,f,g=at._data(e);if(g){for(n.handler&&(l=n,n=l.handler,a=l.selector),n.guid||(n.guid=at.guid++),(o=g.events)||(o=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof at===Ct||e&&at.event.triggered===e.type?void 0:at.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(bt)||[""],r=t.length;r--;)s=Nt.exec(t[r])||[],m=f=s[1],p=(s[2]||"").split(".").sort(),m&&(c=at.event.special[m]||{},m=(a?c.delegateType:c.bindType)||m,c=at.event.special[m]||{},d=at.extend({type:m,origType:f,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&at.expr.match.needsContext.test(a),namespace:p.join(".")},l),(h=o[m])||(h=o[m]=[],h.delegateCount=0,c.setup&&c.setup.call(e,i,p,u)!==!1||(e.addEventListener?e.addEventListener(m,u,!1):e.attachEvent&&e.attachEvent("on"+m,u))),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),at.event.global[m]=!0);e=null}},remove:function(e,t,n,i,a){var s,o,r,l,c,u,d,h,m,p,f,g=at.hasData(e)&&at._data(e);if(g&&(u=g.events)){for(t=(t||"").match(bt)||[""],c=t.length;c--;)if(r=Nt.exec(t[c])||[],m=f=r[1],p=(r[2]||"").split(".").sort(),m){for(d=at.event.special[m]||{},m=(i?d.delegateType:d.bindType)||m,h=u[m]||[],r=r[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=h.length;s--;)o=h[s],!a&&f!==o.origType||n&&n.guid!==o.guid||r&&!r.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,d.remove&&d.remove.call(e,o));l&&!h.length&&(d.teardown&&d.teardown.call(e,p,g.handle)!==!1||at.removeEvent(e,m,g.handle),delete u[m])}else for(m in u)at.event.remove(e,m+t[c],n,i,!0);at.isEmptyObject(u)&&(delete g.handle,at._removeData(e,"events"))}},trigger:function(t,n,i,a){var s,o,r,l,c,u,d,h=[i||pt],m=tt.call(t,"type")?t.type:t,p=tt.call(t,"namespace")?t.namespace.split("."):[];if(r=u=i=i||pt,3!==i.nodeType&&8!==i.nodeType&&!Rt.test(m+at.event.triggered)&&(m.indexOf(".")>=0&&(p=m.split("."),m=p.shift(),p.sort()),o=m.indexOf(":")<0&&"on"+m,t=t[at.expando]?t:new at.Event(m,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:at.makeArray(n,[t]),c=at.event.special[m]||{},a||!c.trigger||c.trigger.apply(i,n)!==!1)){if(!a&&!c.noBubble&&!at.isWindow(i)){for(l=c.delegateType||m,Rt.test(l+m)||(r=r.parentNode);r;r=r.parentNode)h.push(r),u=r;u===(i.ownerDocument||pt)&&h.push(u.defaultView||u.parentWindow||e)}for(d=0;(r=h[d++])&&!t.isPropagationStopped();)t.type=d>1?l:c.bindType||m,s=(at._data(r,"events")||{})[t.type]&&at._data(r,"handle"),s&&s.apply(r,n),s=o&&r[o],s&&s.apply&&at.acceptData(r)&&(t.result=s.apply(r,n),t.result===!1&&t.preventDefault());if(t.type=m,!a&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(h.pop(),n)===!1)&&at.acceptData(i)&&o&&i[m]&&!at.isWindow(i)){u=i[o],u&&(i[o]=null),at.event.triggered=m;try{i[m]()}catch(f){}at.event.triggered=void 0,u&&(i[o]=u)}return t.result}},dispatch:function(e){e=at.event.fix(e);var t,n,i,a,s,o=[],r=J.call(arguments),l=(at._data(this,"events")||{})[e.type]||[],c=at.event.special[e.type]||{};if(r[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(o=at.event.handlers.call(this,e,l),t=0;(a=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,s=0;(i=a.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((at.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,r),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result
}},handlers:function(e,t){var n,i,a,s,o=[],r=t.delegateCount,l=e.target;if(r&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(a=[],s=0;r>s;s++)i=t[s],n=i.selector+" ",void 0===a[n]&&(a[n]=i.needsContext?at(n,this).index(l)>=0:at.find(n,this,null,[l]).length),a[n]&&a.push(i);a.length&&o.push({elem:l,handlers:a})}return t.length>r&&o.push({elem:this,handlers:t.slice(r)}),o},fix:function(e){if(e[at.expando])return e;var t,n,i,a=e.type,s=e,o=this.fixHooks[a];for(o||(this.fixHooks[a]=o=At.test(a)?this.mouseHooks:Vt.test(a)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new at.Event(s),t=i.length;t--;)n=i[t],e[n]=s[n];return e.target||(e.target=s.srcElement||pt),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,a,s=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||pt,a=i.documentElement,n=i.body,e.pageX=t.clientX+(a&&a.scrollLeft||n&&n.scrollLeft||0)-(a&&a.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(a&&a.scrollTop||n&&n.scrollTop||0)-(a&&a.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return at.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return at.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var a=at.extend(new at.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?at.event.trigger(a,null,t):at.event.dispatch.call(t,a),a.isDefaultPrevented()&&n.preventDefault()}},at.removeEvent=pt.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===Ct&&(e[i]=null),e.detachEvent(i,n))},at.Event=function(e,t){return this instanceof at.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?h:m):this.type=e,t&&at.extend(this,t),this.timeStamp=e&&e.timeStamp||at.now(),void(this[at.expando]=!0)):new at.Event(e,t)},at.Event.prototype={isDefaultPrevented:m,isPropagationStopped:m,isImmediatePropagationStopped:m,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},at.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){at.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,a=e.relatedTarget,s=e.handleObj;return(!a||a!==i&&!at.contains(i,a))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),nt.submitBubbles||(at.event.special.submit={setup:function(){return at.nodeName(this,"form")?!1:void at.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=at.nodeName(t,"input")||at.nodeName(t,"button")?t.form:void 0;n&&!at._data(n,"submitBubbles")&&(at.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),at._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&at.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return at.nodeName(this,"form")?!1:void at.event.remove(this,"._submit")}}),nt.changeBubbles||(at.event.special.change={setup:function(){return Dt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(at.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),at.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),at.event.simulate("change",this,e,!0)})),!1):void at.event.add(this,"beforeactivate._change",function(e){var t=e.target;Dt.test(t.nodeName)&&!at._data(t,"changeBubbles")&&(at.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||at.event.simulate("change",this.parentNode,e,!0)}),at._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return at.event.remove(this,"._change"),!Dt.test(this.nodeName)}}),nt.focusinBubbles||at.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){at.event.simulate(t,e.target,at.event.fix(e),!0)};at.event.special[t]={setup:function(){var i=this.ownerDocument||this,a=at._data(i,t);a||i.addEventListener(e,n,!0),at._data(i,t,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this,a=at._data(i,t)-1;a?at._data(i,t,a):(i.removeEventListener(e,n,!0),at._removeData(i,t))}}}),at.fn.extend({on:function(e,t,n,i,a){var s,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],a);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=m;else if(!i)return this;return 1===a&&(o=i,i=function(e){return at().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=at.guid++)),this.each(function(){at.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,a;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,at(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=m),this.each(function(){at.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){at.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?at.event.trigger(e,t,n,!0):void 0}});var Ut="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ot=/ jQuery\d+="(?:null|\d+)"/g,It=RegExp("<(?:"+Ut+")[\\s/>]","i"),Ht=/^\s+/,zt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Lt=/<([\w:]+)/,jt=/<tbody/i,$t=/<|&#?\w+;/,qt=/<(?:script|style|link)/i,Bt=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^$|\/(?:java|ecma)script/i,Yt=/^true\/(.*)/,Gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Jt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Xt=f(pt),Kt=Xt.appendChild(pt.createElement("div"));Jt.optgroup=Jt.option,Jt.tbody=Jt.tfoot=Jt.colgroup=Jt.caption=Jt.thead,Jt.th=Jt.td,at.extend({clone:function(e,t,n){var i,a,s,o,r,l=at.contains(e.ownerDocument,e);if(nt.html5Clone||at.isXMLDoc(e)||!It.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Kt.innerHTML=e.outerHTML,Kt.removeChild(s=Kt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||at.isXMLDoc(e)))for(i=g(s),r=g(e),o=0;null!=(a=r[o]);++o)i[o]&&C(a,i[o]);if(t)if(n)for(r=r||g(e),i=i||g(s),o=0;null!=(a=r[o]);o++)k(a,i[o]);else k(e,s);return i=g(s,"script"),i.length>0&&x(i,!l&&g(e,"script")),i=r=a=null,s},buildFragment:function(e,t,n,i){for(var a,s,o,r,l,c,u,d=e.length,h=f(t),m=[],p=0;d>p;p++)if(s=e[p],s||0===s)if("object"===at.type(s))at.merge(m,s.nodeType?[s]:s);else if($t.test(s)){for(r=r||h.appendChild(t.createElement("div")),l=(Lt.exec(s)||["",""])[1].toLowerCase(),u=Jt[l]||Jt._default,r.innerHTML=u[1]+s.replace(zt,"<$1></$2>")+u[2],a=u[0];a--;)r=r.lastChild;if(!nt.leadingWhitespace&&Ht.test(s)&&m.push(t.createTextNode(Ht.exec(s)[0])),!nt.tbody)for(s="table"!==l||jt.test(s)?"<table>"!==u[1]||jt.test(s)?0:r:r.firstChild,a=s&&s.childNodes.length;a--;)at.nodeName(c=s.childNodes[a],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(at.merge(m,r.childNodes),r.textContent="";r.firstChild;)r.removeChild(r.firstChild);r=h.lastChild}else m.push(t.createTextNode(s));for(r&&h.removeChild(r),nt.appendChecked||at.grep(g(m,"input"),v),p=0;s=m[p++];)if((!i||-1===at.inArray(s,i))&&(o=at.contains(s.ownerDocument,s),r=g(h.appendChild(s),"script"),o&&x(r),n))for(a=0;s=r[a++];)Wt.test(s.type||"")&&n.push(s);return r=null,h},cleanData:function(e,t){for(var n,i,a,s,o=0,r=at.expando,l=at.cache,c=nt.deleteExpando,u=at.event.special;null!=(n=e[o]);o++)if((t||at.acceptData(n))&&(a=n[r],s=a&&l[a])){if(s.events)for(i in s.events)u[i]?at.event.remove(n,i):at.removeEvent(n,i,s.handle);l[a]&&(delete l[a],c?delete n[r]:typeof n.removeAttribute!==Ct?n.removeAttribute(r):n[r]=null,G.push(a))}}}),at.fn.extend({text:function(e){return Pt(this,function(e){return void 0===e?at.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pt).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=w(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=w(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?at.filter(e,this):this,a=0;null!=(n=i[a]);a++)t||1!==n.nodeType||at.cleanData(g(n)),n.parentNode&&(t&&at.contains(n.ownerDocument,n)&&x(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&at.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&at.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return at.clone(this,e,t)})},html:function(e){return Pt(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Ot,""):void 0;if(!("string"!=typeof e||qt.test(e)||!nt.htmlSerialize&&It.test(e)||!nt.leadingWhitespace&&Ht.test(e)||Jt[(Lt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(zt,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(at.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,at.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=X.apply([],e);var n,i,a,s,o,r,l=0,c=this.length,u=this,d=c-1,h=e[0],m=at.isFunction(h);if(m||c>1&&"string"==typeof h&&!nt.checkClone&&Bt.test(h))return this.each(function(n){var i=u.eq(n);m&&(e[0]=h.call(this,n,i.html())),i.domManip(e,t)});if(c&&(r=at.buildFragment(e,this[0].ownerDocument,!1,this),n=r.firstChild,1===r.childNodes.length&&(r=n),n)){for(s=at.map(g(r,"script"),b),a=s.length;c>l;l++)i=r,l!==d&&(i=at.clone(i,!0,!0),a&&at.merge(s,g(i,"script"))),t.call(this[l],i,l);if(a)for(o=s[s.length-1].ownerDocument,at.map(s,y),l=0;a>l;l++)i=s[l],Wt.test(i.type||"")&&!at._data(i,"globalEval")&&at.contains(o,i)&&(i.src?at._evalUrl&&at._evalUrl(i.src):at.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Gt,"")));r=n=null}return this}}),at.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){at.fn[e]=function(e){for(var n,i=0,a=[],s=at(e),o=s.length-1;o>=i;i++)n=i===o?this:this.clone(!0),at(s[i])[t](n),K.apply(a,n.get());return this.pushStack(a)}});var Qt,Zt={};!function(){var e;nt.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=pt.getElementsByTagName("body")[0],n&&n.style?(t=pt.createElement("div"),i=pt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==Ct&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(pt.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var en,tn,nn=/^margin/,an=RegExp("^("+_t+")(?!px)[a-z%]+$","i"),sn=/^(top|right|bottom|left)$/;e.getComputedStyle?(en=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},tn=function(e,t,n){var i,a,s,o,r=e.style;return n=n||en(e),o=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==o||at.contains(e.ownerDocument,e)||(o=at.style(e,t)),an.test(o)&&nn.test(t)&&(i=r.width,a=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=n.width,r.width=i,r.minWidth=a,r.maxWidth=s)),void 0===o?o:o+""}):pt.documentElement.currentStyle&&(en=function(e){return e.currentStyle},tn=function(e,t,n){var i,a,s,o,r=e.style;return n=n||en(e),o=n?n[t]:void 0,null==o&&r&&r[t]&&(o=r[t]),an.test(o)&&!sn.test(t)&&(i=r.left,a=e.runtimeStyle,s=a&&a.left,s&&(a.left=e.currentStyle.left),r.left="fontSize"===t?"1em":o,o=r.pixelLeft+"px",r.left=i,s&&(a.left=s)),void 0===o?o:o+""||"auto"}),function(){function t(){var t,n,i,a;n=pt.getElementsByTagName("body")[0],n&&n.style&&(t=pt.createElement("div"),i=pt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s=o=!1,l=!0,e.getComputedStyle&&(s="1%"!==(e.getComputedStyle(t,null)||{}).top,o="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,a=t.appendChild(pt.createElement("div")),a.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight),t.removeChild(a)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=t.getElementsByTagName("td"),a[0].style.cssText="margin:0;border:0;padding:0;display:none",r=0===a[0].offsetHeight,r&&(a[0].style.display="",a[1].style.display="none",r=0===a[0].offsetHeight),n.removeChild(i))}var n,i,a,s,o,r,l;n=pt.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=n.getElementsByTagName("a")[0],i=a&&a.style,i&&(i.cssText="float:left;opacity:.5",nt.opacity="0.5"===i.opacity,nt.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===n.style.backgroundClip,nt.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,at.extend(nt,{reliableHiddenOffsets:function(){return null==r&&t(),r},boxSizingReliable:function(){return null==o&&t(),o},pixelPosition:function(){return null==s&&t(),s},reliableMarginRight:function(){return null==l&&t(),l}}))}(),at.swap=function(e,t,n,i){var a,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];a=n.apply(e,i||[]);for(s in t)e.style[s]=o[s];return a};var on=/alpha\([^)]*\)/i,rn=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,cn=RegExp("^("+_t+")(.*)$","i"),un=RegExp("^([+-])=("+_t+")","i"),dn={position:"absolute",visibility:"hidden",display:"block"},hn={letterSpacing:"0",fontWeight:"400"},mn=["Webkit","O","Moz","ms"];at.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,s,o,r=at.camelCase(t),l=e.style;if(t=at.cssProps[r]||(at.cssProps[r]=E(l,r)),o=at.cssHooks[t]||at.cssHooks[r],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,i))?a:l[t];if(s=typeof n,"string"===s&&(a=un.exec(n))&&(n=(a[1]+1)*a[2]+parseFloat(at.css(e,t)),s="number"),null!=n&&n===n&&("number"!==s||at.cssNumber[r]||(n+="px"),nt.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(o&&"set"in o&&void 0===(n=o.set(e,n,i)))))try{l[t]=n}catch(c){}}},css:function(e,t,n,i){var a,s,o,r=at.camelCase(t);return t=at.cssProps[r]||(at.cssProps[r]=E(e.style,r)),o=at.cssHooks[t]||at.cssHooks[r],o&&"get"in o&&(s=o.get(e,!0,n)),void 0===s&&(s=tn(e,t,i)),"normal"===s&&t in hn&&(s=hn[t]),""===n||n?(a=parseFloat(s),n===!0||at.isNumeric(a)?a||0:s):s}}),at.each(["height","width"],function(e,t){at.cssHooks[t]={get:function(e,n,i){return n?ln.test(at.css(e,"display"))&&0===e.offsetWidth?at.swap(e,dn,function(){return D(e,t,i)}):D(e,t,i):void 0},set:function(e,n,i){var a=i&&en(e);return P(e,n,i?M(e,t,i,nt.boxSizing&&"border-box"===at.css(e,"boxSizing",!1,a),a):0)}}}),nt.opacity||(at.cssHooks.opacity={get:function(e,t){return rn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,a=at.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===at.trim(s.replace(on,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=on.test(s)?s.replace(on,a):s+" "+a)}}),at.cssHooks.marginRight=_(nt.reliableMarginRight,function(e,t){return t?at.swap(e,{display:"inline-block"},tn,[e,"marginRight"]):void 0}),at.each({margin:"",padding:"",border:"Width"},function(e,t){at.cssHooks[e+t]={expand:function(n){for(var i=0,a={},s="string"==typeof n?n.split(" "):[n];4>i;i++)a[e+Et[i]+t]=s[i]||s[i-2]||s[0];return a}},nn.test(e)||(at.cssHooks[e+t].set=P)}),at.fn.extend({css:function(e,t){return Pt(this,function(e,t,n){var i,a,s={},o=0;if(at.isArray(t)){for(i=en(e),a=t.length;a>o;o++)s[t[o]]=at.css(e,t[o],!1,i);return s}return void 0!==n?at.style(e,t,n):at.css(e,t)},e,t,arguments.length>1)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ft(this)?at(this).show():at(this).hide()})}}),at.Tween=V,V.prototype={constructor:V,init:function(e,t,n,i,a,s){this.elem=e,this.prop=n,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(at.cssNumber[n]?"":"px")},cur:function(){var e=V.propHooks[this.prop];return e&&e.get?e.get(this):V.propHooks._default.get(this)},run:function(e){var t,n=V.propHooks[this.prop];return this.pos=t=this.options.duration?at.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=at.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){at.fx.step[e.prop]?at.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[at.cssProps[e.prop]]||at.cssHooks[e.prop])?at.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},at.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},at.fx=V.prototype.init,at.fx.step={};var pn,fn,gn=/^(?:toggle|show|hide)$/,vn=RegExp("^(?:([+-])=|)("+_t+")([a-z%]*)$","i"),wn=/queueHooks$/,bn=[U],yn={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),a=vn.exec(t),s=a&&a[3]||(at.cssNumber[e]?"":"px"),o=(at.cssNumber[e]||"px"!==s&&+i)&&vn.exec(at.css(n.elem,e)),r=1,l=20;if(o&&o[3]!==s){s=s||o[3],a=a||[],o=+i||1;do r=r||".5",o/=r,at.style(n.elem,e,o+s);while(r!==(r=n.cur()/i)&&1!==r&&--l)}return a&&(o=n.start=+o||+i||0,n.unit=s,n.end=a[1]?o+(a[1]+1)*a[2]:+a[2]),n}]};at.Animation=at.extend(I,{tweener:function(e,t){at.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,a=e.length;a>i;i++)n=e[i],yn[n]=yn[n]||[],yn[n].unshift(t)},prefilter:function(e,t){t?bn.unshift(e):bn.push(e)}}),at.speed=function(e,t,n){var i=e&&"object"==typeof e?at.extend({},e):{complete:n||!n&&t||at.isFunction(e)&&e,duration:e,easing:n&&t||t&&!at.isFunction(t)&&t};return i.duration=at.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in at.fx.speeds?at.fx.speeds[i.duration]:at.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){at.isFunction(i.old)&&i.old.call(this),i.queue&&at.dequeue(this,i.queue)},i},at.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ft).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var a=at.isEmptyObject(e),s=at.speed(t,n,i),o=function(){var t=I(this,at.extend({},e),s);(a||at._data(this,"finish"))&&t.stop(!0)};return o.finish=o,a||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",s=at.timers,o=at._data(this);if(a)o[a]&&o[a].stop&&i(o[a]);else for(a in o)o[a]&&o[a].stop&&wn.test(a)&&i(o[a]);for(a=s.length;a--;)s[a].elem!==this||null!=e&&s[a].queue!==e||(s[a].anim.stop(n),t=!1,s.splice(a,1));(t||!n)&&at.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=at._data(this),i=n[e+"queue"],a=n[e+"queueHooks"],s=at.timers,o=i?i.length:0;for(n.finish=!0,at.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),at.each(["toggle","show","hide"],function(e,t){var n=at.fn[t];at.fn[t]=function(e,i,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(R(t,!0),e,i,a)}}),at.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){at.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),at.timers=[],at.fx.tick=function(){var e,t=at.timers,n=0;for(pn=at.now();t.length>n;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||at.fx.stop(),pn=void 0},at.fx.timer=function(e){at.timers.push(e),e()?at.fx.start():at.timers.pop()},at.fx.interval=13,at.fx.start=function(){fn||(fn=setInterval(at.fx.tick,at.fx.interval))},at.fx.stop=function(){clearInterval(fn),fn=null},at.fx.speeds={slow:600,fast:200,_default:400},at.fn.delay=function(e,t){return e=at.fx?at.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,a;t=pt.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],n=pt.createElement("select"),a=n.appendChild(pt.createElement("option")),e=t.getElementsByTagName("input")[0],i.style.cssText="top:1px",nt.getSetAttribute="t"!==t.className,nt.style=/top/.test(i.getAttribute("style")),nt.hrefNormalized="/a"===i.getAttribute("href"),nt.checkOn=!!e.value,nt.optSelected=a.selected,nt.enctype=!!pt.createElement("form").enctype,n.disabled=!0,nt.optDisabled=!a.disabled,e=pt.createElement("input"),e.setAttribute("value",""),nt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),nt.radioValue="t"===e.value}();var xn=/\r/g;at.fn.extend({val:function(e){var t,n,i,a=this[0];{if(arguments.length)return i=at.isFunction(e),this.each(function(n){var a;1===this.nodeType&&(a=i?e.call(this,n,at(this).val()):e,null==a?a="":"number"==typeof a?a+="":at.isArray(a)&&(a=at.map(a,function(e){return null==e?"":e+""})),t=at.valHooks[this.type]||at.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))});if(a)return t=at.valHooks[a.type]||at.valHooks[a.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:(n=a.value,"string"==typeof n?n.replace(xn,""):null==n?"":n)}}}),at.extend({valHooks:{option:{get:function(e){var t=at.find.attr(e,"value");return null!=t?t:at.trim(at.text(e))}},select:{get:function(e){for(var t,n,i=e.options,a=e.selectedIndex,s="select-one"===e.type||0>a,o=s?null:[],r=s?a+1:i.length,l=0>a?r:s?a:0;r>l;l++)if(n=i[l],!(!n.selected&&l!==a||(nt.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&at.nodeName(n.parentNode,"optgroup"))){if(t=at(n).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var n,i,a=e.options,s=at.makeArray(t),o=a.length;o--;)if(i=a[o],at.inArray(at.valHooks.option.get(i),s)>=0)try{i.selected=n=!0}catch(r){}else i.selected=!1;return n||(e.selectedIndex=-1),a}}}}),at.each(["radio","checkbox"],function(){at.valHooks[this]={set:function(e,t){return at.isArray(t)?e.checked=at.inArray(at(e).val(),t)>=0:void 0}},nt.checkOn||(at.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var kn,Cn,Tn=at.expr.attrHandle,Sn=/^(?:checked|selected)$/i,_n=nt.getSetAttribute,En=nt.input;at.fn.extend({attr:function(e,t){return Pt(this,at.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){at.removeAttr(this,e)})}}),at.extend({attr:function(e,t,n){var i,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===Ct?at.prop(e,t,n):(1===s&&at.isXMLDoc(e)||(t=t.toLowerCase(),i=at.attrHooks[t]||(at.expr.match.bool.test(t)?Cn:kn)),void 0===n?i&&"get"in i&&null!==(a=i.get(e,t))?a:(a=at.find.attr(e,t),null==a?void 0:a):null!==n?i&&"set"in i&&void 0!==(a=i.set(e,n,t))?a:(e.setAttribute(t,n+""),n):void at.removeAttr(e,t))},removeAttr:function(e,t){var n,i,a=0,s=t&&t.match(bt);if(s&&1===e.nodeType)for(;n=s[a++];)i=at.propFix[n]||n,at.expr.match.bool.test(n)?En&&_n||!Sn.test(n)?e[i]=!1:e[at.camelCase("default-"+n)]=e[i]=!1:at.attr(e,n,""),e.removeAttribute(_n?n:i)},attrHooks:{type:{set:function(e,t){if(!nt.radioValue&&"radio"===t&&at.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Cn={set:function(e,t,n){return t===!1?at.removeAttr(e,n):En&&_n||!Sn.test(n)?e.setAttribute(!_n&&at.propFix[n]||n,n):e[at.camelCase("default-"+n)]=e[n]=!0,n}},at.each(at.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Tn[t]||at.find.attr;Tn[t]=En&&_n||!Sn.test(t)?function(e,t,i){var a,s;return i||(s=Tn[t],Tn[t]=a,a=null!=n(e,t,i)?t.toLowerCase():null,Tn[t]=s),a}:function(e,t,n){return n?void 0:e[at.camelCase("default-"+t)]?t.toLowerCase():null}}),En&&_n||(at.attrHooks.value={set:function(e,t,n){return at.nodeName(e,"input")?void(e.defaultValue=t):kn&&kn.set(e,t,n)}}),_n||(kn={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Tn.id=Tn.name=Tn.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},at.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:kn.set},at.attrHooks.contenteditable={set:function(e,t,n){kn.set(e,""===t?!1:t,n)}},at.each(["width","height"],function(e,t){at.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),nt.style||(at.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Fn=/^(?:input|select|textarea|button|object)$/i,Pn=/^(?:a|area)$/i;at.fn.extend({prop:function(e,t){return Pt(this,at.prop,e,t,arguments.length>1)},removeProp:function(e){return e=at.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),at.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,a,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!at.isXMLDoc(e),s&&(t=at.propFix[t]||t,a=at.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(i=a.set(e,n,t))?i:e[t]=n:a&&"get"in a&&null!==(i=a.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=at.find.attr(e,"tabindex");return t?parseInt(t,10):Fn.test(e.nodeName)||Pn.test(e.nodeName)&&e.href?0:-1}}}}),nt.hrefNormalized||at.each(["href","src"],function(e,t){at.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),nt.optSelected||(at.propHooks.selected={get:function(e){return null}}),at.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){at.propFix[this.toLowerCase()]=this}),nt.enctype||(at.propFix.enctype="encoding");var Mn=/[\t\r\n\f]/g;at.fn.extend({addClass:function(e){var t,n,i,a,s,o,r=0,l=this.length,c="string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(bt)||[];l>r;r++)if(n=this[r],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Mn," "):" ")){for(s=0;a=t[s++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");o=at.trim(i),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,i,a,s,o,r=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(bt)||[];l>r;r++)if(n=this[r],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Mn," "):"")){for(s=0;a=t[s++];)for(;i.indexOf(" "+a+" ")>=0;)i=i.replace(" "+a+" "," ");o=e?at.trim(i):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(at.isFunction(e)?function(n){at(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,a=at(this),s=e.match(bt)||[];t=s[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else(n===Ct||"boolean"===n)&&(this.className&&at._data(this,"__className__",this.className),this.className=this.className||e===!1?"":at._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Mn," ").indexOf(t)>=0)return!0;return!1}}),at.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){at.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)
}}),at.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Dn=at.now(),Vn=/\?/,An=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;at.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,a=at.trim(t+"");return a&&!at.trim(a.replace(An,function(e,t,a,s){return n&&t&&(i=0),0===i?e:(n=a||t,i+=!s-!a,"")}))?Function("return "+a)():at.error("Invalid JSON: "+t)},at.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(a){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||at.error("Invalid XML: "+t),n};var Rn,Nn,Un=/#.*$/,On=/([?&])_=[^&]*/,In=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Hn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,zn=/^(?:GET|HEAD)$/,Ln=/^\/\//,jn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,$n={},qn={},Bn="*/".concat("*");try{Nn=location.href}catch(Wn){Nn=pt.createElement("a"),Nn.href="",Nn=Nn.href}Rn=jn.exec(Nn.toLowerCase())||[],at.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Nn,type:"GET",isLocal:Hn.test(Rn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":at.parseJSON,"text xml":at.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?L(L(e,at.ajaxSettings),t):L(at.ajaxSettings,e)},ajaxPrefilter:H($n),ajaxTransport:H(qn),ajax:function(e,t){function n(e,t,n,i){var a,u,v,w,y,k=t;2!==b&&(b=2,r&&clearTimeout(r),c=void 0,o=i||"",x.readyState=e>0?4:0,a=e>=200&&300>e||304===e,n&&(w=j(d,x,n)),w=$(d,w,x,a),a?(d.ifModified&&(y=x.getResponseHeader("Last-Modified"),y&&(at.lastModified[s]=y),y=x.getResponseHeader("etag"),y&&(at.etag[s]=y)),204===e||"HEAD"===d.type?k="nocontent":304===e?k="notmodified":(k=w.state,u=w.data,v=w.error,a=!v)):(v=k,(e||!k)&&(k="error",0>e&&(e=0))),x.status=e,x.statusText=(t||k)+"",a?p.resolveWith(h,[u,k,x]):p.rejectWith(h,[x,k,v]),x.statusCode(g),g=void 0,l&&m.trigger(a?"ajaxSuccess":"ajaxError",[x,d,a?u:v]),f.fireWith(h,[x,k]),l&&(m.trigger("ajaxComplete",[x,d]),--at.active||at.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,a,s,o,r,l,c,u,d=at.ajaxSetup({},t),h=d.context||d,m=d.context&&(h.nodeType||h.jquery)?at(h):at.event,p=at.Deferred(),f=at.Callbacks("once memory"),g=d.statusCode||{},v={},w={},b=0,y="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!u)for(u={};t=In.exec(o);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=w[n]=w[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||y;return c&&c.abort(t),n(0,t),this}};if(p.promise(x).complete=f.add,x.success=x.done,x.error=x.fail,d.url=((e||d.url||Nn)+"").replace(Un,"").replace(Ln,Rn[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=at.trim(d.dataType||"*").toLowerCase().match(bt)||[""],null==d.crossDomain&&(i=jn.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===Rn[1]&&i[2]===Rn[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Rn[3]||("http:"===Rn[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=at.param(d.data,d.traditional)),z($n,d,t,x),2===b)return x;l=at.event&&d.global,l&&0===at.active++&&at.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!zn.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(Vn.test(s)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=On.test(s)?s.replace(On,"$1_="+Dn++):s+(Vn.test(s)?"&":"?")+"_="+Dn++)),d.ifModified&&(at.lastModified[s]&&x.setRequestHeader("If-Modified-Since",at.lastModified[s]),at.etag[s]&&x.setRequestHeader("If-None-Match",at.etag[s])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Bn+"; q=0.01":""):d.accepts["*"]);for(a in d.headers)x.setRequestHeader(a,d.headers[a]);if(d.beforeSend&&(d.beforeSend.call(h,x,d)===!1||2===b))return x.abort();y="abort";for(a in{success:1,error:1,complete:1})x[a](d[a]);if(c=z(qn,d,t,x)){x.readyState=1,l&&m.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(r=setTimeout(function(){x.abort("timeout")},d.timeout));try{b=1,c.send(v,n)}catch(k){if(!(2>b))throw k;n(-1,k)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return at.get(e,t,n,"json")},getScript:function(e,t){return at.get(e,void 0,t,"script")}}),at.each(["get","post"],function(e,t){at[t]=function(e,n,i,a){return at.isFunction(n)&&(a=a||i,i=n,n=void 0),at.ajax({url:e,type:t,dataType:a,data:n,success:i})}}),at._evalUrl=function(e){return at.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},at.fn.extend({wrapAll:function(e){if(at.isFunction(e))return this.each(function(t){at(this).wrapAll(e.call(this,t))});if(this[0]){var t=at(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(at.isFunction(e)?function(t){at(this).wrapInner(e.call(this,t))}:function(){var t=at(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=at.isFunction(e);return this.each(function(n){at(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){at.nodeName(this,"body")||at(this).replaceWith(this.childNodes)}).end()}}),at.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!nt.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||at.css(e,"display"))},at.expr.filters.visible=function(e){return!at.expr.filters.hidden(e)};var Yn=/%20/g,Gn=/\[\]$/,Jn=/\r?\n/g,Xn=/^(?:submit|button|image|reset|file)$/i,Kn=/^(?:input|select|textarea|keygen)/i;at.param=function(e,t){var n,i=[],a=function(e,t){t=at.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=at.ajaxSettings&&at.ajaxSettings.traditional),at.isArray(e)||e.jquery&&!at.isPlainObject(e))at.each(e,function(){a(this.name,this.value)});else for(n in e)q(n,e[n],t,a);return i.join("&").replace(Yn,"+")},at.fn.extend({serialize:function(){return at.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=at.prop(this,"elements");return e?at.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!at(this).is(":disabled")&&Kn.test(this.nodeName)&&!Xn.test(e)&&(this.checked||!Mt.test(e))}).map(function(e,t){var n=at(this).val();return null==n?null:at.isArray(n)?at.map(n,function(e){return{name:t.name,value:e.replace(Jn,"\r\n")}}):{name:t.name,value:n.replace(Jn,"\r\n")}}).get()}}),at.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&B()||W()}:B;var Qn=0,Zn={},ei=at.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Zn)Zn[e](void 0,!0)}),nt.cors=!!ei&&"withCredentials"in ei,ei=nt.ajax=!!ei,ei&&at.ajaxTransport(function(e){if(!e.crossDomain||nt.cors){var t;return{send:function(n,i){var a,s=e.xhr(),o=++Qn;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(a in n)void 0!==n[a]&&s.setRequestHeader(a,n[a]+"");s.send(e.hasContent&&e.data||null),t=function(n,a){var r,l,c;if(t&&(a||4===s.readyState))if(delete Zn[o],t=void 0,s.onreadystatechange=at.noop,a)4!==s.readyState&&s.abort();else{c={},r=s.status,"string"==typeof s.responseText&&(c.text=s.responseText);try{l=s.statusText}catch(u){l=""}r||!e.isLocal||e.crossDomain?1223===r&&(r=204):r=c.text?200:404}c&&i(r,l,c,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=Zn[o]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),at.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return at.globalEval(e),e}}}),at.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),at.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=pt.head||at("head")[0]||pt.documentElement;return{send:function(i,a){t=pt.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||a(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var ti=[],ni=/(=)\?(?=&|$)|\?\?/;at.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ti.pop()||at.expando+"_"+Dn++;return this[e]=!0,e}}),at.ajaxPrefilter("json jsonp",function(t,n,i){var a,s,o,r=t.jsonp!==!1&&(ni.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");return r||"jsonp"===t.dataTypes[0]?(a=t.jsonpCallback=at.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(ni,"$1"+a):t.jsonp!==!1&&(t.url+=(Vn.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||at.error(a+" was not called"),o[0]},t.dataTypes[0]="json",s=e[a],e[a]=function(){o=arguments},i.always(function(){e[a]=s,t[a]&&(t.jsonpCallback=n.jsonpCallback,ti.push(a)),o&&at.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),at.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||pt;var i=dt.exec(e),a=!n&&[];return i?[t.createElement(i[1])]:(i=at.buildFragment([e],t,a),a&&a.length&&at(a).remove(),at.merge([],i.childNodes))};var ii=at.fn.load;at.fn.load=function(e,t,n){if("string"!=typeof e&&ii)return ii.apply(this,arguments);var i,a,s,o=this,r=e.indexOf(" ");return r>=0&&(i=at.trim(e.slice(r,e.length)),e=e.slice(0,r)),at.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&at.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){a=arguments,o.html(i?at("<div>").append(at.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){o.each(n,a||[e.responseText,t,e])}),this},at.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){at.fn[t]=function(e){return this.on(t,e)}}),at.expr.filters.animated=function(e){return at.grep(at.timers,function(t){return e===t.elem}).length};var ai=e.document.documentElement;at.offset={setOffset:function(e,t,n){var i,a,s,o,r,l,c,u=at.css(e,"position"),d=at(e),h={};"static"===u&&(e.style.position="relative"),r=d.offset(),s=at.css(e,"top"),l=at.css(e,"left"),c=("absolute"===u||"fixed"===u)&&at.inArray("auto",[s,l])>-1,c?(i=d.position(),o=i.top,a=i.left):(o=parseFloat(s)||0,a=parseFloat(l)||0),at.isFunction(t)&&(t=t.call(e,n,r)),null!=t.top&&(h.top=t.top-r.top+o),null!=t.left&&(h.left=t.left-r.left+a),"using"in t?t.using.call(e,h):d.css(h)}},at.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){at.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return t=s.documentElement,at.contains(t,a)?(typeof a.getBoundingClientRect!==Ct&&(i=a.getBoundingClientRect()),n=Y(s),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===at.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),at.nodeName(e[0],"html")||(n=e.offset()),n.top+=at.css(e[0],"borderTopWidth",!0),n.left+=at.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-at.css(i,"marginTop",!0),left:t.left-n.left-at.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ai;e&&!at.nodeName(e,"html")&&"static"===at.css(e,"position");)e=e.offsetParent;return e||ai})}}),at.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);at.fn[e]=function(i){return Pt(this,function(e,i,a){var s=Y(e);return void 0===a?s?t in s?s[t]:s.document.documentElement[i]:e[i]:void(s?s.scrollTo(n?at(s).scrollLeft():a,n?a:at(s).scrollTop()):e[i]=a)},e,i,arguments.length,null)}}),at.each(["top","left"],function(e,t){at.cssHooks[t]=_(nt.pixelPosition,function(e,n){return n?(n=tn(e,t),an.test(n)?at(e).position()[t]+"px":n):void 0})}),at.each({Height:"height",Width:"width"},function(e,t){at.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){at.fn[i]=function(i,a){var s=arguments.length&&(n||"boolean"!=typeof i),o=n||(i===!0||a===!0?"margin":"border");return Pt(this,function(t,n,i){var a;return at.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?at.css(t,n,o):at.style(t,n,i,o)},t,s?i:void 0,s,null)}})}),at.fn.size=function(){return this.length},at.fn.andSelf=at.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return at});var si=e.jQuery,oi=e.$;return at.noConflict=function(t){return e.$===at&&(e.$=oi),t&&e.jQuery===at&&(e.jQuery=si),at},typeof t===Ct&&(e.jQuery=e.$=at),at}),define("home/utils/layoutUtils",["underscore","jquery"],function(e,t){function n(){var e=t("<p>").css({width:"100%",height:"200px"})[0],n=t("<div>").css({position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}).append(e).appendTo(t("body")),i=e.offsetWidth;n.css({overflow:"scroll"});var a=e.offsetWidth;return i===a&&(a=n[0].clientWidth),n.remove(),i-a}function i(e){var n=t("<style>").attr("type","text/css")[0];n.styleSheet?n.styleSheet.cssText=e:n.innerHTML=e,t("head").append(n)}function a(e){var t=document.getElementById("container-page");return t&&t.scrollHeight>t.clientHeight&&!e.hasClass("fixed")}function s(){this.$body=t(document.body),this.scrollShownChanged=e.bind(function(){var e=this.$body;e.toggleClass("scroll-fix",!a(e))},this),this.isElementInViewport=function(e){var t=e[0].getBoundingClientRect();return t.top>=0&&t.left>=0&&(window.innerHeight||document.documentElement.clientHeight)>=t.bottom&&(window.innerWidth||document.documentElement.clientWidth)>=t.right},this.getScreenWidth=function(){return this.screenWidth=this.screenWidth||window.screen.width},this.shouldShowImages=function(){return this.getScreenWidth()>o}}var o=480;return t(function(){var e=n(),t=["@media only screen and (min-width: 480px) {","body.scroll-fix { margin-right: "+e+"px; }","body.scroll-fix .compensation { margin-right: "+e+"px; }","}"].join(" ");i(t)}),new s}),window.Modernizr=function(e,t,n){function i(e){w.cssText=e}function a(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function o(e,t){for(var i in e){var a=e[i];if(!s(a,"-")&&w[a]!==n)return"pfx"==t?a:!0}return!1}function r(e,t,i){for(var s in e){var o=t[e[s]];if(o!==n)return i===!1?e[s]:a(o,"function")?o.bind(i||t):o}return!1}function l(e,t,n){var i=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+x.join(i+" ")+i).split(" ");return a(t,"string")||a(t,"undefined")?o(s,t):(s=(e+" "+k.join(i+" ")+i).split(" "),r(s,t,n))}var c,u,d,h="2.8.3",m={},p=!0,f=t.documentElement,g="modernizr",v=t.createElement(g),w=v.style,b=" -webkit- -moz- -o- -ms- ".split(" "),y="Webkit Moz O ms",x=y.split(" "),k=y.toLowerCase().split(" "),C={},T=[],S=T.slice,_=function(e,n,i,a){var s,o,r,l,c=t.createElement("div"),u=t.body,d=u||t.createElement("body");if(parseInt(i,10))for(;i--;)r=t.createElement("div"),r.id=a?a[i]:g+(i+1),c.appendChild(r);return s='&#173;<style id="s'+g+'">'+e+"</style>",c.id=g,(u?c:d).innerHTML+=s,d.appendChild(c),u||(d.style.background="",d.style.overflow="hidden",l=f.style.overflow,f.style.overflow="hidden",f.appendChild(d)),o=n(c,e),u?c.parentNode.removeChild(c):(d.parentNode.removeChild(d),f.style.overflow=l),!!o},E={}.hasOwnProperty;d=a(E,"undefined")||a(E.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(e,t){return E.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=S.call(arguments,1),i=function(){if(this instanceof i){var a=function(){};a.prototype=t.prototype;var s=new a,o=t.apply(s,n.concat(S.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(S.call(arguments)))};return i}),C.flexbox=function(){return l("flexWrap")},C.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:_("@media ("+b.join("touch-enabled),(")+g+"){#modernizr{top:9px;position:absolute}}",function(e){n=9===e.offsetTop}),n},C.history=function(){return!(!e.history||!history.pushState)},C.localstorage=function(){try{return localStorage.setItem(g,g),localStorage.removeItem(g),!0}catch(e){return!1}};for(var F in C)d(C,F)&&(u=F.toLowerCase(),m[u]=C[F](),T.push((m[u]?"":"no-")+u));return m.addTest=function(e,t){if("object"==typeof e)for(var i in e)d(e,i)&&m.addTest(i,e[i]);else{if(e=e.toLowerCase(),m[e]!==n)return m;t="function"==typeof t?t():t,n!==p&&p&&(f.className+=" "+(t?"":"no-")+e),m[e]=t}return m},i(""),v=c=null,function(e,t){function i(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function a(){var e=b.elements;return"string"==typeof e?e.split(" "):e}function s(e){var t=w[e[g]];return t||(t={},v++,e[g]=v,w[v]=t),t}function o(e,n,i){if(n||(n=t),d)return n.createElement(e);i||(i=s(n));var a;return a=i.cache[e]?i.cache[e].cloneNode():f.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),!a.canHaveChildren||p.test(e)||a.tagUrn?a:i.frag.appendChild(a)}function r(e,n){if(e||(e=t),d)return e.createDocumentFragment();n=n||s(e);for(var i=n.frag.cloneNode(),o=0,r=a(),l=r.length;l>o;o++)i.createElement(r[o]);return i}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return b.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+a().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(b,t.frag)}function c(e){e||(e=t);var n=s(e);return!b.shivCSS||u||n.hasCSS||(n.hasCSS=!!i(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),d||l(e,n),e}var u,d,h="3.7.0",m=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",v=0,w={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",u="hidden"in e,d=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return n===e.cloneNode||n===e.createDocumentFragment||n===e.createElement}()}catch(i){u=!0,d=!0}}();var b={elements:m.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:h,shivCSS:m.shivCSS!==!1,supportsUnknownElements:d,shivMethods:m.shivMethods!==!1,type:"default",shivDocument:c,createElement:o,createDocumentFragment:r};e.html5=b,c(t)}(this,t),m._version=h,m._prefixes=b,m._domPrefixes=k,m._cssomPrefixes=x,m.testProp=function(e){return o([e])},m.testAllProps=l,m.testStyles=_,f.className=f.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+T.join(" "):""),m}(this,this.document),function(e,t,n){function i(e){return"[object Function]"==g.call(e)}function a(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function r(){var e=v.shift();w=1,e?e.t?p(function(){("c"==e.t?h.injectCss:h.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),r()):w=0}function l(e,n,i,a,s,l,c){function u(t){if(!m&&o(d.readyState)&&(b.r=m=1,!w&&r(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&p(function(){x.removeChild(d)},50);for(var i in _[n])_[n].hasOwnProperty(i)&&_[n][i].onload()}}var c=c||h.errorTimeout,d=t.createElement(e),m=0,g=0,b={t:i,s:n,e:s,a:l,x:c};1===_[n]&&(g=1,_[n]=[]),"object"==e?d.data=n:(d.src=n,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){u.call(this,g)},v.splice(a,0,b),"img"!=e&&(g||2===_[n]?(x.insertBefore(d,y?null:f),p(u,c)):_[n].push(d))}function c(e,t,n,i,s){return w=0,t=t||"j",a(e)?l("c"==t?C:k,e,t,this.i++,n,i,s):(v.splice(this.i++,0,e),1==v.length&&r()),this}function u(){var e=h;return e.loader={load:c,i:0},e}var d,h,m=t.documentElement,p=e.setTimeout,f=t.getElementsByTagName("script")[0],g={}.toString,v=[],w=0,b="MozAppearance"in m.style,y=b&&!!t.createRange().compareNode,x=y?m:f.parentNode,m=e.opera&&"[object Opera]"==g.call(e.opera),m=!!t.attachEvent&&!m,k=b?"object":m?"script":"img",C=m?"script":k,T=Array.isArray||function(e){return"[object Array]"==g.call(e)},S=[],_={},E={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};h=function(e){function t(e){var t,n,i,e=e.split("!"),a=S.length,s=e.pop(),o=e.length,s={url:s,origUrl:s,prefixes:e};for(n=0;o>n;n++)i=e[n].split("="),(t=E[i.shift()])&&(s=t(s,i));for(n=0;a>n;n++)s=S[n](s);return s}function o(e,a,s,o,r){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(a&&(a=i(a)?a:a[e]||a[o]||a[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,a,s,o,r):(_[l.url]?l.noexec=!0:_[l.url]=1,s.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(i(a)||i(c))&&s.load(function(){u(),a&&a(l.origUrl,r,o),c&&c(l.origUrl,r,o),_[l.url]=2})))}function r(e,t){function n(e,n){if(e){if(a(e))n||(d=function(){var e=[].slice.call(arguments);h.apply(this,e),m()}),o(e,d,t,0,c);else if(Object(e)===e)for(l in r=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--r&&(i(d)?d=function(){var e=[].slice.call(arguments);h.apply(this,e),m()}:d[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),m()}}(h[l])),o(e[l],d,t,l,c))}else!n&&m()}var r,l,c=!!e.test,u=e.load||e.both,d=e.callback||s,h=d,m=e.complete||s;n(c?e.yep:e.nope,!!u),u&&n(u)}var l,c,d=this.yepnope.loader;if(a(e))o(e,0,d,0);else if(T(e))for(l=0;e.length>l;l++)c=e[l],a(c)?o(c,0,d,0):T(c)?h(c):Object(c)===c&&r(c,d);else Object(e)===e&&r(e,d)},h.addPrefix=function(e,t){E[e]=t},h.addFilter=function(e){S.push(e)},h.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=u(),e.yepnope.executeStack=r,e.yepnope.injectJs=function(e,n,i,a,l,c){var u,d,m=t.createElement("script"),a=a||h.errorTimeout;m.src=e;for(d in i)m.setAttribute(d,i[d]);n=c?r:n||s,m.onreadystatechange=m.onload=function(){!u&&o(m.readyState)&&(u=1,n(),m.onload=m.onreadystatechange=null)},p(function(){u||(u=1,n(1))},a),l?m.onload():f.parentNode.insertBefore(m,f)},e.yepnope.injectCss=function(e,n,i,a,o,l){var c,a=t.createElement("link"),n=l?r:n||s;a.href=e,a.rel="stylesheet",a.type="text/css";for(c in i)a.setAttribute(c,i[c]);o||(f.parentNode.insertBefore(a,f),p(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("contenteditable","contentEditable"in document.documentElement),define("modernizr",function(e){return function(){var t;return t||e.Modernizr}}(this)),function(e,t){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,a){e.Backbone=t(e,a,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){var a=e.Backbone,s=[],o=s.slice;t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=a,this},t.emulateHTTP=!1,t.emulateJSON=!1;var r=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var a=this,s=n.once(function(){a.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,i)},off:function(e,t,i){var a,s,o,r,l,u,d,h;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(r=e?[e]:n.keys(this._events),l=0,u=r.length;u>l;l++)if(e=r[l],o=this._events[e]){if(this._events[e]=a=[],t||i)for(d=0,h=o.length;h>d;d++)s=o[d],(t&&t!==s.callback&&t!==s.callback._callback||i&&i!==s.context)&&a.push(s);a.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&u(n,t),i&&u(i,arguments),this},stopListening:function(e,t,i){var a=this._listeningTo;if(!a)return this;var s=!t&&!i;i||"object"!=typeof t||(i=this),e&&((a={})[e._listenId]=e);for(var o in a)e=a[o],e.off(t,i,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var a in n)e[t].apply(e,[a,n[a]].concat(i));return!1}if(l.test(n)){for(var s=n.split(l),o=0,r=s.length;r>o;o++)e[t].apply(e,[s[o]].concat(i));return!1}return!0},u=function(e,t){var n,i=-1,a=e.length,s=t[0],o=t[1],r=t[2];switch(t.length){case 0:for(;++i<a;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<a;)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(;++i<a;)(n=e[i]).callback.call(n.ctx,s,o);return;case 3:for(;++i<a;)(n=e[i]).callback.call(n.ctx,s,o,r);return;default:for(;++i<a;)(n=e[i]).callback.apply(n.ctx,t);return}},d={listenTo:"on",listenToOnce:"once"};n.each(d,function(e,t){r[t]=function(t,i,a){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,a||"object"!=typeof i||(a=this),t[e](i,a,this),this}}),r.bind=r.on,r.unbind=r.off,n.extend(t,r);var h=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var a,s,o,r,l,c,u,d;if(null==e)return this;if("object"==typeof e?(s=e,i=t):(s={})[e]=t,i||(i={}),!this._validate(s,i))return!1;o=i.unset,l=i.silent,r=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(a in s)t=s[a],n.isEqual(d[a],t)||r.push(a),n.isEqual(u[a],t)?delete this.changed[a]:this.changed[a]=t,o?delete d[a]:d[a]=t;if(!l){r.length&&(this._pending=i);for(var h=0,m=r.length;m>h;h++)this.trigger("change:"+r[h],this,d[r[h]],i)}if(c)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,a=this._changing?this._previousAttributes:this.attributes;for(var s in e)n.isEqual(a[s],t=e[s])||((i||(i={}))[s]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},O(this,e),this.sync("read",this,e)},save:function(e,t,i){var a,s,o,r=this.attributes;if(null==e||"object"==typeof e?(a=e,i=t):(a={})[e]=t,i=n.extend({validate:!0},i),a&&!i.wait){if(!this.set(a,i))return!1}else if(!this._validate(a,i))return!1;a&&i.wait&&(this.attributes=n.extend({},r,a)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(e){l.attributes=r;var t=l.parse(e,i);return i.wait&&(t=n.extend(a||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(c&&c(l,e,i),void l.trigger("sync",l,e,i))},O(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=a),o=this.sync(s,this,i),a&&i.wait&&(this.attributes=r),o},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,a=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&a(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;O(this,e);var s=this.sync("delete",this,e);return e.wait||a(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||U();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];n.each(m,function(e){h.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var p=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},f={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(p.prototype,r,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)
},add:function(e,t){return this.set(e,n.extend({merge:!1},t,g))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var a,s,o,r;for(a=0,s=e.length;s>a;a++)r=e[a]=this.get(e[a]),r&&(delete this._byId[r.id],delete this._byId[r.cid],o=this.indexOf(r),this.models.splice(o,1),this.length--,t.silent||(t.index=o,r.trigger("remove",r,this,t)),this._removeReference(r,t));return i?e[0]:e},set:function(e,t){t=n.defaults({},t,f),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var a,s,o,r,l,c,u,d=t.at,m=this.model,p=this.comparator&&null==d&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],w=[],b={},y=t.add,x=t.merge,k=t.remove,C=!p&&y&&k?[]:!1;for(a=0,s=e.length;s>a;a++){if(l=e[a]||{},o=l instanceof h?r=l:l[m.prototype.idAttribute||"id"],c=this.get(o))k&&(b[c.cid]=!0),x&&(l=l===r?r.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),p&&!u&&c.hasChanged(g)&&(u=!0)),e[a]=c;else if(y){if(r=e[a]=this._prepareModel(l,t),!r)continue;v.push(r),this._addReference(r,t)}r=c||r,!C||!r.isNew()&&b[r.id]||C.push(r),b[r.id]=!0}if(k){for(a=0,s=this.length;s>a;++a)b[(r=this.models[a]).cid]||w.push(r);w.length&&this.remove(w,t)}if(v.length||C&&C.length)if(p&&(u=!0),this.length+=v.length,null!=d)for(a=0,s=v.length;s>a;a++)this.models.splice(d+a,0,v[a]);else{C&&(this.models.length=0);var T=C||v;for(a=0,s=T.length;s>a;a++)this.models.push(T[a])}if(u&&this.sort({silent:!0}),!t.silent){for(a=0,s=v.length;s>a;a++)(r=v[a]).trigger("add",r,this,t);(u||C&&C.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,a=this.models.length;a>i;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return o.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var a=e.reset?"reset":"set";i[a](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},O(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,a=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),a&&a(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(e){p.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){p.prototype[e]=function(t,i){var a=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,a,i)}});var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},y=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,r,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var a=t.match(y),s=a[1],o=a[2];i=n.bind(i,this),s+=".delegateEvents"+this.cid,""===o?this.$el.on(s,i):this.$el.on(s,o,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,a){var s=C[e];n.defaults(a||(a={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};if(a.url||(o.url=n.result(i,"url")||U()),null!=a.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(a.attrs||i.toJSON(a))),a.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),a.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",a.emulateJSON&&(o.data._method=s);var r=a.beforeSend;a.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),r?r.apply(this,arguments):void 0}}"GET"===o.type||a.emulateJSON||(o.processData=!1),"PATCH"===o.type&&k&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=a.xhr=t.ajax(n.extend(o,a));return i.trigger("request",i,l,a),l};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var T=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,_=/(\(\?)?:\w+/g,E=/\*\w+/g,F=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(T.prototype,r,{initialize:function(){},route:function(e,i,a){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(a=i,i=""),a||(a=this[i]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(a,o),s.trigger.apply(s,["route:"+i].concat(o)),s.trigger("route",i,o),t.history.trigger("route",s,i,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(F,"\\$&").replace(S,"(?:$1)?").replace(_,function(e,t){return t?e:"([^/?]+)"}).replace(E,"([^?]*?)"),RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var P=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,V=/msie [\w.]+/,A=/\/$/,R=/#.*$/;P.started=!1,n.extend(P.prototype,r,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(A,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(P.started)throw Error("Backbone.history has already been started");P.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),a=document.documentMode,s=V.exec(navigator.userAgent.toLowerCase())&&(!a||7>=a);if(this.root=("/"+this.root+"/").replace(D,"/"),s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&r.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!P.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(R,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new P;var N=function(e,t){var i,a=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return a.apply(this,arguments)},n.extend(i,a,t);var s=function(){this.constructor=i};return s.prototype=a.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=a.prototype,i};h.extend=p.extend=T.extend=b.extend=P.extend=N;var U=function(){throw Error('A "url" property or function must be specified')},O=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.wreqr",["backbone","underscore"],function(e,n){return t(e,n)});else if("undefined"!=typeof exports){var n=require("backbone"),i=require("underscore");module.exports=t(n,i)}else t(e.Backbone,e._)}(this,function(e,t){var n=e.Wreqr,i=e.Wreqr={};return e.Wreqr.VERSION="1.3.2",e.Wreqr.noConflict=function(){return e.Wreqr=n,this},i.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this)},setHandler:function(e,t,n){var i={callback:t,context:n};this._wreqrHandlers[e]=i,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){return t.callback.apply(t.context,arguments)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,t),i.CommandStorage=function(){var n=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(n.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),n}(),i.Commands=function(e,t){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),e.Handlers.prototype.constructor.apply(this,arguments)},execute:function(e){e=arguments[0];var n=t.rest(arguments);this.hasHandler(e)?this.getHandler(e).apply(this,n):this.storage.addCommand(e,n)},_executeCommands:function(e,n,i){var a=this.storage.getCommands(e);t.each(a.instances,function(e){n.apply(i,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var n,i=e.storageType||this.storageType;n=t.isFunction(i)?new i:i,this.storage=n}})}(i,t),i.RequestResponse=function(e,t){return e.Handlers.extend({request:function(e){return this.hasHandler(e)?this.getHandler(e).apply(this,t.rest(arguments)):void 0}})}(i,t),i.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,t),i.Channel=function(){var n=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,n,i){if(n){i=i||this;var a="vent"===e?"on":"setHandler";t.each(n,function(n,s){this[e][a](s,t.bind(n,i))},this)}}}),n}(i),i.radio=function(e,t){var n=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(n.prototype,{channel:function(e){if(!e)throw Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var n=this._channels[t];return n||(n=new e.Channel(t),this._channels[t]=n),n},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(i[e],function(t){this[e][t]=a(this,e,t)},this)},this)}});var i={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},a=function(e,n,i){return function(a){var s=e._getChannel(a)[n];return s[i].apply(s,t.rest(arguments))}};return new n}(i,t),e.Wreqr}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.babysitter",["backbone","underscore"],function(e,n){return t(e,n)});else if("undefined"!=typeof exports){var n=require("backbone"),i=require("underscore");module.exports=t(n,i)}else t(e.Backbone,e._)}(this,function(e,t){var n=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(e,t),e.ChildViewContainer.VERSION="0.1.5",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=n,this},e.ChildViewContainer}),function(e,t){if("object"==typeof exports){var n=require("underscore"),i=require("backbone"),a=require("backbone.wreqr"),s=require("backbone.babysitter");module.exports=t(n,i,a,s)}else"function"==typeof define&&define.amd&&define("backbone-marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],t)}(this,function(e,t){!function(e,t,n){function i(e,t){var n=Error(e);throw n.name=t||"Error",n}var a={};t.Marionette=a,a.$=t.$;var s=Array.prototype.slice;return a.extend=t.Model.extend,a.getOption=function(e,t){if(e&&t){var n;return n=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},a.normalizeMethods=function(e){var t,i={};return n.each(e,function(e,a){t=e,n.isFunction(t)||(t=this[t]),t&&(i[a]=t)},this),i},a.normalizeUIKeys=function(e,t){return void 0!==e?(n.each(n.keys(e),function(n){var i=/@ui.[a-zA-Z_$0-9]*/g;n.match(i)&&(e[n.replace(i,function(e){return t[e.slice(4)]})]=e[n],delete e[n])}),e):void 0},a.triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi,i=function(i){var a="on"+i.replace(t,e),s=this[a];return n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),n.isFunction(s)?s.apply(this,n.tail(arguments)):void 0};return i}(),a.MonitorDOMRefresh=function(e){function t(e){e._isShown=!0,a(e)}function i(e){e._isRendered=!0,a(e)}function a(e){e._isShown&&e._isRendered&&s(e)&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function s(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){i(e)})}}(document.documentElement),function(e){function t(e,t,a,s){var o=s.split(/\s+/);n.each(o,function(n){var s=e[n];s||i("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,a,s)})}function a(e,t,n,i){e.listenTo(t,n,i)}function s(e,t,i,a){var s=a.split(/\s+/);n.each(s,function(n){var a=e[n];e.stopListening(t,i,a)})}function o(e,t,n,i){e.stopListening(t,n,i)}function r(e,t,i,a,s){t&&i&&(n.isFunction(i)&&(i=i.call(e)),n.each(i,function(i,o){n.isFunction(i)?a(e,t,o,i):s(e,t,o,i)}))}e.bindEntityEvents=function(e,n,i){r(e,n,i,a,t)},e.unbindEntityEvents=function(e,t,n){r(e,t,n,o,s)}}(a),a.Callbacks=function(){this._deferred=a.$.Deferred(),this._callbacks=[]},n.extend(a.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(n,i){t&&(n=t),e.call(n,i)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=a.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),a.Controller=function(e){this.triggerMethod=a.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},a.Controller.extend=a.extend,n.extend(a.Controller.prototype,t.Events,{close:function(){this.stopListening();var e=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(e)),this.unbind()}}),a.Region=function(e){if(this.options=e||{},this.el=a.getOption(this,"el"),this.el||i("An 'el' must be specified for a region.","NoElError"),this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}},n.extend(a.Region,{buildRegion:function(e,t){var a=n.isString(e),s=n.isString(e.selector),o=n.isUndefined(e.regionType),r=n.isFunction(e);r||a||s||i("Region must be specified as a Region type, a selector string or an object with selector property");var l,c;a&&(l=e),e.selector&&(l=e.selector,delete e.selector),r&&(c=e),!r&&o&&(c=t),e.regionType&&(c=e.regionType,delete e.regionType),(a||r)&&(e={}),e.el=l;var u=new c(e);return e.parentEl&&(u.getEl=function(t){var i=e.parentEl;return n.isFunction(i)&&(i=i()),i.find(t)}),u}}),n.extend(a.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),a.triggerMethod.call(this,"before:show",e),a.triggerMethod.call(e,"before:show"),(i||t)&&this.open(e),this.currentView=e,a.triggerMethod.call(this,"show",e),a.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return a.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),a.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),a.Region.extend=a.extend,a.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var i={};return n.each(e,function(e,a){n.isString(e)&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var s=this.addRegion(a,e);i[a]=s},this),i},addRegion:function(t,i){var a,s=n.isObject(i),o=n.isString(i),r=!!i.selector;return a=o||s&&r?e.Region.buildRegion(i,e.Region):n.isFunction(i)?e.Region.buildRegion(i,e.Region):i,this._store(t,a),this.triggerMethod("region:add",t,a),a},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e){e.close()},this)},close:function(){this.removeRegions(),e.Controller.prototype.close.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(i,function(e){t.prototype[e]=function(){var t=n.values(this._regions),i=[t].concat(n.toArray(arguments));return n[e].apply(n,i)}}),t}(a),a.TemplateCache=function(e){this.templateId=e},n.extend(a.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new a.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=s.call(arguments),n=t.length;if(n>0)for(e=0;n>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(a.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e)},loadTemplate:function(e){var t=a.$(e).html();return t&&0!==t.length||i("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return n.template(e)}}),a.Renderer={render:function(e,t){e||i("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");var n;return(n="function"==typeof e?e:a.TemplateCache.get(e))(t)}},a.View=t.View.extend({constructor:function(e){n.bindAll(this,"render"),n.isObject(this.behaviors)&&new a.Behaviors(this),this.options=n.extend({},n.result(this,"options"),n.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(n.result(this,"events")),t.View.prototype.constructor.apply(this,arguments),a.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:a.triggerMethod,normalizeMethods:a.normalizeMethods,getTemplate:function(){return a.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=a.getOption(this,"templateHelpers");return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},normalizeUIKeys:function(e){var t=n.result(this,"ui");return a.normalizeUIKeys(e,t)},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(n.result(this,"triggers"));return n.each(t,function(t,i){var a=n.isObject(t),s=a?t.event:t;e[i]=function(e){if(e){var n=e.preventDefault,i=e.stopPropagation,o=a?t.preventDefault:n,r=a?t.stopPropagation:i;o&&n&&n.apply(e),r&&i&&i.apply(e)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,l)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),a.bindEntityEvents(this,this.model,a.getOption(this,"modelEvents")),a.bindEntityEvents(this,this.collection,a.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var i={},a=n.result(this,"behaviorEvents")||{},s=this.configureTriggers();n.extend(i,a,e,s),t.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),a.unbindEntityEvents(this,this.model,a.getOption(this,"modelEvents")),a.unbindEntityEvents(this,this.collection,a.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=Array.prototype.slice.call(arguments),t=this.triggerMethod.apply(this,["before:close"].concat(e));t!==!1&&(this.isClosed=!0,this.triggerMethod.apply(this,["close"].concat(e)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),a.ItemView=a.View.extend({constructor:function(){a.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=a.Renderer.render(t,e);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),a.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),a.CollectionView=a.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),a.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(n.each(this._bufferedChildren,function(e){a.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(e){this.closeEmptyView();var t=this.getItemView(e),n=this.collection.indexOf(e);this.addItemView(e,t,n)},onShowCalled:function(){this.children.each(function(e){a.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model;this.addItemView(n,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return a.getOption(this,"emptyView")},getItemView:function(){var e=a.getOption(this,"itemView");return e||i("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(e,t,i){var s=a.getOption(this,"itemViewOptions");n.isFunction(s)&&(s=s.call(this,e,i));var o=this.buildItemView(e,t,s);return this.addChildViewEventForwarding(o),this.triggerMethod("before:item:added",o),this.children.add(o),this.renderItemView(o,i),this._isShown&&!this.isBuffering&&a.triggerMethod.call(o,"show"),this.triggerMethod("after:item:added",o),o},addChildViewEventForwarding:function(e){var t=a.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var i=s.call(arguments),o=i[0],r=this.normalizeMethods(this.getItemEvents());i[0]=t+":"+o,i.splice(1,0,e),void 0!==r&&n.isFunction(r[o])&&r[o].apply(this,i),a.triggerMethod.apply(this,i)},this)},getItemEvents:function(){return n.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,i){var a=n.extend({model:e},i);return new t(a)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)
},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),a.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),a.CompositeView=a.CollectionView.extend({constructor:function(){a.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},getItemView:function(){var e=a.getOption(this,"itemView")||this.constructor;return e||i("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),a.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return a.Renderer.render(t,e)},appendBuffer:function(e,t){var n=this.getItemViewContainer(e);n.append(t)},appendHtml:function(e,t){if(e.isBuffering)e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t);else{var n=this.getItemViewContainer(e);n.append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,s=a.getOption(e,"itemViewContainer");if(s){var o=n.isFunction(s)?s.call(this):s;t=e.$(o),0>=t.length&&i("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),a.Layout=a.ItemView.extend({regionType:a.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),a.ItemView.prototype.constructor.call(this,e)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),a.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),a.ItemView.prototype.close.apply(this,arguments))},addRegion:function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,n={regionType:a.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager(),t=n.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new a.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),a.Behavior=function(e,t){function n(t,n){this.view=n,this.defaults=e.result(this,"defaults")||{},this.options=e.extend({},this.defaults,t),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return e.extend(n.prototype,{initialize:function(){},triggerMethod:a.triggerMethod}),e.extend(n,{extend:t.View.extend}),n}(n,t),a.Behaviors=function(e,t){function n(e){this.behaviors=n.parseBehaviors(e,e.behaviors),n.wrap(e,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","onShow","onClose","behaviorEvents","triggerMethod","setElement"])}var i={setElement:function(e,n){e.apply(this,t.tail(arguments,2)),t.each(n,function(e){e.$el=this.$el},this)},onShow:function(n,i){var a=t.tail(arguments,2);t.each(i,function(t){e.triggerMethod.apply(t,["show"].concat(a))}),t.isFunction(n)&&n.apply(this,a)},onClose:function(n,i){var a=t.tail(arguments,2);t.each(i,function(t){e.triggerMethod.apply(t,["close"].concat(a))}),t.isFunction(n)&&n.apply(this,a)},bindUIElements:function(e,n){e.apply(this),t.invoke(n,e)},unbindUIElements:function(e,n){e.apply(this),t.invoke(n,e)},triggerMethod:function(e,n){var i=t.tail(arguments,2);e.apply(this,i),t.each(n,function(t){e.apply(t,i)})},delegateEvents:function(n,i){var a=t.tail(arguments,2);n.apply(this,a),t.each(i,function(t){e.bindEntityEvents(this,this.model,e.getOption(t,"modelEvents")),e.bindEntityEvents(this,this.collection,e.getOption(t,"collectionEvents"))},this)},undelegateEvents:function(n,i){var a=t.tail(arguments,2);n.apply(this,a),t.each(i,function(t){e.unbindEntityEvents(this,this.model,e.getOption(t,"modelEvents")),e.unbindEntityEvents(this,this.collection,e.getOption(t,"collectionEvents"))},this)},behaviorEvents:function(n,i){var a={},s=t.result(this,"ui");return t.each(i,function(n,i){var o={},r=t.result(n,"events")||{},l=t.result(n,"ui"),c=t.extend({},s,l);r=e.normalizeUIKeys(r,c),t.each(t.keys(r),function(e){var a=Array(i+2).join(" "),s=e+a,l=t.isFunction(r[e])?r[e]:n[r[e]];o[s]=t.bind(l,n)}),a=t.extend(a,o)}),a}};return t.extend(n,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(e,i){return e.behaviorClass?e.behaviorClass:t.isFunction(n.behaviorsLookup)?n.behaviorsLookup.apply(this,arguments)[i]:n.behaviorsLookup[i]},parseBehaviors:function(e,i){return t.map(i,function(t,i){var a=n.getBehaviorClass(t,i);return new a(t,e)})},wrap:function(e,n,a){t.each(a,function(a){e[a]=t.partial(i[a],e[a],n)})}}),n}(a,n),a.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,arguments),this.options=e||{};var n=a.getOption(this,"appRoutes"),i=this._getController();this.processAppRoutes(i,n)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},processAppRoutes:function(e,t){if(t){var i=n.keys(t).reverse();n.each(i,function(n){this._addAppRoute(e,n,t[n])},this)}},_getController:function(){return a.getOption(this,"controller")},_addAppRoute:function(e,t,a){var s=e[a];s||i("Method '"+a+"' was not found on the controller"),this.route(t,a,n.bind(s,e))}}),a.Application=function(e){this._initRegionManager(),this._initCallbacks=new a.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=a.triggerMethod},n.extend(a.Application.prototype,t.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var n=a.Module.getClass(t),i=s.call(arguments);return i.unshift(this),n.create.apply(n,i)},_initRegionManager:function(){this._regionManager=new a.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),a.Application.extend=a.extend,a.Module=function(e,t,i){this.moduleName=e,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=a.triggerMethod,n.isFunction(this.initialize)&&this.initialize(this.options,e,t)},a.Module.extend=a.extend,n.extend(a.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,a.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),a.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var s=n.flatten([this,this.app,t,a,a.$,n,i]);e.apply(this,s)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new a.Callbacks,this._finalizerCallbacks=new a.Callbacks}}),n.extend(a.Module,{create:function(e,t,i){var a=e,o=s.call(arguments);o.splice(0,3),t=t.split(".");var r=t.length,l=[];return l[r-1]=i,n.each(t,function(t,n){var s=a;a=this._getModule(s,t,e,i),this._addModuleDefinition(s,a,l[n],o)},this),a},_getModule:function(e,t,i,a){var s=n.extend({},a),o=this.getClass(a),r=e[t];return r||(r=new o(t,i,s),e[t]=r,e.submodules[t]=r),r},getClass:function(e){var t=a.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,n,i){var a=this._getDefine(n),s=this._getStartWithParent(n,t);a&&t.addDefinition(a,i),this._addStartWithParent(e,t,s)},_getStartWithParent:function(e,t){var i;return n.isFunction(e)&&e.prototype instanceof a.Module?(i=t.constructor.prototype.startWithParent,n.isUndefined(i)?!0:i):n.isObject(e)?(i=e.startWithParent,n.isUndefined(i)?!0:i):!0},_getDefine:function(e){return!n.isFunction(e)||e.prototype instanceof a.Module?n.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,n){t.startWithParent=t.startWithParent&&n,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),a}(this,t,e);return t.Marionette}),function(e,t){"function"==typeof define&&define.amd?define("handlebars",[],t):"object"==typeof exports?module.exports=t():e.Handlebars=e.Handlebars||t()}(this,function(){var e=function(){function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){function t(e){return l[e]}function n(e){for(var t=1;arguments.length>t;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function i(e){return e instanceof r?""+e:null==e?"":e?(e=""+e,u.test(e)?e.replace(c,t):e):e+""}function a(e){return e||0===e?m(e)&&0===e.length?!0:!1:!0}function s(e,t){return(e?e+".":"")+t}var o={},r=e,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,u=/[&<>"'`]/;o.extend=n;var d=Object.prototype.toString;o.toString=d;var h=function(e){return"function"==typeof e};h(/x/)&&(h=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var h;o.isFunction=h;var m=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===d.call(e):!1};return o.isArray=m,o.escapeExpression=i,o.isEmpty=a,o.appendContextPath=s,o}(e),n=function(){function e(e,t){var i;t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn);for(var a=Error.prototype.constructor.call(this,e),s=0;n.length>s;s++)this[n[s]]=a[n[s]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=Error(),t=e}(),i=function(e,t){function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,a=n.fn;if(t===!0)return a(this);if(t===!1||null==t)return i(this);if(u(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var o=g(n.data);o.contextPath=s.appendContextPath(n.data.contextPath,n.name),n={data:o}}return a(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new o("Must pass iterator to #each");var n,i,a=t.fn,r=t.inverse,l=0,c="";if(t.data&&t.ids&&(i=s.appendContextPath(t.data.contextPath,t.ids[0])+"."),d(e)&&(e=e.call(this)),t.data&&(n=g(t.data)),e&&"object"==typeof e)if(u(e))for(var h=e.length;h>l;l++)n&&(n.index=l,n.first=0===l,n.last=l===e.length-1,i&&(n.contextPath=i+l)),c+=a(e[l],{data:n});else for(var m in e)e.hasOwnProperty(m)&&(n&&(n.key=m,n.index=l,n.first=0===l,i&&(n.contextPath=i+m)),c+=a(e[m],{data:n}),l++);return 0===l&&(c=r(this)),c}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||s.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){d(e)&&(e=e.call(this));var n=t.fn;if(s.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var i=g(t.data);i.contextPath=s.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var a={},s=e,o=t,r="2.0.0";a.VERSION=r;var l=6;a.COMPILER_REVISION=l;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};a.REVISION_CHANGES=c;var u=s.isArray,d=s.isFunction,h=s.toString,m="[object Object]";a.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:p,log:f,registerHelper:function(e,t){if(h.call(e)===m){if(t)throw new o("Arg not supported with multiple helpers");s.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){h.call(e)===m?s.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(e>=p.level){var n=p.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};a.logger=p;var f=p.log;a.log=f;var g=function(e){var t=s.extend({},e);return t._parent=e,t};return a.createFrame=g,a}(t,n),a=function(e,t,n){function i(e){var t=e&&e[0]||1,n=h;if(t!==n){if(n>t){var i=m[n],a=m[t];throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+a+").")}throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){if(!t)throw new d("No environment passed to template");if(!e||!e.main)throw new d("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,i,a,s,o,r,l,c,h){o&&(s=u.extend({},s,o));var m=t.VM.invokePartial.call(this,n,a,s,r,l,c,h);if(null==m&&t.compile){var p={helpers:r,partials:l,data:c,depths:h};l[a]=t.compile(n,{data:void 0!==c,compat:e.compat},t),m=l[a](s,p)}if(null!=m){if(i){for(var f=m.split("\n"),g=0,v=f.length;v>g&&(f[g]||g+1!==v);g++)f[g]=i+f[g];m=f.join("\n")}return m}throw new d("The partial "+a+" could not be compiled when running in runtime-only mode")},i={lookup:function(e,t){for(var n=e.length,i=0;n>i;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:u.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var i=this.programs[e],a=this.fn(e);return t||n?i=s(this,e,a,t,n):i||(i=this.programs[e]=s(this,e,a)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=u.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},a=function(t,n){n=n||{};var s=n.data;a._setup(n),!n.partial&&e.useData&&(s=l(t,s));var o;return e.useDepths&&(o=n.depths?[t].concat(n.depths):[t]),e.main.call(i,t,i.helpers,i.partials,s,o)};return a.isTop=!0,a._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)))},a._child=function(t,n,a){if(e.useDepths&&!a)throw new d("must pass parent depths");return s(i,t,e[t],n,a)},a}function s(e,t,n,i,a){var s=function(t,s){return s=s||{},n.call(e,t,e.helpers,e.partials,s.data||i,a&&[t].concat(a))};return s.program=t,s.depth=a?a.length:0,s}function o(e,t,n,i,a,s,o){var r={partial:!0,helpers:i,partials:a,data:s,depths:o};if(void 0===e)throw new d("The partial "+t+" could not be found");return e instanceof Function?e(n,r):void 0}function r(){return""}function l(e,t){return t&&"root"in t||(t=t?p(t):{},t.root=e),t}var c={},u=e,d=t,h=n.COMPILER_REVISION,m=n.REVISION_CHANGES,p=n.createFrame;return c.checkRevision=i,c.template=a,c.program=s,c.invokePartial=o,c.noop=r,c}(t,n,i),s=function(e,t,n,i,a){var s,o=e,r=t,l=n,c=i,u=a,d=function(){var e=new o.HandlebarsEnvironment;return c.extend(e,o),e.SafeString=r,e.Exception=l,e.Utils=c,e.escapeExpression=c.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e},h=d();return h.create=d,h["default"]=h,s=h}(i,e,n,t,a);return s}),define("handlebars.partials",["handlebars"],function(e){e.registerPartial("activityFooterDefaultActions",e.template({1:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"1 Comment",{name:"gettext",hash:{},data:i}))+"\n"},3:function(e,t,n,i){var a,s=this.escapeExpression;return s(t.gettext.call(e,"%(countOf)s Comments",{name:"gettext",hash:{countOf:null!=(a=null!=e?e.thread:e)?a.posts:a},data:i}))+"\n"},5:function(e,t,n,i){var a,s='<li class="action">\n';return a=t["if"].call(e,null!=e?e.favorited:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(s+=a),s+"</li>\n"},6:function(e,t,n,i){var a=this.escapeExpression;return'<a class="action-favorite active" href="#" data-action="favorite">'+a(t.gettext.call(e,"Favorited",{name:"gettext",hash:{},data:i}))+' <span class="icon icon-star"></span></a>\n'},8:function(e,t,n,i){var a=this.escapeExpression;return'<a class="action-favorite" href="#" data-action="favorite">'+a(t.gettext.call(e,"Favorite",{name:"gettext",hash:{},data:i}))+' <span class="icon icon-star"></span></a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<li class="action">\n<a class="action-comments" href="'+o(s(null!=e?e.discussionRoute:e,e))+'" data-link-name="comment_count">\n';return a=t["if"].call(e,t.eq.call(e,null!=(a=null!=e?e.thread:e)?a.posts:a,1,{name:"eq",hash:{},data:i}),{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+='<span class="icon icon-comment"></span>\n</a>\n</li>\n',a=t["if"].call(e,null!=e?e.authenticated:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})),e.registerPartial("boostTimeRemaining",e.template({1:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"Boost ends in %(relativeTime)s",{name:"gettext",hash:{relativeTime:t.getPartial.call(e,"timeSelector",{name:"getPartial",hash:{},data:i})},data:i}))+"\n"},3:function(e,t,n,i){var a=this.escapeExpression;return'<span data-action="choose-boost-time" class="link">\n'+a(t.gettext.call(e,"Boost ends %(relativeTime)s",{name:"gettext",hash:{relativeTime:null!=e?e.boostTimeRemaining:e},data:i}))+"\n</span>\n"},5:function(e,t,n,i){var a=this.escapeExpression;return'<span title="Remove Boost" class="lnk pull-right" data-action="unboost">\n<span class="icon icon-arrow"></span>\n'+a(t.gettext.call(e,"Remove Boost",{name:"gettext",hash:{},data:i}))+"\n</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<span class="icon icon-megaphone"></span>\n';return a=t["if"].call(e,null!=e?e.showBoostTimeSelector:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),a=t["if"].call(e,null!=e?e.showUnboost:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},useData:!0})),e.registerPartial("cardTitle",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="card-title">\n<h2 class="discussion-title">\n<a href="'+o(s(null!=(a=null!=e?e.thread:e)?a.link:a,e))+'" class="link-gray-darker" data-role="thread-link" data-link-name="title">';return a=s(null!=(a=null!=e?e.thread:e)?a.clean_title:a,e),null!=a&&(r+=a),r+='</a>\n</h2>\non\n<a href="/home/'+o(s(null!=(a=null!=(a=null!=e?e.thread:e)?a.forum:a)?a.forumRoute:a,e))+'" class="link-gray-darker discussion-community" data-link-name="forum_name">\n',a=this.invokePartial(n.forumName,"","forumName",null!=(a=null!=e?e.thread:e)?a.forum:a,void 0,t,n,i),null!=a&&(r+=a),r+"</a>\n</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("cards",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"cards here\n"},useData:!0})),e.registerPartial("channelAvatar",e.template({1:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<img class="favicon" src="'+i(n(null!=(t=null!=e?e.options:e)?t.favicon:t,e))+'" alt="'+i(n(null!=e?e.name:e,e))+'"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a class="discussion-origin-name" href="/home/channel/'+o(s(null!=e?e.slug:e,e))+'/">\n';return a=t["if"].call(e,null!=(a=null!=e?e.options:e)?a.favicon:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</a>\n"},useData:!0})),e.registerPartial("channelAwareForumLink",e.template({1:function(e,t,n,i){var a,s="";return a=this.invokePartial(n.channelLink,"","channelLink",null!=(a=null!=e?e.forum:e)?a.channel:a,void 0,t,n,i),null!=a&&(s+=a),s},3:function(e,t,n,i){var a,s="";return a=this.invokePartial(n.forumLink,"","forumLink",null!=e?e.forum:e,void 0,t,n,i),null!=a&&(s+=a),s},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=(a=null!=e?e.forum:e)?a.channel:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),s},usePartial:!0,useData:!0})),e.registerPartial("channelLink",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a href="/home/channel/'+o(s(null!=e?e.slug:e,e))+'/" class="link-community">\n';return a=this.invokePartial(n.forumName,"","forumName",e,void 0,t,n,i),null!=a&&(r+=a),r+"</a>\n"},usePartial:!0,useData:!0})),e.registerPartial("defaultForumAvatar",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t=this.lambda,n=this.escapeExpression;return'<a href="/home/forums/'+n(t(null!=e?e.id:e,e))+'/" class="avatar" data-link-name="forum_avatar">\n<svg class="art-forum-blank" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"><path d="M22.9 38c5.9 0 10.6-4.9 10.6-11s-4.8-11-10.6-11 s-10.6 4.9-10.6 11c0 1.6 0.3 3.2 1 4.6L11.5 36l4.5-0.6C17.9 37 20.3 38 22.9 38z" class="style0"/><path d="M31.2 29c-4.8 0-8.7-4-8.7-9s3.9-9 8.7-9s8.7 4 8.7 9 c0 1.3-0.3 2.6-0.8 3.7l1.4 3.7l-3.7-0.5C35.3 28.2 33.3 29 31.2 29z" class="style1"/></svg>\n</a>\n'},useData:!0})),e.registerPartial("followButton",e.template({1:function(){return" active"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o='<a href="#" class="btn btn-primary btn-follow';return a=t["if"].call(e,null!=e?e.followed:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'" data-action="toggle-follow"><span class="symbol-default"><span class="icon-plus"></span></span><span class="text-default">'+s(t.gettext.call(e,"Follow",{name:"gettext",hash:{},data:i}))+'</span><span class="symbol-following"><span class="icon-checkmark"></span></span><span class="text-following">'+s(t.gettext.call(e,"Following",{name:"gettext",hash:{},data:i}))+"</span></a>\n"},useData:!0})),e.registerPartial("forumAvatar",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a href="/home/forums/'+o(s(null!=e?e.id:e,e))+'/" class="avatar" data-link-name="forum_avatar"><img class="forum-favicon" src="'+o(s(null!=(a=null!=e?e.favicon:e)?a.cache:a,e))+'" alt="';return a=this.invokePartial(n.forumName,"","forumName",e,void 0,t,n,i),null!=a&&(r+=a),r+'"></a>\n'},usePartial:!0,useData:!0})),e.registerPartial("forumLink",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a href="/home/forums/'+o(s(null!=e?e.id:e,e))+'/" class="link-community">\n';return a=this.invokePartial(n.forumName,"","forumName",e,void 0,t,n,i),null!=a&&(r+=a),r+"</a>\n"},usePartial:!0,useData:!0})),e.registerPartial("forumName",e.template({1:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.name:e,e))},3:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.id:e,e))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.name:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),s},useData:!0})),e.registerPartial("forumPreview",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=this.invokePartial(n.forumAvatar,"","forumAvatar",e,void 0,t,n,i),null!=a&&(s+=a),a=this.invokePartial(n.forumName,"","forumName",e,void 0,t,n,i),null!=a&&(s+=a),s},usePartial:!0,useData:!0})),e.registerPartial("navUserIcon",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="/by/'+i(n(null!=e?e.username:e,e))+'/" class="nav-profile" data-page-icon="user/'+i(n(null!=e?e.username:e,e))+'">\n<img src="'+i(n(null!=(t=null!=e?e.avatar:e)?t.cache:t,e))+'" alt="'+i(n(null!=e?e.username:e,e))+'">\n</a>\n'},useData:!0})),e.registerPartial("profileCardReason",e.template({1:function(e,t,n,i){var a,s=this.escapeExpression;return s(t.gettext.call(e,"Discussion on %(forum)s",{name:"gettext",hash:{forum:t.getPartial.call(e,"channelLink",null!=(a=null!=(a=null!=e?e.thread:e)?a.forum:a)?a.channel:a,{name:"getPartial",hash:{},data:i})},data:i}))+"\n"},3:function(e,t,n,i){var a,s=this.escapeExpression;return s(t.gettext.call(e,"Discussion on %(forum)s",{name:"gettext",hash:{forum:t.getPartial.call(e,"forumLink",null!=(a=null!=e?e.thread:e)?a.forum:a,{name:"getPartial",hash:{},data:i})},data:i}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="card-reason">\n';return a=t["if"].call(e,null!=(a=null!=(a=null!=e?e.thread:e)?a.forum:a)?a.channel:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+='<a href="'+o(s(null!=e?e.discussionRoute:e,e))+'" class="bullet link-discussion" data-link-name="comment_count">',a=s(null!=(a=null!=e?e.thread:e)?a.posts:a,e),null!=a&&(r+=a),r+" comments</a>\n</div>\n"},useData:!0})),e.registerPartial("profileCoverAttributes",e.template({1:function(e,t,n,i){var a=this.escapeExpression,s=this.lambda;return'<li class="cover-attribute user-upvotes tooltipped"\ndata-toggle="tooltip" data-placement="bottom" title="'+a(t.gettext.call(e,"Upvotes received",{name:"gettext",hash:{},data:i}))+'">\n'+a(s(null!=e?e.numLikesReceived:e,e))+'\n<span class="icon-arrow-2"></span>\n</li>\n'},3:function(e){var t=this.lambda,n=this.escapeExpression;return'<li class="cover-attribute desktop truncate-line">\n'+n(t(null!=e?e.location:e,e))+"\n</li>\n"},5:function(e){var t=this.lambda,n=this.escapeExpression;return'<li class="cover-attribute desktop sidebar-hidden truncate-line">\n<a href="'+n(t(null!=e?e.url:e,e))+'">'+n(t(null!=e?e.url:e,e))+'</a>\n</li>\n<li class="cover-attribute mobile cover-attribute-website sidebar-visible">\n<a class="cover-profile-icon-link" href="'+n(t(null!=e?e.url:e,e))+'"><span class="icon-link"></span></a>\n</li>\n'},7:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<li class="cover-attribute social">\n<a href="'+i(n(null!=(t=null!=(t=null!=e?e.connections:e)?t.facebook:t)?t.url:t,e))+'"><span class="icon-facebook-circle"></span></a>\n</li>\n'},9:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<li class="cover-attribute social">\n<a href="'+i(n(null!=(t=null!=(t=null!=e?e.connections:e)?t.twitter:t)?t.url:t,e))+'"><span class="icon-twitter-circle"></span></a>\n</li>\n'},11:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<li class="cover-attribute social">\n<a href="'+i(n(null!=(t=null!=(t=null!=e?e.connections:e)?t.google:t)?t.url:t,e))+'"><span class="icon-google-plus-circle"></span></a>\n</li>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<ul class="cover-attributes">\n';return a=t["if"].call(e,null!=e?e.numLikesReceived:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=t["if"].call(e,null!=e?e.location:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=t["if"].call(e,null!=e?e.url:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=t["if"].call(e,null!=(a=null!=(a=null!=e?e.connections:e)?a.facebook:a)?a.url:a,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=t["if"].call(e,null!=(a=null!=(a=null!=e?e.connections:e)?a.twitter:a)?a.url:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=t["if"].call(e,null!=(a=null!=(a=null!=e?e.connections:e)?a.google:a)?a.url:a,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</ul>\n"},useData:!0})),e.registerPartial("settingsDropdown",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="nav-settings dropdown" data-action="toggle-dropdown" data-dropdown="settings">\n<a data-toggle="dropdown" class="dropdown-toggle" href="#">\n<svg class="icon-settings" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M40 23.9v-7.7h-4.2c-0.4-1.6-1-3.1-1.9-4.6l3-3l-5.5-5.5l-3 3 c-1.4-0.9-2.9-1.5-4.6-1.9V0h-7.7v4.2c-1.6 0.4-3.2 1-4.6 1.9l-3-3L3.1 8.6l3 3c-0.8 1.4-1.5 2.9-1.9 4.6H0v7.7h4.3 c0.4 1.6 1.1 3.1 1.9 4.5l-3 3l5.5 5.5l3.1-3.1c1.4 0.8 2.9 1.5 4.5 1.8V40h7.7v-4.3c1.6-0.4 3.1-1 4.5-1.8l3.1 3.1l5.5-5.5l-3.1-3 c0.8-1.4 1.5-2.9 1.9-4.5H40z M13.3 20c0-3.7 3-6.7 6.7-6.7s6.7 3 6.7 6.7s-3 6.7-6.7 6.7S13.3 23.7 13.3 20z"/></svg>\n</a>\n\n<ul class="dropdown-menu dropdown-settings" data-mix-location="user menu">\n';return a=this.invokePartial(n.settingsLinks,"","settingsLinks",e,void 0,t,n,i),null!=a&&(s+=a),s+"</ul>\n</div>\n"
},usePartial:!0,useData:!0})),e.registerPartial("settingsLinks",e.template({1:function(e,t,n,i){var a=this.escapeExpression;return'<a href="/admin/" class="no-mobile" data-action="admin-click">\n'+a(t.gettext.call(e,"Admin",{name:"gettext",hash:{},data:i}))+"\n</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o='<li>\n<a href="#" class="no-mobile" data-action="show-edit-profile">\n'+s(t.gettext.call(e,"Edit Profile",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n<li>\n<a href="#" class="no-mobile" data-action="show-account">\n'+s(t.gettext.call(e,"Settings",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n\n<li role="presentation" class="divider no-mobile"></li>\n\n<li>\n';return a=t["if"].call(e,null!=e?e.isModerator:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'</li>\n<li>\n<a href="/follow/facebook/" class="no-mobile">\n'+s(t.gettext.call(e,"Find Friends",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n<li>\n<a href="/admin/create/" class="no-mobile">\n'+s(t.gettext.call(e,"Add %(disqus)s To Site",{name:"gettext",hash:{disqus:"Disqus"},data:i}))+'\n</a>\n</li>\n\n<li role="presentation" class="divider no-mobile"></li>\n\n<li>\n<a href="https://disqus.com/home/forums/channel-discussdisqus" data-link-name="feedback">\n'+s(t.gettext.call(e,"Feedback?",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n<li>\n<a href="https://help.disqus.com/" data-role="help">\n'+s(t.gettext.call(e,"Help",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n<li>\n<a href="/logout/?redirect=http%3A%2F%2Fdisqus.com" target="_self">\n'+s(t.gettext.call(e,"Log Out",{name:"gettext",hash:{},data:i}))+"\n</a>\n</li>\n"},useData:!0})),e.registerPartial("settingsMobileIcon",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="nav-settings-mobile" data-action="toggle-sidebar" data-mix-location="mobile">\n<svg class="icon-settings" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M40 23.9v-7.7h-4.2c-0.4-1.6-1-3.1-1.9-4.6l3-3l-5.5-5.5l-3 3 c-1.4-0.9-2.9-1.5-4.6-1.9V0h-7.7v4.2c-1.6 0.4-3.2 1-4.6 1.9l-3-3L3.1 8.6l3 3c-0.8 1.4-1.5 2.9-1.9 4.6H0v7.7h4.3 c0.4 1.6 1.1 3.1 1.9 4.5l-3 3l5.5 5.5l3.1-3.1c1.4 0.8 2.9 1.5 4.5 1.8V40h7.7v-4.3c1.6-0.4 3.1-1 4.5-1.8l3.1 3.1l5.5-5.5l-3.1-3 c0.8-1.4 1.5-2.9 1.9-4.5H40z M13.3 20c0-3.7 3-6.7 6.7-6.7s6.7 3 6.7 6.7s-3 6.7-6.7 6.7S13.3 23.7 13.3 20z"/></svg>\n<svg class="icon-x" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><polygon points="40,5.5 34.5,0 20,14.5 5.5,0 0,5.5 14.5,20 0,34.5 5.5,40 20,25.5 34.5,40 40,34.5 25.5,20"/></svg>\n</div>\n'},useData:!0})),e.registerPartial("threadImage",e.template({1:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="discussion-image" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'">\n</a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},useData:!0})),e.registerPartial("threadLink",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t,n=this.lambda,i=this.escapeExpression,a='<a href="'+i(n(null!=e?e.discussionRoute:e,e))+'"\nclass="name-thread"\ndata-role="article-link"\ndata-mix-location="title"\ndata-link-name="title">\n\n';return t=n(null!=(t=null!=e?e.thread:e)?t.clean_title:t,e),null!=t&&(a+=t),a+"\n</a>\n"},useData:!0})),e.registerPartial("threadTitle",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t,n=this.lambda,i=this.escapeExpression,a='<h2 class="discussion-title" dir="auto">\n<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'"\nclass="link-gray-darker truncate"\ndata-truncate-lines="'+i(n(null!=e?e.numTitleLines:e,e))+'"\ndata-role="thread-link"\ndata-link-name="title">\n\n';return t=n(null!=(t=null!=e?e.thread:e)?t.clean_title:t,e),null!=t&&(a+=t),a+"\n</a>\n</h2>\n"},useData:!0})),e.registerPartial("timeSelector",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<select name="time">\n<option></option>\n<option value="3600">'+a(t.gettext.call(e,"1 hour",{name:"gettext",hash:{},data:i}))+'</option>\n<option value="10800">'+a(t.gettext.call(e,"3 hours",{name:"gettext",hash:{},data:i}))+'</option>\n<option value="21600">'+a(t.gettext.call(e,"6 hours",{name:"gettext",hash:{},data:i}))+'</option>\n<option value="43200">'+a(t.gettext.call(e,"12 hours",{name:"gettext",hash:{},data:i}))+'</option>\n<option value="86400">'+a(t.gettext.call(e,"1 day",{name:"gettext",hash:{},data:i}))+'</option>\n<option value="259200">'+a(t.gettext.call(e,"3 days",{name:"gettext",hash:{},data:i}))+'</option>\n<option value="432000">'+a(t.gettext.call(e,"5 days",{name:"gettext",hash:{},data:i}))+'</option>\n<option value="604800">'+a(t.gettext.call(e,"1 week",{name:"gettext",hash:{},data:i}))+'</option>\n<option value="1209600">'+a(t.gettext.call(e,"2 weeks",{name:"gettext",hash:{},data:i}))+"</option>\n</select>\n"},useData:!0})),e.registerPartial("userAvatar",e.template({1:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a href="/by/'+o(s(null!=e?e.username:e,e))+'/" class="avatar" data-link-name="user_avatar">\n';return a=this.invokePartial(n.userAvatarNoLink,"","userAvatarNoLink",e,void 0,t,n,i),null!=a&&(r+=a),r+"</a>\n"},3:function(e,t,n,i){var a,s='<span class="avatar">\n';return a=this.invokePartial(n.userAvatarNoLink,"","userAvatarNoLink",e,void 0,t,n,i),null!=a&&(s+=a),s+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.username:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),s},usePartial:!0,useData:!0})),e.registerPartial("userAvatarNoLink",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<img src="'+i(n(null!=(t=null!=e?e.avatar:e)?t.cache:t,e))+'" alt="'+i(n(null!=e?e.displayName:e,e))+'">\n'},useData:!0})),e.registerPartial("userCardBody",e.template({1:function(e){var t=this.lambda,n=this.escapeExpression;return'<p class="description truncate-line">'+n(t(null!=e?e.about:e,e))+"</p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=this.invokePartial(n.userAvatar,"","userAvatar",e,void 0,t,n,i),null!=a&&(s+=a),s+='<div class="user-info">\n',a=this.invokePartial(n.userName,"","userName",e,void 0,t,n,i),null!=a&&(s+=a),a=t["if"].call(e,null!=e?e.about:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("userCardFollowButton",e.template({1:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.isPrivate:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(s+=a),s},2:function(e,t,n,i){var a=this.escapeExpression;return'<a href="#" class="btn btn-disabled">'+a(t.gettext.call(e,"Private",{name:"gettext",hash:{},data:i}))+' <span class="icon-lock"></span></a>\n'},4:function(e,t,n,i){var a,s=this.escapeExpression,o='<button class="btn btn-light btn-follow';return a=t["if"].call(e,null!=e?e.isFollowing:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'" data-action="toggle-follow">\n<span class="symbol-default"><span class="icon-plus"></span></span><span class="text-default">'+s(t.gettext.call(e,"Follow",{name:"gettext",hash:{},data:i}))+'</span><span class="symbol-following"><span class="icon-checkmark"></span></span><span class="text-following">'+s(t.gettext.call(e,"Following",{name:"gettext",hash:{},data:i}))+"</span>\n</button>\n"},5:function(){return" active"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t.unless.call(e,null!=e?e.isSessionUser:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},useData:!0})),e.registerPartial("userGroup",e.template({1:function(e,t,n,i){var a,s='<span class="actor">\n';return a=this.invokePartial(n.userPreview,"","userPreview",e,void 0,t,n,i),null!=a&&(s+=a),s+"</span>\n"},3:function(e,t,n,i){var a=this.escapeExpression;return'<a href="#" class="actor name link-gray-darker" data-role="actors">\n'+a(t.gettext.call(e,"%(numUsers)s others",{name:"gettext",hash:{numUsers:null!=e?e.numRemainingActors:e},data:i}))+"\n</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<span class="actors">\n';return a=t.each.call(e,null!=e?e.shownActors:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=t["if"].call(e,null!=e?e.numRemainingActors:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</span>\n"},usePartial:!0,useData:!0})),e.registerPartial("userGroupNames",e.template({1:function(e,t,n,i){var a,s='<span class="actor-group" data-role="actors">\n';return a=t["if"].call(e,t.gt.call(e,null!=e?e.numRemainingActors:e,1,{name:"gt",hash:{},data:i}),{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(s+=a),s+"</span>\n"},2:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"%(numUsers)s others",{name:"gettext",hash:{numUsers:null!=e?e.numRemainingActors:e},data:i}))+"\n"},4:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"1 other",{name:"gettext",hash:{},data:i}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<span class="actors">\n<span class="actor">\n';return a=this.invokePartial(n.userName,"","userName",null!=e?e.firstActor:e,void 0,t,n,i),null!=a&&(s+=a),s+="</span>\n",a=t["if"].call(e,null!=e?e.numRemainingActors:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</span>\n"},usePartial:!0,useData:!0})),e.registerPartial("userName",e.template({1:function(e){var t=this.lambda,n=this.escapeExpression;return'<a href="/by/'+n(t(null!=e?e.username:e,e))+'/" class="name" data-link-name="user_name">'+n(t(null!=e?e.name:e,e))+"</a>\n"},3:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.name:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(s+=a),s},4:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.name:e,e))+"\n"},6:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"Guest",{name:"gettext",hash:{},data:i}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.username:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),s},useData:!0})),e.registerPartial("userPreview",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=this.invokePartial(n.userAvatar,"","userAvatar",e,void 0,t,n,i),null!=a&&(s+=a),a=this.invokePartial(n.userName,"","userName",e,void 0,t,n,i),null!=a&&(s+=a),s+"\n"},usePartial:!0,useData:!0})),e.registerPartial("userSpan",e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t=this.lambda,n=this.escapeExpression;return'<span data-user="'+n(t(null!=e?e.id:e,e))+'" data-role="username">'+n(t(null!=e?e.name:e,e))+"</span>\n"},useData:!0})),e.registerPartial("cardGuestUpvoterText",e.template({1:function(e,t,n,i){var a=this.escapeExpression;return" "+a(t.gettext.call(e,"%(guestCount)s Guest Votes",{name:"gettext",hash:{guestCount:null!=e?e.guestCount:e},data:i}))+" "},3:function(e,t,n,i){var a=this.escapeExpression;return" "+a(t.gettext.call(e,"1 Guest Vote",{name:"gettext",hash:{},data:i}))+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t["if"].call(e,t.gt.call(e,null!=e?e.guestCount:e,1,{name:"gt",hash:{},data:i}),{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),s+"\n"},useData:!0})),e.registerPartial("cardGuestUser",e.template({1:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<li class="user ';return a=t["if"].call(e,null!=e?e.highlight:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'" data-role="guest">\n<span class="avatar" title="'+o(s(null!=e?e.guestText:e,e))+'">\n<img src="'+o(s(null!=e?e.guestAvatarUrl:e,e))+'" alt="'+o(t.gettext.call(e,"Avatar",{name:"gettext",hash:{},data:i}))+'" />\n</span>\n<span class="username" title="'+o(s(null!=e?e.guestText:e,e))+'">\n'+o(s(null!=e?e.guestText:e,e))+"\n</span>\n</li>\n"},2:function(){return"highlight"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.guestCount:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},useData:!0})),e.registerPartial("cardOtherUserText",e.template({1:function(e,t,n,i){var a=this.escapeExpression;return" "+a(t.gettext.call(e,"%(guestCount)s Others",{name:"gettext",hash:{guestCount:null!=e?e.guestCount:e},data:i}))+" "},3:function(e,t,n,i){var a=this.escapeExpression;return" "+a(t.gettext.call(e,"1 Other",{name:"gettext",hash:{},data:i}))+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t["if"].call(e,t.gt.call(e,null!=e?e.guestCount:e,1,{name:"gt",hash:{},data:i}),{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),s+"\n"},useData:!0})),e.registerPartial("cardUser",e.template({1:function(){return"highlight"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<li class="user ';return a=t["if"].call(e,null!=e?e.highlight:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'" data-action="profile" data-user="'+o(s(null!=e?e.id:e,e))+'" data-username="'+o(s(null!=e?e.username:e,e))+'">\n<a class="avatar" href="#" title="'+o(s(null!=e?e.name:e,e))+'">\n<img src="'+o(s(null!=(a=null!=e?e.avatar:e)?a.cache:a,e))+'" alt="'+o(t.gettext.call(e,"Avatar",{name:"gettext",hash:{},data:i}))+'" />\n</a>\n<a class="username" href="#" title="'+o(s(null!=e?e.name:e,e))+'">\n'+o(s(null!=e?e.name:e,e))+"\n</a>\n</li>\n"},useData:!0}))}),define("home/templates/preload",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<p></p>\n"},useData:!0})}),define("core/frameBus",["jquery","underscore","backbone"],function(e,t,n){function i(e){return e.hash.slice(1).replace(/(^\d+).*/,"$1")}function a(e){var t=e.split("/");return t[0]+"//"+t[2]}var s=i(window.location),o=window.opener||window.parent,r=document.referrer,l={};l.client=a(document.location.href),l.host=r?a(r):l.client;var c={getUID:i,origins:l,messageHandler:function(e){e=e.originalEvent;var t;try{t=JSON.parse(e.data)}catch(n){return}if(!t.name||"!"!==t.name[0]||e.origin===l.client)switch(t.scope){case"host":break;case"client":c.trigger(t.name,t.data)}},postMessage:function(e){e.sender=s,e=JSON.stringify(e),o.postMessage(e,"*")},sendHostMessage:function(e,t){t=t||[],c.postMessage({scope:"host",name:e,data:t})}};return t.extend(c,n.Events),e(window).on("message",c.messageHandler),e(window).on("unload",function(){c.sendHostMessage("die")}),c}),define("core/utils",["underscore"],function(e){function t(e){function t(e){return e=(+e).toString(16),1===e.length?"0"+e:e}if("#"===e.substr(0,1))return e;var n=/.*?rgb\((\d+),\s*(\d+),\s*(\d+)\)/.exec(e);if(!n||4!==n.length)return"";var i=t(n[1]),a=t(n[2]),s=t(n[3]);return"#"+i+a+s}function n(e){return t(e).replace(/[^#A-Fa-f0-9]/g,"")}function i(e){return function(t){return t&&t.preventDefault&&t.preventDefault(),e.apply(this,arguments)}}function a(e){if(!e)return"";e="http://"+e.replace(/^([a-z+.-]+:)?\/+/i,"");var t=document.createElement("a");t.href=e;var n=t.hostname.replace(/^www\d*\./i,"");return n=n.toLowerCase()}function s(t){var n=[];return e.each(t,function(e,t){void 0!==e&&n.push(t+(null!==e?"="+encodeURIComponent(e):""))}),n.join("&")}function o(e,t,n){if(t&&(e+=e.indexOf("?")>-1?"&"===e.charAt(e.length-1)?"":"&":"?",e+=this.serializeArgs(t)),n){var i={};return i[(new Date).getTime()]=null,this.serialize(e,i)}var a=e.length;return"&"===e.charAt(a-1)?e.slice(0,a-1):e}var r=/^[a-z0-9_.%+\-]+@[0-9a-z.\-]+\.[a-z.]{2,6}$/i,l=function(e){return r.test(e)},c=function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},u="zw|zm|za|yu|yt|ye|xn|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|uk|ug|ua|tz|tw|tv|tt|travel|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|tel|td|tc|sz|sy|sv|su|st|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pro|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|org|om|nz|nu|nr|np|no|nl|ni|ng|nf|net|ne|nc|name|na|mz|my|mx|mw|mv|museum|mu|mt|ms|mr|mq|mp|mobi|mo|mn|mm|ml|mk|mil|mh|mg|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jobs|jo|jm|je|it|is|ir|iq|io|int|info|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gov|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eg|ee|edu|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cv|cu|cr|coop|com|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|cat|ca|bz|by|bw|bv|bt|bs|br|bo|bn|bm|bj|biz|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|asia|as|arpa|ar|aq|ao|an|am|al|ai|ag|af|aero|ae|ad|ac|",d=RegExp("([^@.]|^)\\b(?:\\w[\\w-]*:/{0,3}(?:(?:\\w+:)?\\w+@)?)?([\\w-]+\\.)+(?:"+u+')(?!\\.\\w)\\b(?:[/?][^\\s\\{\\}\\|\\\\\\^\\[\\]`<>"\\x80-\\xFF\\x00-\\x1F\\x7F]*)?',"g"),h=function(e){return!!e.match(d)},m=RegExp("[\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E\\u00A1-\\u00BF\\u2010-\\u2027\\u2030-\\u205E\\u2300-\\u23FF\\u2E00-\\u2E7F\\u3001-\\u303F\\uFE10-\\uFE19\\uFE30-\\uFE4F\\uFE50-\\uFE6B\\uFF01-\\uFF0F\\uFF1A-\\uFF20\\uFF3B-\\uFF40\\uFF5B-\\uFF60\\uFF5F-\\uFF64]+$"),p=function(e,t){if(t>=e.length)return e;e=e.slice(0,t-1);var n=e,i=/(^.*\S)\s/.exec(e);i&&(e=i[1]);var a=m.exec(e);return a&&(e=e.slice(0,e.length-a[0].length)),.5*n.length>e.length&&(e=n),e+"…"},f=function(){var e=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(void 0!==e.style[n])return t[n];return null}(),g=function(e){var t=e.navigator.userAgent;return-1!==t.indexOf("Mobi")},v=function(e){return g(e)&&-1===e.navigator.userAgent.indexOf("iPad")},w=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText};return{validateEmail:l,isUrl:h,htmlDecode:c,niceTruncate:p,transitionEndEvent:f,isMobile:g,isPhone:v,strip:w,escapeColor:n,preventDefaultHandler:i,getDomain:a,serializeArgs:s,serialize:o}}),define("core/config",[],function(){return{urls:{avatar:{generic:"//a.disquscdn.com/current/images/noavatar92.png"},api:"//disqus.com/api/3.0/",apiSecure:"https://disqus.com/api/3.0/"},keys:{api:"E8Uh5l5fHZ6gD8U3KycjAIAk46f68Zw7C6eW8WSjZvCLXebZ7p0r1yrYDrLilk2F"},debug:!1}}),define("core/api",["jquery","underscore","backbone","core/config"],function(e,t,n,i){function a(e){return m.href=e,t.pick(m,"hostname","protocol","port")}function s(e){return g.xhrSupportsCredentialedRequests?!1:o(window.location,e.url)}function o(e,t){var n=a(e),i=a(t),s=window.location.protocol;return":"===n.protocol&&(n.protocol=s),":"===i.protocol&&(i.protocol=s),i.protocol!==n.protocol||i.hostname!==n.hostname||i.port!==n.port}function r(e){return'<iframe name="'+e+'"></iframe>'}function l(n){function a(t){var r=t.originalEvent.origin;if(i.urls.apiSecure.slice(0,r.length)===r){var c=JSON.parse(t.originalEvent.data);if(c.requestId===o){var u;0===c.code?(d.resolve(c),u=n.success):(d.reject(c),u=n.error),u=u||function(){},delete c.requestId,u(c),document.body.removeChild(s),document.body.removeChild(l),e(window).off("message",a)}}}n=t.defaults(n,p),n.secure&&(n.url=c(n.url));var s,o=t.uniqueId("ft_"),r=document.createElement("div"),l=document.createElement("form"),u="frame_"+o,d=new e.Deferred;return r.innerHTML=g.getIframe(u),s=r.childNodes[0],l.target=u,l.action=n.url.replace(".json",".pm"),l.method=n.method||"GET",n.data=t.extend(n.data,{callback:o,referrer:document.referrer}),t.each(n.data,function(e,n){e===!0?e=[1]:e===!1?e=[0]:null===e?e=[""]:t.isArray(e)||(e=[e]),t.each(e,function(e){var t=document.createElement("input");t.type="hidden",t.name=n,t.value=e,l.appendChild(t)})}),e(window).on("message",a),document.body.appendChild(s),document.body.appendChild(l),l.submit(),d.promise()}function c(e){return e.replace(/^(http\:)?\/\//,"https://")}function u(n){n=t.defaults(n,p),n.secure&&(n.url=c(n.url)),n.traditional=!0;var a=window.location;m.href=n.url,(a.host!==m.host||a.protocol!==m.protocol)&&(n.xhrFields={withCredentials:!0}),n.omitDisqusApiKey||(n.data=n.data||{},n.data.api_key=i.keys.api);var s=n.error;return n.error=function(e){g.trigger("error",e),t.isFunction(s)&&s(e)},e.ajax(n)}function d(e,n){n=n||{},n.url=h(e,{secure:n.secure}),n.data=t.extend(n.data||{},{api_key:i.keys.api}),g.trigger("call",n);var a=(s(n)?l:u)(n);return a&&a.always(t.bind(this.trigger,this,"complete")),a}function h(e,t){return t=t||{},/(https?\:)?\/\//.test(e)?e:(void 0!==t.secure?t.secure:p.secure)||"https:"===window.location.protocol?i.urls.apiSecure+e:i.urls.api+e}var m=document.createElement("a"),p={},f="withCredentials"in new XMLHttpRequest,g={ajax:u,call:d,getURL:h,defaults:function(e){var n,i,a;for(n in e)i=e[n],a=p[n],t.isObject(i)&&t.isObject(a)?t.extend(a,i):p[n]=i},headers:function(e){var n=t.extend({},p.headers,e);return p.headers=t.pick(n,t.map(n,function(e,t){return e?t:void 0}))},useFormTransport:s,xhrSupportsCredentialedRequests:f,makeHttps:c,formTransport:l,getIframe:r};return t.extend(g,n.Events),g}),define("core/utils/cookies",[],function(){var e={getCookieDomain:function(e){return e.split("/")[2].replace(/\:[0-9]+/,"")},deprecated:{create:function(t,n){var i=31536e6;e.create(t,n,{domain:e.getCookieDomain(window.location+""),expiresIn:i})},erase:function(t){e.erase(t,{domain:e.getCookieDomain(window.location+"")})}},create:function(e,t,n){var i,a=e+"="+t+"; path="+(n.path||"/");n.domain&&(a+="; domain=."+n.domain),n.expiresIn&&(i=new Date,i.setTime(i.getTime()+n.expiresIn),a+="; expires="+i.toGMTString()),document.cookie=a},read:function(e){for(var t,n=e+"=",i=document.cookie.split(";"),a=0;i.length>a;a++){for(t=i[a];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(n))return t.substring(n.length,t.length)}return null},erase:function(e,t){var n,i=new Date;i.setTime(i.getTime()+-864e5),n=e+"=; path=/;expires="+i.toGMTString(),t.domain&&(n+="; domain=."+t.domain),document.cookie=n}};return e}),define("core/models/BaseUser",["backbone","core/config"],function(e,t){var n=e.Model.extend({defaults:{about:null,avatar:{cache:t.urls.avatar.generic,permalink:t.urls.avatar.generic},connections:{},email:null,isAnonymous:!0,isFollowedBy:null,isFollowing:null,joinedAt:null,name:null,profileUrl:null,url:null,username:null,numPosts:null,numFollowing:null,numFollowers:null,numLikesReceived:null},hasValidAvatar:function(e){e||(e=this.attributes);var t=e.avatar;return t&&t.cache},isAnonymous:function(){return!this.get("id")},isRegistered:function(){return!this.isAnonymous()},validate:function(e){return this.hasValidAvatar(e)?void 0:"None of the avatar related properties can be null, undefined or empty on User models."},toJSON:function(){var t=e.Model.prototype.toJSON.apply(this,arguments);return t.thread={},this.hasValidAvatar()||(t.avatar=this.defaults.avatar),t.isRegistered=this.isRegistered(),t}});return n}),define("core/strings",[],function(){function e(e){var t=n.translations[e];return void 0!==t?t:e}function t(e,t){function n(n){var i="";return n in t?i=void 0!==t[n]&&null!==t[n]?""+t[n]:"":DISQUS&&DISQUS.logError&&DISQUS.logError("Key `"+n+"` not found in context for: ",e),i}return e.replace(/%\(\w+\)s/g,function(e){return n(e.slice(2,-2))})}var n={get:e,interpolate:t,translations:{}};return n}),define("core/models/User",["underscore","backbone","core/config","core/utils","core/strings","core/api","core/models/BaseUser"],function(e,t,n,i,a,s,o){function r(e,t,n){e[t]=e[t]||[],e[t].push(n)}var l=a.get,c=o.extend({validate:function(t){var n={};return t.display_name||r(n,"display_name",l("Please enter your name.")),t.email||r(n,"email",l("Please enter your email address.")),i.validateEmail(t.email)||r(n,"email",l("Invalid email address.")),this.isNew()&&(t.password?c.MIN_PASSWORD_LEN>t.password.length&&r(n,"password",l("Password must have at least 6 characters.")):r(n,"password",l("Please enter a password."))),t.name&&(c.MIN_NAME_LEN>t.name.length&&r(n,"name",a.interpolate(l("Name must have at least %(minLength)s characters."),{minLength:c.MIN_NAME_LEN})),t.name.length>c.MAX_NAME_LEN&&r(n,"name",a.interpolate(l("Name must have less than %(maxLength)s characters."),{maxLength:c.MAX_NAME_LEN}))),t.location&&t.location.length>c.MAX_LOCATION_LEN&&r(n,"location",a.interpolate(l("Location must have less than %(maxLength)s characters."),{maxLength:c.MAX_LOCATION_LEN})),t.url&&(t.url.length>c.MAX_URL_LEN&&r(n,"url",a.interpolate(l("Site must have less than %(maxLength)s characters."),{maxLength:c.MAX_URL_LEN})),i.isUrl(t.url)||r(n,"url",l("Please enter a valid site."))),e.isEmpty(n)?void 0:n},fetch:function(e){var t=this;e=e||{};var n={};return t.id?n.user=t.id:t.get("username")&&(n.user="username:"+t.get("username")),s.call("users/details.json",{data:n,success:function(n){n=n.response,t.set(n),e.success&&e.success(n),e.complete&&e.complete(n),t.trigger("sync",t,n,e)},error:function(t){e.error&&e.error(t),e.complete&&e.complete(t)}})},register:function(e){var t=this;e=e||{},s.call("internal/users/register.json",{secure:!0,data:this.toRegisterJSON(),method:"POST",success:function(n){t.set(n.response),e.success&&e.success(n)},error:e.error})},saveAvatar:function(e){var t=new FormData;return t.append("avatar_file",e),t.append("api_key",n.keys.api),s.call("internal/users/updateAvatar.json",{method:"post",data:t,cache:!1,contentType:!1,processData:!1})},saveProfile:function(){return s.call("users/updateProfile.json",{method:"POST",data:{name:this.get("name"),about:this.get("about"),location:this.get("location"),url:this.get("url")}})},toRegisterJSON:function(){return e.pick(this.toJSON(),"display_name","email","password")},isSession:function(e){return e.user.id&&e.user.id===this.id},isEditable:function(e){return this.isSession(e)&&!this.get("remote")},toJSON:function(e){e=e||{};var t=o.prototype.toJSON.call(this),n=this.collection&&this.collection.thread;return t.thread.canModerate=!!n&&n.isModerator(this),e.session&&(t.isSession=this.isSession(e.session),t.isEditable=this.isEditable(e.session)),t},_changeFollowState:function(e){this.set("isFollowing",e);var t="users/"+(e?"follow":"unfollow"),n=this;s.call(t+".json",{data:{target:this.id},method:"POST",success:function(e){n.trigger("sync",n,e,{})}})},follow:function(){this._changeFollowState(!0)},unfollow:function(){this._changeFollowState(!1)},toggleFollowState:function(){this._changeFollowState(!this.get("isFollowing"))}},{MIN_PASSWORD_LEN:6,MIN_NAME_LEN:2,MAX_NAME_LEN:30,MAX_LOCATION_LEN:255,MAX_URL_LEN:200});return c}),define("core/models/Session",["underscore","backbone","core/api","core/models/BaseUser","core/models/User"],function(e,t,n,i,a){var s=t.Model.extend({initialize:function(){this.user=new this.getAnonUserInstance},setUser:function(e){this.user&&this.stopListening(this.user),this.user=e,this.listenTo(e,"all",this.trigger),this.trigger("change:id",e)},isLoggedOut:function(){return!this.isLoggedIn()},isLoggedIn:function(){return!!this.user.get("id")},fetch:function(t){t=t||{};var i={};return i["_"+(new Date).getTime()]=1,n.call("users/details.json",{data:i,success:e.bind(function(e){e=e.response,e.id&&this.setUser(this.getUserInstance(e)),t.success&&t.success(e),t.complete&&t.complete(e)},this),error:e.bind(function(e){t.error&&t.error(e),t.complete&&t.complete(e)},this)})},getAnonUserInstance:function(e){return new i(e)},getUserInstance:function(e){return new a(e)}});return s}),define("home/models/common/UniqueModel",["underscore"],function(e){var t=function(e,n,i){var a=t.pool(e),s=n&&n[e.prototype.idAttribute];if(!s)return new e(n,i);var o=t.get(e,s);return o?a[s].set(n):a[s]=new e(n,i),a[s]};return t.pool={},t.pool=function(e){var n=t.pool[e.__type__];if(!n)throw Error("Model not registered. Use UniqueModel.addType");return n},t.get=function(e,n){return t.pool(e)[n]},t.set=function(e,n){var i=t.pool(e),a=n&&n.get(e.prototype.idAttribute);if(!a)return n;var s=t.get(e,a);return s?s.set(n.attributes):s=i[a]=n,s},t.addType=function(e,n){n.__type__&&t.pool[e]||(n.__type__=e,t.pool[e]={})},t.boundModel=function(n){var i=e.bind(t,t,n);return i.prototype=n.prototype,i},t}),define("home/utils/backboneUtils",["jquery"],function(e){return{memoizedFetch:function(){if(this.fetchPromise)return this.fetchPromise;var e=this;return this.fetchPromise=this.constructor.__super__.fetch.apply(this,arguments).then(function(){return e.fetchPromise=null,e.fetched=!0,arguments},function(t){return e.fetchPromise=null,t})},getPromiseFor:function(t,n){var i=e.Deferred();return t.get(n)?i.resolve(t.get(n)):t.once("change:"+n,function(e,t){i.resolve(t)}),i.promise()}}}),define("home/models/common/BaseUser",["backbone","core/config"],function(e,t){var n=e.Model.extend({defaults:{id:null,username:null,name:null,avatar:{cache:t.urls.avatar.generic,permalink:t.urls.avatar.generic},joinedAt:null,isAnonymous:!0,numFollowers:null,numFollowing:null,numPosts:null,numForumsFollowing:null}});return n}),define("home/models/User",["underscore","backbone","home/utils/backboneUtils","home/models/common/UniqueModel","home/models/common/BaseUser","core/api","core/config"],function(e,t,n,i,a,s,o){var r=a.extend({defaults:e.defaults({followUrl:s.getURL("users/follow"),unfollowUrl:s.getURL("users/unfollow")},a.prototype.defaults),idAttribute:"username",url:s.getURL("users/details"),initialize:function(){var e=require("home/models/Session");this.session=e.get(),this.listenTo(this,"followed:user",this.handleFollowedUser),this.listenTo(this,"unfollowed:user",this.handleUnfollowedUser),this.listenTo(this,"followed:forum",this.handleFollowedForum),this.listenTo(this,"unfollowed:forum",this.handleUnfollowedForum)},shouldFetch:function(){return!(this.get("name")&&this.has("numFollowers")&&this.has("numFollowing")&&this.has("numForumsFollowing"))},isSessionUser:function(){return this===this.session.user},parse:function(e){return e.response||e},fetch:function(e){return e=e||{},e.data=e.data||{},e.data.user=e.data.user||this.get("username")?"username:"+this.get("username"):this.get("id"),n.memoizedFetch.call(this,e)},toggleFollowed:function(){return this.get("isFollowing")?this.unfollow():this.follow()},_changeFollowingState:function(e){var n=this;return t.ajax({url:e,type:"POST",data:{target:n.get("id")}})},follow:function(){this.set({isFollowing:!0,numFollowers:this.get("numFollowers")+1});var e=this.session.user;return e.trigger("followed:user",this),this._changeFollowingState(this.get("followUrl"))},unfollow:function(){this.set({isFollowing:!1,numFollowers:Math.max(0,this.get("numFollowers")-1)});var e=this.session.user;return e.trigger("unfollowed:user",this),this._changeFollowingState(this.get("unfollowUrl"))},removeFollower:function(e){if(this.isSessionUser()){var t=this.get("numFollowers")-1;return this.set("numFollowers",Math.max(0,t)),s.call("users/removeFollower",{type:"POST",data:{follower:e.get("id")}})}},handleFollowedUser:function(){this.set({numFollowing:this.get("numFollowing")+1})},handleUnfollowedUser:function(){this.set({numFollowing:Math.max(0,this.get("numFollowing")-1)})
},handleFollowedForum:function(){this.set({numForumsFollowing:this.get("numForumsFollowing")+1})},handleUnfollowedForum:function(){this.set({numForumsFollowing:Math.max(0,this.get("numForumsFollowing")-1)})},getDisplayName:function(e){return e=e||this.attributes,e.name||e.username||"Guest"},toJSON:function(){var e=this.constructor.__super__.toJSON.apply(this,arguments);return e.isRegistered=!e.isAnonymous,e.displayName=this.getDisplayName(e),e.avatar.cache=e.avatar.cache||o.urls.avatar.generic,e}});return i.addType("User",r),r}),define("core/collections/PaginatedCollection",["underscore","backbone"],function(e,t){var n=t.Collection.extend({PER_PAGE:30,initialize:function(e,t){t=t||{},this.cursor=t.cursor||{}},fetch:function(n){return n=n||{},n.data=e.defaults(n.data||{},{cursor:n.cursor||"",limit:n.PER_PAGE||this.PER_PAGE}),t.Collection.prototype.fetch.call(this,n)},hasNext:function(){return this.cursor.hasNext},more:function(t){function n(e){a.push(e)}var i=this;if(t=t||{},!this.cursor.hasNext)return void i.trigger("nodata");var a=[];this.on("add",n),this.fetch(e.extend({},t,{add:!0,remove:!1,cursor:this.cursor.next,limit:this.PER_PAGE,success:function(){i.trigger("add:many",a,i,t),i.off("add",n),t.success&&t.success.apply(this,arguments)}}))},parse:function(e){return this.cursor=e.cursor||{hasNext:!1},e.response},getLength:function(){return this.length}});return n}),define("home/collections/UserCollection",["underscore","require","core/collections/PaginatedCollection","home/models/common/UniqueModel","home/models/User"],function(e,t,n,i,a){var s=n.extend({model:i.boundModel(a),initialize:function(e,t){t&&t.url&&(this.url=t.url)}});return s}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw Error("Implement me")}}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(e){vt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function a(e,t){var n=!0;return d(function(){return n&&(i(e),n=!1),t.apply(this,arguments)},t)}function s(e,t){pn[e]||(i(t),pn[e]=!0)}function o(e,t){return function(n){return p(e.call(this,n),t)}}function r(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function l(){}function c(e,t){t!==!1&&M(e),h(this,e),this._d=new Date(+e._d)}function u(e){var t=C(e),n=t.year||0,i=t.quarter||0,a=t.month||0,s=t.week||0,o=t.day||0,r=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*r,this._days=+o+7*s,this._months=+a+3*i+12*n,this._data={},this._locale=vt.localeData(),this._bubble()}function d(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function h(t,n){var i,a,s;if(e!==n._isAMomentObject&&(t._isAMomentObject=n._isAMomentObject),e!==n._i&&(t._i=n._i),e!==n._f&&(t._f=n._f),e!==n._l&&(t._l=n._l),e!==n._strict&&(t._strict=n._strict),e!==n._tzm&&(t._tzm=n._tzm),e!==n._isUTC&&(t._isUTC=n._isUTC),e!==n._offset&&(t._offset=n._offset),e!==n._pf&&(t._pf=n._pf),e!==n._locale&&(t._locale=n._locale),Dt.length>0)for(i in Dt)a=Dt[i],s=n[a],e!==s&&(t[a]=s);return t}function m(e){return 0>e?Math.ceil(e):Math.floor(e)}function p(e,t,n){for(var i=""+Math.abs(e),a=e>=0;t>i.length;)i="0"+i;return(a?n?"+":"":"-")+i}function f(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function g(e,t){var n;return t=N(t,e),e.isBefore(t)?n=f(e,t):(n=f(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function v(e,t){return function(n,i){var a,o;return null===i||isNaN(+i)||(s(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,a=vt.duration(n,i),w(this,a,e),this}}function w(e,t,n,i){var a=t._milliseconds,s=t._days,o=t._months;i=null==i?!0:i,a&&e._d.setTime(+e._d+a*n),s&&dt(e,"Date",ut(e,"Date")+s*n),o&&ct(e,ut(e,"Month")+o*n),i&&vt.updateOffset(e,s||o)}function b(e){return"[object Array]"===Object.prototype.toString.call(e)}function y(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function x(e,t,n){var i,a=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(i=0;a>i;i++)(n&&e[i]!==t[i]||!n&&S(e[i])!==S(t[i]))&&o++;return o+s}function k(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=rn[e]||ln[t]||t}return e}function C(e){var t,n,i={};for(n in e)e.hasOwnProperty(n)&&(t=k(n),t&&(i[t]=e[n]));return i}function T(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}vt[t]=function(a,s){var o,r,l=vt._locale[t],c=[];if("number"==typeof a&&(s=a,a=e),r=function(e){var t=vt().utc().set(i,e);return l.call(vt._locale,t,a||"")},null!=s)return r(s);for(o=0;n>o;o++)c.push(r(o));return c}}function S(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function _(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function E(e,t,n){return st(vt([e,11,31+t-n]),t,n).week}function F(e){return P(e)?366:365}function P(e){return e%4===0&&e%100!==0||e%400===0}function M(e){var t;e._a&&-2===e._pf.overflow&&(t=0>e._a[Tt]||e._a[Tt]>11?Tt:1>e._a[St]||e._a[St]>_(e._a[Ct],e._a[Tt])?St:0>e._a[_t]||e._a[_t]>23?_t:0>e._a[Et]||e._a[Et]>59?Et:0>e._a[Ft]||e._a[Ft]>59?Ft:0>e._a[Pt]||e._a[Pt]>999?Pt:-1,e._pf._overflowDayOfYear&&(Ct>t||t>St)&&(t=St),e._pf.overflow=t)}function D(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&0>e._pf.overflow&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function V(e){return e?e.toLowerCase().replace("_","-"):e}function A(e){for(var t,n,i,a,s=0;e.length>s;){for(a=V(e[s]).split("-"),t=a.length,n=V(e[s+1]),n=n?n.split("-"):null;t>0;){if(i=R(a.slice(0,t).join("-")))return i;if(n&&n.length>=t&&x(a,n,!0)>=t-1)break;t--}s++}return null}function R(e){var t=null;if(!Mt[e]&&Vt)try{t=vt.locale(),require("./locale/"+e),vt.locale(t)}catch(n){}return Mt[e]}function N(e,t){return t._isUTC?vt(e).zone(t._offset||0):vt(e).local()}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function O(e){var t,n,i=e.match(Ut);for(t=0,n=i.length;n>t;t++)i[t]=mn[i[t]]?mn[i[t]]:U(i[t]);return function(a){var s="";for(t=0;n>t;t++)s+=i[t]instanceof Function?i[t].call(a,e):i[t];return s}}function I(e,t){return e.isValid()?(t=H(t,e.localeData()),cn[t]||(cn[t]=O(t)),cn[t](e)):e.localeData().invalidDate()}function H(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Ot.lastIndex=0;i>=0&&Ot.test(e);)e=e.replace(Ot,n),Ot.lastIndex=0,i-=1;return e}function z(e,t){var n,i=t._strict;switch(e){case"Q":return Gt;case"DDDD":return Xt;case"YYYY":case"GGGG":case"gggg":return i?Kt:zt;case"Y":case"G":case"g":return Zt;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?Qt:Lt;case"S":if(i)return Gt;case"SS":if(i)return Jt;case"SSS":if(i)return Xt;case"DDD":return Ht;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return $t;case"a":case"A":return t._locale._meridiemParse;case"X":return Wt;case"Z":case"ZZ":return qt;case"T":return Bt;case"SSSS":return jt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Jt:It;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return It;case"Do":return Yt;default:return n=RegExp(J(G(e.replace("\\","")),"i"))}}function L(e){e=e||"";var t=e.match(qt)||[],n=t[t.length-1]||[],i=(n+"").match(sn)||["-",0,0],a=+(60*i[1])+S(i[2]);return"+"===i[0]?-a:a}function j(e,t,n){var i,a=n._a;switch(e){case"Q":null!=t&&(a[Tt]=3*(S(t)-1));break;case"M":case"MM":null!=t&&(a[Tt]=S(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t),null!=i?a[Tt]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(a[St]=S(t));break;case"Do":null!=t&&(a[St]=S(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=S(t));break;case"YY":a[Ct]=vt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":a[Ct]=S(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":a[_t]=S(t);break;case"m":case"mm":a[Et]=S(t);break;case"s":case"ss":a[Ft]=S(t);break;case"S":case"SS":case"SSS":case"SSSS":a[Pt]=S(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=L(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=S(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=vt.parseTwoDigitYear(t)}}function $(e){var n,i,a,s,o,r,l;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(o=1,r=4,i=t(n.GG,e._a[Ct],st(vt(),1,4).year),a=t(n.W,1),s=t(n.E,1)):(o=e._locale._week.dow,r=e._locale._week.doy,i=t(n.gg,e._a[Ct],st(vt(),o,r).year),a=t(n.w,1),null!=n.d?(s=n.d,o>s&&++a):s=null!=n.e?n.e+o:o),l=ot(i,a,s,r,o),e._a[Ct]=l.year,e._dayOfYear=l.dayOfYear}function q(e){var n,i,a,s,o=[];if(!e._d){for(a=W(e),e._w&&null==e._a[St]&&null==e._a[Tt]&&$(e),e._dayOfYear&&(s=t(e._a[Ct],a[Ct]),e._dayOfYear>F(s)&&(e._pf._overflowDayOfYear=!0),i=tt(s,0,e._dayOfYear),e._a[Tt]=i.getUTCMonth(),e._a[St]=i.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=o[n]=a[n];for(;7>n;n++)e._a[n]=o[n]=null==e._a[n]?2===n?1:0:e._a[n];e._d=(e._useUTC?tt:et).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function B(e){var t;e._d||(t=C(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],q(e))}function W(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Y(t){if(t._f===vt.ISO_8601)return K(t),e;t._a=[],t._pf.empty=!0;var n,i,a,s,o,r=""+t._i,l=r.length,c=0;for(a=H(t._f,t._locale).match(Ut)||[],n=0;a.length>n;n++)s=a[n],i=(r.match(z(s,t))||[])[0],i&&(o=r.substr(0,r.indexOf(i)),o.length>0&&t._pf.unusedInput.push(o),r=r.slice(r.indexOf(i)+i.length),c+=i.length),mn[s]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(s),j(s,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=l-c,r.length>0&&t._pf.unusedInput.push(r),t._isPm&&12>t._a[_t]&&(t._a[_t]+=12),t._isPm===!1&&12===t._a[_t]&&(t._a[_t]=0),q(t),M(t)}function G(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,a){return t||n||i||a})}function J(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function X(t){var i,a,s,o,r;if(0===t._f.length)return t._pf.invalidFormat=!0,t._d=new Date(0/0),e;for(o=0;t._f.length>o;o++)r=0,i=h({},t),i._pf=n(),i._f=t._f[o],Y(i),D(i)&&(r+=i._pf.charsLeftOver,r+=10*i._pf.unusedTokens.length,i._pf.score=r,(null==s||s>r)&&(s=r,a=i));d(t,a||i)}function K(e){var t,n,i=e._i,a=en.exec(i);if(a){for(e._pf.iso=!0,t=0,n=nn.length;n>t;t++)if(nn[t][1].exec(i)){e._f=nn[t][0]+(a[6]||" ");break}for(t=0,n=an.length;n>t;t++)if(an[t][1].exec(i)){e._f+=an[t][0];break}i.match(qt)&&(e._f+="Z"),Y(e)}else e._isValid=!1}function Q(e){K(e),e._isValid===!1&&(delete e._isValid,vt.createFromInputFallback(e))}function Z(t){var n,i=t._i;i===e?t._d=new Date:y(i)?t._d=new Date(+i):null!==(n=At.exec(i))?t._d=new Date(+n[1]):"string"==typeof i?Q(t):b(i)?(t._a=i.slice(0),q(t)):"object"==typeof i?B(t):"number"==typeof i?t._d=new Date(i):vt.createFromInputFallback(t)}function et(e,t,n,i,a,s,o){var r=new Date(e,t,n,i,a,s,o);return 1970>e&&r.setFullYear(e),r}function tt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function nt(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function it(e,t,n,i,a){return a.relativeTime(t||1,!!n,e,i)}function at(e,t,n){var i=vt.duration(e).abs(),a=kt(i.as("s")),s=kt(i.as("m")),o=kt(i.as("h")),r=kt(i.as("d")),l=kt(i.as("M")),c=kt(i.as("y")),u=un.s>a&&["s",a]||1===s&&["m"]||un.m>s&&["mm",s]||1===o&&["h"]||un.h>o&&["hh",o]||1===r&&["d"]||un.d>r&&["dd",r]||1===l&&["M"]||un.M>l&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=n,it.apply({},u)}function st(e,t,n){var i,a=n-t,s=n-e.day();return s>a&&(s-=7),a-7>s&&(s+=7),i=vt(e).add(s,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ot(e,t,n,i,a){var s,o,r=tt(e,0,1).getUTCDay();return r=0===r?7:r,n=null!=n?n:a,s=a-r+(r>i?7:0)-(a>r?7:0),o=7*(t-1)+(n-a)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:F(e-1)+o}}function rt(t){var n=t._i,i=t._f;return t._locale=t._locale||vt.localeData(t._l),null===n||i===e&&""===n?vt.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),vt.isMoment(n)?new c(n,!0):(i?b(i)?X(t):Y(t):Z(t),new c(t)))}function lt(e,t){var n,i;if(1===t.length&&b(t[0])&&(t=t[0]),!t.length)return vt();for(n=t[0],i=1;t.length>i;++i)t[i][e](n)&&(n=t[i]);return n}function ct(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),_(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function ut(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function dt(e,t,n){return"Month"===t?ct(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function ht(e,t){return function(n){return null!=n?(dt(this,e,n),vt.updateOffset(this,t),this):ut(this,e)}}function mt(e){return 400*e/146097}function pt(e){return 146097*e/400}function ft(e){vt.duration.fn[e]=function(){return this._data[e]}}function gt(e){"undefined"==typeof ender&&(wt=xt.moment,xt.moment=e?a("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",vt):vt)}for(var vt,wt,bt,yt="2.8.1",xt="undefined"!=typeof global?global:this,kt=Math.round,Ct=0,Tt=1,St=2,_t=3,Et=4,Ft=5,Pt=6,Mt={},Dt=[],Vt="undefined"!=typeof module&&module.exports,At=/^\/?Date\((\-?\d+)/i,Rt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Nt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ut=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Ot=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,It=/\d\d?/,Ht=/\d{1,3}/,zt=/\d{1,4}/,Lt=/[+\-]?\d{1,6}/,jt=/\d+/,$t=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,qt=/Z|[\+\-]\d\d:?\d\d/gi,Bt=/T/i,Wt=/[\+\-]?\d+(\.\d{1,3})?/,Yt=/\d{1,2}/,Gt=/\d/,Jt=/\d\d/,Xt=/\d{3}/,Kt=/\d{4}/,Qt=/[+-]?\d{6}/,Zt=/[+-]?\d+/,en=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tn="YYYY-MM-DDTHH:mm:ssZ",nn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],an=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],sn=/([\+\-]|\d\d)/gi,on=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),rn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ln={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},cn={},un={s:45,m:45,h:22,d:26,M:11},dn="DDD w W M D d".split(" "),hn="M D H h m s w W".split(" "),mn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return p(this.year()%100,2)},YYYY:function(){return p(this.year(),4)},YYYYY:function(){return p(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+p(Math.abs(e),6)},gg:function(){return p(this.weekYear()%100,2)},gggg:function(){return p(this.weekYear(),4)},ggggg:function(){return p(this.weekYear(),5)},GG:function(){return p(this.isoWeekYear()%100,2)},GGGG:function(){return p(this.isoWeekYear(),4)},GGGGG:function(){return p(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return S(this.milliseconds()/100)},SS:function(){return p(S(this.milliseconds()/10),2)},SSS:function(){return p(this.milliseconds(),3)},SSSS:function(){return p(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+p(S(e/60),2)+":"+p(S(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+p(S(e/60),2)+p(S(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},pn={},fn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];dn.length;)bt=dn.pop(),mn[bt+"o"]=r(mn[bt],bt);for(;hn.length;)bt=hn.pop(),mn[bt+bt]=o(mn[bt],2);mn.DDDD=o(mn.DDD,3),d(l.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=vt.utc([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=vt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var a=this._relativeTime[n];return"function"==typeof a?a(e,t,n,i):a.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return st(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),vt=function(t,i,a,s){var o;return"boolean"==typeof a&&(s=a,a=e),o={},o._isAMomentObject=!0,o._i=t,o._f=i,o._l=a,o._strict=s,o._isUTC=!1,o._pf=n(),rt(o)},vt.suppressDeprecationWarnings=!1,vt.createFromInputFallback=a("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),vt.min=function(){var e=[].slice.call(arguments,0);return lt("isBefore",e)},vt.max=function(){var e=[].slice.call(arguments,0);return lt("isAfter",e)},vt.utc=function(t,i,a,s){var o;return"boolean"==typeof a&&(s=a,a=e),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=a,o._i=t,o._f=i,o._strict=s,o._pf=n(),rt(o).utc()},vt.unix=function(e){return vt(1e3*e)},vt.duration=function(e,t){var n,i,a,s,o=e,r=null;return vt.isDuration(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(r=Rt.exec(e))?(n="-"===r[1]?-1:1,o={y:0,d:S(r[St])*n,h:S(r[_t])*n,m:S(r[Et])*n,s:S(r[Ft])*n,ms:S(r[Pt])*n}):(r=Nt.exec(e))?(n="-"===r[1]?-1:1,a=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},o={y:a(r[2]),M:a(r[3]),d:a(r[4]),h:a(r[5]),m:a(r[6]),s:a(r[7]),w:a(r[8])}):"object"==typeof o&&("from"in o||"to"in o)&&(s=g(vt(o.from),vt(o.to)),o={},o.ms=s.milliseconds,o.M=s.months),i=new u(o),vt.isDuration(e)&&e.hasOwnProperty("_locale")&&(i._locale=e._locale),i},vt.version=yt,vt.defaultFormat=tn,vt.ISO_8601=function(){},vt.momentProperties=Dt,vt.updateOffset=function(){},vt.relativeTimeThreshold=function(t,n){return un[t]===e?!1:n===e?un[t]:(un[t]=n,!0)},vt.lang=a("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return vt.locale(e,t)}),vt.locale=function(t,n){var i;return t&&(i=e!==n?vt.defineLocale(t,n):vt.localeData(t),i&&(vt.duration._locale=vt._locale=i)),vt._locale._abbr},vt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Mt[e]||(Mt[e]=new l),Mt[e].set(t),vt.locale(e),Mt[e]):(delete Mt[e],null)},vt.langData=a("moment.langData is deprecated. Use moment.localeData instead.",function(e){return vt.localeData(e)}),vt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return vt._locale;if(!b(e)){if(t=R(e))return t;e=[e]}return A(e)},vt.isMoment=function(e){return e instanceof c||null!=e&&e.hasOwnProperty("_isAMomentObject")},vt.isDuration=function(e){return e instanceof u};for(bt=fn.length-1;bt>=0;--bt)T(fn[bt]);vt.normalizeUnits=function(e){return k(e)},vt.invalid=function(e){var t=vt.utc(0/0);return null!=e?d(t._pf,e):t._pf.userInvalidated=!0,t},vt.parseZone=function(){return vt.apply(null,arguments).parseZone()},vt.parseTwoDigitYear=function(e){return S(e)+(S(e)>68?1900:2e3)},d(vt.fn=c.prototype,{clone:function(){return vt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=vt(this).utc();return 0<e.year()&&e.year()<=9999?I(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):I(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return D(this)},isDSTShifted:function(){return this._a?this.isValid()&&x(this._a,(this._isUTC?vt.utc(this._a):vt(this._a)).toArray())>0:!1},parsingFlags:function(){return d({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(e){var t=I(this,e||vt.defaultFormat);return this.localeData().postformat(t)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(e,t,n){var i,a,s=N(e,this),o=6e4*(this.zone()-s.zone());return t=k(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+s.daysInMonth()),a=12*(this.year()-s.year())+(this.month()-s.month()),a+=(this-vt(this).startOf("month")-(s-vt(s).startOf("month")))/i,a-=6e4*(this.zone()-vt(this).startOf("month").zone()-(s.zone()-vt(s).startOf("month").zone()))/i,"year"===t&&(a/=12)):(i=this-s,a="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-o)/864e5:"week"===t?(i-o)/6048e5:i),n?a:m(a)},from:function(e,t){return vt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(vt(),e)},calendar:function(e){var t=e||vt(),n=N(t,this).startOf("day"),i=this.diff(n,"days",!0),a=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this))},isLeapYear:function(){return P(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=nt(e,this.localeData()),this.add(e-t,"d")):t},month:ht("Month",!0),startOf:function(e){switch(e=k(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=k(e),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(t,n){return n=e!==n?n:"millisecond",+this.clone().startOf(n)>+vt(t).startOf(n)},isBefore:function(t,n){return n=e!==n?n:"millisecond",+this.clone().startOf(n)<+vt(t).startOf(n)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+N(e,this).startOf(t)},min:a("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=vt.apply(null,arguments),this>e?this:e}),max:a("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=vt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,i=this._offset||0;return null==e?this._isUTC?i:this._d.getTimezoneOffset():("string"==typeof e&&(e=L(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._d.getTimezoneOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==e&&(!t||this._changeInProgress?w(this,vt.duration(i-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,vt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?vt(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return _(this.year(),this.month())},dayOfYear:function(e){var t=kt((vt(this).startOf("day")-vt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=st(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=st(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=st(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return E(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return E(this.year(),e.dow,e.doy)},get:function(e){return e=k(e),this[e]()},set:function(e,t){return e=k(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){return t===e?this._locale._abbr:(this._locale=vt.localeData(t),this)},lang:a("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():(this._locale=vt.localeData(t),this)}),localeData:function(){return this._locale}}),vt.fn.millisecond=vt.fn.milliseconds=ht("Milliseconds",!1),vt.fn.second=vt.fn.seconds=ht("Seconds",!1),vt.fn.minute=vt.fn.minutes=ht("Minutes",!1),vt.fn.hour=vt.fn.hours=ht("Hours",!0),vt.fn.date=ht("Date",!0),vt.fn.dates=a("dates accessor is deprecated. Use date instead.",ht("Date",!0)),vt.fn.year=ht("FullYear",!0),vt.fn.years=a("years accessor is deprecated. Use year instead.",ht("FullYear",!0)),vt.fn.days=vt.fn.day,vt.fn.months=vt.fn.month,vt.fn.weeks=vt.fn.week,vt.fn.isoWeeks=vt.fn.isoWeek,vt.fn.quarters=vt.fn.quarter,vt.fn.toJSON=vt.fn.toISOString,d(vt.duration.fn=u.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,a=this._days,s=this._months,o=this._data,r=0;o.milliseconds=i%1e3,e=m(i/1e3),o.seconds=e%60,t=m(e/60),o.minutes=t%60,n=m(t/60),o.hours=n%24,a+=m(n/24),r=m(mt(a)),a-=m(pt(r)),s+=m(a/30),a%=30,r+=m(s/12),s%=12,o.days=a,o.months=s,o.years=r},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return m(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*S(this._months/12)},humanize:function(e){var t=at(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=vt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=vt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=k(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=k(e),t=this._days+this._milliseconds/864e5,"month"===e||"year"===e)return n=this._months+12*mt(t),"month"===e?n:n/12;switch(t+=pt(this._months/12),e){case"week":return t/7;case"day":return t;case"hour":return 24*t;case"minute":return 24*t*60;case"second":return 24*t*60*60;case"millisecond":return 24*t*60*60*1e3;default:throw Error("Unknown unit "+e)}},lang:vt.fn.lang,locale:vt.fn.locale,toIsoString:a("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),a=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);
return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||a||s?"T":"")+(i?i+"H":"")+(a?a+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}});for(bt in on)on.hasOwnProperty(bt)&&ft(bt.toLowerCase());vt.duration.fn.asMilliseconds=function(){return this.as("ms")},vt.duration.fn.asSeconds=function(){return this.as("s")},vt.duration.fn.asMinutes=function(){return this.as("m")},vt.duration.fn.asHours=function(){return this.as("h")},vt.duration.fn.asDays=function(){return this.as("d")},vt.duration.fn.asWeeks=function(){return this.as("weeks")},vt.duration.fn.asMonths=function(){return this.as("M")},vt.duration.fn.asYears=function(){return this.as("y")},vt.locale("en",{ordinal:function(e){var t=e%10,n=1===S(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Vt?module.exports=vt:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(xt.moment=wt),vt}),gt(!0)):gt()}.call(this),define("core/time",[],function(){function e(e){return e.indexOf("+")>=0?e:e+"+00:00"}var t="YYYY-MM-DDTHH:mm:ssZ";return{ISO_8601:t,assureTzOffset:e}}),define("core/advice",["underscore"],function(e){function t(){e.each(["before","after","around"],function(e){this[e]=function(t,i){return this[t]="function"==typeof this[t]?n[e](this[t],i):i}},this)}var n={around:function(t,n){return function(){var i=e.toArray(arguments);return n.apply(this,[e.bind(t,this)].concat(i))}},before:function(t,i){return n.around(t,function(){var t=e.toArray(arguments),n=t.shift();return i.apply(this,t),n.apply(this,t)})},after:function(t,i){return n.around(t,function(){var t=e.toArray(arguments),n=t.shift(),a=n.apply(this,t);return i.apply(this,t),a})}};return{withAdvice:t}}),define("core/models/mixins",["underscore","moment","core/time"],function(e,t,n){function i(){this._getCreatedMoment=e.memoize(function(){var e=this.get("createdAt");if(e)return t(n.assureTzOffset(e),n.ISO_8601)},function(){return this.get("createdAt")}),this.getRelativeCreatedAt=function(){var e=this._getCreatedMoment();return e&&e.from(+new Date)},this.getFormattedCreatedAt=e.memoize(function(){var e=this._getCreatedMoment();return e&&e.format("LLLL")},function(){return this.get("createdAt")})}return{withCreatedAt:i}}),define("core/collections/UserCollection",["underscore","backbone","core/api","core/models/User"],function(e,t,n,i){var a=t.Collection.extend({model:i,initialize:function(e,n){t.Collection.prototype.initialize.apply(this,arguments),this.thread=n&&n.thread}});return a}),define("core/collections/UpvotersUserCollection",["underscore","backbone","core/api","core/collections/UserCollection"],function(e,t,n,i){var a=i.extend({LIMIT:50,url:function(){return n.getURL("posts/listUsersVotedPost")},initialize:function(e,t){this.postId=t.postId,this.threadId=t.threadId},fetch:function(n){return t.Collection.prototype.fetch.call(this,e.extend({data:{post:this.postId,thread:this.threadId,vote:1,limit:this.LIMIT}},n))}});return a}),define("core/models/Vote",["backbone"],function(e){var t=e.Model.extend({defaults:{score:0}});return t}),define("core/collections/VoteCollection",["backbone","core/models/Vote"],function(e,t){var n=e.Collection.extend({model:t});return n}),define("core/models/Post",["jquery","underscore","backbone","moment","core/api","core/strings","core/time","core/utils","core/advice","core/models/mixins","core/models/User","core/collections/UserCollection","core/collections/UpvotersUserCollection","core/collections/VoteCollection"],function(e,t,n,i,a,s,o,r,l,c,u,d,h,m){var p=s.get,f=n.Model.extend({upvotersCollectionClass:h,defaults:function(){return{createdAt:i().format(o.ISO_8601),dislikes:0,isApproved:!0,isDeleted:!1,isEdited:!1,isFlagged:!1,isFlaggedByUser:!1,isHighlighted:!1,isRealtime:!1,isImmediateReply:!1,isMinimized:null,hasMedia:!1,message:null,raw_message:null,likes:0,media:[],parent:null,points:0,depth:0,userScore:0}},initialize:function(){this.votes=new m},messageText:function(){var e=this.get("message");return r.strip(e)},relatedIds:function(){var e=this.get("forum");t.isObject(e)&&(e=e.id);var n=this.get("thread");return t.isObject(n)&&(n=n.id),{forum:e,thread:n,post:this.id}},permalink:function(e,t){var n=this.id;if(!n||!e)return"";var i=t!==!1&&e.currentUrl||e.permalink(),a=document.createElement("a");return a.href=i,a.hash="#comment-"+n,a.href},twitterText:function(e){var t=140,n=this.author.get("name")||this.author.get("username");t-=n.length+3,t-=e.length+1,t-=2;var i=r.niceTruncate(this.messageText(),t);return'"'+i+'" — '+n},toJSON:function(e){var t=n.Model.prototype.toJSON.call(this);if(e){var i=e.session,a=e.thread;t.canBeEdited=this.canBeEdited(i,a),t.canBeRepliedTo=this.canBeRepliedTo(i,a),t.canBeShared=this.canBeShared(),t.permalink=this.permalink(a)}return t.isMinimized=this.isMinimized(),t.relativeCreatedAt=this.getRelativeCreatedAt(),t.formattedCreatedAt=this.getFormattedCreatedAt(),t.cid=this.cid,t},isPublic:function(){return this.get("isHighlighted")||this.get("isSponsored")?!0:this.get("isDeleted")?!1:this.get("isApproved")},isMinimized:function(){return this.get("isHighlighted")?!1:this.get("isMinimized")===!1?!1:!this.get("isApproved")},isAuthorSessionUser:function(){return!1},canBeEdited:function(){return!1},canBeRepliedTo:function(){return!1},canBeShared:function(){return!1},validate:function(e){if(!this.id&&!e.id){if(t.isString(e.raw_message)){if(""===e.raw_message)return p("Comments can't be blank.");if(2>e.raw_message.length)return p("Comments must have at least 2 characters.")}return""===e.author_email&&""===e.author_name?p("Please sign in or enter a name and email address."):""===e.author_email||""===e.author_name?p("Please enter both a name and email address."):t.isString(e.author_email)&&!this.validateEmail(e.author_email)?p("Invalid email address format."):void 0}},validateEmail:function(e){return r.validateEmail(e)},report:function(){this.set("isFlagged",!0),a.call("posts/report.json",{data:{post:this.id},method:"POST"})},_highlight:function(e){this.set("isHighlighted",e),a.call("posts/"+(e?"highlight":"unhighlight")+".json",{data:{post:this.id},method:"POST"})},highlight:function(){this._highlight(!0)},unhighlight:function(){this._highlight(!1)},getThreadId:function(){return this.get("thread")},getUpvotersUserCollection:t.memoize(function(){var e=this.upvotersCollectionClass;return new e(void 0,{postId:this.id,threadId:this.getThreadId()})},function(){return this.id}),_vote:function(e,t,n){var i=e-t,a={likes:this.get("likes"),dislikes:this.get("dislikes"),points:this.get("points")};return 0===i?i:(e>0?(a.likes+=e,a.dislikes+=t):0>e?(a.dislikes-=e,a.likes-=t):t>0?a.likes-=t:a.dislikes+=t,a.points+=i,n&&this.getUpvotersUserCollection()[e>0?"add":"remove"](n),this.set(a),i)},vote:function(e){var t=this,n=t._vote(e,t.get("userScore"));0!==n&&(t.set("userScore",e),a.call("posts/vote.json",{data:{post:t.id,vote:e},method:"POST",success:function(n){t.votes.add({id:n.response.id,score:e},{merge:!0})}}))},_delete:function(){return this.set({isApproved:!1,isDeleted:!0}),a.call("posts/remove.json",{data:{post:this.id},method:"POST"})},spam:function(){this.set({isApproved:!1,isDeleted:!0,isSpam:!0}),this.trigger("spam"),a.call("posts/spam.json",{data:{post:this.id},method:"POST"})},_create:function(e,t){var n=this,i=e.attributes,s={thread:i.thread,message:i.raw_message};return i.parent&&(s.parent=i.parent),i.author_name&&(s.author_name=i.author_name,s.author_email=i.author_email),a.call("posts/create.json",{data:s,method:"POST",success:function(e){n.set(e.response),t.success&&t.success()},error:t.error})},_update:function(e,t){var n=this,i=e.attributes,s={post:i.id,message:i.raw_message};return a.call("posts/update.json",{data:s,method:"POST",success:function(e){n.set(e.response),t.success&&t.success()},error:t.error})},_read:function(e,t){var n=this;return t=t||{},a.call("posts/details.json",{data:{post:n.id},method:"GET",success:function(e){n.set(e.response),t.success&&t.success()},error:t.error})},sync:function(e,t,n){n=n||{};var i=n.error;switch(i&&(n.error=function(e){i(JSON.parse(e.responseText||"{}"))}),e){case"create":return this._create(t,n);case"update":return this._update(t,n);case"delete":return this._delete();case"read":return this._read(t,n)}}},{formatMessage:function(){var e=/(?:\r\n|\r|\n){2,}/,n=/\r\n|\r|\n/;return function(i){var a=t.chain(i.split(e)).compact().value(),s=t.map(a,function(e){return t.chain(e.split(n)).compact().map(t.escape).join("<br>").value()}).join("</p><p>");return"<p>"+s+"</p>"}}()});return c.withCreatedAt.call(f.prototype),l.withAdvice.call(f.prototype),f.withAuthor=function(e){this.after("set",function(t){t&&"string"!=typeof t&&t.author&&(this.author=new e(t.author),delete t.author)}),this.around("toJSON",function(e){var n=e.apply(this,t.rest(arguments));return this.author&&(n.author=this.author.toJSON()),n})},f.withMediaCollection=function(e){this.after("set",function(n){n&&"string"!=typeof n&&(t.isUndefined(n.media)||(this.media?this.media.reset(n.media):this.media=new e(n.media),delete n.media))}),this.around("toJSON",function(e){var n=e.apply(this,t.rest(arguments));return this.media&&(n.media=this.media.toJSON()),n})},f}),define("home/utils/datetimeUtils",["moment"],function(e){var t="YYYY-MM-DDTHH:mm:ssZ",n=function(e){return e.indexOf("+")>=0?e:e+"+00:00"},i=function(i){return i&&1/0!==i?(i=n(i),e.utc(i,t).local().fromNow()):null};return{getRelativeDatetime:i}}),define("home/templates/confirmModal",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return'<button type="button" class="btn btn-light" data-dismiss="modal">'+a(t.gettext.call(e,"Cancel",{name:"gettext",hash:{},data:i}))+'</button>\n<button type="button" class="btn btn-primary" data-dismiss="modal" data-action="confirm">'+a(t.gettext.call(e,"Confirm",{name:"gettext",hash:{},data:i}))+"</button>\n"},3:function(e,t,n,i){var a=this.escapeExpression;return'<button type="button" class="btn btn-light" data-dismiss="modal">'+a(t.gettext.call(e,"Close",{name:"gettext",hash:{},data:i}))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">\n<div class="modal-dialog">\n<div class="modal-content" data-role="content">\n</div>\n<div class="modal-footer">\n';return a=t["if"].call(e,t.eq.call(e,null!=e?e.type:e,null!=(a=null!=e?e.types:e)?a.CONFIRM_CANCEL:a,{name:"eq",hash:{},data:i}),{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=t["if"].call(e,t.eq.call(e,null!=e?e.type:e,null!=(a=null!=e?e.types:e)?a.CLOSE:a,{name:"eq",hash:{},data:i}),{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</div>\n</div>\n</div>\n"},useData:!0})}),define("home/utils/confirmModal",["jquery","home/templates/confirmModal"],function(e,t){var n={CLOSE:1,CONFIRM_CANCEL:2};return{confirmationPromise:function(i,a){i=i||n.CLOSE;var s=e.Deferred(),o=e(t({type:i,types:n})).on("hidden.bs.modal",function(){o.remove()});return o.find("[data-role=content]").html(a),o.on("click","[data-action=confirm]",function(){s.resolve()}),e("body").append(o),o.modal("show"),s.promise()},TYPES:n}}),define("home/utils/sidebarUtils",[],function(){var e={};return e.isSidebar=function(){try{return window.self!==window.top}catch(e){return!0}},e}),define("home/utils/navigationUtils",["jquery","underscore","backbone","home/utils/sidebarUtils","home/config"],function(e,t,n,i,a){var s=/^#/,o=/\/$/,r=!0,l=/^[#\/]|\s+$/g,c=function(){e("body").html('<div class="spinner"></div>'),window.top.location="https://disqus.com/profile/login/?next="+encodeURIComponent("https://disqus.com"+window.location.pathname)},u={scrollPositions:{},lastNavigateTime:null,handleLinkClicks:function(t){var n=t.currentTarget;if(!this.shouldNotHandleLinkClick(t,n)){var a=e(n),o=a.attr("href");if(s.test(o)&&n.hash)return void this.scrollToElement(t);if(i.isSidebar()||!this.matchesRoute(n))return void a.attr("target","_blank");t.preventDefault(),this.navigate(n,!0)}},coerceTrailingSlash:function(e){o.test(e.pathname)||this.navigate(decodeURI(e.pathname+"/"+e.search+e.hash),{replace:!0})},getFragmentFromLink:function(e){var t=decodeURI(e.pathname+e.search),n=a.appRoot.replace(o,"");return t.indexOf(n)||(t=t.slice(n.length)),t.replace(l,"")},isInbound:function(e){return"#"===e.href[0]||this.matchesRoute(e)},matchesRoute:function(e){var i=this.getFragmentFromLink(e);return t.any(n.history.handlers,function(e){return e.route.test(i)})},shouldNotHandleLinkClick:function(t,n){return t.isDefaultPrevented()||e(n).attr("target")||this.hasModifierKey(t)},hasModifierKey:function(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey},linkClickChangesPage:function(t,n){return"_blank"===e(n).attr("target")?!1:this.hasModifierKey(t)?!1:!this.isInbound(n)&&!r},scrollToElement:function(t){if(t){var n=e(t.currentTarget).attr("href"),i=e(n);if(i.length){t.preventDefault();var a=e("header.nav-container-outer"),s=a.height();e("body").scrollTop(i.offset().top-s)}}},navigate:function(t,i){i=i||{};var a,s=i.trigger,o="";return t.pathname&&(o=t.hash,t=this.getFragmentFromLink(t)),-1!==t.indexOf("home/user")&&(t=t.replace("home/user","by")),this.storeScrollPosition(),i.replace||(u.lastNavigateTime=e.now()),a=n.history.navigate(t+o,i),s&&this.applyScrollPosition(),a},notFoundRouteHandler:function(){u.navigate("/home/",{trigger:!0,replace:!0})},storeScrollPosition:function(){this.scrollPositions[n.history.getFragment()]=window.pageYOffset||document.documentElement.scrollTop},applyScrollPosition:function(){window.scrollTo(0,this.scrollPositions[n.history.getFragment()])},navigateToLoginOnAuthFail:function(e){if(!e.responseText)return e;var t=JSON.parse(e.responseText);return"/home/welcome"!==window.location.pathname&&(4===t.code||2===t.code&&/authenticate/.test(t.response))&&c(),e},navigateToLogin:c};return u}),define("home/utils/releaseUtils",["underscore","remote/config"],function(e,t){var n=["Jason","danielha","ro_gupta","ryanvalentin","kimskitchensink","JoeDudas","TaltonFiggins","gabalafou","SamParker","noodlezrulez","davidericfleck","NorthIsUp","nfluxx","mpattyfly","mls888","jono","tkaemming","madBYK","JimHirshfield","fuziontech","SteveRoy44","mandytong","chaseneil","iamfrancisyo","mattrobenolt","chazcb","podlipensky","qarly","macrinaivazian","met48","davidzabowski","Rsadi","ernestwaynewong","TOB_DQ_NY","kalail610","jimwaggoner","alec_schmidt","jelias19","Marjie4123","zaizhuang","caromurph","nicoleallard","ValdesJuanCarlos","annmony","brandenr","cynthiacgutierrez88","kaelibain","sayshelen","mkslattery","vexillifer","wedamija","rygreaves","Oneeyeshut7","benjaminkowalski","ProductNate","tonyhue","Bravado_General","derrickpetzold","michaelmaltese","snudelz","paulivanov","Jameslm86","min_diesel","anna_vu","colekowalski","justizin"];return{isDisqusAdmin:function(i){return e.contains(n,i.get("username"))||e.contains(t.lounge.home_other_admin_accounts,i.get("username"))}}}),define("home/utils/domUtils",["jquery"],function(e){var t=e("<div>"),n=/<\/?p>|<br\/?>/g;return{stripHtmlTags:function(e){return e=e.replace(n,"$& "),t.html(e).text()}}}),define("home/models/Forum",["underscore","backbone","require","home/models/common/UniqueModel","home/utils/backboneUtils","home/utils/domUtils","core/api"],function(e,t,n,i,a,s,o){var r=t.Model.extend({defaults:{followUrl:o.getURL("forums/follow"),unfollowUrl:o.getURL("forums/unfollow"),followed:!1},getFriendlyUrl:function(){var e=this.get("url")||"";return e.replace(/^https?:\/\//,"").replace(/\/$/,"")},initialize:function(t,n){if(!this.get("id"))throw"Forum must be initialized with an id";this.fetch=e.memoize(e.bind(this.fetch,this)),this.buildChannel(n)},buildChannel:function(t){var i=t&&t.channel||this.get("channel");if(!i)return void this.listenToOnce(this,"change:channel",e.bind(this.buildChannel,this,t));var a=n("home/models/Channel");this.initializeRelated("channel",e.defaults({primaryForum:this},t),a)},url:function(){return o.getURL("forums/details?forum="+this.get("id"))},parse:function(e){return e.response||e},shouldFetch:function(){return!this.get("name")},hasFavicon:function(){var e=(this.get("favicon")||{}).cache;return e&&!e.match(/favicon-default\.png/)},_changeFollowingState:function(e){var n=this;return t.ajax({url:e,type:"POST",data:{target:n.get("id")},success:function(){n.trigger("sync:change:followed",n,n.get("followed"))}})},follow:function(){this.set("followed",!0);var e=n("home/models/Session"),t=e.get(),i=t.user;return i.trigger("followed:forum",this),this._changeFollowingState(this.get("followUrl"))},unfollow:function(){this.set("followed",!1);var e=n("home/models/Session"),t=e.get(),i=t.user;return i.trigger("unfollowed:forum",this),this._changeFollowingState(this.get("unfollowUrl"))},toggleFollowed:function(){return this.get("followed")?this.unfollow():this.follow()},toJSON:function(){var n=t.Model.prototype.toJSON.apply(this,arguments);return e.defaults({forumRoute:this.getForumRoute()},n)},getPlainDescription:function(){var e=this.get("description");if(e)return s.stripHtmlTags(e)},getForumRoute:function(){var e=this.channel?["channel",this.channel.id]:["forum",this.id];return e.join("/")}});return i.addType("Forum",r),r}),define("home/templates/confirmDeleteThread",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="modal-header">\n<h4 class="modal-title">'+a(t.gettext.call(e,"Remove %(discussionTitle)s?",{name:"gettext",hash:{discussionTitle:t.tag.call(e,"b",{name:"tag",hash:{text:null!=e?e.title:e},data:i})},data:i}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+a(t.gettext.call(e,"Click Confirm to remove and close the discussion so it can't be easily found. This prevents new comments from being posted.",{name:"gettext",hash:{},data:i}))+"</p>\n</div>\n"},useData:!0})}),define("home/models/Thread",["underscore","backbone","home/utils/datetimeUtils","home/utils/confirmModal","home/utils/navigationUtils","home/utils/releaseUtils","home/models/common/UniqueModel","home/models/Forum","home/models/User","home/models/Post","home/templates/confirmDeleteThread","core/api","core/models/mixins"],function(e,t,n,i,a,s,o,r,l,c,u,d,h){var m=/^https:\/\/[^.]+\.disqus\.com\/thread\//,p=t.Model.extend({defaults:{id:null,forum:null,link:null,slug:null,title:null,content:{title:"",description:"",keywords:[],image:{url:"",height:"",width:""}},message:void 0,posts:0,likes:0,dislikes:0,userScore:0,canModerate:!1},initialize:function(e,n){this.initializeRelated("forum",n,r,"name"),this.listenTo(this,"change:forum",function(e,n){n instanceof t.Model||this.forum.set(n)}),this.listenTo(this,"change:author",function(e,t){this.setAuthor(t)}),this.listenTo(this,"change:message",this._clearDescriptions),this.checkUserGenerated(n)},validate:function(e){if(void 0!==e.title){if(!e.title.trim())return{attrName:"title",message:"Please enter a title for your discussion."};if(e.title.length>200)return{attrName:"title",message:"Please shorten your title."}}},checkUserGenerated:function(t){return t=t||{},this.shouldFetch()?void this.listenToOnce(this,"sync",e.bind(this.checkUserGenerated,this,t)):void(this.forum.channel&&(this.setAuthor(t.author),this.initializePost(t),this.initializeRecentPosts(t),this.set({isUserGenerated:!0})))},setAuthor:function(t){t=t||this.get("author"),this.author?e.isObject(t)&&this.author.set(t):e.isObject(t)?this.initializeRelated("author",{author:t},l):(t=this.getAuthorFromUniqueModel(t),t&&(this.author=t))},getAuthorFromUniqueModel:function(t){return e.isString(t)&&t.length?e.find(o.pool(l),function(e){return e.get("id")===t}):void 0},fetchAuthor:function(){var t,n=this.get("author");return(t=this.getAuthorFromUniqueModel(n))?(this.setAuthor(t),$.Deferred().resolve(t).promise()):(t=new l({id:n}),t.fetch().then(e.bind(function(){this.setAuthor(t.attributes)},this)))},initializePost:function(e){this.get("message")||(e.highlightedPost||this.get("highlightedPost"))&&(c||(c=require("home/models/Post")),this.initializeRelated("post",{post:e.highlightedPost||this.get("highlightedPost"),thread:this},c))},initializeRecentPosts:function(n){c||(c=require("home/models/Post")),this.recentPosts=new t.Collection(e.map(n.recentPosts,function(e){return e instanceof c?e:new o(c,e,{thread:this})},this))},getLinks:function(){var e=[];return this.get("isUserGenerated")?this.get("message")?e=this.getLinksFromMessage():this.post&&(e=this.post.getLinks()):e=[this.get("link")],e},getLinksFromMessage:e.memoize(function(){var e=$("<div>").html(this.get("message"));return e.find("a[href]").map(function(e,t){return $(t).attr("href")})},function(){return this.id}),shouldFetch:function(){return!this.get("clean_title")},url:function(e){return this.urls[e]||this.urls.read},urls:{read:d.getURL("threads/details"),create:d.getURL("threads/create"),update:d.getURL("threads/update"),"delete":d.getURL("threads/remove"),close:d.getURL("threads/close"),subscribe:d.getURL("threads/subscribe"),inviteUserGroup:d.getURL("threads/inviteUserGroup")},fetch:function(e){if(this.fetchPromise)return this.fetchPromise;e=e||{},e.data=e.data||{};var n,i;if(this.get("id"))n=this.get("id");else{if(!this.get("slug")||!(i=this.forum.id))throw"Cannot fetch thread without an id or a slug plus forum";n="slug:"+this.get("slug")}e.data.thread||(e.data.thread=n),i&&(e.data.forum=i),this.forum.shouldFetch()&&(e.data.related="forum"),this.fetchPromise=t.Model.prototype.fetch.call(this,e);var a=this;return this.fetchPromise.always(function(){a.fetchPromise=null}),this.fetchPromise},sync:function(n,i,a){var s=i.attributes;switch(a=a||{},a.url=this.url(n),a.processData=!0,a.emulateHTTP=!0,n){case"create":var o=s.forum;s.forum||(o=this.forum.id);var r={title:s.title,forum:o},l={message:s.message};a.data=e.extend(r,l,a.data);break;case"update":var c={title:s.title,message:s.message};a.data=e.extend({thread:s.id},c);break;case"delete":a.data=e.extend({thread:s.id},a.data);break;case"close":a.data=e.extend({thread:s.id},a.data),a.type="POST";break;case"subscribe":a.data=e.extend({thread:s.id},a.data),a.type="POST";break;case"inviteUserGroup":a.data=e.extend({thread:s.id},a.data),a.type="POST"}return t.sync(n,i,a)},parse:function(e){return e.response||e},toJSON:function(){var t=e.extend({},this.attributes,{forum:this.forum.toJSON(),author:this.author?this.author.toJSON():void 0});return t.link?m.test(t.link)&&(t.link=this.getDiscussionRoute()):t.slug&&(t.link=this.getDiscussionRoute()),t},getThread:function(){return this},getHostname:function(){var e=this.get("link");if(!e)return"";var t=$("<a>").attr("href",e)[0];return t.hostname||e},getRelativeCreatedAt:function(){return n.getRelativeDatetime(this.get("createdAt"))},getRelativeCommentTimestamp:function(){return n.getRelativeDatetime(this.get("most_recent_comment_timestamp"))},getMostRecentCommenter:function(){var e=this.get("most_recent_commenter");return e&&!e.isAnonymous?e:void 0},setEmbedlyData:function(e){this.set({content:{title:e.title,description:e.description,image:e.images&&e.images[0]||{},keywords:e.keywords.length?e.keywords.slice(0,3):[]}})},getImage:function(){var e;return this.get("isUserGenerated")&&(e=this.getUserGeneratedImage()),e||this.getEmbedlyImage()},getEmbedlyImage:function(){var e=this.get("content");return e&&e.image&&e.image.url?{src:e.image.url,title:this.get("title")}:void 0},getUserGeneratedImage:function(){var e=this.getMedia(),t=e&&e[0];return t&&t.thumbnailUrl?{src:t.thumbnailUrl,title:t.title}:void 0},getMedia:function(){return this.get("message")?this.get("media"):this.post?this.post.get("media"):[]},hasPreview:function(){var e=this.get("content");return!(!e||!e.image.url&&!e.description)},getDiscussionRoute:function(e){var t=["discussion",this.forum.id,this.get("slug")];return e=e||this.forum.channel,e&&(t=["channel",e.get("slug")].concat(t)),"/home/"+t.join("/")+"/"},toggleFavorited:function(){var e=this.get("userScore")?0:1,n=0===e?this.get("likes")-1:this.get("likes")+1;this.set({userScore:e,likes:n}),t.ajax({url:d.getURL("threads/vote"),type:"POST",data:{vote:e,thread:this.id}})},getDefaultDescription:function(){return this._getDescription(70)},getShortDescription:function(){return this._getDescription(50)},getLongDescription:function(){return this._getDescription(200)},getFullDescription:function(){return this._getDescription(1/0)},_getDescription:function(e){if(this.descriptions&&this.descriptions[e])return this.descriptions[e];var t;if(this.get("isUserGenerated")?this.get("message")?t=this.get("message"):this.post&&(t=this.post.get("message")):this.has("content")&&(t=this.get("content").description),!t||!e)return"";var n=this._truncate(t,e);return this._storeDescription(n,e),n},_truncate:function(e,t){var n=e.split(" "),i=n.length;if(t>=i)return e;var a,s,o;for(a=0;(t-1-a>=0||i>t+a-1)&&(s=t-1+a,o=n[s],!o||"."!==o.slice(-1))&&(s=t-1-a,o=n[s],!o||"."!==o.slice(-1));a++)s=i-1;return n.slice(0,s+1).join(" ")},_storeDescription:function(e,t){this.descriptions||(this.descriptions={}),this.descriptions[t]=e},_clearDescriptions:function(){this.descriptions={}},confirmDelete:function(){i.confirmationPromise(i.TYPES.CONFIRM_CANCEL,u(this.toJSON())).then(e.bind(function(){this.sync("delete",this).then(e.bind(this.set,this,{isDeleted:!0})),this.sync("close",this).then(e.bind(this.set,this,{isClosed:!0})),a.navigate("/home/channel/"+this.forum.channel.id+"/",{trigger:!0,replace:!0})},this))},subscribe:function(){return this.sync("subscribe",this)},inviteUserGroup:function(e){return this.sync("inviteUserGroup",this,{data:{userGroup:e}})},canEdit:function(t){var n=this.author?this.author.get("id"):this.get("author"),i=this.get("canModerate")||e.contains(t.moderatedForums,this.forum.id)||s.isDisqusAdmin(t.user);return!this.get("isDeleted")&&(i||t.user.get("id")===n)}});return o.addType("Thread",p),h.withCreatedAt.call(p.prototype),p}),define("home/collections/UpvotersUserCollection",["home/models/common/UniqueModel","home/models/User","core/collections/UpvotersUserCollection"],function(e,t,n){return n.extend({model:e.boundModel(t),parse:function(e){return e.response}})}),define("home/models/Post",["jquery","underscore","backbone","core/models/Post","home/models/common/UniqueModel","home/models/Thread","home/models/User","home/collections/UpvotersUserCollection","core/api"],function(e,t,n,i,a,s,o,r,l){var c=i.extend({upvotersCollectionClass:r,initialize:function(e,n){this.set({state:this._getPostState()}),this.initializeRelated("thread",t.extend({forum:e.forum},n),s),this.initializeRelated("author",n,o)},set:n.Model.prototype.set,toJSON:function(){return t.extend({},this.attributes,{author:this.author.toJSON(),thread:this.thread.toJSON()})},getLinks:t.memoize(function(){var t=e("<div>").html(this.get("message"));return t.find("a[href]").map(function(t,n){return e(n).attr("href")})},function(){return this.id}),getThreadId:function(){return this.thread.id},_getPostState:function(){return this.get("isSpam")?"spam":this.get("isDeleted")?"deleted":this.get("isFlagged")&&!this.get("isApproved")?"flagged":this.get("isApproved")?"visible":"pending"},vote:function(e){var t,i=this.get("likes"),a=this.get("dislikes"),s=this.get("userScore");1==e?1==s?(e=0,i--,t=0):(-1==s&&a--,i++,t=1):0>e&&(-1==s?(e=0,a--,t=0):(1==s&&i--,a++,t=-1)),this.set({likes:i,dislikes:a,userScore:t}),this.trigger("change:action:votes"),n.ajax({url:l.getURL("posts/vote"),type:"POST",data:{vote:e,post:this.id}})}});return a.addType("Post",c),c}),define("home/collections/UserPostCollection",["underscore","core/collections/PaginatedCollection","home/models/common/UniqueModel","home/models/Post","core/api"],function(e,t,n,i,a){var s=t.extend({url:a.getURL("users/listPosts"),fetch:function(n){n=n||{},n.data=n.data||{},e.extend(n.data,{related:["thread","forum"]}),t.prototype.fetch.call(this,n)},parse:function(a){return a.response=e.map(a.response,function(e){return new n(i,e,{forum:e.forum})}),t.prototype.parse.apply(this,arguments)}});return s}),define("home/collections/common/ExtensibleCollection",["underscore","backbone","core/collections/PaginatedCollection"],function(e,t,n){var i=n.extend({PER_PAGE:10,initialize:function(){n.prototype.initialize.call(this,arguments),this.once("sync",this.extendData,this),this.on("add:many",this.extendData,this),this.on("nodata",this.onNoData,this)},extendData:function(e){var n;if(e.models?n=e.models:e instanceof t.Model?(n=[e],this.once("sync",this.extendData,this)):n=e,!n.length)return this.cursor.hasNext=!1,void this.trigger("nodata");var i=0;this.extensionRequestsCount=0;do{var a=Math.min(i+10,n.length),s=n.slice(i,a);this.requestExData(s),i+=10,this.extensionRequestsCount++}while(n.length-1>=i)},getThreadFromModel:function(e){if(!e.getThread)throw"Any model that is in an ExtensibleCollection must define function getThread";return e.getThread()},requestExData:function(t,n){n=n||0;var a={};e.each(t,function(e){var t=this.getThreadFromModel(e),n=t&&t.getLinks()||[],i=1===n.length?n[0]:null;return this.shouldExtend(t,i)?(t.set({extending:!0}),void(a[i]=e)):void(t&&t.set({extending:!1}))},this);var s=e.chain(a).keys().map(escape).value();if(s.length){var o="urls="+s.join(",")+"&words=200&image_width=320";$.ajax({url:i.EXTRACT_URL,data:o,processData:!1,dataType:"jsonp",success:function(e){t.timeouts=0,this.onExtendData(e,a)},error:function(e){this.extendDataFailed(e,t,n)},context:this,timeout:3e3,complete:this.checkExtendDataComplete})}},shouldExtend:function(t,n){return t&&n&&!e.any(t.getMedia(),function(e){return e.url===n})},onExtendData:function(t,n){this.extensionRequestsCount--,e.each(t,function(e){var t=n[e.original_url];if(t){var i=this.getThreadFromModel(t);i.setEmbedlyData(e),i.set({extending:!1})}},this)},extendDataFailed:function(t,n,i){return"timeout"===t.statusText&&3>i?void this.handleTimeout(n,i):(this.trackError(t),e.each(n,function(e){var t=this.getThreadFromModel(e);t.set({extending:!1})},this),void this.extensionRequestsCount--)},handleTimeout:function(e,t){var n=require("home/utils/mixpanelUtils");n.trackError("timeout: load",null,{properties:{url:i.EXTRACT_URL}}),this.requestExData(e,t+1)},trackError:function(e){var t=require("home/utils/mixpanelUtils");t.trackError("error loading",null,{properties:{resp:e.statusText,url:i.EXTRACT_URL}})},checkExtendDataComplete:function(){this.extensionRequestsCount||this.finalizeExtendingData(this.cursor.hasNext)},finalizeExtendingData:function(e){this.trigger("extend",e)},onNoData:function(){this.finalizeExtendingData()}},{EXTRACT_URL:"//extract.services.disqus.com"});return i}),define("home/models/ActivityFeedItem",["jquery","underscore","backbone","core/api","home/models/Thread","home/utils/datetimeUtils"],function(e,t,n,i,a,s){var o=n.Model.extend({initialize:function(e,t){t.thread&&this.initializeRelated("thread",t,a),this.activities=t.activities,this.id||(this.id=o.buildId(this.activities)),this.set({isUnread:this.activities[0].get("isUnread")}),this.handleBoostEnd(),this.on("change:fixedUntil",this.handleBoostEnd)},parse:function(e){var n=e.score;return n&&(n={score:n.value,naturalScore:n.calculated||n.value,boostedScore:n.boost,fixedUntil:n.fixedUntil}),t.extend(e,n)},url:function(e){return i.getURL("timelines/curation/"+this.urls[e])},urls:{boost:"boostThreadInChannel",unboost:"unboostThreadInChannel"},sync:function(e,i,a){switch(a=a||{},a.url=i.url(e),a.processData=!0,a.emulateHTTP=!0,e){case"boost":a.type="POST",a.data=t.extend({score:i.get("score"),fixedUntil:i.get("fixedUntil")},a.data);break;case"unboost":a.type="POST"}return a.data=t.defaults({thread:i.thread.id},a.data),n.sync(e,i,a)},toJSON:function(){return t.defaults({activities:t.invoke(this.activities,"toJSON"),actors:t.invoke(this.actors,"toJSON"),thread:this.thread&&this.thread.toJSON()},n.Model.prototype.toJSON.apply(this,arguments))
},getThread:function(){return this.thread},hasThreadImage:function(){var t=e.Deferred(),n=this.thread,i=n&&n.getImage();return n?i?t.resolve(!0):n.get("extending")===!1?t.resolve(!1):n.on("change:extending",function(e,n){n===!1&&(i=e.getImage(),t.resolve(i?!0:!1))}):t.resolve(!1),t.promise()},getBackendId:function(){return this.activities[0].get("backendId")},getRelativeTimestamp:function(){return s.getRelativeDatetime(this.get("published"))},getRelativeBoostTimeRemaining:function(){var e=this.get("fixedUntil");return e&&s.getRelativeDatetime(e)},handleBoostEnd:function(){if(this.boostEndTimeout&&(window.clearTimeout(this.boostEndTimeout),this.boostEndTimeout=null),this.get("fixedUntil")){var e=new Date(this.get("fixedUntil")).getTime(),n=e-(new Date).getTime();1>n?this.unboost():this.boostEndTimeout=window.setTimeout(t.bind(this.unboost,this),n)}},boostInChannel:function(e,t,n){var i=n?new Date((new Date).getTime()+n).toISOString():this.get("fixedUntil");return this.set({boostedScore:t,fixedUntil:i,score:t}),i?this.sync("boost",this,{data:{channel:e,fixedUntil:i}}):void 0},unboost:function(){this.set({score:this.get("naturalScore"),boostedScore:null,fixedUntil:null})},unboostInChannel:function(e){return this.unboost(),this.sync("unboost",this,{data:{channel:e}})}},{buildId:function(e){return t.pluck(e,"id").join("|")},DEFAULT_BOOST_TIME_MS:36e5,DEFAULT_DECAY_RATE_SEC:1800});return o}),define("home/activityExpander",["underscore","backbone","home/models/common/UniqueModel","home/models/User","home/models/Post","home/models/Thread"],function(e,t,n,i,a,s){return{parseObject:function(t,n){return e.isString(n)?t[n]:n},buildPost:function(e,t){if(t instanceof a)return t;t=this.parseObject(e,t);var i=this.parseObject(e,t.thread)||e["forums.Thread?id="+t.thread]||n.pool(s)[t.thread];return new n(a,t,{author:this.parseObject(e,t.author),thread:this.buildThread(e,i)})},buildNote:function(e,n){return new t.Model(this.parseObject(e,n))},buildThread:function(t,i){if(i instanceof s)return i;if(i=this.parseObject(t,i),e.isString(i.author)){var a=i.author.replace("auth.User?id=","");i.author=t["auth.User?id="+a]||a}return new n(s,i,{forum:this.parseObject(t,i.forum),author:i.author,highlightedPost:this.parseObject(t,i.highlightedPost)})},buildUser:function(e,t){return t instanceof i?t:(t=this.parseObject(e,t),new n(i,t))}}}),define("home/models/Activity",["require","underscore","backbone","home/utils/datetimeUtils","home/models/common/UniqueModel"],function(e,t,n,i,a){var s=n.Model.extend({defaults:{version:0,verb:null},buildId:function(e){return e=e||this.attributes,this.constructor.buildId(e.actor,e.verb||this.constructor.prototype.defaults.verb,e.target,e.object)},parse:function(e,t){return e.id&&t&&t.objects&&(e=this.parseRelatedModels(e,t.objects),e.backendId=e.id,e.id=this.buildId(e)),e},toJSON:function(){return t.defaults({actor:this.actor&&this.actor.toJSON(),target:this.target&&this.target.toJSON(),object:this.object&&this.object.toJSON(),thread:this.thread&&this.thread.toJSON(),forum:this.thread&&this.thread.forum.toJSON()},this.attributes)},getThread:function(){return this.thread},getRelativeCreatedAt:function(){return i.getRelativeDatetime(this.object.get("createdAt"))},vote:function(e,t){var n=this.object;e&&n.id==t&&n.vote(e)},isAuthorSessionUser:function(){var t=e("home/models/Session"),n=t.get();return n.isSessionUser(this.actor.id)},isReplyToSessionUser:function(){return"reply"===this.get("verb")&&this.target.author.isSessionUser()},canPermalink:function(){var e=this.object.get("state");return"visible"===e||"pending"===e},canEdit:function(){return this.isAuthorSessionUser()&&!this.object.isHighlighted}},{buildId:function(e,t,n,i){return[e?e.id:"",t,n?n.id:"",i?i.id:""].join("|")}});return a.addType("Activity",s),s}),define("home/models/activities/FavoriteThreadActivity",["home/models/Activity","home/activityExpander"],function(e,t){var n=e.extend({defaults:{verb:"favorite"},initialize:function(e){this.actor=e.actor,this.target=e.target,this.thread=this.target},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildThread(n,e.object),e}});return n}),define("home/models/activities/ReplyActivity",["home/models/Activity","home/activityExpander"],function(e,t){return e.extend({defaults:{verb:"reply"},initialize:function(e){this.actor=e.actor,this.object=e.object,this.target=e.target,this.thread=this.object.thread},parseRelatedModels:function(e,n){return e.object=t.buildPost(n,e.object),e.actor=e.actor?t.buildUser(n,e.actor):e.object.author,e.target=t.buildPost(n,e.object.get("parent_post")),e}})}),define("home/models/activities/PostActivity",["home/models/Activity","home/activityExpander"],function(e,t){var n=e.extend({defaults:{verb:"post"},initialize:function(e){this.actor=e.actor,this.object=e.object,this.target=this.object.thread,this.thread=this.object.thread},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.object=t.buildPost(n,e.object),e.target=e.object.thread,e}});return n}),define("home/models/activities/LikePostActivity",["home/models/Activity","home/activityExpander"],function(e,t){return e.extend({defaults:{verb:"favorite"},initialize:function(e){this.actor=e.actor,this.target=e.target,this.thread=this.target.thread},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildPost(n,e.object),e}})}),define("home/models/activities/TrendingThreadActivity",["home/models/Activity","home/activityExpander"],function(e,t){return e.extend({defaults:{verb:"trending"},initialize:function(e){this.target=e.target,this.thread=this.target},parseRelatedModels:function(e,n){return e.target=t.buildThread(n,e.object),e.thread=e.target,e}})}),define("home/models/activities/FollowUserActivity",["home/models/Activity","home/activityExpander"],function(e,t){return e.extend({defaults:{verb:"follow"},initialize:function(e){this.actor=e.actor,this.target=e.target},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildUser(n,e.object),e}})}),define("home/models/activities/NoteActivity",["home/models/Activity","home/activityExpander"],function(e,t){return e.extend({defaults:{verb:"send"},initialize:function(e){this.object=e.object},parseRelatedModels:function(e,n){return e.object=t.buildNote(n,e.object),e}})}),define("home/models/activities/CreateThreadActivity",["underscore","home/models/Activity","home/activityExpander"],function(e,t,n){return t.extend({defaults:{verb:"create"},initialize:function(e){this.target=e.target,this.thread=this.target},parseRelatedModels:function(t,i){return t.target=n.buildThread(i,t.object),t.thread=t.target,t.thread.initializeRecentPosts({recentPosts:e.map(t.recentPosts,e.bind(n.buildPost,n,i))}),t}})}),define("home/models/activities/ShareThreadActivity",["home/models/Activity","home/activityExpander"],function(e,t){return e.extend({defaults:{verb:"share"},initialize:function(e){this.target=e.target,this.thread=this.target},parseRelatedModels:function(e,n){return e.target=t.buildThread(n,e.object),e.thread=e.target,e}})}),define("home/models/activities/InviteUserActivity",["home/models/Activity","home/activityExpander"],function(e,t){return e.extend({defaults:{verb:"invite"},initialize:function(e){this.actor=e.actor,this.thread=e.target},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildThread(n,e.target),e}})}),define("home/ActivityFactory",["underscore","backbone","home/activityExpander","home/models/common/UniqueModel","home/models/Activity","home/models/activities/FavoriteThreadActivity","home/models/activities/ReplyActivity","home/models/activities/PostActivity","home/models/activities/LikePostActivity","home/models/activities/TrendingThreadActivity","home/models/activities/FollowUserActivity","home/models/activities/NoteActivity","home/models/activities/CreateThreadActivity","home/models/activities/ShareThreadActivity","home/models/activities/InviteUserActivity"],function(e,t,n,i,a,s,o,r,l,c,u,d,h,m,p){var f=function(){},g={createActivity:function(e,t){var n=this.getActivityClass(e,t);if(!n)return null;var s=new n(e,t);return i.set(a,s)},getActivityClass:function(e,t){switch(e.type){case"RegisteredUserFavoriteThread":case"AnonymouseUserFavoriteThread":return e.verb=s.prototype.defaults.verb,s;case"RegisteredUserSubmitPost":case"AnonymousUserSubmitPost":var i=n.buildPost(t.objects,e.object);return e.object=i,i.get("parent_post")?(e.verb=o.prototype.defaults.verb,o):(e.verb=r.prototype.defaults.verb,r);case"RegisteredUserLikePost":case"AnonymousUserLikePost":return e.verb=l.prototype.defaults.verb,l;case"RegisteredUserCreateThread":return e.verb=h.prototype.defaults.verb,h;case"SendNoteToUser":return d;case"TrendingThread":return e.verb=c.prototype.defaults.verb,c;case"UserFollowUser":return e.verb=u.prototype.defaults.verb,u;case"UserSendNoteToUserGroup":return d;case"UserSendNoteToUser":return d;case"UserShareThreadToChannel":return e.verb=m.prototype.defaults.verb,m;case"UserInviteUserToThread":case"UserInviteUserGroupToThread":return e.verb=p.prototype.defaults.verb,p;case"UserFollowForum":return null}}};return e.extend(f.prototype,g),f}),define("home/collections/FeedItemCollection",["underscore","backbone","home/collections/common/ExtensibleCollection","home/models/ActivityFeedItem","home/ActivityFactory","home/activityExpander","core/api"],function(e,t,n,i,a,s,o){var r=n.extend({url:o.getURL("timelines/activities?type=universal"),parse:function(t){var i=e.bind(r.transform,r,t.response.objects);return t.response=e.chain(t.response.activities).map(i).compact().value(),n.prototype.parse.call(this,t)}},{activityFactory:new a,transform:function(e,t){return t.items?this.buildFeedItemFromGroupedActivities(e,t):this.buildFeedItemFromSingleActivity(e,t)},buildFeedItemFromGroupedActivities:function(t,n){n.actors=n.actors||{items:[]};var a=e.chain(n.items).map(e.bind(this.buildActivity,this,t)).compact().value(),o=e.map(n.actors.items,e.bind(s.buildUser,s,t)),r=a[0],l=r&&r.get("verb");if(r){!o.length&&r.actor&&(n.actors.totalItems=1,o=[r.actor]);var c=i.buildId(a),u=i.prototype.parse.call(null,{id:c,verb:"reply"===l&&a.length>1?"post":l,published:n.published,totalActors:n.actors&&n.actors.totalItems||0,totalActivities:n.totalItems,score:n.score}),d={activities:a,thread:r.thread},h=new i(u,d);return h.actors=o,h}},buildFeedItemFromSingleActivity:function(t,n){var a=this.buildActivity(t,n);if(a){var s=[a],o=i.buildId(s),r=e.defaults({id:o,totalActors:1,totalActivities:1,verb:a.get("verb")},n),l={activities:s,thread:a.thread},c=new i(r,l);return c.actors=a.actor?[a.actor]:[],c}},buildActivity:function(e,t){try{return this.activityFactory.createActivity(t,{objects:e,parse:!0})}catch(n){return void(window.Raven&&window.Raven.captureMessage("error parsing activity item",{extra:t}))}}});return r}),define("home/collections/ForumCollection",["underscore","core/collections/PaginatedCollection","home/models/common/UniqueModel","home/models/Forum"],function(e,t,n,i){var a=t.extend({model:n.boundModel(i)});return a}),define("home/collections/FollowingForumCollection",["underscore","home/utils/backboneUtils","core/collections/PaginatedCollection","home/collections/ForumCollection","core/api"],function(e,t,n,i,a){var s=i.extend({url:a.getURL("users/listFollowingForums"),initialize:function(){this.on("add",this.completeModel)},completeModel:function(e){e.get("name")||e.fetch()},fetch:function(n){return n=n||{},n.data=e.defaults({limit:100},n.data),t.memoizedFetch.call(this,n)}});return s}),define("home/collections/FollowingUserCollection",["home/collections/UserCollection","core/api"],function(e,t){return e.extend({url:t.getURL("users/listFollowing")})}),define("home/models/Feed",["underscore","jquery","backbone"],function(e,t,n){var i=n.Model.extend({defaults:function(){return{fetching:!1,fetched:!1,hasNext:!0,error:!1,items:null,numPages:0,fetchOptions:{},active:!1}},initialize:function(t,n){if(!n||!n.collectionClass&&!n.collection)throw"Feed must specify the type of collection it maintains, or pass the collection";var i=n.collection||new n.collectionClass([],n.collectionOptions);i.cursor&&e.has(i.cursor,"hasNext")&&this.set("hasNext",i.cursor.hasNext),n.collectionUrl&&(i.url=n.collectionUrl),this.set({items:i}),this.items=i,i.on("extend",this.onExtendComplete,this),i.on("sync",this.onSync,this),this.listenTo(i,"all",this.propagateCollectionEvents),this.on("change:active",this.activeChanged,this)},propagateCollectionEvents:function(){var e=Array.prototype.slice.apply(arguments);e[0]="items:"+e[0],this.trigger.apply(this,e)},activeChanged:function(){this.get("active")&&!this.get("items").length&&this.fetchItems()},fetchItems:function(n){if(n=n||{},(n.reset||this.get("hasNext"))&&(!this.get("fetching")||this.get("timeouts"))){this.set({fetching:!0}),n.reset&&this.set({fetched:!1}),n.data=n.data||{},e.extend(n.data,this.get("fetchOptions"));var i=n.error,a=n.success,s=this,o=require("home/utils/mixpanelUtils");n.error=function(n,a){return"timeout"===a.statusText&&(s.get("timeouts")||0)<3?(o.trackError("timeout: load",null,{properties:{url:e.result(n,"url"),params:t.param(s.get("fetchOptions"))}}),s.set({timeouts:(s.get("timeouts")||0)+1}),void s.fetchItems()):(o.trackError("error loading",null,{properties:{resp:a.responseText,url:e.result(n,"url"),params:t.param(s.get("fetchOptions"))}}),s.set({fetching:!1,error:!0,hasNext:!1,timeouts:0}),void(i&&i.apply(this,arguments)))},n.success=function(){s.set({error:!1,timeouts:0,numPages:s.get("numPages")+1}),a&&a.apply(this,arguments)};var r=t.isEmptyObject(s.get("items").cursor)||n.reset;return r||o.track("fetched more feed items",null,{properties:{url:n.url||e.result(s.get("items"),"url"),params:t.param(s.get("fetchOptions"))}}),s.get("items")[r?"fetch":"more"](n)}},onSync:function(e,t){this.set({fetched:!0,fetching:!1,hasNext:t.cursor&&t.cursor.hasNext})},ensureFetched:function(){this.get("fetched")||this.get("fetching")||this.fetchItems({reset:!0})},onExtendComplete:function(e){this.set({hasNext:e})}});return i}),define("home/models/UserProfile",["underscore","backbone","home/utils/backboneUtils","home/collections/UserCollection","home/collections/UserPostCollection","home/collections/FeedItemCollection","home/collections/FollowingForumCollection","home/collections/FollowingUserCollection","home/models/common/UniqueModel","home/models/User","home/models/Feed","core/api"],function(e,t,n,i,a,s,o,r,l,c,u,d){var h=t.Model.extend({idAttribute:"username",initialize:function(t,n){this.initializeRelated("user",e.defaults({user:{username:this.get("username")}},n),c),this.listenTo(this.user,"change:isFollowing",this.updateFollowers);var a={user:"username:"+this.user.get("username"),order:"desc"};this.forumsFollowing=new u({fetchOptions:a},{collectionClass:o}),this.following=new u({fetchOptions:a},{collectionClass:r}),this.followers=new u({fetchOptions:a},{collectionClass:i,collectionUrl:d.getURL("users/listFollowers")}),a={target:"user:username:"+this.user.get("username")},this.posts=new u({fetchOptions:a},{collectionClass:s,collectionUrl:d.getURL("timelines/activities?type=profile&index=comments")}),this.favorites=new u({fetchOptions:a},{collectionClass:s,collectionUrl:d.getURL("timelines/activities?type=profile&index=favorites")}),this.profileFeed=new u({fetchOptions:a},{collectionClass:s,collectionUrl:d.getURL("timelines/activities?type=profile")})},isPrivate:function(){return!this.user.isSessionUser()&&this.user.get("isPrivate")},toJSON:function(){return e.defaults({user:this.user.toJSON(),following:this.following.toJSON(),followers:this.followers.toJSON(),posts:this.posts.toJSON(),profileFeed:this.profileFeed.toJSON()},this.attributes)},fetchUser:function(){if(!this.user.get("username"))throw"UserProfile requires a username or id in order to be fetched";this.user.shouldFetch()&&this.user.fetch({data:{user:"username:"+this.user.get("username")}})},fetchFollowing:function(){this.following.fetchItems({reset:!0})},fetchForumsFollowing:function(){this.forumsFollowing.fetchItems({reset:!0})},updateFollowers:function(){var e=require("home/models/Session"),t=e.get();if(!t.isAnonymous()){var n=t.user,i=this.user.get("isFollowing")?"add":"remove";this.followers.get("items")[i](n)}}});return l.addType("UserProfile",h),h}),define("home/collections/NotificationCollection",["underscore","backbone-marionette","home/collections/FeedItemCollection"],function(e,t,n){var i=n.extend({parse:function(i){t.triggerMethod.call(this,"parse",i);var a=n.prototype.parse.apply(this,arguments);return e.filter(a,function(e){return/reply|favorite|follow|send|invite/.test(e.get("verb"))?!0:void(window.Raven&&window.Raven.captureMessage("unsupported activity item",{extra:e}))})}});return i}),define("home/models/TimelineFilter",["jquery","backbone","underscore","core/api","core/config"],function(e,t,n,i,a){return t.Model.extend({urls:{update:i.getURL("timelines/filters/add"),"delete":i.getURL("timelines/filters/remove")},parse:function(e){return e.response||e},serializeData:function(){return{filter:this.id,api_key:a.keys.api}},sync:function(e,n,i){return i.emulateHTTP=!0,i.emulateJSON=!1,i.processData=!0,("update"===e||"delete"===e)&&(i.data=n.serializeData()),i.url=this.urls[e],t.Model.prototype.sync.call(this,e,n,i)}})}),define("home/collections/TimelineFiltersCollection",["jquery","backbone","underscore","core/api","core/config","home/models/TimelineFilter"],function(e,t,n,i,a,s){return t.Collection.extend({model:s,initialize:function(e,t){t=t||{},this.type=t.type},url:function(){return i.getURL("timelines/filters/list")+"?"+e.param({type:this.type})},addFilter:function(e){var t=this.get(e);return t||(t=this.add({id:e})),t.save()},removeFilter:function(e){var t=this.get(e);return t||(t=new s({id:e})),t.destroy()},parse:function(e){return e.response||e}})}),define("home/models/Notifications",["underscore","backbone","home/models/Feed","home/collections/NotificationCollection","home/collections/TimelineFiltersCollection","core/api"],function(e,t,n,i,a,s){var o=t.Model.extend({defaults:{numUnread:0},initialize:function(e){this.session=e.session;var t=function(e){return-1*new Date(e.get("published")).getTime()};this.all=new n({},{collectionClass:i,collectionUrl:s.getURL("timelines/activities?type=notifications"),collectionOptions:{comparator:t}}),this.replies=new n({},{collectionClass:i,collectionUrl:s.getURL("timelines/activities?type=notifications&index=replies"),collectionOptions:{comparator:t}}),this.listenTo(this.all,"items:sync",this.updateNumUnread),this.listenTo(this.all,"clearUnreadCount",this.clearUnreadCount),this.listenTo(this.all,"items:parse",this.parseReadCursors),this.filters=new a},getUnreadCount:function(){return this.all.get("items").reduce(function(e,t){return e+ +t.get("isUnread")},0)},updateNumUnread:function(){this.set({numUnread:this.getUnreadCount()})},parseReadCursors:function(t){var n=t.response.readPosition;this.all.set({fetchOptions:e.extend(this.all.get("fetchOptions"),{readPosition:n})}),this.replies.set({fetchOptions:e.extend(this.replies.get("fetchOptions"),{readPosition:n})}),this.set({latestPosition:t.response.latestPosition,readPosition:n}),this.stopListening(this.all,"items:parse",this.parseReadCursors),this.stopListening(this.replies,"items:parse",this.parseReadCursors)},refresh:function(t){return t.set("fetchOptions",e.omit(t.get("fetchOptions"),"readPosition")),this.refetch(t)},refetch:function(t){return t=t||this.all,this.listenTo(t,"items:parse",this.parseReadCursors),t.fetchItems({reset:!0,success:e.bind(t.trigger,t,"clearUnreadCount")})},ensureFetched:function(){this.session.isAuthenticated()&&(this.all.fetched||this.all.fetchItems())},clearUnreadCount:function(){this.set({numUnread:0}),this.stopListening(this.all,"items:sync",this.updateNumUnread);var e=this.get("latestPosition");e&&e!==this.get("readPosition")&&t.ajax({url:s.getURL("timelines/setReadPosition"),type:"POST",data:{type:"notifications",position:this.get("latestPosition")}})}});return o}),define("home/models/AnonUser",["home/models/common/BaseUser","home/utils/navigationUtils"],function(e,t){var n=e.extend({initialize:function(){this.listenTo(this,"followed:user",this.promptLogin),this.listenTo(this,"unfollowed:user",this.promptLogin),this.listenTo(this,"followed:forum",this.promptLogin),this.listenTo(this,"unfollowed:forum",this.promptLogin)},promptLogin:function(){t.navigateToLogin()}});return function(){var e;return function(){return e||(e=new n),e}}()}),define("home/models/Session",["jquery","underscore","backbone","modernizr","core/api","core/utils/cookies","core/models/Session","home/models/common/UniqueModel","home/models/User","home/models/UserProfile","home/models/Notifications","home/models/AnonUser","home/utils/backboneUtils"],function(e,t,n,i,a,s,o,r,l,c,u,d,h){var m,p=o.extend({initialize:function(){o.prototype.initialize.apply(this,arguments),this.moderatedForums=[],this._load=e.Deferred(),this._loadPromise=this._load.promise(),this.load=t.once(this.load,this),this.fromCookie=t.once(this.fromCookie,this),this.loadModeratedForums=t.once(this.loadModeratedForums,this)},getAnonUserInstance:function(e){return new d(e)},isAnonymous:function(){return this.user.get("isAnonymous")},setUser:function(e){return this.user&&this.stopListening(this.user),this.listenTo(e,"all",this.trigger),o.prototype.setUser.apply(this,arguments)},loadModeratedForums:function(){var t=this.user,i=this;return this.fromCookie().isModerator||window.IS_DEV?n.ajax({url:a.getURL("internal/users/details"),success:function(e){var n=e.response.moderated_forums;i.moderatedForums=n,i.trigger("setModeratedForums",n),t.set({isModerator:!!n.length})},context:t}):e.Deferred().resolve().promise()},isAuthenticated:function(){return!!this.fromCookie().id},fromCookie:function(){var e=(s.read(p.DISQUSAUTH_KEY)||"").replace(/$\"|\"$/g,"").split("|");return e[1]&&e[6]&&e[8]?{username:e[1],id:parseInt(e[6],10),isModerator:parseInt(e[8],10)>0}:(e&&s.erase(p.DISQUSAUTH_KEY,{}),{username:void 0,id:0,isModerator:!1})},provider:function(){var e=this.fromCookie().username;return e?-1===e.indexOf("-")?"disqus":e.split("-")[0]:""},fromSessionStorage:function(){var e;try{e=JSON.parse(window.sessionStorage[p.STORAGE_KEY]),delete window.sessionStorage[p.STORAGE_KEY]}catch(n){}return t.isObject(e)?e:void 0},load:function(){var e=this._load,t=this.fromSessionStorage();if(t&&t.username&&t.id)this.setUser(this.getUserInstance(t)),this.fetched=!0,e.resolve(this);else if(s.read(p.DISQUSAUTH_KEY)||window.IS_DEV){var n=this;n.fetch().done(function(){e.resolve(n)}).fail(function(){e.reject(n)})}else e.reject(this)},loadPromise:function(){return this._loadPromise},fetch:function(){if(this.fetchPromise)return this.fetchPromise;var e=this,t=h.memoizedFetch.apply(this,arguments);return t.then(function(){e.trigger("fetch:success")},function(){e.trigger("fetch:error")}),t},getUserInstance:function(e){return new r(l,e)},getUserProfile:function(){return this.isAnonymous()?void 0:this.userProfile},getOrCreateNotifications:function(){return this.notifications||(this.notifications=new u({session:this}),this.notifications.ensureFetched()),this.notifications},toJSON:function(){return this.user.toJSON.apply(this.user,arguments)},initUserProfile:function(e){if(e){this.userProfile&&this.userProfile.stopListening(this),this.userProfile=new r(c,{username:e}),this.userProfile.forumsFollowing.once("items:sync",function(e){e.each(function(e){e.set({followed:!0})})});var n=this.userProfile.following.get("items"),i=this.userProfile.forumsFollowing.get("items");this.userProfile.listenTo(this,"followed:user",t.bind(n.add,n)),this.userProfile.listenTo(this,"unfollowed:user",t.bind(n.remove,n)),this.userProfile.listenTo(this,"followed:forum",t.bind(i.add,i)),this.userProfile.listenTo(this,"unfollowed:forum",t.bind(i.remove,i)),this.fetchFollowedForums()}},fetchFollowedForums:function(){this.userProfile.fetchForumsFollowing()}},{STORAGE_KEY:"home.session",DISQUSAUTH_KEY:"disqusauth"});return p.get=function(){return m=m||new p},p.forget=function(){m&&(m.stopListening(),m.off(),m=null)},p}),define("home/utils/mixpanelUtils",["jquery","underscore","home/models/Session","home/utils/navigationUtils"],function(e,t,n,i){var a=[];return{queue:a,buildProductProperties:function(){return{product:require("home/utils/trackingUtils").productName()}},buildLocationProperties:function(t,n){if(!t)return{};var i={},a=e(t.target),s=a.parents("[data-mix-location],[data-mix-location-dtl]");return(a.data("mixLocation")||a.data("mixLocationDtl"))&&s.splice(0,0,a[0]),i.location=s.map(function(t,n){return e(n).data("mixLocation")}).toArray().reverse().join(" "),n&&(i.detailedLocation=s.map(function(t,n){return e(n).data("mixLocation")||e(n).data("mixLocationDtl")}).toArray().reverse()),i},buildUserProperties:function(i){this.session||(this.session=n.get());var a=[];!i&&this.session.fetchPromise&&a.push(this.session.fetchPromise);var s=t.bind(function(){var e=this.session.user,t=[];return this.session.isAnonymous()?t.push("anon"):(e.get("numPosts")>0&&t.push("commenter"),e.get("numFollowing")>0&&t.push("userFollower"),e.get("numForumsFollowing")>0&&t.push("forumFollower"),t.length||t.push("inactive")),{user:t.join(",")}},this);return e.when.apply(this,a).then(s,s)},trackUser:function(e){window.mixpanel&&(window.mixpanel.identify(e.get("id")),window.mixpanel.people.set({name:e.get("name"),username:e.get("username"),joinedAt:e.get("joinedAt")}))},trackError:function(){return this.track.apply(this,arguments)},isLinkClick:function(t){return t&&t.target&&e(t.target).attr("href")},shouldDelayLinkClick:function(e,t){return!t.callback&&!i.shouldNotHandleLinkClick(e,e.target)&&i.linkClickChangesPage(e,e.target)},delayLinkClick:function(t,n){var i=e(t.target).attr("href");t.preventDefault(),n.callback=function(){window.top.location=i}},track:function(e,n,i){if(window.mixpanel){i=i||{},i.properties=t.extend({version:"2"},i.properties),this.isLinkClick(n)&&this.shouldDelayLinkClick(n,i)&&this.delayLinkClick(n,i),i.properties=t.extend(this.buildLocationProperties(n,i.includeDetails),i.properties),t.extend(i.properties,this.buildProductProperties());var a=!!i.callback||i.skipUserProperties;this.buildUserProperties(a).always(function(n){i.properties=t.extend(n,i.properties),window.mixpanel.track(e,i.properties,i.callback)})}}}}),define("home/mixins/asEmbedLayout",["jquery","underscore","backbone","core/frameBus","core/utils","home/utils/mixpanelUtils"],function(e,t,n,i,a,s){var o=function(){var n=this.events||{};this.events=t.extend({"click [data-action=close-drawer]":"closeDrawer","click .viewport":"closeDrawerOnClick","click [data-action=full-home]":"openFullHome","click [data-action=full-root]":"openFullRoot","click [data-action=refresh-drawer]":"handleRefresh","wheel .scrollable-measure-selector":"handleScroll","wheel .viewport":"handleViewportScroll","mousewheel .scrollable-measure-selector":"handleScroll","mousewheel .viewport":"handleViewportScroll"},n),this.handleRefresh=function(n){n.preventDefault();var i=e(n.currentTarget);i.addClass("loading");var a=this.session.getOrCreateNotifications(),s=e.Deferred(),o=e.Deferred();this.listenToOnce(a.all,"items:parse",t.bind(a.parseReadCursors,a)),e.when(s,o).done(function(){i.removeClass("loading"),a.all.trigger("clearUnreadCount")}),a.all.fetchItems({reset:!0,success:function(){s.resolve()}}),a.replies.fetchItems({reset:!0,success:function(){o.resolve()}})},this.openFullHome=function(e){s.track("click full home",e),e.preventDefault(),window.open(window.location.href,"_blank")},this.openFullRoot=function(e){s.track("click full root",e)},this.closeDrawerOnClick=function(t){e(t.target).hasClass("viewport")&&this.closeDrawer(t)},this.isIE10=function(){return 10===document.documentMode},this.closeDrawer=function(n){n.preventDefault();var s=e("body");s.removeClass("active"),this.isIE10()||!a.transitionEndEvent?t.delay(t.bind(i.sendHostMessage,this,"close"),300):s.one(a.transitionEndEvent,function(){i.sendHostMessage("close")})};var o=this.onDomRefresh;this.onDomRefresh=function(){o.apply(this,arguments),t.defer(t.bind(i.trigger,i,"mainlayoutRendered"))},this.getScrollableContainer=function(){return this.scrollableContainer&&e.contains(document.documentElement,this.scrollableContainer[0])||(this.scrollableContainer=this.$(".scrollable-measure-selector")),this.scrollableContainer},this.handleViewportScroll=function(e){e.preventDefault()},this.handleScroll=function(e){var t=e.originalEvent,n=t.wheelDeltaY||-t.deltaY,i=this.getScrollableContainer();i&&(0===i.scrollTop()&&n>0&&e.preventDefault(),i.scrollTop()+i.innerHeight()>=i[0].scrollHeight&&0>n&&e.preventDefault(),e.stopPropagation())}};return o}),define("core/bus",["backbone","underscore"],function(e,t){return t.extend({},e.Events)}),define("home/mixins/withClickLinkTracking",["jquery","core/bus"],function(e,t){return function(n){this.trackClickLink=function(n){t.trigger("uiAction:clickLink",n,{adjective:e(n.currentTarget).attr("data-link-name")})},this.trackClickLinkWithArea=function(i){var a=e(i.currentTarget),s={adjective:a.attr("data-link-name")};if(!n){var o=a.closest("[data-jester-area]");n=o.attr("data-jester-area")}n&&(s.area=n),t.trigger("uiAction:clickLink",i,s)}}}),define("core/utils/fingerprint",[],function(){function e(){try{var e=(new Date).getTimezoneOffset(),t=1,n=window.screen;n&&n.availWidth?t=n.availWidth*n.availHeight+n.colorDepth:n&&n.width&&(t=n.width*n.height);var i=document.documentElement,a=i.clientWidth*i.clientHeight;return Math.abs(17*e+25*t-a)}catch(s){return 1}}return{get:e}}),define("core/utils/guid",["core/utils/fingerprint"],function(e){function t(){try{var e=new Uint32Array(1);return window.crypto.getRandomValues(e)[0]}catch(t){return Math.floor(1e9*Math.random())}}function n(){if(window.performance&&window.performance.timing){var e=window.performance.timing,t=e.domainLookupEnd-e.domainLookupStart,n=e.connectEnd-e.connectStart,i=e.responseStart-e.navigationStart;return 11*t+13*n+17*i}return 1e5}function i(){var i=+(""+(new Date).getTime()).substring(3),a=Math.abs(i+n()-e.get()).toString(32);return a+=t().toString(32)}return{generate:i}}),define("core/utils/hash",[],function(){var e=function(e){var t,n,i,a=0;if(0===e.length)return a;for(t=0,n=e.length;n>t;t++)i=e.charCodeAt(t),a=(a<<5)-a+i,a|=0;return a};return{calculate:e}}),define("core/analytics/identity",["backbone","core/utils/cookies","core/utils/guid","core/utils/hash","core/utils/fingerprint"],function(e,t,n,i,a){var s=function(){var i=e.Model.extend({COOKIE_NAME:"__jid",TTL:18e5,initialize:function(){this.prevImp=t.read(this.COOKIE_NAME),this.impId=n.generate(),this.persist()},persist:function(){t.create(this.COOKIE_NAME,this.impId,{expiresIn:this.TTL})}});return new i}(),o=function(){var i=e.Model.extend({COOKIE_NAME:"disqus_unique",isPersistent:function(){return t.read(this.COOKIE_NAME)===this.get("value")},initialize:function(){var e=t.read(this.COOKIE_NAME);e||(e=n.generate()),t.deprecated.create(this.COOKIE_NAME,e),this.set("value",e)}});return new i}(),r=function(){var e,t=o;return t.isPersistent()&&(e=t.get("value")),e||""+a.get()},l=function(){return Math.abs(i.calculate(this.clientId())%100)};return{unique:o,impression:s,clientId:r,clientPercent:l}}),define("core/analytics/experiment",["underscore","remote/config","core/analytics/identity","core/utils/cookies"],function(e,t,n,i){var a={},s=function(e,t){return e>=t[0]&&t[1]>e},o=function(t){var n=e.isNumber;return t&&t.active&&n(t.active[0])&&n(t.active[1])&&t.bucket&&n(t.bucket[0])&&n(t.bucket[1])};return a._current=null,a.getCurrent=function(){if(a._current)return a._current;var r=t.experiments||{},l=!1,c=0,u=i.read("experiment");return u&&e.has(r,u)?l=!0:e.isObject(r)&&(c=n.clientPercent(),u=e.chain(r).keys().find(function(e){var t=this[e];return o(t)&&s(c,t.bucket)?!0:void 0},r).value()),a._current=u?{experiment:u,variant:l||s(c,r[u].active)?"active":"control"}:{experiment:"default",variant:"control"}
},a.disable=function(){a._current={experiment:"default",variant:"control"}},a.isActive=function(e){var t=this.getCurrent();return t.experiment===e&&"active"===t.variant},a}),define("core/config/urls",[],function(){return{jester:"https://referrer."+document.location.host+"/juggler",cdn:void 0}}),define("core/analytics/jester",["jquery","underscore","backbone","core/analytics/experiment","core/analytics/identity","core/config/urls"],function(e,t,n,i,a,s){var o=n.Model.extend({url:s.jester+"/event.js",initialize:function(){this.set(i.getCurrent())},setHostReferrer:function(e){e&&-1!==e.indexOf("http")&&this.set("page_referrer",e)},decoratePayload:function(n){n=t.extend(this.toJSON(),n),t.extend(n,{event:"activity",imp:a.impression.impId,prev_imp:a.impression.prevImp}),n.section||(n.section="default"),n.area||(n.area="n/a");var i=e.param(n).length;if(i>2048&&this.has("page_referrer")){var s=document.createElement("a");s.href=this.get("page_referrer");var o=s.hostname;o&&(n.page_referrer_domain=o),delete n.page_referrer}return n},emit:function(n){return e.ajax({url:t.result(this,"url"),data:this.decoratePayload(n),dataType:"script",cache:!0})}}),r=new o;return{ActivityClient:o,client:r}}),define("home/utils/inspectletUtils",["underscore","modernizr","remote/config","core/utils/cookies","core/analytics/identity","core/analytics/experiment","home/models/Session"],function(e,t,n,i,a,s,o){function r(e){this.session=e}function l(){window.__insp=window.__insp||[],__insp.push(["wid",1759063951]);var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.id="inspsync",e.src=("https:"===document.location.protocol?"https":"http")+"://cdn.inspectlet.com/inspectlet.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}var c={init:function(){this.shouldLoadInspectlet()&&l(),this.session.isAnonymous()?this.session.once("change:id",e.bind(this.tagSessionWithUserStats,this)):this.tagSessionWithUserStats(this.session.user)},fromEmbed:function(){return this.inUrl("utm_source=disqus_embed")&&a.clientPercent()<=n.lounge.homeception_inspectlet_percent},inUrl:function(e){return-1!==window.location.search.indexOf(e)},shouldLoadInspectlet:function(){return-1!==window.location.search.indexOf("inspectlet=1")||this.fromEmbed()?(t.history&&history.replaceState(null,null,window.location.href.split("?")[0]),!0):e.contains(n.lounge.home_inspectlet_usernames,this.session.fromCookie().username)||a.clientPercent()<=n.lounge.home_inspectlet_percent},tagSessionWithUserStats:function(e){var t=e.get("numFollowing")+e.get("numForumsFollowing");this.tagSession({commentCount:e.get("numPosts"),totalFollowCount:t,followPeopleCount:e.get("numFollowing"),followCommunityCount:e.get("numForumsFollowing"),username:e.get("username")}),this.fromEmbed()&&this.tagSession("homeception"),0===t?this.tagSession("followsNone"):10>t?this.tagSession("followsFew"):50>t?this.tagSession("followsSome"):t>=50&&this.tagSession("followsMany")},tagSession:function(e){window.__insp&&__insp.push(["tagSession",e])}};return e.extend(r.prototype,c),new r(o.get())}),define("home/utils/settingsUtils",["home/utils/mixpanelUtils","home/utils/inspectletUtils"],function(e,t){var n={};return n.showSettingsModal=function(e,t){e&&e.preventDefault&&e.preventDefault();var n=this.hideSettingsModal;$('<iframe id="settings-frame">').css({position:"fixed",top:0,left:0,height:"100%",width:"100%","z-index":1e4}).attr("src","/home/edit-profile.html").appendTo("body").load(function(){var e=this,i=new e.contentWindow.DISQUS.ui.ProfileEditModal;i.open({selectedTab:t,onClose:function(){n()}});var a=$(this.contentWindow.document.body),s=a.parent("html");s.css({height:"100%",overflow:"hidden"}),a.css({height:"100%"}).click(function(e){var t=$(e.target);(0===t.closest("#dsq-popup-message").length||t.closest(".dsq-popup-close").length)&&n()}).keypress(function(e){27===e.keyCode&&n()})}).focus()},n.hideSettingsModal=function(){$("#settings-frame").remove()},n.openNotificationPane=function(i){e.track("open settings",i),t.tagSession("viewed settings"),n.showSettingsModal(i,"notifications")},n.openProfilePane=function(t){e.track("open profile edit",t),n.showSettingsModal(t,"profile")},n.openAccountPane=function(i){e.track("open settings",i),t.tagSession("viewed settings"),n.showSettingsModal(i,"account")},n}),define("home/models/Channel",["underscore","backbone","home/models/common/UniqueModel","home/models/Feed","home/models/Forum","home/collections/UserCollection","home/collections/ForumCollection","core/api"],function(e,t,n,i,a,s,o,r){var l=t.Model.extend({defaults:{primaryForum:{},slug:null,name:null,options:{}},idAttribute:"slug",url:function(){return r.getURL("channels/details?channel="+this.id)},parse:function(e){return e.response||e},initialize:function(e,t){this.buildPrimaryForum(t)},buildPrimaryForum:function(t){var n=t&&t.primaryForum||this.get("primaryForum");return e.isEmpty(n)?void this.listenToOnce(this,"change:primaryForum",e.bind(this.buildPrimaryForum,this,t)):(a||(a=require("home/models/Forum")),this.initializeRelated("primaryForum",e.defaults({channel:this},t),a),void this.trigger("changeRelated:primaryForum"))},shouldFetch:function(){return!this.get("name")||!this.primaryForum},toJSON:function(){var n=t.Model.prototype.toJSON.apply(this,arguments);return e.defaults({primaryForum:this.primaryForum?this.primaryForum.toJSON():{}},n)},ensureFetched:function(){this.shouldFetch()&&this.fetch()}});return n.addType("Channel",l),l}),define("home/templates/discoverChannelCard",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a class="tile-overlay" href="/home/channel/'+i(n(null!=e?e.slug:e,e))+'/" data-link-name="image">\n'+i(n(null!=(t=null!=e?e.options:e)?t.description:t,e))+"\n</a>\n"},useData:!0})}),define("home/views/DiscoverChannelCardView",["backbone-marionette","home/templates/discoverChannelCard"],function(e,t){var n=e.ItemView.extend({template:t,modelEvents:{sync:"render"},onRender:function(){var e=this.model.get("options").tile;e&&this.$el.css({"background-image":"url("+e+")","background-position":"0% 0px;"})}});return n}),define("home/templates/discoverMenu",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="nav-discover dropdown" data-action="toggle-dropdown" data-dropdown="discover">\n\n<a data-toggle="dropdown" class="dropdown-toggle" href="#">\n<svg class="icon-discover" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path class="dot" d="M0 4c0-2.2 1.8-4 4-4s4 1.8 4 4S6.2 8 4 8S0 6.2 0 4z"/><path class="dot" d="M0 20c0-2.2 1.8-4 4-4s4 1.8 4 4s-1.8 4-4 4S0 22.2 0 20z"/><path class="dot" d="M0 36c0-2.2 1.8-4 4-4s4 1.8 4 4s-1.8 4-4 4S0 38.2 0 36z"/><path class="dot" d="M16 4c0-2.2 1.8-4 4-4s4 1.8 4 4s-1.8 4-4 4S16 6.2 16 4z"/><path class="dot" d="M16 20c0-2.2 1.8-4 4-4s4 1.8 4 4s-1.8 4-4 4S16 22.2 16 20z"/><path class="dot" d="M16 36c0-2.2 1.8-4 4-4s4 1.8 4 4s-1.8 4-4 4S16 38.2 16 36z"/><path class="dot" d="M32 4c0-2.2 1.8-4 4-4s4 1.8 4 4s-1.8 4-4 4S32 6.2 32 4z"/><path class="dot" d="M32 20c0-2.2 1.8-4 4-4s4 1.8 4 4s-1.8 4-4 4S32 22.2 32 20z"/><path class="dot" d="M32 36c0-2.2 1.8-4 4-4s4 1.8 4 4s-1.8 4-4 4S32 38.2 32 36z"/></svg>\n</a>\n\n<div class="dropdown-menu dropdown-discover" role="menu" aria-labeledby="drop-discover">\n<div class="dropdown-discover-channels">\n<header class="dropdown-discover-header">\n<h4>'+a(t.gettext.call(e,"Channels",{name:"gettext",hash:{},data:i}))+'</h4>\n</header>\n<div class="channel-tiles" data-role="channels"></div>\n\n<footer class="dropdown-discover-channels-footer">\n<a class="btn btn-light btn-block" href="/home/channel/discussdisqus/discussion/channel-discussdisqus/what_other_channels_do_you_want_to_see/">\n'+a(t.gettext.call(e,"Suggest a channel",{name:"gettext",hash:{},data:i}))+'\n</a>\n</footer>\n</div>\n<div class="dropdown-discover-browse">\n<header class="dropdown-discover-header">\n<h4>'+a(t.gettext.call(e,"Browse by Topic",{name:"gettext",hash:{},data:i}))+'</h4>\n</header>\n<ul class="browse-links">\n<li><a href="/home/topics/business/">'+a(t.gettext.call(e,"Business",{name:"gettext",hash:{},data:i}))+'</a></li>\n<li><a href="/home/topics/celebrity/">'+a(t.gettext.call(e,"Celebrity",{name:"gettext",hash:{},data:i}))+'</a></li>\n<li><a href="/home/topics/culture/">'+a(t.gettext.call(e,"Culture",{name:"gettext",hash:{},data:i}))+'</a></li>\n<li><a href="/home/topics/entertainment/">'+a(t.gettext.call(e,"Entertainment",{name:"gettext",hash:{},data:i}))+'</a></li>\n<li><a href="/home/topics/games/">'+a(t.gettext.call(e,"Games",{name:"gettext",hash:{},data:i}))+'</a></li>\n<li><a href="/home/topics/living/">'+a(t.gettext.call(e,"Living",{name:"gettext",hash:{},data:i}))+'</a></li>\n<li><a href="/home/topics/news/">'+a(t.gettext.call(e,"News",{name:"gettext",hash:{},data:i}))+'</a></li>\n<li><a href="/home/topics/sports/">'+a(t.gettext.call(e,"Sports",{name:"gettext",hash:{},data:i}))+'</a></li>\n<li><a href="/home/topics/style/">'+a(t.gettext.call(e,"Style",{name:"gettext",hash:{},data:i}))+'</a></li>\n<li><a href="/home/topics/tech/">'+a(t.gettext.call(e,"Tech",{name:"gettext",hash:{},data:i}))+'</a></li>\n</ul>\n<a href="https://help.disqus.com/customer/portal/articles/1587748" class="btn btn-light btn-block">'+a(t.gettext.call(e,"Learn More",{name:"gettext",hash:{},data:i}))+"</a>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/templates/discoverChannelPlaceholder",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"Coming Soon",{name:"gettext",hash:{},data:i}))+"\n"},useData:!0})}),define("home/mixins/withSubviews",["underscore","jquery","backbone-marionette"],function(e,t,n){function i(e){this.selector=e,this.el=null,this.currentView=null}function a(e){var n=e&&e.currentView;return n&&t.contains(this.el,n.el)&&n.$el.detach()}function s(e){var t=e.selector,n=this.$(t);if(!n.length)return void e.close();var i=e.currentView.$el;i.is(t)?(n.replaceWith(i),e.setElement(i)):(n.append(i),e.setElement(n))}function o(){n.triggerMethod.call(this,"show")}function r(e,t){e&&(e.close(),this._regions[t]=null)}i.prototype={setElement:function(e){this.$el=e instanceof t?e:t(e),this.el=this.$el[0]},render:function(e){if(!this.currentView){var t=this.el,n=this.$el;t&&(this.currentView=e,e.$el.is(t)||n.append(e.el),e.render())}},close:function(){var e=this.currentView;this.el=null,this.currentView=null,e&&(e.close?e.close():e.remove&&e.remove())}};var l={initialize:function(e,t){this._regions={},this.initializeRegions(),e.call(this,t)},initializeRegions:function(){e.each(this.regions,function(e,t){this[t]=this.addRegion(e)},this)},addRegion:function(e){var t=this._regions[e];return t||(t=new i(e),this._regions[e]=t),t},activateRegion:function(t,n){var i=t.currentView;return i?i:(t.setElement(this.$(t.selector)),i=n.call(this),t.render(i),i.listenTo(this,"show",e.bind(o,i)),this._isShown&&o.call(i),i)},render:function(t){var n=e.filter(this._regions,a,this);return t.call(this),e.each(n,s,this),this},close:function(t){return e.each(this._regions,r,this),t.call(this)}};return function(){this.initializeRegions&&this.addRegion||(this.initialize=e.wrap(this.initialize,l.initialize),this.render=e.wrap(this.render,l.render),this.close=e.wrap(this.close,l.close),e.extend(this,e.pick(l,"initializeRegions","addRegion","activateRegion")))}}),define("home/views/DiscoverMenuView",["jquery","underscore","backbone","backbone-marionette","home/utils/releaseUtils","home/models/common/UniqueModel","home/models/Channel","home/views/DiscoverChannelCardView","home/templates/discoverMenu","home/templates/discoverChannelPlaceholder","home/mixins/withClickLinkTracking","home/mixins/withSubviews"],function(e,t,n,i,a,s,o,r,l,c,u,d){var h={id:3,slug:"talkshop",options:{description:"Straight dish on beauty & fashion",tile:"//media.disquscdn.com/home/talkshop_tile.png"}},m={id:2,slug:"discussdisqus",options:{tile:"//media.disquscdn.com/home/discussdisqus_tile.png",description:"Ongoing topics of discussion about the Disqus product"}},p={id:1,slug:"disqusfun",options:{tile:"//media.disquscdn.com/home/disqusfun_tile.png",description:"It is fun working at this company"}},f=i.ItemView,g=f.extend({template:l,events:{"click [data-role=channels] a[data-link-name]":"trackClickLinkWithArea"},initialize:function(){this.channels=new n.Collection([h,m],{model:o}),a.isDisqusAdmin(this.model.user)&&this.channels.add(p)},regions:{channelsRegion:"[data-role=channels]"},onRender:function(){this.activateRegion(this.channelsRegion,this.createChannelCards);var e=this.channelsRegion.currentView;this.addPlaceholderChannelCards(e)},createChannelCards:function(){return new i.CollectionView({collection:this.channels,itemView:r,tagName:"ul",itemViewOptions:{className:"channel-tile",tagName:"li"}})},addPlaceholderChannelCards:function(e){var a=i.ItemView.extend({template:c}),s=g.CHANNELS_LENGTH-e.children.length;return t.times(s,function(){e.addItemView(new n.Model,a,e.children.length)}),e}},{CHANNELS_LENGTH:6}),v=g.prototype;return u.call(v,"top_nav_discover"),d.call(v),g}),define("home/templates/nav",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return"<a>+</a>&nbsp;&nbsp;\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o='<div class="nav-container-inner" data-mix-location="nav">\n<div class="nav-right">\n\n';return a=t["if"].call(e,null!=e?e.canStartDiscussion:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='\n<div id="discover-menu" class="nav-discover-wrapper tooltipped"\ndata-toggle="tooltip" data-placement="bottom" title="'+s(t.gettext.call(e,"Discover",{name:"gettext",hash:{},data:i}))+'"\n></div>\n\n<div class="nav-settings-wrapper tooltipped"\ndata-toggle="tooltip" data-placement="bottom" title="'+s(t.gettext.call(e,"Settings",{name:"gettext",hash:{},data:i}))+'" data-role="settings">\n',a=this.invokePartial(n.settingsDropdown,"","settingsDropdown",e,void 0,t,n,i),null!=a&&(o+=a),o+='</div>\n\n<div class="nav-settings-mobile-wrapper">\n',a=this.invokePartial(n.settingsMobileIcon,"","settingsMobileIcon",e,void 0,t,n,i),null!=a&&(o+=a),o+='</div>\n</div>\n<div class="nav-left">\n<a href="/home/" class="nav-logo">\n<img class="logo-desktop" src="//a.disquscdn.com/dotcom/d-9c2c241/img/brand/disqus-logo-blue-white.svg" alt="Disqus">\n<img class="logo-mobile" src="//a.disquscdn.com/dotcom/d-9c2c241/img/brand/disqus-social-icon-blue-white.svg" alt="Disqus">\n</a>\n<div class="nav-home-wrapper tooltipped" data-toggle="tooltip" data-placement="bottom" title="'+s(t.gettext.call(e,"Home Feed",{name:"gettext",hash:{},data:i}))+'">\n<a href="/home/" class="nav-home" data-page-icon="">\n<svg class="icon-home" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path d="M39.5 20.7L21.7 2.5c-0.9-1-2.4-1-3.3 0L0.5 20.7c-0.9 1-0.6 1.7 0.8 1.7H5v13.9c0 1 0 1.8 1.8 1.8h8.7v-14 h9.1v14h9.1c1.4 0 1.4-0.8 1.4-1.8V22.4h3.7C40.1 22.4 40.4 21.6 39.5 20.7z"/></svg>\n</a>\n</div>\n</div>\n<div class="nav-center">\n<div class="nav-profile-wrapper tooltipped"\ndata-role="user" data-toggle="tooltip" data-placement="bottom" title="'+s(t.gettext.call(e,"Me",{name:"gettext",hash:{},data:i}))+'">\n\n',a=this.invokePartial(n.navUserIcon,"","navUserIcon",e,void 0,t,n,i),null!=a&&(o+=a),o+'\n</div>\n<div class="nav-notif-wrapper tooltipped"\ndata-toggle="tooltip" data-placement="bottom" title="'+s(t.gettext.call(e,"Replies & Notifications",{name:"gettext",hash:{},data:i}))+'">\n\n<a href="/home/inbox/" class="nav-notif" data-role="notifications" data-page-icon="inbox">\n<div class="notif-count" data-role="unread-notification-count"></div>\n<svg class="icon-notif" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="159.8 0 480.2 480" enable-background="new 159.8 0 480.2 480" xml:space="preserve"><path class="fill" d="M409 480c-52.5 0-103.5-18-145.5-52.5l-87 12c-6 0-10.5-1.5-13.5-6s-4.5-10.5-1.5-15l33-85.5 c-12-30-18-61.5-18-93C176.5 108 280 0 409 0c127.5 0 231 108 231 240S536.5 480 409 480z"/><path class="outline" d="M409 480c-52.5 0-103.5-18-145.5-52.5l-87 12c-6 0-10.5-1.5-13.5-6s-4.5-10.5-1.5-15l33-85.5 c-12-30-18-61.5-18-93C176.4 108 280 0 409 0c127.5 0 231 108 231 240S536.5 480 409 480z M270.4 396.7c3 0 5.7 0.6 8.1 2.3 c36 31.5 82.5 49.5 130.5 49.5c111 1.5 201-93 201-208.5S520 30 409 30c-112.5 0-202.5 94.5-202.5 210c0 30 6 60 18 87 c1.5 3 1.5 7.5 0 12l-27 67.5l67.5-9C267.6 397 270.4 396.7 270.4 396.7z"/><path class="arrow" d="M419.5 252v48l78-73.5l-78-72v42c-94.5 0-117 108-117 108C329.5 256.5 367 252 419.5 252z"/></svg>\n</a>\n\n</div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/templates/anonNav",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return'<div class="nav-right">\n<div class="nav-buttons">\n<a href="//disqus.com/profile/signup/?next=https%3A%2F%2Fdisqus.com%2Fhome%2F" class="btn btn-primary active btn-large">'+a(t.gettext.call(e,"Sign Up",{name:"gettext",hash:{},data:i}))+'</a>\n<a href="//disqus.com/profile/login/?next=https%3A%2F%2Fdisqus.com%2Fhome%2F" class="btn btn-light-solid btn-large">'+a(t.gettext.call(e,"Log In",{name:"gettext",hash:{},data:i}))+"</a>\n</div>\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="nav-container-inner" data-mix-location="nav">\n';return a=t.unless.call(e,null!=e?e.sessionIsFetching:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'<div class="nav-left">\n<a href="/home/" class="nav-logo">\n<img class="logo-desktop" src="//a.disquscdn.com/dotcom/d-9c2c241/img/brand/disqus-logo-blue-white.svg" alt="Disqus">\n<img class="logo-mobile" src="//a.disquscdn.com/dotcom/d-9c2c241/img/brand/disqus-social-icon-blue-white.svg" alt="Disqus">\n</a>\n</div>\n</div>\n'},useData:!0})}),define("home/views/NavView",["underscore","jquery","backbone","backbone-marionette","handlebars","remote/config","home/utils/settingsUtils","home/utils/mixpanelUtils","home/models/Session","home/views/DiscoverMenuView","home/templates/nav","home/templates/anonNav","home/mixins/withClickLinkTracking","home/mixins/withSubviews"],function(e,t,n,i,a,s,o,r,l,c,u,d,h,m){var p=i.ItemView,f=p.prototype,g=p.extend({className:"compensation",template:function(e){return e.id?u(e):d(e)},templateHelpers:function(){return{canStartDiscussion:e.contains(s.lounge.home_start_discussion,this.session.user.get("username")),sessionIsFetching:this.session.fetchPromise}},events:{"click [data-action=toggle-sidebar]":"toggleSidebar","click [data-action=show-edit-profile]":o.openProfilePane,"click [data-action=show-account]":o.openAccountPane,"show.bs.dropdown [data-action=toggle-dropdown][data-dropdown=settings]":"trackOpenedSettings","show.bs.dropdown [data-action=toggle-dropdown][data-dropdown=discover]":"trackOpenedDiscover","show.bs.dropdown [data-action=toggle-dropdown]":"removeTooltip","hide.bs.dropdown [data-action=toggle-dropdown]":"addTooltip","click [data-role=user]":"trackOpenedProfile","click [data-action=admin-click]":"trackOpenedAdmin","click [data-role=settings] a[data-link-name]":"trackClickLinkWithArea"},toggleSidebar:function(e){var n=t("#container-page");n.hasClass("slide-left")||this.trackOpenedSettings(e),n.toggleClass("slide-left")},initialize:function(e){this.session=l.get(),this.app=e.app,this.notifications=this.session.getOrCreateNotifications(),this.listenTo(this.session,"change:id fetch:error fetch:success change:isModerator",this.debouncedRender),this.listenTo(this.notifications,"change:numUnread",this.updateNotifications),this.listenTo(this.app,"route",this.activatePageIcon)},regions:{discoverMenuRegion:"#discover-menu"},debouncedRender:e.debounce(function(){this.render.apply(this,arguments)},300),render:function(){this.model=this.session.user;var e=f.render.apply(this,arguments);return this.activatePageIcon(),this.updateNotifications(),this.activateRegion(this.discoverMenuRegion,this.createDiscoverMenu),e},onDomRefresh:function(){t(".tooltipped").tooltip()},createDiscoverMenu:function(){var e=new c({el:this.discoverMenuRegion.el,model:this.session});return e},updateNotifications:function(){var e=this.notifications.get("numUnread");this.$("[data-role=notifications]").toggleClass("has-notifs",!!e),this.$("[data-role=unread-notification-count]").text(e>9?"9+":e)},activatePageIcon:function(){this.curRoute=n.history.getFragment(),this.$("[data-page-icon].active").removeClass("active"),this.$('[data-page-icon="'+this.curRoute+'"]').addClass("active")},removeTooltip:function(e){e&&t(e.currentTarget).closest(".tooltipped").tooltip("destroy")},addTooltip:function(e){e&&t(e.currentTarget).closest(".tooltipped").tooltip()},trackOpenedDiscover:function(e){r.track("open discover menu",e)},trackOpenedSettings:function(e){r.track("open user menu",e)},trackOpenedProfile:function(e){r.track("open profile",e)},trackOpenedAdmin:function(e){r.track("open admin",e)}}),v=g.prototype;return h.call(v,"top_nav_user"),m.call(v),g}),define("home/templates/message",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.lambda,s=this.escapeExpression;return'<div class="alert-message-success">\n<div class="section-contained alert-message">\n'+s(a(null!=e?e.message:e,e))+'\n<button class="close" aria-hidden="true" title="'+s(t.gettext.call(e,"Don't show this message again",{name:"gettext",hash:{},data:i}))+'" data-action="hide-message">\n<span class="icon-cancel"></span>\n</button>\n</div>\n</div>\n'},useData:!0})}),define("home/views/MessageView",["backbone-marionette","home/templates/message"],function(e,t){var n=e.ItemView.extend({template:t,events:{"click [data-action=hide-message]":"close"},close:function(e){e.preventDefault(),this.remove()}});return n}),define("home/views/MessageCollectionView",["underscore","backbone","backbone-marionette","home/views/MessageView"],function(e,t,n,i){var a=n.CollectionView.extend({itemView:i});return a}),define("home/templates/mainLayout",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression,s=this.lambda;return'<div class="drawer-footer">\n<a href="/home/" data-action="full-root" target="_blank" class="nav-logo">\n<img src="//a.disquscdn.com/dotcom/d-9c2c241/img/brand/disqus-logo-blue-white.svg" alt="Disqus">\n</a>\n<button class="drawer-close btn btn-light btn-block" data-action="close-drawer"><span class="icon-cancel"></span>'+a(t.gettext.call(e,"Close",{name:"gettext",hash:{},data:i}))+'</button>\n<div class="drawer-footer-right" data-jester-area="drawer_footer">\n<a class="nav-expand truncate-line" data-action="full-root" target="_blank" href="/home/">\n<svg class="icon-home" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path d="M39.5 20.7L21.7 2.5c-0.9-1-2.4-1-3.3 0L0.5 20.7c-0.9 1-0.6 1.7 0.8 1.7H5v13.9c0 1 0 1.8 1.8 1.8h8.7v-14 h9.1v14h9.1c1.4 0 1.4-0.8 1.4-1.8V22.4h3.7C40.1 22.4 40.4 21.6 39.5 20.7z"/></svg>\n<span class="text-desktop">Disqus Home</span>\n</a>\n<a class="nav-feedback truncate-line" target="_blank" href="//www.surveymonkey.com/s/MMWLGSR?u='+a(s(null!=e?e.userId:e,e))+'" data-link-name="feedback">\n<span class="icon-checkmark"></span>\n<span class="text-desktop">'+a(t.gettext.call(e,"Feedback?",{name:"gettext",hash:{},data:i}))+'</span>\n</a>\n<a class="nav-help truncate-line" target="_blank" href="//help.disqus.com" data-link-name="help">\n<span class="icon-forward"></span>\n<span class="text-desktop">'+a(t.gettext.call(e,"Get Help",{name:"gettext",hash:{},data:i}))+'</span>\n</a>\n</div>\n</div>\n\n<div class="drawer-nav">\n<a class="drawer-nav-option drawer-nav-close" data-action="close-drawer" href="#"><span class="drawer-nav-option-text">'+a(t.gettext.call(e,"Close",{name:"gettext",hash:{},data:i}))+'</span><span class="icon-cancel"></span></a>\n<a class="drawer-nav-option drawer-nav-full" data-action="full-home" href="#"><span class="drawer-nav-option-text">'+a(t.gettext.call(e,"View on %(disqus)s",{name:"gettext",hash:{disqus:"Disqus"},data:i}))+'</span><span class="icon-expand"></span></a>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="viewport">\n<header class="nav-container-outer" data-role="nav-view">\n</header>\n\n';return a=t["if"].call(e,null!=e?e.isSidebar:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='\n<div data-role="messages-view" class="alert-global">\n</div>\n\n<div id="container-main">\n</div>\n</div>\n\n<div class="sidebar compensation" data-role="sidebar" data-jester-area="mobile_sidebar">\n<ul class="sidebar-options" data-mix-location="user menu mobile">\n',a=this.invokePartial(n.settingsLinks,"","settingsLinks",e,void 0,t,n,i),null!=a&&(s+=a),s+"</ul>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/MainLayout",["jquery","underscore","backbone","backbone-marionette","home/mixins/asEmbedLayout","home/mixins/withClickLinkTracking","home/utils/sidebarUtils","home/utils/mixpanelUtils","home/utils/layoutUtils","home/utils/releaseUtils","core/analytics/jester","core/utils/cookies","home/views/NavView","home/views/MessageCollectionView","home/templates/mainLayout"],function(e,t,n,i,a,s,o,r,l,c,u,d,h,m,p){var f=i.Layout.extend({id:"container-page",template:p,serializeData:function(){var e=i.Layout.prototype.serializeData.apply(this,arguments),n=this.session.user;n&&n.toJSON&&t.extend(e,n.toJSON());var a=this.session.fromCookie().id;return a&&(e.userId=a),e.isSidebar=o.isSidebar(),e.messages=this.app.messages,e},events:{"click [data-role=sidebar] a":"toggleSidebar","click [data-role=help]":"trackClickedHelp","click [data-role=faq]":"trackClickedFaq","click [data-jester-area=drawer_footer] a[data-link-name]":"trackClickLinkWithArea","click [data-jester-area=mobile_sidebar] a[data-link-name]":"trackClickLinkWithArea"},toggleSidebar:function(){this.$el.removeClass("slide-left")},regions:{content:{selector:"#container-main"},nav:"[data-role=nav-view]",alerts:"[data-role=messages-view]"},initialize:function(n){this.session=n.session,this.app=n.app,this.windowHeight=e(window).height(),e(window).resize(t.bind(function(){this.windowHeight=e(window).height(),this.toggleHeight()},this))},onDomRefresh:function(){if(!o.isSidebar()){this.nav.show(new h({app:this.app}));var e=new n.Collection(this.app.messages);this.alerts.show(new m({collection:e}))}},showViews:function(e){return this._isShown?(this.$(this.content.el).removeData("height"),this.content.currentView&&this.stopListening(this.content.currentView),this.listenTo(e.content,"all",this.handleContentEvents),void this.content.show(e.content)):void this.listenToOnce(this,"show",t.bind(this.showViews,this,e))},handleContentEvents:function(e){"show"===e||"render"===e?this.toggleHeight():/toggleHeight/.test(e)&&this.toggleHeight(t.last(arguments))},toggleHeight:function(e){e||(e=this.content.$el.data("height")||"fill");var t;switch(e){case"fill":this.navHeight=this.navHeight||(this.nav.$el?this.nav.$el.height():0),t=this.windowHeight-this.navHeight+"px";break;case"content":t=""}this.content.$el.css({"min-height":t}).data({height:e}),l.scrollShownChanged()},trackClickedHelp:function(e){r.track("open help",e)},trackClickedFaq:function(e){r.track("open faq",e)}});return o.isSidebar()&&a.call(f.prototype),s.call(f.prototype),f}),define("home/views/common/AlertView",["underscore","modernizr","backbone-marionette"],function(e,t,n){var i=t.localstorage;return n.ItemView.extend({alertViewName:void 0,templateHelpers:function(){return{alertHidden:this.getRemainingViews()<=0}},events:{"click [data-action=hide-alert]":"forceExpireAlert"},onShow:function(){this.decrementRemainingViews()},forceExpireAlert:function(e){e&&e.preventDefault(),this.setRemainingViews(-1),this.remove()},decrementRemainingViews:e.once(function(){var e=this.getRemainingViews();e>0&&this.setRemainingViews(e-1)}),getRemainingViews:function(){if(i){var e=parseInt(localStorage.getItem(this.getAlertViewName()),10);if(!isNaN(e))return e}return this.getNumberOfViews()+1},getNumberOfViews:function(){return this.defaultViews||5},setRemainingViews:function(e){i&&localStorage.setItem(this.getAlertViewName(),e)},getAlertViewName:function(){return e.result(this,"alertViewName")}})}),define("templates/homeFeedCover",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return'<div class="onboard-message">\n<button class="close" aria-hidden="true" title="'+a(t.gettext.call(e,"Don't show this message again",{name:"gettext",hash:{},data:i}))+'" data-action="hide-alert"><span class="icon-cancel"></span></button>\n<header>\n<h2>'+a(t.gettext.call(e,"Ch-ch-changes!",{name:"gettext",hash:{},data:i}))+"</h2>\n<p>"+a(t.gettext.call(e,"%(disqus)s has gotten better than ever. We think you'll like what you see %(smileyFace)s",{name:"gettext",hash:{smileyFace:t.tag.call(e,"span",{name:"tag",hash:{text:":)","class":"face face-happy"},data:i}),disqus:"Disqus"},data:i}))+' </p>\n<a href="https://help.disqus.com/customer/portal/articles/1587748">'+a(t.gettext.call(e,"Learn more about what's new »",{name:"gettext",hash:{},data:i}))+'</a>\n</header>\n<ul class="marketing-blocks thirds">\n<li>\n<a href="/home/inbox/">\n<svg class="icon-notif" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path class="outline" d="M20.7 40c-4.4 0-8.7-1.6-12.1-4.4l-7.2 1c-0.4 0.1-0.9-0.1-1.2-0.5c-0.3-0.3-0.3-0.8-0.2-1.2l2.8-7.1 c-1-2.5-1.5-5.1-1.5-7.8C1.4 9 10 0 20.7 0C31.3 0 40 9 40 20S31.3 40 20.7 40z M9 33.1c0.3 0 0.6 0.1 0.8 0.3 c3 2.7 6.9 4.1 10.9 4.1c9.3 0 16.8-7.9 16.8-17.5S30 2.5 20.7 2.5C11.4 2.5 3.9 10.4 3.9 20c0 2.5 0.5 5 1.5 7.3 c0.1 0.3 0.1 0.7 0 1l-2.2 5.6l5.6-0.8C8.9 33.1 8.9 33.1 9 33.1z"/><path class="fill" d="M20.7 0C10 0 1.4 9 1.4 20c0 2.7 0.5 5.3 1.5 7.8l-2.8 7.1c-0.2 0.4-0.1 0.9 0.2 1.2 c0.3 0.3 0.7 0.5 1.2 0.5l7.2-1C12 38.4 16.3 40 20.7 40C31.3 40 40 31 40 20S31.3 0 20.7 0z"/><path class="dot" d="M11.2 20c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5s-1.1 2.5-2.5 2.5 S11.2 21.4 11.2 20z"/><path class="dot" d="M18.7 20c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5s-1.1 2.5-2.5 2.5 S18.7 21.4 18.7 20z"/><path class="dot" d="M26.2 20c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5s-1.1 2.5-2.5 2.5 S26.2 21.4 26.2 20z"/></svg>\n</a>\n<h3>'+a(t.gettext.call(e,"Notifications",{name:"gettext",hash:{},data:i}))+"</h3>\n<p>"+a(t.gettext.call(e,"All of your notifications in one place with an all new ability to reply inline.",{name:"gettext",hash:{},data:i}))+'</p>\n</li>\n<li>\n<svg class="icon-home-line" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 35 32" enable-background="new 0 0 35 32" xml:space="preserve"><path d="M28.7 32h-7.5c-0.6 0-1-0.4-1-1V20.5h-5.5V31c0 0.6-0.4 1-1 1H6.6c-2.5 0-2.5-1.8-2.5-2.5V19H2 c-1.3 0-1.8-0.7-1.9-1c-0.1-0.3-0.3-1.1 0.6-2.1l14.7-15c1.1-1.1 3.1-1.2 4.2 0l14.7 15c0.9 1 0.7 1.8 0.6 2.1 c-0.1 0.3-0.6 1-1.9 1h-2.1v10.5C30.9 30.2 30.9 32 28.7 32z M22.2 30h6.5c0.1 0 0.1 0 0.1 0c0-0.1 0-0.4 0-0.5V18 c0-0.6 0.4-1 1-1h2.7L18.2 2.3c-0.4-0.4-1-0.4-1.3 0L2.4 17h2.7c0.6 0 1 0.4 1 1v11.5c0 0.1 0 0.4 0 0.5c0 0 0.2 0 0.5 0h6.1 V19.5c0-0.6 0.4-1 1-1h7.5c0.6 0 1 0.4 1 1V30z" /></svg>\n<h3>'+a(t.gettext.call(e,"One Feed",{name:"gettext",hash:{},data:i}))+"</h3>\n<p>"+a(t.gettext.call(e,"All of the conversations you're interested in, all in one place.",{name:"gettext",hash:{},data:i}))+'</p>\n</li>\n<li>\n<a href="/by/">\n<svg class="icon-face-line" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><path d="M16 0C7.2 0 0 7.2 0 16s7.2 16 16 16s16-7.2 16-16S24.8 0 16 0z M16 30C8.3 30 2 23.7 2 16S8.3 2 16 2s14 6.3 14 14S23.7 30 16 30z"/><path d="M9.4 14.6c0.4 3.3 3.2 5.8 6.6 5.8s6.2-2.5 6.6-5.8 c-1.3 1.3-3.8 1.7-6.6 1.7S10.7 15.8 9.4 14.6z"/><ellipse cx="7.3" cy="12" rx="2.3" ry="2.1"/><path d="M24.7 9.6c-1.2 0-2.3 1-2.3 2.2c0 1.2 1 2.1 2.3 2.1 s2.3-1 2.3-2.1C27 10.6 26 9.6 24.7 9.6z"/></svg>\n</a>\n<h3>'+a(t.gettext.call(e,"User Profiles",{name:"gettext",hash:{},data:i}))+"</h3>\n<p>"+a(t.gettext.call(e,"A better view of %(disqus)s users and what they're talking about.",{name:"gettext",hash:{disqus:"Disqus"},data:i}))+"</p>\n</li>\n</ul>\n</div>\n"
},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t.unless.call(e,null!=e?e.alertHidden:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},useData:!0})}),define("templates/v2Switchover",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return'<div class="onboard-message">\n<button class="close" aria-hidden="true" title="'+a(t.gettext.call(e,"Don't show this message again",{name:"gettext",hash:{},data:i}))+'" data-action="hide-alert"><span class="icon-cancel"></span></button>\n<header>\n<h2>You\'re now seeing the latest and greatest Disqus</h2>\n<p>Previously, you\'d been missing our latest updates. We\'ve significantly improved core features like notifications and profiles based on user feedback.</p>\n<a href="/home/channel/discussdisqus/discussion/channel-discussdisqus/everyone_is_now_seeing_the_same_updates_to_disquscom/">Learn more about what\'s new »</a>\n</header>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t.unless.call(e,null!=e?e.alertHidden:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},useData:!0})}),define("home/views/HomeFeedCoverView",["home/views/common/AlertView","templates/homeFeedCover","templates/v2Switchover"],function(e,t,n){var i=function(){try{return localStorage.setItem("foo","bar"),localStorage.removeItem("foo"),!0}catch(e){return!1}}(),a=document.cookie.match("dhome_internal=([^;]+)"),s=a&&"false"===a[1]||i&&"true"===localStorage.getItem("dhome_v2oo"),o={template:t,alertViewName:"whatsNewViewsRemaining"},r={template:n,alertViewName:"v2SwitchoverViewsRemaining"};return e.extend(s?r:o)}),define("home/mixins/asCollapsibleCard",["underscore"],function(e){var t=function(){this.events=e.extend({"click [data-action=toggle-collapsed]":"toggleCollapsed"},this.events),this.toggleCollapsed=function(e){e&&e.preventDefault(),this.$(".card-collapsed, .card-expanded").addBack(".card-collapsed, .card-expanded").toggleClass("card-collapsed card-expanded")}};return t}),define("core/utils/views",["underscore"],function(e){var t=function(e){return function(t){return t&&t.preventDefault&&t.preventDefault(),e.apply(this,arguments)}},n=function(t,n,i){var a=t.prototype,s=e.extend({},n,i);if(e.defaults(a,s),e.defaults(a.events,s.events),void 0!==a.initialize&&void 0!==s.initialize){var o=a.initialize;a.initialize=function(){var e=o.apply(this,arguments);return s.initialize.apply(this,arguments),e}}};return{preventDefaultHandler:t,mixin:n}}),define("core/views/common/HoverCard",["jquery","underscore","backbone","core/bus","core/utils/views"],function(e,t,n,i,a){var s=n.View.extend({events:{mouseenter:"enter",mouseleave:"leave"},initialize:function(){this._id=t.uniqueId(),this._rendered=!1,this._hoverState="out",this._visible=!1,this._enterTimeout=null,this._leaveTimeout=null,s.open={},this.events=this.events||{},this.events["click [data-action=profile]"]="handleShowProfile",this.listenTo(this,"authenticating",this.keepOpen)},render:function(){this.hide(),e("body").append(this.el)},target:function(e){e.on("mouseenter",t.bind(this.enter,this,e)),e.on("mouseleave",t.bind(this.leave,this))},enter:function(e){var n=this;e&&(n.$target=e),n._leaveTimeout&&clearTimeout(n._leaveTimeout),"in"!==n._hoverState&&(n._hoverState="in",n._enterTimeout=t.delay(function(){"in"===n._hoverState&&n.show(),n._enterTimeout=null},s.DELAY_ENTER),s.open[this.uid]=this)},leave:function(){var e=this;e._enterTimeout&&clearTimeout(e._enterTimeout),"out"!==e._hoverState&&(e._hoverState="out",e._leaveTimeout=t.delay(function(){"out"===e._hoverState&&e.hide(),e._leaveTimeout=null},s.DELAY_LEAVE),s.open[this.uid]&&delete s.open[this.uid])},show:function(){var e=this;e._rendered||(e._rendered=!0,e.render()),e.moveTo(e.$target),e.$el.show(),e._visible=!0},moveTo:function(e){if(e){var t=s.POSITION_OFFSET,n=e.offset(),i=this.$el,a=i.height(),o=this.getContainerPosition();n.top-=t,o.pageOffset+o.containerHeight>=n.top+a+o.containerOffset.top?i.css("top",n.top):i.css("top",n.top-a+2*t),i.css("left",n.left+t)}},getContainerPosition:function(){return{pageOffset:e(window).scrollTop(),containerOffset:{top:0,height:e(window).height()},containerHeight:e(window).height()}},hide:function(){this._keepOpen||(this.$el.hide(),this._visible=!1)},keepOpen:function(){this._keepOpen=!0,this.setupKeepOpenCanceler()},setupKeepOpenCanceler:function(){var n=this,a=function(){"out"===n._hoverState&&(n.stopListening(i,"window.click",a),e("body").off("click",a),n._keepOpen=!1,n.hide())};t.delay(function(){n.listenTo(i,"window.click",a),e("body").on("click",a)},100)},isVisible:function(){return this._visible},handleShowProfile:a.preventDefaultHandler(function(t){var n=e(t.currentTarget),a=n.attr("data-user"),s=n.attr("data-username");i.trigger("uiCallback:showProfile",a,s),this.hide()})},{open:{},instances:{},DELAY_ENTER:350,DELAY_LEAVE:175,POSITION_OFFSET:20,exitAll:function(){t.invoke(s.open,"leave")},create:function(e,t,n,i){var a=s.instances[n];a||(s.instances[n]=a={});var o=a[e];return o||(o=new i(t),a[e]=o),t.targetElement&&o.target(t.targetElement),o}});return function(){e(document).on("mouseout",t.debounce(function(e){var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||s.exitAll()},10))}(),s}),define("core/views/common/mixins/LocalScroll",[],function(){var e={events:{mousewheel:"handleScrollEvent",wheel:"handleScrollEvent"},scrollMeasureSelector:"",getScrollMeasure:function(){return this.scrollMeasure||(this.scrollMeasure=this.$el,this.scrollMeasureSelector&&(this.scrollMeasure=this.$el.find(this.scrollMeasureSelector))),this.scrollMeasure},handleScrollEvent:function(e){var t=e.originalEvent,n=t.wheelDeltaY||-t.deltaY,i=this.$el,a=i.height(),s=this.getScrollMeasure(),o=s.height(),r=s.parent()[0].scrollTop,l=r>=o-a,c=0===r;(l&&0>n||c&&n>0)&&e.preventDefault()}};return e}),define("core/templates/usersCard",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s="";return a=t.each.call(e,null!=e?e.users:e,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},2:function(e,t,n,i){var a,s="";return a=this.invokePartial(n.cardUser,"","cardUser",e,void 0,t,n,i),null!=a&&(s+=a),s},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="tooltip upvoters">\n<ul class="scroll-measure" data-role="content">\n';return a=t["if"].call(e,null!=(a=null!=e?e.users:e)?a.length:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'</ul>\n</div>\n<div class="tooltip-point hidden"></div>\n'},usePartial:!0,useData:!0})}),define("core/views/UsersCard",["underscore","handlebars","core/config","core/bus","core/utils/views","core/views/common/HoverCard","core/views/common/mixins/LocalScroll","core/templates/usersCard"],function(e,t,n,i,a,s,o,r){var l=s.extend({guestTextPartialName:"cardOtherUserText",className:"tooltip-outer upvoters-outer",initialize:function(e){s.prototype.initialize.call(this,e),this.collection=this.collection||e.collection,this.session=e.session,this.numUsers=e.numUsers,this.listenTo(this.collection,"add",this.addUser),this.listenTo(this.collection,"remove",this.removeUser),this.listenTo(this.collection,"reset",this.render)},addUser:function(n){n.get("isAnonymous")?this.updateGuests():this.$listEl&&this.$listEl.length&&(this.$listEl.prepend(t.partials.cardUser(e.extend({highlight:!0},n.toJSON()))),this.stopHighlightUsername())},removeUser:function(e){if(e.get("isAnonymous"))this.updateGuests();else{var t=this.$el.find("[data-user="+e.get("id")+"]");t.length&&t.remove()}},stopHighlightUsername:e.debounce(function(){var e=this.$el.find(".highlight");e.removeClass("highlight")},1100),getGuestCount:function(){return Math.max(this.numUsers-this.collection.length,0)},updateGuests:function(){var e=this.$el.find("[data-role=guest]"),i=this.getGuestCount(),a=t.partials[this.guestTextPartialName]({guestCount:i}),s={guestCount:i,guestAvatarUrl:n.urls.avatar.generic,highlight:e.length,guestText:a},o=t.partials.cardGuestUser(s);e.length?(e.replaceWith(o),this.stopHighlightUsername()):this.$listEl&&this.$listEl.length&&this.$listEl.append(o)},render:function(){delete this.pointEl,this.$el.html(r({users:this.collection.toJSON(),isLoading:this._loading,highlight:!1})),s.prototype.render.call(this),this.$listEl=this.$el.find(".upvoters ul"),this.updateGuests()},show:function(){this.numUsers&&!this.isVisible()&&(s.prototype.show.call(this),this.scrollMeasure&&this.scrollMeasure.height()>this.$el.height()&&this.$el.addClass("has-scroll"),i.trigger("uiAction:userCardShow"))},showPoint:function(t){var n=["tl","bl"];this.pointEl||(this.pointEl=this.$el.find(".tooltip-point"),this.pointEl.removeClass("hidden")),e.each(n,function(e){this.pointEl.removeClass("point-position-"+e)},this),this.pointEl.addClass("point-position-"+t)},moveTo:function(e,t){if(e){var n=s.POSITION_OFFSET,i=e.offset(),a=this.$el,o=a.height(),r=this.getContainerPosition();t&&(o+=a.find("li.user").height()+10),i.top-o-n>=0&&i.top-o+r.containerOffset.top>=r.pageOffset?(a.css({bottom:r.containerOffset.height-i.top+n,top:"inherit"}),this.showPoint("bl")):(a.css({bottom:"inherit",top:i.top+2*n}),this.showPoint("tl")),a.css("left",i.left-n)}},handleShowProfile:function(e){s.prototype.handleShowProfile.call(this,e),i.trigger("uiAction:showProfileFromUserCard")}},{create:function(e,t){return s.create(e,t,"UsersCard",l)}});return a.mixin(l,o,{scrollMeasureSelector:"[data-role=content]"}),l}),define("home/utils/cardUtils",["backbone","core/bus","home/utils/navigationUtils","home/utils/sidebarUtils"],function(e,t,n,i){t.on({"uiCallback:showProfile":function(e,t){var a="/by/"+t+"/";i.isSidebar()?window.open(a):n.navigate(a,{trigger:!0})}})}),define("home/views/ActivityActorsHoverCard",["underscore","backbone","home/models/Session","core/views/UsersCard","core/views/common/HoverCard","home/utils/cardUtils"],function(e,t,n,i,a){var s=i.extend({initialize:function(a){var s=a.activityFeedItem,o=a.numShownActors;e.extend(a,{numUsers:s.get("totalActors")-o,session:n.get(),collection:new t.Collection(s.actors.slice(o))}),i.prototype.initialize.apply(this,arguments)},show:function(){i.prototype.show.apply(this,arguments),this.trigger("uiAction:activityActorsCardShow")}},{create:function(e){return a.create(e.activityId,e,"ActivityActorsHoverCard",s)}});return s}),define("home/mixins/withReasonOld",["underscore","home/views/ActivityActorsHoverCard","core/utils"],function(e,t,n){var i=function(){if(!n.isPhone(window)){var e=this.$("[data-role=actors]");e.length&&(this.hoverCard&&this.hoverCard.remove(),this.hoverCard=t.create({targetElement:e,activityFeedItem:this.model,activityId:this.model.id,numShownActors:a.call(this).length}))}},a=function(){return this.model.actors?this.model.get("totalActors")<4?this.model.toJSON().actors:this.model.toJSON().actors.slice(0,2):[]},s=function(){if(!this.model.actors||1!==this.model.actors.length)return 0;var e=this.model.get("totalActivities");return e>1?e:0},o=function(){this.initialize=e.wrap(this.initialize,function(t){t.apply(this,e.rest(arguments)),this.listenTo(this,"render",i)});var t=this.templateHelpers;this.templateHelpers=function(){var n=a.call(this);return e.extend({relativeTime:this.model.getRelativeTimestamp(),shownActors:n,numRemainingActors:this.model.get("totalActors")-n.length,numOccurences:s.call(this)},t?t.apply(this,arguments):{})}};return o}),define("home/views/common/ActivityFooterView",["backbone-marionette","home/utils/mixpanelUtils","home/utils/inspectletUtils","home/models/Session"],function(e,t,n,i){var a=e.ItemView.extend({templateHelpers:function(){var e=i.get();return{favorited:this.model.thread.get("userScore")>0,discussionRoute:this.model.thread.getDiscussionRoute(),authenticated:!e.isAnonymous()}},events:{"click [data-action=favorite]":"toggleThreadFavorited"},initialize:function(){this.listenTo(this.model.thread,"change:userScore",this.render)},toggleThreadFavorited:function(e){e&&e.preventDefault(),this.model.thread.get("userScore")<1&&(t.track("like thread",e),n.tagSession("favorited")),this.model.thread.toggleFavorited()}});return a}),define("home/templates/activityFooterFavorite",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<ul class="actions">\n';return a=this.invokePartial(n.activityFooterDefaultActions,"","activityFooterDefaultActions",e,void 0,t,n,i),null!=a&&(s+=a),s+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterFavoriteView",["home/views/common/ActivityFooterView","home/templates/activityFooterFavorite"],function(e,t){var n=e.extend({template:t});return n}),define("home/templates/activityCardFavorite",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"%(group)s favorited %(numOccurance)s times",{name:"gettext",hash:{numOccurance:null!=e?e.numOccurance:e,group:t.getPartial.call(e,"userGroup",{name:"getPartial",hash:{},data:i})},data:i}))+"\n"},3:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"%(group)s favorited",{name:"gettext",hash:{group:t.getPartial.call(e,"userGroup",{name:"getPartial",hash:{},data:i})},data:i}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="card-reason">\n';return a=t["if"].call(e,null!=e?e.numOccurances:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+='<span class="time">'+o(s(null!=e?e.relativeTime:e,e))+"</span>\n</div>\n",a=this.invokePartial(n.cardTitle,"","cardTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="card-summary">\n<div class="card-summary-content" dir="auto">\n',a=s(null!=e?e.threadDescription:e,e),null!=a&&(r+=a),r+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardFavoriteView",["backbone-marionette","home/mixins/withReasonOld","home/mixins/withSubviews","home/views/ActivityFooterFavoriteView","home/templates/activityCardFavorite"],function(e,t,n,i,a){var s=e.ItemView,o=s.extend({template:a,templateHelpers:function(){return{discussionRoute:this.model.thread.getDiscussionRoute(),threadDescription:this.model.thread.getDefaultDescription()}},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)},regions:{footerRegion:"[data-role=footer]"},onRender:function(){this.activateRegion(this.footerRegion,this.createFooterView)},createFooterView:function(){return new i({el:this.footerRegion.el,model:this.model})}}),r=o.prototype;return t.call(r),n.call(r),o}),define("home/templates/postActions",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" active"},3:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.likes:e,e))},5:function(e,t,n,i){var a=this.lambda,s=this.escapeExpression;return'<a href="'+s(a(null!=e?e.discussionRoute:e,e))+"#edit-"+s(a(null!=e?e.id:e,e))+'" class="edit link-gray" data-link-name="edit">'+s(t.gettext.call(e,"Edit",{name:"gettext",hash:{},data:i}))+"</a>\n"},7:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.isLoggedIn:e,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},8:function(e,t,n,i){var a=this.escapeExpression;return'<a href="#" data-action="reply" class="reply link-gray">'+a(t.gettext.call(e,"Reply",{name:"gettext",hash:{},data:i}))+"</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a href="#" class="vote-up';return a=t["if"].call(e,null!=e?e.sessionUserHasUpvoted:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='" data-action="vote" data-vote="1">\n<span class="vote-count" data-role="upvotes">',a=t["if"].call(e,null!=e?e.likes:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</span><span class="icon-arrow-2"></span>\n</a>\n\n<a href="#" class="vote-down',a=t["if"].call(e,null!=e?e.sessionUserHasDownvoted:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='" data-action="vote" data-vote="-1">\n<span class="icon-arrow"></span>\n</a>\n\n',a=t["if"].call(e,null!=e?e.wasAuthoredBySessionUser:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(r+=a),r+'\n<a href="'+o(s(null!=(a=null!=e?e.thread:e)?a.link:a,e))+"#comment-"+o(s(null!=e?e.id:e,e))+'" class="view-comment link-gray" data-link-name="view_comment"><span class="text-mobile">'+o(t.gettext.call(e,"View",{name:"gettext",hash:{},data:i}))+'</span><span class="text-desktop">'+o(t.gettext.call(e,"View Comment",{name:"gettext",hash:{},data:i}))+'</span><span class="icon-expand"></span></a>\n'},useData:!0})}),define("home/utils/features",["modernizr"],function(e){var t={browser:{mobile:/iPhone|Android|iPod|iPad|webOS|Mobile Safari|Windows Phone|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent)}},n=e.contenteditable&&!t.browser.mobile&&!(window.opera&&window.opera.version);return{canUseContentEditable:function(){return n}}}),define("core/extensions/jquery.autoresize",["jquery","underscore"],function(e,t){return e.fn.autoresize=function(n){var i=t.extend({extraSpace:0,maxHeight:1e3},n);return this.each(function(){var n=e(this).css({resize:"none",overflow:"hidden"}),a=n[0].contentEditable+""=="true"?"html":"val",s="html"===a?"<br>":"\n",o=n.height(),r=function(){var i={};t.each(i,function(e,t){i[t]=n.css(t)});var a=e(n[0].cloneNode(!0));return a.removeAttr("id").removeAttr("name").css({visibility:"hidden",position:"absolute",top:"-9999px",left:"-9999px",contentEditable:!1}).css(i).attr("tabIndex","-1"),a.insertAfter(n[0]),a}(),l=null,c=function(){r[0].style.height=0,r[a](n[a]()+s),r.scrollTop(r[0].scrollHeight);var e=Math.max(r[0].scrollHeight,o)+parseInt(i.extraSpace,10);i.maxHeight&&(e>=i.maxHeight?(n.css("overflow",""),e=i.maxHeight):n.css("overflow","hidden")),l!==e&&(l=e,n.height(e),n.trigger&&n.trigger("resize"))},u=t.throttle(c,500),d=function(e){13===e.keyCode?c():u()};n.bind("keyup",d).bind("paste",c).css("overflow","hidden"),c()})},e}),define("home/views/TextareaView",["jquery","backbone","core/extensions/jquery.autoresize"],function(e,t){var n=t.View.extend({events:{"keyup    [data-role=editable]":"handleKeyUp","paste    [data-role=editable]":"handlePaste","focusin  [data-role=editable]":"handleFocusIn"},initialize:function(e){e=e||{},this.value=e.value,this.placeholder=e.placeholder},render:function(){var t=this.$input=e("<textarea>").attr({"class":"textarea",placeholder:this.placeholder,"data-role":"editable"}).val(this.value).appendTo(this.el);return t.autoresize({maxHeight:this.constructor.MAX_TEXTAREA_HEIGHT}),this},resize:function(){this.$input.trigger("paste",{fake:!0})},get:function(){return this.$input.val()},set:function(e){this.$input.val(e)},clear:function(){this.set("")},focus:function(){this.$input[0].focus()},handleKeyUp:function(){this.trigger("keychange")},handlePaste:function(){this.trigger("paste keychange"),this.$input.trigger("resize")},handleFocusIn:function(){this.trigger("focus")}},{MAX_TEXTAREA_HEIGHT:350});return n}),function(e){function t(e){return e.replace(o," ")}function n(e,i,a){var s,o,r,c,u="",d=[];for("string"!=typeof a&&(a="\n\n"),c=0;e.length>c;++c)o=e[c],s=o.nodeName.toLowerCase(),1===o.nodeType?(r=i&&i(o),r?u+=r:l.hasOwnProperty(s)?(u&&d.push(u),u=n(o.childNodes,i,a)):u+="br"===s?"\n":n(o.childNodes,i,a)):3===o.nodeType&&(u+=t(o.nodeValue));return d.push(u),d.join(a)}function i(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{if(!e.attachEvent)throw Error("No event support.");e.attachEvent("on"+t,n)}}var a=e.document,s="character",o=RegExp(String.fromCharCode(160),"gi"),r="h1 h2 h3 h4 h5 h6 p pre blockquote address ul ol dir menu li dl div form".split(" "),l={},c=0;for(c=0;r.length>c;c++)l[r[c]]=!0;var u=function(e,t,n){var a=this;if(!e||!e.contentEditable)throw"First argument must be contentEditable";this.elem=e,this.emulateTextarea=e.getAttribute("plaintext-only")||t,this.emulateTextarea&&(this.pasteHandler=function(){var e=a.plainTextReformat,t=function(){e.timeout=null,e.call(a)};e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(t,0)},i(e,"paste",this.pasteHandler));for(var s in n)n.hasOwnProperty(s)&&(this[s]=n[s])};u.prototype={insertHTML:function(e){if(a.all){var t=a.selection.createRange();return t.pasteHTML(e),t.collapse(!1),t.select()}return a.execCommand("insertHTML",!1,e)},insertNode:function(t){var n,i,s;e.getSelection?(n=e.getSelection(),n.getRangeAt&&n.rangeCount&&(i=n.getRangeAt(0),i.deleteContents(),i.insertNode(t),i.collapse(!1),n.removeAllRanges(),n.addRange(i))):a.selection&&a.selection.createRange&&(i=a.selection.createRange(),s=3===t.nodeType?t.data:t.outerHTML,i.pasteHTML(s),i.collapse(!1))},getTextNodes:function(e){var t=this.elem;e&&e.nodeType?e=[e]:e||(e=t.childNodes);for(var n,i=[],a=0;e.length>a;++a)if(n=e[a])switch(n.nodeType){case 1:i=i.concat(this.getTextNodes(n.childNodes));break;case 3:/^\n\s+/.test(n.nodeValue)||i.push(n)}return i},text:function(e){var t,i,a,s=this.elem;try{i=Array.prototype.slice.call(s.childNodes)}catch(o){for(i=[],a=0;s.childNodes.length>a;++a)i.push(s.childNodes[a])}return t=n(i,e,this.emulateTextarea&&"\n"),t.replace(/^\s+|\s+$/g,"")},setText:function(t){t=t||"";var n,i,s,o=a.createDocumentFragment(),r=this.emulateTextarea?[t.replace(/(?:\r\n|\r|\n){2,}/g,"\n\n")]:t.split(/(?:\r\n|\r|\n){2,}/),l=r&&r.length;for(n=0;l>n;n++)i=r[n],s=this.createParagraph(i),o.appendChild(s);o.lastChild.appendChild(a.createElement("br")),this.elem.innerHTML="",this.elem.appendChild(o);var c=e.getSelection&&e.getSelection();c&&c.anchorNode===this.elem&&c.modify&&c.modify("move","forward","line")},createParagraph:function(e){var t,n,i,s,o,r,l,c=a.createElement("p");for(i=e.split(/\r\n|\r|\n/),n=0,o=i.length;o>n;n++){for(s=i[n],l=this.getHtmlElements(s),t=0,r=l.length;r>t;t++)c.appendChild(l[t]);c.appendChild(a.createElement("br"))}return c.lastChild&&c.removeChild(c.lastChild),c},getHtmlElements:function(e){return[a.createTextNode(e)]},plainTextReformat:function(){if(!(this.elem.getElementsByTagName("p").length<=1)){this.emulateTextarea=!1;var e=this.text();this.emulateTextarea=!0,this.setText(e)}},removeNode:function(t){var n,i,s;e.getSelection?(n=t.previousSibling,t.parentNode.removeChild(t),i=e.getSelection(),s=a.createRange(),n&&(s.setStart(n,n.length),s.setEnd(n,n.length)),i.addRange(s)):t.parentNode.removeChild(t)},selectedTextNode:function(){var n,i,o=this.elem;if(e.getSelection)return n=e.getSelection(),n.anchorNode;if(a.selection.createRange){for(i=a.selection.createRange().duplicate();-1e3===i.moveStart(s,-1e3);)continue;var r,l,c,u,d,h,m,p=i.text;for(h=0;o.childNodes.length>h;++h)for(r=o.childNodes[h],c=this.getTextNodes(r),m=0;c.length>m;++m)if(l=c[m],d=t(l.nodeValue),p.indexOf(d)>-1)u=l,p=p.replace(d,"");else if(d.indexOf(p)>-1)return l;return u}},selectedTextNodeOffset:function(n){var i,o;if(e.getSelection){var r=e.getSelection();r&&r.anchorOffset&&(o=r.anchorOffset)}else if(n&&a.selection.createRange){i=a.selection.createRange();for(var l=t(n.nodeValue),c=i.duplicate(),u=c.parentElement(),d=0;0!==i.moveStart(s,-1)&&++d&&0!==l.indexOf(t(i.text))&&u===i.parentElement();)c=i.duplicate(),u=c.parentElement();o=d}return isNaN(o)?0:o},selectNodeText:function(n,i,o){var r,l,c=this.elem;if(e.getSelection)return r=e.getSelection(),r.removeAllRanges(),l=a.createRange(),l.setStart(n,i),l.setEnd(n,o),r.addRange(l),r;if(a.selection.createRange){l=a.selection.createRange();var u=t(n.nodeValue);if("body"===l.parentElement().nodeName.toLowerCase()){for(c.focus(),l=a.selection.createRange();-1e3===l.moveStart(s,-1e3);)continue;for(;1e3===l.moveEnd(s,1e3);)continue;var d=t(l.text),h=d.indexOf(u);h>0&&l.moveStart(s,h+2),l.collapse()}for(;-1===l.moveStart(s,-1)&&0!==u.indexOf(t(l.text));)continue;for(;1===l.moveEnd(s,1)&&u!==t(l.text);)continue;return l.moveStart(s,i),l.moveEnd(s,-1*(o-i-l.text.length)),l.select(),l}}},u.normalizeSpace=t,e.Editable=u}(this),define("editable",["jquery"],function(e){return function(){var t;return t||e.Editable}}(this)),define("home/views/ContentEditableView",["jquery","underscore","editable","home/views/TextareaView"],function(e,t,n,i){var a=350,s=i.extend({events:function(){return t.extend({},i.prototype.events,{"keydown  [data-role=editable]":"handleKeyDown","focusout [data-role=editable]":"handleFocusOut","click .placeholder":"handlePlaceholderClick"})},initialize:function(e){i.prototype.initialize.call(this,e),e=e||{},this.reset(),this.$input=null},reset:function(){this.anchorNode=null,this.anchorOffset=null,this.anchorLength=0},render:function(){var t=this.$input=e("<div>").attr({"class":"textarea",tabIndex:this.el.tabIndex,role:"textbox","aria-multiline":"true",contenteditable:"true","data-role":"editable"}).css({overflow:"auto","max-height":a+"px"}).appendTo(this.$el);this.content=new n(t[0],!0),this.set(this.value);var i=this.placeholder;return i&&(t.attr("aria-label",i),this.$placeholder=e('<span class="placeholder">'+i+"</span>"),this.content.text()||this.setPlaceholder()),this},setPlaceholder:function(){this.$el.prepend(this.$placeholder)},handlePlaceholderClick:function(){this.$input.focus()},handleFocusIn:function(){i.prototype.handleFocusIn.call(this),this.$placeholder.remove()},handleFocusOut:function(){""===this.content.text()&&this.setPlaceholder()},get:function(){return this.content.text()},set:function(e){this.content.setText(e),this.resize()},clear:function(){i.prototype.clear.call(this),this.setPlaceholder(),t.defer(function(e){e.$input.blur()},this)}});return s}),define("home/templates/postReply",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s='<div class="avatar">\n';return a=t["if"].call(e,null!=(a=null!=e?e.user:e)?a.isRegistered:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(s+=a),s+"</div>\n"},2:function(e,t,n,i){var a,s="";return a=this.invokePartial(n.userAvatar,"","userAvatar",null!=e?e.user:e,void 0,t,n,i),null!=a&&(s+=a),s},4:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<span class="user">\n<img data-role="user-avatar" src="'+i(n(null!=(t=null!=(t=null!=e?e.user:e)?t.avatar:t)?t.cache:t,e))+'"/>\n</span>\n'},6:function(){return'style="margin-left: 0"'},8:function(e,t,n,i){var a,s='<div class="post-actions">\n<ul class="wysiwyg">\n</ul>\n';return a=t["if"].call(e,null!=(a=null!=e?e.user:e)?a.isRegistered:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</div>\n"},9:function(e,t,n,i){var a=this.escapeExpression;return'<div class="logged-in">\n<section>\n<div class="temp-post" style="text-align: right">\n<button class="btn">\n'+a(t.gettext.call(e,"Post as %(username)s",{name:"gettext",hash:{username:t.getPartial.call(e,"userSpan",null!=e?e.user:e,{name:"getPartial",hash:{},data:i})},data:i}))+"\n</button>\n</div>\n</section>\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o='<div class="alert error" style="display:none" role="alert">\n<a class="close" data-action="dismiss-alert" title="'+s(t.gettext.call(e,"Dismiss",{name:"gettext",hash:{},data:i}))+'">×</a>\n<span></span>\n</div>\n\n<div class="postbox">\n';return a=t["if"].call(e,null!=e?e.showAvatar:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='\n<div class="textarea-wrapper" ',a=t.unless.call(e,null!=e?e.showAvatar:e,{name:"unless",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='\ndata-role="textarea" dir="auto">\n<div class="edit-alert" role="postbox-alert"></div>\n',a=t["if"].call(e,null!=e?e.showSubmitButton:e,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/postboxAlert",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e){var t,n=this.lambda,i="";return t=n(null!=e?e.message:e,e),null!=t&&(i+=t),i+"\n"},3:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.message:e,e))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="alert">\n<span class="icon-cancel"></span>\n<p class="text">\n<span>\n';return a=t["if"].call(e,null!=e?e.safe:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),s+"</span>\n</p>\n</div>\n"},useData:!0})}),define("home/templates/blacklistErrorMessage",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"We are unable to post your comment because you have been blocked by %(forumName)s",{name:"gettext",hash:{forumName:null!=e?e.forumName:e},data:i}))+'\n<a target="_blank" href="https://help.disqus.com/customer/portal/articles/466223-who-deleted-or-removed-my-comment-">'+a(t.gettext.call(e,'"Find out more."',{name:"gettext",hash:{},data:i}))+"</a>\n"},useData:!0})}),define("home/templates/mustVerifyEmail",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.forumName:e,e))+' requires you to\n<a href="#" data-action="verify-email">verify your email address</a> before posting\n'},useData:!0})}),define("home/views/PostReplyView",["jquery","underscore","backbone","home/views/TextareaView","home/views/ContentEditableView","home/templates/postReply","home/templates/postboxAlert","home/templates/blacklistErrorMessage","home/templates/mustVerifyEmail","core/bus"],function(e,t,n,i,a,s,o,r,l,c){var u=n.View.extend({tagName:"form",className:"reply-form",events:{"click [data-action=cancel]":"hide",submit:"submitForm"},initialize:function(e){this.session=e.session,this.showSubmitButton=e.showSubmitButton!==!1,this.showAvatar=e.showAvatar!==!1,this.placeholderText=e.placeholder,this.canUseContentEditable=e.canUseContentEditable,this.postboxAlertSelector="[role=postbox-alert]",this._isHidden=!1,this.listenTo(this.model,{error:this.onerror,sync:this.onsync})},redraw:function(){var t=this.$el.hasClass("expanded"),n=this.el,i=this.$el.find("textarea").val();this.render(),this.$el.find("textarea").val(i),t&&this.$el.addClass("expanded"),0!==e(n).parent().length&&n.parentNode.replaceChild(this.el,n)},getPlaceholderText:function(){return this.placeholderText||"Discuss…"},render:function(){var e=this,t=e.$el;return e.$el.html(s({showAvatar:e.showAvatar,showSubmitButton:e.showSubmitButton,user:e.session.toJSON()})),this.model.get("parent")?t.addClass("expanded"):t.removeClass("expanded"),t.addClass("authenticated"),e.initTextarea(),e.session.get("mustVerifyEmail")&&e._alertMustVerify(),e._isHidden&&t.addClass("hidden"),this},initTextarea:function(){var e=this,n=this.canUseContentEditable?a:i,s=this.textarea=new n({placeholder:e.getPlaceholderText(),userSuggestions:this.userSuggestions,value:this.model.get("message")});e.$("[data-role=textarea]").prepend(s.render().el),e.listenTo(s,{focus:function(){e.$el.addClass("expanded"),t.delay(t.bind(e.resize,e),200)}})},resize:function(){this.textarea.resize()},focus:function(){this.textarea.focus()},clear:function(){var e=this;e.textarea.clear(),e.$el.removeClass("expanded"),e.model.get("parent")?e.hide():e.setInactive()},setInactive:function(){this.$el.removeClass("expanded")},restore:function(e){var n=this;n.textarea.set(e.get("raw_message")),n.textarea.handleFocusIn(),t.delay(function(){n.resize()},200),n.model.get("parent")&&n.show()},_alertMustVerify:function(e){var t=l({forumName:this.thread.forum.get("name")});this.alert(t,{safe:!0,type:e?"error":"warn"})
},alert:function(){this.displayPostboxAlert.apply(this,arguments)},dismissAlert:function(){this.clearPostboxAlert()},submitForm:function(e){return e.preventDefault(),this.dismissAlert(),this.createPost()},displayPostboxAlert:function(e,t){var n=o({message:e,safe:t});this.$el.find(this.postboxAlertSelector).html(n)},clearPostboxAlert:function(){this.$el.find(this.postboxAlertSelector).empty()},onerror:function(e,n){var i=this,a=this.model;if(12===n.code&&/not have permission to post on this thread/.test(n.response)){var s=r({forumName:i.thread.forum.get("name")});i.displayPostboxAlert(s,!0)}else 12===n.code&&/verify/.test(n.response)?i._alertMustVerify(!0):i.displayPostboxAlert(t.isString(n.response)?n.response:"Oops! We're having trouble posting your comment. Check your internet connection and try again.");i.restore(a)},createPost:function(){var e=this.model;this.clearPostboxAlert();var t=e.save({raw_message:this.textarea.get()});return t?(t.done(function(){c.trigger("uiCallback:postCreated",e)}),this.clear(),e):void this.displayPostboxAlert(e.validationError)},prependTo:function(e){e=e[0],e.insertBefore(this.el,e.firstChild)},toggle:function(){this.isOpen()?this.hide():this.show()},show:function(){var e=this;e._isHidden=!1,e.$el.removeClass("hidden"),e.trigger("show")},hide:function(){var e=this;e._isHidden=!0,e.dismissAlert(),e.$el.addClass("hidden"),e.trigger("hide")},isOpen:function(){return!this._isHidden}});return u}),define("home/ReplyViewManager",["underscore","jquery","backbone","home/utils/features","home/models/Post","home/models/Session","home/views/PostReplyView"],function(e,t,n,i,a,s,o){function r(e){this.view=e,this.model=this.view.model,this.listenTo(this.view,"close",function(){this.stopListening()})}var l={toggleReplyView:function(e){var n=t(e);this.replyView?this.replyView.toggle():(this.replyView=this.createReplyView().render(),n.parent().after(this.replyView.el)),this.replyView._isHidden||this.replyView.focus()},vivifyReply:function(e){var t=new this.view.constructor({model:e,session:s.get()});this.replyView.$el.after(t.render().el),t.trigger("show"),this.replyView.remove(),this.replyView=null},createReplyView:function(){var e=new a({thread:this.model.thread.id,parent:this.model.id,depth:this.model.get("depth")+1,author:s.get().user.id});return this.listenTo(e,"change:id",this.vivifyReply),new o({model:e,session:s.get(),canUseContentEditable:i.canUseContentEditable()})}};return e.extend(r.prototype,l,n.Events),r}),define("core/views/UpvotersCard",["underscore","core/views/common/HoverCard","core/views/UsersCard"],function(e,t,n){var i=n.extend({guestTextPartialName:"cardGuestUpvoterText",initialize:function(t){var i=t.model,a=i.getUpvotersUserCollection();e.extend(t,{collection:a,numUsers:i.get("likes")}),n.prototype.initialize.call(this,t),this.model=i,this.session=t.session,this.likes=i.get("likes"),this.hadLikes=!!this.likes,this._fetched=!1,this._loading=!1,this._rendered=!1,this.listenTo(this.model,"change:userScore",this.updateUserSet),this.listenTo(this.model,"change:likes",this.updateGuests)},updateGuests:function(){this.numUsers=this.model.get("likes")||0,n.prototype.updateGuests.apply(this,arguments)},updateUserSet:function(){var e=this.session.user,t=this.likes,n=!1;if(this.likes=this.model.get("likes"),this.model.get("userScore")>0)if(this.session.user.get("isAnonymous")||this.collection.add(e),this.likes&&!t)this._rendered=!1,this.show();else{var i=this.likes-1-this.collection.length;n=this.session.user.get("isAnonymous")?!0:!!i}else this.collection.remove(e),this.likes||this.hide();this.updateGuests(),this.moveTo(this.$target,n)},show:function(){if(this.likes&&!this.isVisible()){if(this.hadLikes||(this._fetched=!0,this._loading=!1),!this._fetched&&!this.loading)return void this.collection.fetch().done(e.bind(function(){this._fetched=!0,this._loading=!1,this.show()},this));var t=this.session.user;this.model.get("userScore")>0&&!this.session.user.get("isAnonymous")&&!this.collection.contains(t)&&this.collection.add(t),n.prototype.show.call(this),this.trigger("uiAction:upvotersCardShow")}}},{create:function(e){return t.create(e.postId,e,"UpvotersCard",i)}});return i}),define("home/views/PostActionsView",["jquery","backbone-marionette","home/templates/postActions","home/utils/mixpanelUtils","home/ReplyViewManager","home/models/Session","core/views/UpvotersCard","core/bus","core/utils"],function(e,t,n,i,a,s,o,r,l){var c=t.ItemView.extend({template:n,templateHelpers:function(){return{discussionRoute:this.model.thread.getDiscussionRoute(),sessionUserHasUpvoted:this.model.get("userScore")>0,sessionUserHasDownvoted:this.model.get("userScore")<0,wasAuthoredBySessionUser:this.model.author.isSessionUser(),isLoggedIn:s.get().isLoggedIn()}},events:{"click [data-action=vote]":"vote","click [data-action=reply]":"toggleReplyView"},initialize:function(e){this.initializeReplyViewManager(e)},initializeReplyViewManager:function(e){this.replyViewManager=new a(e.parentPostView)},onRender:function(){this.initUpvotersCard()},initUpvotersCard:function(){if(!l.isPhone(window)){this.hoverCard&&this.hoverCard.remove();var e=this.$("[data-action=vote][data-vote=1]");e.length&&(this.hoverCard=o.create({targetElement:e,model:this.model,postId:this.model.get("id"),session:s.get()}))}},vote:function(t){if(t){t.preventDefault(),t.stopPropagation(),i.track("like post",t);var n=e(t.currentTarget),a=parseInt(n.data("vote"),10),s=this.model.get("userScore")===a;s?r.trigger("uiAction:postUnvote",this.model,t):1===a?r.trigger("uiAction:postUpvote",this.model,t):-1===a&&r.trigger("uiAction:postDownvote",this.model,t),this.model.vote(a),this.$("[data-vote=1]").toggleClass("active",1===this.model.get("userScore")),this.$("[data-vote=-1]").toggleClass("active",-1===this.model.get("userScore")),this.$("[data-role=upvotes]").text(this.model.get("likes")||"")}},toggleReplyView:function(e){e&&(e.preventDefault(),e.stopPropagation(),this.replyViewManager.toggleReplyView(e.currentTarget))}});return c}),define("home/views/common/RichMediaView",["backbone-marionette"],function(e){var t=e.ItemView.extend({className:"rich-media-wrapper"});return t}),define("home/templates/iframeMedia",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t=this.lambda,n=this.escapeExpression;return'<a href="#" data-action="load-iframe" class=\'iframe-thumbnail '+n(t(null!=e?e.mediaSource:e,e))+"'>\n<img src=\""+n(t(null!=e?e.thumbnailUrl:e,e))+'"/>\n</a>\n'},useData:!0})}),define("home/views/IFrameRichMediaView",["underscore","home/views/common/RichMediaView","home/templates/iframeMedia"],function(e,t,n){var i=t.extend({template:n,templateHelpers:function(){var n=t.prototype.templateHelpers;return e.isFunction(n)&&(n=n.call(this)),e.extend({},n,{mediaSource:i.MEDIA_TYPES[this.model.get("mediaType")]})},events:function(){return e.extend({},t.prototype.events,{"click [data-action=load-iframe]":"loadIframe"})}(),addAutoplay:function(e){var t=/src=(("[^"]+)|('[^']+))/,n=e.match(t);if(n){n=n[0];var i;switch(this.model.get("mediaType")){case"3":case"12":i="autoplay=1";break;case"10":i="auto_play=true"}if(i){var a=e.search(t),s=a+n.length;e=e.substr(0,s)+(/\?/.test(n)?"&":"?")+i+e.substr(s)}}return e},loadIframe:function(e){e.preventDefault();var t=this.addAutoplay(this.model.get("html"));this.$el.html(t).fitVids()}},{MEDIA_TYPES:{3:"youtube",12:"vimeo",10:"soundcloud"}});return i}),define("home/templates/webpageMedia",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t=this.lambda,n=this.escapeExpression;return'<a class="media-webpage" href="'+n(t(null!=e?e.url:e,e))+'">\n<div class="media-webpage-title">'+n(t(null!=e?e.descriptionPreview:e,e))+'</div>\n<div class="media-webpage-domain">'+n(t(null!=e?e.domain:e,e))+"</div>\n</a>\n"},useData:!0})}),define("home/views/WebpageRichMediaView",["underscore","home/views/common/RichMediaView","home/templates/webpageMedia"],function(e,t,n){var i=t.extend({template:n,templateHelpers:function(){var n=t.prototype.templateHelpers;return e.isFunction(n)&&(n=n.call(this)),e.extend({},n,{domain:i.getDomain(this.model.get("url")),descriptionPreview:i.niceTruncate(this.model.get("description"),60)})}},{getDomain:function(e){if(!e)return"";e="http://"+e.replace(/^([a-z+.-]+:)?\/+/i,"");var t=document.createElement("a");t.href=e;var n=t.hostname.replace(/^www\d*\./i,"");return n=n.toLowerCase()},niceTruncate:function(e,t){if(t>=e.length)return e;e=e.slice(0,t-1);var n=e,a=/(^.*\S)\s/.exec(e);a&&(e=a[1]);var s=i.terminatingPuncRe.exec(e);return s&&(e=e.slice(0,e.length-s[0].length)),.5*n.length>e.length&&(e=n),e+"…"},terminatingPuncRe:RegExp("[\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E\\u00A1-\\u00BF\\u2010-\\u2027\\u2030-\\u205E\\u2300-\\u23FF\\u2E00-\\u2E7F\\u3001-\\u303F\\uFE10-\\uFE19\\uFE30-\\uFE4F\\uFE50-\\uFE6B\\uFF01-\\uFF0F\\uFF1A-\\uFF20\\uFF3B-\\uFF40\\uFF5B-\\uFF60\\uFF5F-\\uFF64]+$")});return i}),define("home/templates/imageMedia",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t=this.lambda,n=this.escapeExpression;return'<a href="'+n(t(null!=e?e.url:e,e))+'">\n<img src="'+n(t(null!=e?e.thumbnailUrl:e,e))+'"/>\n</a>\n'},useData:!0})}),define("home/views/ImageRichMediaView",["home/views/common/RichMediaView","home/templates/imageMedia"],function(e,t){var n=e.extend({template:t});return n}),define("home/RichMediaViewFactory",["home/views/IFrameRichMediaView","home/views/WebpageRichMediaView","home/views/ImageRichMediaView"],function(e,t,n){var i={create:function(i){if(!i.model)throw"Model should have been passed into the contructor";switch(i.model.get("mediaType")){case"3":case"10":case"12":return new e(i);case"4":case"6":case"7":case"5":return new t(i);default:return new n(i)}}};return i}),define("home/mixins/withCollapsing",["underscore","jquery","home/utils/mixpanelUtils"],function(e,t,n){var i=function(e){return e.collapsibleSelector?this.$(e.collapsibleSelector):this.$el},a={events:{"click [data-action=expand]":"expand","click [data-action=collapse]":"forceCollapse"},collapse:function(n){var a=i.call(this,n),s=a.find("img").map(function(e,n){var i=t.Deferred(),a=t(n);return a.complete?i.resolve():a.one("load",i.resolve),i.promise()});t.when(s).then(e.bind(this.forceCollapse,this,null,n))},expand:function(e,t){e&&e.preventDefault();var a=i.call(this,t),s=a.find("[data-action=expand]"),o=a.find("[data-action=collapse]"),r=s.data("target"),l=a.find(r),c=this;s.addClass("hidden"),l.addClass("expanded").one("transitionend oTransitionEnd webkitTransitionEnd",function(){c.trigger("expandedComplete")}),o.removeClass("hidden"),n.track("expand comment",e)},forceCollapse:function(e,n){e&&e.preventDefault();var a=i.call(this,n),s=a.find("[data-action=expand]"),o=a.find("[data-action=collapse]"),r=e?t(e.currentTarget).data("target"):".expanded",l=a.find(r);s.length&&(l.height()>n.maxHeight&&(l.removeClass("expanded"),s.removeClass("hidden")),o.addClass("hidden"))}},s=function(t){var n=this.initialize;this.initialize=function(){n.apply(this,arguments),this.listenTo(this,"show",this.collapse)},this.collapse=function(){a.collapse.call(this,t)},this.expand=function(e){a.expand.call(this,e,t)},this.forceCollapse=function(e){a.forceCollapse.call(this,e,t)},this.events=e.defaults(a.events,this.events)};return s}),define("home/templates/postContent",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return"comment-message-hidden"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="comment-message expanded ';return a=t["if"].call(e,null!=e?e.isHidden:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='"\ndata-role="message" dir="auto">\n',a=s(null!=e?e.message:e,e),null!=a&&(r+=a),r+'\n<div><ul class="post-media" data-role="post-media-list"></ul></div>\n</div>\n<a  href="#" class="curtain-truncate hidden" title="'+o(t.gettext.call(e,"see more",{name:"gettext",hash:{},data:i}))+'"\ndata-action="expand"\ndata-target=".comment-message">'+o(t.gettext.call(e,"see more",{name:"gettext",hash:{},data:i}))+"</a>\n"},useData:!0})}),define("home/views/PostContentView",["jquery","underscore","backbone","backbone-marionette","home/utils/datetimeUtils","home/RichMediaViewFactory","home/mixins/withCollapsing","home/templates/postContent","core/bus"],function(e,t,n,i,a,s,o,r,l){var c=i.ItemView.extend({template:r,templateHelpers:function(){return{isHidden:"visible"!==this.model.get("state")}},events:{"click a":"trackClickLink"},trackClickLink:function(e){l.trigger("uiAction:clickLink",e,{adjective:"message"})},onRender:function(){this.renderRichMedia(this.model.get("media"))},renderRichMedia:function(i){if(i&&i.length){var a=this.$("[data-role=message]");if(a.length){var o={};a.find("a").each(function(t,n){var i=n.href;o[i]||(o[i]=e(n))}),this.richMediaViews=this.richMediaViews||{},t.each(i,function(t){var i=t.url;this.richMediaViews[i]||(this.richMediaViews[i]=s.create({model:new n.Model(t)}).render());var a=this.richMediaViews[i],r=o[i],l=c.getHighestLinkParent(r);if(l)l.append(a.$el);else{var u=this.$("[data-role=post-media-list]"),d=e("<li>");if(!u.length)return;d.append(a.$el),u.append(d)}a.delegateEvents()},this)}}}},{getHighestLinkParent:function(){var n={B:!0,CAPTION:!0,EM:!0,I:!0,P:!0,S:!0,SPAN:!0,STRIKE:!0,STRONG:!0,U:!0};return function(i){if(i){var a,s=i.parents(),o=!0;if(t.find(s,function(t){var i=e(t);return"message"===i.attr("data-role")?!0:n[t.tagName]?void(a=i):(o=!1,!0)}),o)return a}}}()});return o.call(c.prototype,{maxHeight:115}),c}),define("home/templates/post",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e){var t=this.lambda,n=this.escapeExpression;return'<span class="label label-danger">'+n(t(null!=e?e.hiddenExplanation:e,e))+"</span>\n"},3:function(){return"hidden"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r="";return a=this.invokePartial(n.userAvatar,"","userAvatar",null!=e?e.author:e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="comment-body">\n<header class="comment-header">\n',a=this.invokePartial(n.userName,"","userName",null!=e?e.author:e,void 0,t,n,i),null!=a&&(r+=a),r+='<a class="link-gray time" href="'+o(s(null!=e?e.discussionRoute:e,e))+"#comment-"+o(s(null!=e?e.id:e,e))+'" data-link-name="timestamp">'+o(s(null!=e?e.relativeTime:e,e))+"</a>\n",a=t["if"].call(e,null!=e?e.isHidden:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</header>\n<div data-role="post-content"></div>\n<footer class="comment-actions ',a=t["if"].call(e,null!=e?e.isHidden:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'" data-role="post-actions">\n</footer>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/PostView",["backbone-marionette","core/strings","home/mixins/withSubviews","home/views/PostActionsView","home/views/PostContentView","home/utils/datetimeUtils","home/templates/post","home/utils/cardUtils"],function(e,t,n,i,a,s,o){var r=t.get,l=e.ItemView,c=l.extend({className:"card-comment",template:o,templateHelpers:function(){var e=this.model.get("state");return{isHidden:"visible"!==e,hiddenExplanation:{flagged:r("Pending"),pending:r("Pending"),spam:r("Detected as spam"),deleted:r("Removed")}[e],discussionRoute:this.model.thread.getDiscussionRoute(),relativeTime:s.getRelativeDatetime(this.model.get("createdAt"))}},initialize:function(e){this.hideActions=e.hideActions},regions:{postContentRegion:"[data-role=post-content]",postActionsRegion:"[data-role=post-actions]"},onRender:function(){this.activateRegion(this.postContentRegion,this.createPostContentView),this.hideActions||this.activateRegion(this.postActionsRegion,this.createPostActionsView)},createPostActionsView:function(){return new i({el:this.postActionsRegion.el,model:this.model,parentPostView:this})},createPostContentView:function(){return new a({el:this.postContentRegion.el,model:this.model})}}),u=c.prototype;return n.call(u),c}),define("home/templates/truncatedPost",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e){var t=this.lambda,n=this.escapeExpression;return'<span class="label label-danger">'+n(t(null!=e?e.hiddenExplanation:e,e))+"</span>\n"},3:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.plaintext:e,e))+"\n"},5:function(){return'<span class="icon-images"></span>\n'},7:function(){return"hidden"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r="";return a=this.invokePartial(n.userAvatar,"","userAvatar",null!=e?e.author:e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="comment-body">\n<header class="comment-header">\n',a=this.invokePartial(n.userName,"","userName",null!=e?e.author:e,void 0,t,n,i),null!=a&&(r+=a),r+=' <a class="link-gray time" href="'+o(s(null!=e?e.discussionRoute:e,e))+"#comment-"+o(s(null!=e?e.id:e,e))+'" data-link-name="timestamp">'+o(s(null!=e?e.relativeTime:e,e))+"</a>\n",a=t["if"].call(e,null!=e?e.isHidden:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</header>\n<a href="'+o(s(null!=e?e.discussionRoute:e,e))+"#comment-"+o(s(null!=e?e.id:e,e))+'" class="card-comment-truncated truncate-line" data-link-name="message" dir="auto">\n',a=t["if"].call(e,null!=e?e.plaintext:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(r+=a),r+='</a>\n\n<footer class="comment-actions ',a=t["if"].call(e,null!=e?e.isHidden:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'" data-role="post-actions">\n</footer>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/TruncatedPostView",["underscore","home/utils/domUtils","home/views/PostView","home/templates/truncatedPost"],function(e,t,n,i){var a=n.extend({template:i,templateHelpers:function(){var i=n.prototype.templateHelpers;return e.isFunction(i)&&(i=i.call(this)),e.defaults({plaintext:t.stripHtmlTags(this.model.get("message"))},i)}});return a}),define("home/templates/replyActivity",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div data-role="parent-post" class="parent"></div>\n<div data-role="child-post" class="child"></div>\n'},useData:!0})}),define("home/views/ReplyActivityView",["backbone-marionette","home/mixins/withSubviews","home/views/PostView","home/views/TruncatedPostView","home/templates/replyActivity"],function(e,t,n,i,a){var s=e.ItemView,o=s.extend({className:"card-reply",template:a,regions:{inReplyToRegion:"[data-role=parent-post]",replyRegion:"[data-role=child-post]"},onRender:function(){this.activateRegion(this.inReplyToRegion,this.createParentPostView),this.activateRegion(this.replyRegion,this.createChildPostView)},createParentPostView:function(){return new i({model:this.model.target})},createChildPostView:function(){return new n({model:this.model.object})}});return t.call(o.prototype),o}),define("home/views/PostActivityCollectionView",["underscore","backbone-marionette","home/views/PostView","home/views/ReplyActivityView"],function(e,t,n,i){var a=t.CollectionView.extend({getItemView:function(e){return"reply"===e.get("verb")?i:n},itemViewOptions:function(t,n){var i=t;"post"===t.get("verb")&&(i=t.object);var a=this.getItemView(t).prototype.className;a=e.isFunction(a)?a.call({model:t}):a||"";var s=a;return n>0&&(s+=" collapsible"),{model:i,className:s}}});return a}),define("home/views/common/ActivityCardPostBaseView",["backbone","backbone-marionette","home/mixins/withSubviews","home/views/PostActivityCollectionView"],function(e,t,n,i){var a=t.ItemView.extend({regions:{postsRegion:"[data-role=posts]",footerRegion:"[data-role=footer]"},buildPostsView:function(){return new i({el:this.postsRegion.el,collection:new e.Collection(this.model.activities)})},createFooterView:void 0,onRender:function(){this.activateRegion(this.postsRegion,this.buildPostsView),this.activateRegion(this.footerRegion,this.createFooterView)}});return n.call(a.prototype),a}),define("home/templates/activityFooterPost",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<ul class="actions">\n';return a=this.invokePartial(n.activityFooterDefaultActions,"","activityFooterDefaultActions",e,void 0,t,n,i),null!=a&&(s+=a),s+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterPostView",["underscore","home/views/common/ActivityFooterView","home/templates/activityFooterPost"],function(e,t,n){var i=t.extend({template:n,templateHelpers:function(){return e.defaults({hasMultiplePosts:this.model.activities.length>1},t.prototype.templateHelpers.apply(this,arguments))}});return i}),define("home/templates/activityCardPost",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"%(group)s commented %(numOccurance)s times",{name:"gettext",hash:{numOccurance:null!=e?e.numOccurance:e,group:t.getPartial.call(e,"userGroup",{name:"getPartial",hash:{},data:i})},data:i}))+"\n"},3:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"%(group)s commented",{name:"gettext",hash:{group:t.getPartial.call(e,"userGroup",{name:"getPartial",hash:{},data:i})},data:i}))+"\n"},5:function(e,t,n,i){var a=this.escapeExpression;return'<div class="expandable">\n<div class="card-grouped-actions">\n<a href="#" data-action="toggle-collapsed" class="expandable card-expand">\n<div class="icon-more-vert"></div>\n'+a(t.gettext.call(e,"See More",{name:"gettext",hash:{},data:i}))+"\n</a>\n</div>\n</div>\n"},7:function(e,t,n,i){var a=this.lambda,s=this.escapeExpression;return'<div class="collapsible">\n<div class="card-grouped-actions">\n<a class="collapsible btn btn-light btn-follow" href="'+s(a(null!=e?e.discussionRoute:e,e))+'" data-link-name="view_comment">\n'+s(t.gettext.call(e,"See All Comments",{name:"gettext",hash:{},data:i}))+"\n</a>\n</div>\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="card-reason">\n';return a=t["if"].call(e,null!=e?e.numOccurances:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+='<span class="time">'+o(s(null!=e?e.relativeTime:e,e))+"</span>\n</div>\n",a=this.invokePartial(n.cardTitle,"","cardTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div data-role="posts"></div>\n',a=t["if"].call(e,null!=e?e.shouldCollapse:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=t["if"].call(e,null!=e?e.hasOverflowPosts:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardPostView",["underscore","home/mixins/withReasonOld","home/views/common/ActivityCardPostBaseView","home/views/ActivityFooterPostView","home/templates/activityCardPost"],function(e,t,n,i,a){var s=n,o=s.extend({template:a,templateHelpers:function(){return{hasOverflowPosts:this.model.get("totalActivities")>this.model.activities.length,shouldCollapse:this.shouldCollapse(),discussionRoute:this.model.thread.getDiscussionRoute()}},createFooterView:function(){return new i({el:this.footerRegion.el,model:this.model})},shouldCollapse:function(){return this.model.activities.length>1}}),r=o.prototype;return t.call(r),o}),define("home/templates/activityFooterReply",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<ul class="actions">\n';return a=this.invokePartial(n.activityFooterDefaultActions,"","activityFooterDefaultActions",e,void 0,t,n,i),null!=a&&(s+=a),s+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterReplyView",["home/views/common/ActivityFooterView","home/templates/activityFooterReply"],function(e,t){var n=e.extend({template:t});return n}),define("home/templates/activityCardReply",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="card-reason">\n';return a=this.invokePartial(n.userGroup,"","userGroup",e,void 0,t,n,i),null!=a&&(r+=a),r+='<span class="icon-forward"></span>',a=this.invokePartial(n.userPreview,"","userPreview",null!=(a=null!=e?e.target:e)?a.author:a,void 0,t,n,i),null!=a&&(r+=a),r+=' <span class="time">'+o(s(null!=e?e.relativeTime:e,e))+"</span>\n</div>\n",a=this.invokePartial(n.cardTitle,"","cardTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+'<div class="card-reply" data-role="posts"></div>\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardReplyView",["underscore","home/mixins/withReasonOld","home/views/common/ActivityCardPostBaseView","home/views/ActivityFooterReplyView","home/templates/activityCardReply"],function(e,t,n,i,a){var s=n,o=s.extend({template:a,templateHelpers:function(){return{target:this.model.activities[0].target.toJSON()}},createFooterView:function(){return new i({el:this.footerRegion.el,model:this.model})}}),r=o.prototype;return t.call(r),o}),define("home/templates/activityFooterTrending",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<ul class="actions">\n';return a=this.invokePartial(n.activityFooterDefaultActions,"","activityFooterDefaultActions",e,void 0,t,n,i),null!=a&&(s+=a),s+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterTrendingView",["home/views/common/ActivityFooterView","home/templates/activityFooterTrending"],function(e,t){var n=e.extend({template:t});return n}),define("home/templates/activityCardTrending",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a href="/home/forums/'+o(s(null!=(a=null!=(a=null!=e?e.thread:e)?a.forum:a)?a.id:a,e))+'/" class="community link-gray-darker" data-link-name="forum_name">';return a=this.invokePartial(n.forumName,"","forumName",null!=(a=null!=e?e.target:e)?a.forum:a,void 0,t,n,i),null!=a&&(r+=a),r+"</a>\n"},3:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r="";return a=this.invokePartial(n.forumAvatar,"","forumAvatar",null!=(a=null!=e?e.target:e)?a.forum:a,void 0,t,n,i),null!=a&&(r+=a),r+=' <a href="/home/forums/'+o(s(null!=(a=null!=(a=null!=e?e.thread:e)?a.forum:a)?a.id:a,e))+'/" class="community link-gray-darker" data-link-name="forum_name">',a=this.invokePartial(n.forumName,"","forumName",null!=(a=null!=e?e.target:e)?a.forum:a,void 0,t,n,i),null!=a&&(r+=a),r+"</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="card-reason">\n';return a=t["if"].call(e,null!=e?e.hideForumFavicon:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+='<span class="time">'+s(t.gettext.call(e,"Recent activity",{name:"gettext",hash:{},data:i}))+" "+s(o(null!=e?e.relativeTime:e,e))+"</span>\n</div>\n",a=this.invokePartial(n.cardTitle,"","cardTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="card-summary">\n<div class="card-summary-content" dir="auto">\n',a=o(null!=e?e.threadDescription:e,e),null!=a&&(r+=a),r+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardTrendingView",["underscore","backbone-marionette","home/mixins/withReasonOld","home/mixins/withSubviews","home/views/ActivityFooterTrendingView","home/templates/activityCardTrending"],function(e,t,n,i,a,s){var o=t.ItemView,r=o.extend({template:s,templateHelpers:function(){var t=this.model.thread.forum.get("favicon")&&this.model.thread.forum.get("favicon").cache,n={};return e.extend(n,{commenter:this.model.thread.getMostRecentCommenter(),target:this.model.activities[0].target.toJSON(),discussionRoute:this.model.thread.getDiscussionRoute(),threadDescription:this.model.thread.getDefaultDescription(),hideForumFavicon:!t||/favicon-default/.test(t)})},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)},regions:{footerRegion:"[data-role=footer]"},onRender:function(){this.activateRegion(this.footerRegion,this.createFooterView)},createFooterView:function(){return new a({el:this.footerRegion.el,model:this.model})}}),l=r.prototype;return n.call(l),i.call(l),r}),define("home/templates/activityFooterCreate",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<ul class="actions">\n';return a=this.invokePartial(n.activityFooterDefaultActions,"","activityFooterDefaultActions",e,void 0,t,n,i),null!=a&&(s+=a),s+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterCreateView",["home/views/common/ActivityFooterView","home/templates/activityFooterCreate"],function(e,t){var n=e.extend({template:t});return n}),define("core/stance/utils",["underscore","exports"],function(e,t){t.getElement=function(t){return e.isElement(t)?t:t&&t.el},t.EL_ID_ATTR="data-visibility-id",t.OBJ_ID_PROP="_visibility_id",t.getId=function(n){var i=null;return e.isElement(n)?(i=n.getAttribute(t.EL_ID_ATTR)||null,i||(i=e.uniqueId(),n.setAttribute(t.EL_ID_ATTR,i))):n&&(i=n[t.OBJ_ID_PROP]||null,i||(i=n[t.OBJ_ID_PROP]=e.uniqueId())),i}}),define("core/stance/tracking",["underscore","jquery","./utils","exports"],function(e,t,n,i){i.events=[],i.lastPos=null,i.clearCache=function(e){if(void 0!==e){var t=n.getId(e);t&&(i.getElementOffset.cache[t]=null)}else i.getElementOffset.cache={}},i.calculateOffset=function(e){var n=t(e).offset();return n&&(n.top||n.left)?{top:n.top,height:t(e).height()}:null},i._getElementOffset=function(t){var a=n.getElement(t);if(!a)return null;var s=i.calculateOffset(a);return s?{visibleTop:s.top+(e.result(t,"topEdgeOffset")||0),visibleBottom:s.top+s.height-(e.result(t,"bottomEdgeOffset")||0),offsetTop:s.top,height:s.height}:null},i.getElementOffset=function(){var e=function(t){var a=e.cache,s=n.getId(t);if(s&&a[s])return a[s];var o=i._getElementOffset(t);return s&&o&&(a[s]=o),o};return e.cache={},e}(),i.EVENT_NAMES=["enter","exit","visible","invisible","all"],i.updateTracking=function(t){var n,a=function(t){return t?function(e){return t[e]}:e.constant(void 0)};e.any(i.EVENT_NAMES,a(t._events))?(n=e.indexOf(i.events,t),-1===n&&i.events.push(t)):(n=e.indexOf(i.events,t),-1!==n&&i.events.splice(n,1))},i.processEvents=function(e){i.lastPos=e;var t=i.events;if(t.length)for(var n=t.length-1;n>=0;--n){var a=t[n],s=a.isVisible(e);null!==s&&(s!==a.lastVisible&&a.trigger(s?"enter":"exit",a,e),a.trigger(s?"visible":"invisible",a,e),a.lastVisible=s)}}}),define("core/stance/main",["underscore","jquery","backbone","./tracking"],function(e,t,n,i){function a(e){return this instanceof a?(this.obj=e,void(this.lastVisible=!1)):new a(e)}return e.extend(a.prototype,n.Events,{on:function(e){var t=!(this._events&&this._events[e]),a=n.Events.on.apply(this,arguments);return t&&i.updateTracking(this),a},off:function(e){var t=n.Events.off.apply(this,arguments);return this._events&&this._events[e]||i.updateTracking(this),t},isVisible:function(e){if(e=e||i.lastPos,!e)return null;var t=e.top,n=t+e.height,a=i.getElementOffset(this.obj);return a?a.offsetTop>=t&&n>a.visibleTop||n>=a.offsetTop+a.height&&a.visibleBottom>t:null},invalidate:function(){return i.clearCache(this.obj),this}}),e.extend(a,{invalidate:i.clearCache,scroll:i.processEvents,_windowScrollHandlerBound:!1,_windowScrollHandler:e.throttle(function(){i.processEvents({top:t(window).scrollTop(),height:t(window).height()})
},250),bindWindowEvents:function(){this._windowScrollHandlerBound||(t(window).on("scroll",this._windowScrollHandler).on("resize",this._windowScrollHandler),this._windowScrollHandlerBound=!0)},unbindWindowEvents:function(){t(window).off("scroll",this._windowScrollHandler).off("resize",this._windowScrollHandler),this._windowScrollHandlerBound=!1}}),a}),define("home/views/FetchingView",["backbone-marionette"],function(e){var t=e.ItemView.extend({className:"spinner",template:function(){}});return t}),define("home/templates/loadError",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="feed-wrapper">\n'+a(t.gettext.call(e,"Woops! Something went wrong.",{name:"gettext",hash:{},data:i}))+' <a href="http://disqus.com/support/">'+a(t.gettext.call(e,"Get help »",{name:"gettext",hash:{},data:i}))+"</a>\n</div>\n"},useData:!0})}),define("home/views/ErrorView",["backbone-marionette","home/templates/loadError"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/views/common/FetchableCollectionView",["underscore","jquery","backbone","backbone-marionette","core/stance/main","home/views/FetchingView","home/views/ErrorView","home/utils/layoutUtils"],function(e,t,n,i,a,s,o,r){var l=i.CollectionView.extend({fetchingView:s,errorView:o,emptyView:n.View,initialize:function(e){this.listenable=this.model||this.collection,this.listenTo(this.listenable,"change:fetching",this.render),this.listenTo(this.collection,"add",this.closeNonItemViews),this.listenTo(this.collection,"reset",this.closeViews),this.listenTo(this,"before:item:added",this.onFirstItem),e.infiniteScroll&&this.setupInfiniteScroll()},setupInfiniteScroll:function(){a.bindWindowEvents(),this.listenTo(this,"after:item:added",e.debounce(this.updateInfiniteScrollTrigger,0))},onFirstItem:function(e){this.collection.at(0)===e.model&&(this.stopListening(this,"before:item:added",this.onFirstItem),this.listenToOnce(e,"show",function(){this.trigger("showFirstItem",e)}))},infiniteScrollTriggerOffset:function(){return-t(window).height()},updateInfiniteScrollTrigger:function(){var e=this.collection,t=e.last();if(t){var n=this.children.findByModel(t);if(n){var i=this.infiniteScrollTrigger;i&&this.stopListening(i),i=a({el:n.el,topEdgeOffset:this.infiniteScrollTriggerOffset}),this.infiniteScrollTrigger=i,this.listenToOnce(i,"enter",this.loadMore)}}},loadMore:function(){var e=this.listenable;e.fetchItems?e.fetchItems():e.more&&e.more(),this.infiniteScrollTrigger=null},onCollectionBeforeClose:function(){this._showingEmptyView=!0},onCollectionClosed:function(){this._showingEmptyView=!1},render:function(){var e=!this.collection.length,t=this.isFetching(),n=this.isError();n?this.showErrorView():e?t?this.showFetchingView():this._showingEmptyView||i.CollectionView.prototype.render.apply(this,arguments):(!this.children.length||this.isShowingNonItemView())&&(this.closeViews(),i.CollectionView.prototype.render.apply(this,arguments)),r.scrollShownChanged()},buildItemView:function(t,n,a){return this._showingEmptyView&&this.emptyViewOptions&&(a=i.getOption(this,"emptyViewOptions"),e.isFunction(a)&&(a=a.call(this))),i.CollectionView.prototype.buildItemView.call(this,t,n,a)},isFetching:function(){return this.checkState("fetching")},isError:function(){return this.checkState("error")},checkState:function(t){return this.listenable.get?this.listenable.get(t):e.result(this.listenable,t)},bindViewClose:function(e,t){var n=this;e.on("close",function(){n[t]=!1})},closeNonItemViews:function(){this.isShowingNonItemView()&&this.closeViews()},isShowingNonItemView:function(){return this._showingFetchingView||this._showingErrorView||this._showingEmptyView},closeViews:function(){this._showingEmptyView=!0,this.closeChildren(),this._showingEmptyView=!1,this._showingFetchingView=!1,this._showingErrorView=!1},showFetchingView:function(){var e=i.getOption(this,"fetchingView");if(e&&!this._showingFetchingView){this.closeViews(),this._showingFetchingView=!0;var t=this.model||new n.Model,a=this.addItemView(t,e,0);this.bindViewClose(a,"_showingFetchingView")}},showErrorView:function(){var e=i.getOption(this,"errorView");if(e&&!this._showingErrorView){this.closeViews(),this._showingErrorView=!0;var t=this.model||new n.Model,a=this.addItemView(t,e,0);this.bindViewClose(a,"_showingErrorView")}}});return l}),define("home/views/PostCollectionView",["home/views/common/FetchableCollectionView","home/views/PostView"],function(e,t){return e.extend({itemView:t})}),define("home/templates/activityCardCreate",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s=this.escapeExpression,o='<div class="card-discussion-comments-title">'+s(t.gettext.call(e,"Recent Comments",{name:"gettext",hash:{},data:i}))+'</div>\n<div class="card-discussion-comments" data-role="posts"></div>\n';return a=t["if"].call(e,null!=e?e.shouldCollapse:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o},2:function(e,t,n,i){var a=this.escapeExpression;return'<div class="expandable">\n<div class="card-grouped-actions">\n<a href="#" data-action="toggle-collapsed" class="expandable card-expand">\n<div class="icon-more-vert"></div>\n'+a(t.gettext.call(e,"See More",{name:"gettext",hash:{},data:i}))+"\n</a>\n</div>\n</div>\n"},4:function(e){var t,n=this.lambda,i='<div class="card-summary">\n<div class="card-summary-content" dir="auto">\n';return t=n(null!=e?e.threadDescription:e,e),null!=t&&(i+=t),i+"\n</div>\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="card-reason">\n'+s(t.gettext.call(e,"%(group)s authored",{name:"gettext",hash:{group:t.getPartial.call(e,"userGroup",{name:"getPartial",hash:{},data:i})},data:i}))+'\n<span class="time">'+s(o(null!=e?e.relativeTime:e,e))+"</span>\n</div>\n";return a=this.invokePartial(n.cardTitle,"","cardTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+="\n",a=t["if"].call(e,null!=e?e.recentPostCount:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(4,i),data:i}),null!=a&&(r+=a),r+'\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardCreateView",["underscore","backbone-marionette","home/mixins/withReasonOld","home/mixins/withSubviews","home/views/ActivityFooterCreateView","home/views/PostCollectionView","home/templates/activityCardCreate"],function(e,t,n,i,a,s,o){var r=t.ItemView,l=r.extend({template:o,templateHelpers:function(){var e=this.model.thread.forum.get("favicon")&&this.model.thread.forum.get("favicon").cache;return{target:this.model.activities[0].target.toJSON(),discussionRoute:this.model.thread.getDiscussionRoute(),threadDescription:this.model.thread.getDefaultDescription(),recentPostCount:this.model.thread.recentPosts.length,shouldCollapse:this.shouldCollapse(),hideForumFavicon:!e||/favicon-default/.test(e)}},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)},regions:{postsRegion:"[data-role=posts]",footerRegion:"[data-role=footer]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostsView),this.activateRegion(this.footerRegion,this.createFooterView)},createPostsView:function(){return new s({el:this.postsRegion.el,collection:this.model.thread.recentPosts,itemViewOptions:function(t,n){var i=this.getItemView(t).prototype.className;i=e.isFunction(i)?i.call({model:t}):i||"";var a=i;return n>0&&(a+=" collapsible"),{className:a}}})},createFooterView:function(){var e=new a({el:this.footerRegion.el,model:this.model});return this.listenTo(e,"toggle:collapsed",function(){this.trigger("toggle:collapsed")}),e},shouldCollapse:function(){return this.model.thread.recentPosts.length>1}}),c=l.prototype;return n.call(c),i.call(c),l}),define("home/templates/activityCard",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s="";return a=this.invokePartial(n.threadImage,"","threadImage",e,void 0,t,n,i),null!=a&&(s+=a),s},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="card-discussion">\n<div class="card-aside" data-role="thread-image">\n';return a=t["if"].call(e,null!=e?e.canShowThreadImage:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'</div>\n<div class="card-body">\n<div data-role="card-content"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardView",["underscore","jquery","backbone-marionette","handlebars","home/utils/mixpanelUtils","home/utils/layoutUtils","home/mixins/asCollapsibleCard","home/mixins/withSubviews","home/views/ActivityCardFavoriteView","home/views/ActivityCardPostView","home/views/ActivityCardReplyView","home/views/ActivityCardTrendingView","home/views/ActivityCardCreateView","home/templates/activityCard"],function(e,t,n,i,a,s,o,r,l,c,u,d,h,m){var p=n.ItemView,f=p.extend({className:function(){return"card card-"+this.model.get("verb")},template:m,templateHelpers:function(){return{canShowThreadImage:this.canShowThreadImage(),discussionRoute:this.model.thread.getDiscussionRoute(),image:this.model.thread.getImage()}},events:{"click [data-role=thread-link]":"trackOpenedThread"},initialize:function(){this.canShowThreadImage()&&this.listenTo(this.model.thread,"change:content",this.renderThreadImage),this.contentRegion=this.addRegion("[data-role=card-content]")},getContentView:function(){var e;switch(this.model.get("verb")){case"favorite":e=l;break;case"post":e=c;break;case"reply":e=u;break;case"trending":e=d;break;case"create":e=h}return new e({el:this.contentRegion.el,model:this.model})},canShowThreadImage:function(){return s.getScreenWidth()>480},renderThreadImage:function(){if(this.canShowThreadImage()){var e=this.serializeData();e=this.mixinTemplateHelpers(e),this.$("[data-role=thread-image]").html(i.partials.threadImage(e))}},onRender:function(){var e=this.contentRegion;this.activateRegion(e,this.getContentView);var t=e.currentView;t.shouldCollapse&&t.shouldCollapse()&&this.$el.addClass("card-collapsed")},trackOpenedThread:function(e){a.track("click external article",e)}}),g=f.prototype;return o.call(g),r.call(g),f}),define("home/templates/feedEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"Woops, nothing is happening here.",{name:"gettext",hash:{},data:i}))+"\n"},useData:!0})}),define("home/views/FeedEmptyView",["backbone-marionette","home/templates/feedEmpty"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/mixins/withViewFeedTracking",["underscore","core/bus"],function(e,t){var n=function(){var n=this.initialize;this.initialize=function(){n.apply(this,arguments),this.listenTo(this,"after:item:added",this.trackView)},this.trackView=function(){this._showingFetchingView||(t.trigger("viewFeed",this),this.stopListening(this,"after:item:added",this.trackView),e.defer(e.bind(function(){this.listenTo(this.collection,"sync",this.trackViewMore)},this)))},this.trackViewMore=function(){t.trigger("viewMoreFeed",this.getNumPages())},this.getNumPages=function(){return this.model&&this.model.get("numPages")}};return n}),define("home/views/ActivityCardCollectionView",["underscore","home/utils/layoutUtils","home/utils/mixpanelUtils","home/views/ActivityCardView","home/views/common/FetchableCollectionView","home/views/FeedEmptyView","home/mixins/withViewFeedTracking","home/mixins/withClickLinkTracking"],function(e,t,n,i,a,s,o,r){var l=a.extend({className:"cards",emptyView:s,itemView:i,events:e.defaults({"click a[data-link-name]":function(e){this.isShowingNonItemView()||this.trackClickLink(e)}},a.prototype.events),onShow:function(){var t=this;e.defer(function(){n.track("view feed",{target:t.$el})})}});return o.call(l.prototype),r.call(l.prototype),l}),define("home/collections/RecommendedForumCollection",["backbone","home/models/common/UniqueModel","home/models/Forum","core/api"],function(e,t,n,i){return e.Collection.extend({url:i.getURL("users/recommendedForumsToFollow"),model:t.boundModel(n),addSpecial:function(e){return e.unshift({id:"channel-talkshop",name:"Talk Shop",favicon:{cache:"//a.disquscdn.com/uploads/forums/321/8035/favicon.png"}}),e},parse:function(e){return this.addSpecial(e.response)}})}),define("home/templates/suggestions",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="carousel" data-role="carousel">\n<div data-role="cards-container">\n</div>\n</div>\n'},useData:!0})}),function(e){"function"==typeof define&&define.amd?define("slick",["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var t=window.Slick||{};t=function(){function t(t,i){var a,s,o=this;if(o.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(t),appendDots:e(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,onSetPosition:null,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rtl:!1,slide:"div",slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},o.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},e.extend(o,o.initials),o.activeBreakpoint=null,o.animType=null,o.animProp=null,o.breakpoints=[],o.breakpointSettings=[],o.cssTransitions=!1,o.paused=!1,o.positionProp=null,o.respondTo=null,o.shouldClick=!0,o.$slider=e(t),o.$slidesCache=null,o.transformType=null,o.transitionType=null,o.windowWidth=0,o.windowTimer=null,o.options=e.extend({},o.defaults,i),o.currentSlide=o.options.initialSlide,o.originalSettings=o.options,a=o.options.responsive||null,a&&a.length>-1){o.respondTo=o.options.respondTo||"window";for(s in a)a.hasOwnProperty(s)&&(o.breakpoints.push(a[s].breakpoint),o.breakpointSettings[a[s].breakpoint]=a[s].settings);o.breakpoints.sort(function(e,t){return t-e})}o.autoPlay=e.proxy(o.autoPlay,o),o.autoPlayClear=e.proxy(o.autoPlayClear,o),o.changeSlide=e.proxy(o.changeSlide,o),o.clickHandler=e.proxy(o.clickHandler,o),o.selectHandler=e.proxy(o.selectHandler,o),o.setPosition=e.proxy(o.setPosition,o),o.swipeHandler=e.proxy(o.swipeHandler,o),o.dragHandler=e.proxy(o.dragHandler,o),o.keyHandler=e.proxy(o.keyHandler,o),o.autoPlayIterator=e.proxy(o.autoPlayIterator,o),o.instanceUid=n++,o.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,o.init(),o.checkResponsive()}var n=0;return t}(),t.prototype.addSlide=function(t,n,i){var a=this;if("boolean"==typeof n)i=n,n=null;else if(0>n||n>=a.slideCount)return!1;a.unload(),"number"==typeof n?0===n&&0===a.$slides.length?e(t).appendTo(a.$slideTrack):i?e(t).insertBefore(a.$slides.eq(n)):e(t).insertAfter(a.$slides.eq(n)):i===!0?e(t).prependTo(a.$slideTrack):e(t).appendTo(a.$slideTrack),a.$slides=a.$slideTrack.children(this.options.slide),a.$slideTrack.children(this.options.slide).detach(),a.$slideTrack.append(a.$slides),a.$slides.each(function(t,n){e(n).attr("index",t)}),a.$slidesCache=a.$slides,a.reinit()},t.prototype.animateSlide=function(t,n){var i={},a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var s=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:s},a.options.speed)}a.options.rtl===!0&&a.options.vertical===!1&&(t=-t),a.transformsEnabled===!1?a.options.vertical===!1?a.$slideTrack.animate({left:t},a.options.speed,a.options.easing,n):a.$slideTrack.animate({top:t},a.options.speed,a.options.easing,n):a.cssTransitions===!1?e({animStart:a.currentLeft}).animate({animStart:t},{duration:a.options.speed,easing:a.options.easing,step:function(e){a.options.vertical===!1?(i[a.animType]="translate("+e+"px, 0px)",a.$slideTrack.css(i)):(i[a.animType]="translate(0px,"+e+"px)",a.$slideTrack.css(i))},complete:function(){n&&n.call()}}):(a.applyTransition(),i[a.animType]=a.options.vertical===!1?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px,"+t+"px, 0px)",a.$slideTrack.css(i),n&&setTimeout(function(){a.disableTransition(),n.call()},a.options.speed))},t.prototype.asNavFor=function(t){var n=this,i=null!=n.options.asNavFor?e(n.options.asNavFor).getSlick():null;null!=i&&i.slideHandler(t,!0)},t.prototype.applyTransition=function(e){var t=this,n={};n[t.transitionType]=t.options.fade===!1?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&e.paused!==!0&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this;e.options.infinite===!1?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(e.currentSlide-1===0&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow=e(t.options.prevArrow),t.$nextArrow=e(t.options.nextArrow),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.appendTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled"))},t.prototype.buildDots=function(){var t,n,i=this;if(i.options.dots===!0&&i.slideCount>i.options.slidesToShow){for(n='<ul class="'+i.options.dotsClass+'">',t=0;t<=i.getDotCount();t+=1)n+="<li>"+i.options.customPaging.call(this,i,t)+"</li>";n+="</ul>",i.$dots=e(n).appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,n){e(n).attr("index",t)}),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),t.options.centerMode===!0&&(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.options.accessibility===!0&&t.$list.prop("tabIndex",0),t.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.checkResponsive=function(){var t,n,i,a=this,s=a.$slider.width(),o=window.innerWidth||e(window).width();if("window"===a.respondTo?i=o:"slider"===a.respondTo?i=s:"min"===a.respondTo&&(i=Math.min(o,s)),a.originalSettings.responsive&&a.originalSettings.responsive.length>-1&&null!==a.originalSettings.responsive){n=null;for(t in a.breakpoints)a.breakpoints.hasOwnProperty(t)&&a.breakpoints[t]>i&&(n=a.breakpoints[t]);null!==n?null!==a.activeBreakpoint?n!==a.activeBreakpoint&&(a.activeBreakpoint=n,a.options=e.extend({},a.originalSettings,a.breakpointSettings[n]),a.refresh()):(a.activeBreakpoint=n,a.options=e.extend({},a.originalSettings,a.breakpointSettings[n]),a.refresh()):null!==a.activeBreakpoint&&(a.activeBreakpoint=null,a.options=a.originalSettings,a.refresh())}},t.prototype.changeSlide=function(t,n){var i,a,s,o,r,l=this,c=e(t.target);switch(c.is("a")&&t.preventDefault(),s=l.slideCount%l.options.slidesToScroll!==0,i=s?0:(l.slideCount-l.currentSlide)%l.options.slidesToScroll,t.data.message){case"previous":a=0===i?l.options.slidesToScroll:l.options.slidesToShow-i,l.slideCount>l.options.slidesToShow&&l.slideHandler(l.currentSlide-a,!1,n);break;case"next":a=0===i?l.options.slidesToScroll:i,l.slideCount>l.options.slidesToShow&&l.slideHandler(l.currentSlide+a,!1,n);break;case"index":var u=0===t.data.index?0:t.data.index||e(t.target).parent().index()*l.options.slidesToScroll;if(o=l.getNavigableIndexes(),r=0,o[u]&&o[u]===u)if(u>o[o.length-1])u=o[o.length-1];else for(var d in o){if(o[d]>u){u=r;break}r=o[d]}l.slideHandler(u,!1,n);default:return}},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(){var t=this;t.autoPlayClear(),t.touchObject={},e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&"object"!=typeof t.options.prevArrow&&t.$prevArrow.remove(),t.$nextArrow&&"object"!=typeof t.options.nextArrow&&t.$nextArrow.remove(),t.$slides.parent().hasClass("slick-track")&&t.$slides.unwrap().unwrap(),t.$slides.removeClass("slick-slide slick-active slick-center slick-visible").removeAttr("index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$list.off(".slick"),e(window).off(".slick-"+t.instanceUid),e(document).off(".slick-"+t.instanceUid)},t.prototype.disableTransition=function(e){var t=this,n={};n[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.fadeSlide=function(e,t,n){var i=this;i.cssTransitions===!1?(i.$slides.eq(t).css({zIndex:1e3}),i.$slides.eq(t).animate({opacity:1},i.options.speed,i.options.easing,n),i.$slides.eq(e).animate({opacity:0},i.options.speed,i.options.easing)):(i.applyTransition(t),i.applyTransition(e),i.$slides.eq(t).css({opacity:1,zIndex:1e3}),i.$slides.eq(e).css({opacity:0}),n&&setTimeout(function(){i.disableTransition(t),i.disableTransition(e),n.call()},i.options.speed))},t.prototype.filterSlides=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,n=0,i=0;if(e.options.infinite===!0)i=Math.ceil(e.slideCount/e.options.slidesToScroll);else for(;e.slideCount>t;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToShow>=e.options.slidesToScroll?e.options.slidesToScroll:e.options.slidesToShow;return i-1},t.prototype.getLeft=function(e){var t,n,i,a=this,s=0;return a.slideOffset=0,n=a.$slides.first().outerHeight(),a.options.infinite===!0?(a.slideCount>a.options.slidesToShow&&(a.slideOffset=a.slideWidth*a.options.slidesToShow*-1,s=n*a.options.slidesToShow*-1),a.slideCount%a.options.slidesToScroll!==0&&e+a.options.slidesToScroll>a.slideCount&&a.slideCount>a.options.slidesToShow&&(e>a.slideCount?(a.slideOffset=(a.options.slidesToShow-(e-a.slideCount))*a.slideWidth*-1,s=(a.options.slidesToShow-(e-a.slideCount))*n*-1):(a.slideOffset=a.slideCount%a.options.slidesToScroll*a.slideWidth*-1,s=a.slideCount%a.options.slidesToScroll*n*-1))):e+a.options.slidesToShow>a.slideCount&&(a.slideOffset=(e+a.options.slidesToShow-a.slideCount)*a.slideWidth,s=(e+a.options.slidesToShow-a.slideCount)*n),a.options.slidesToShow>=a.slideCount&&(a.slideOffset=0,s=0),a.options.centerMode===!0&&a.options.infinite===!0?a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)-a.slideWidth:a.options.centerMode===!0&&(a.slideOffset=0,a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)),t=a.options.vertical===!1?e*a.slideWidth*-1+a.slideOffset:e*n*-1+s,a.options.variableWidth===!0&&(i=a.$slideTrack.children(".slick-slide").eq(a.options.slidesToShow>=a.slideCount||a.options.infinite===!1?e:e+a.options.slidesToShow),t=i[0]?-1*i[0].offsetLeft:0,a.options.centerMode===!0&&(i=a.$slideTrack.children(".slick-slide").eq(a.options.infinite===!1?e:e+a.options.slidesToShow+1),t=i[0]?-1*i[0].offsetLeft:0,t+=(a.$list.width()-i.outerWidth())/2)),t},t.prototype.getNavigableIndexes=function(){for(var e=this,t=0,n=0,i=[];e.slideCount>t;)i.push(t),t=n+e.options.slidesToScroll,n+=e.options.slidesToShow>=e.options.slidesToScroll?e.options.slidesToScroll:e.options.slidesToShow;return i},t.prototype.getSlideCount=function(){var t,n=this;if(n.options.swipeToSlide===!0){var i=null;return n.$slideTrack.find(".slick-slide").each(function(t,a){return a.offsetLeft+e(a).outerWidth()/2>-1*n.swipeLeft?(i=a,!1):void 0}),t=Math.abs(e(i).attr("index")-n.currentSlide)}return n.options.slidesToScroll},t.prototype.init=function(){var t=this;e(t.$slider).hasClass("slick-initialized")||(e(t.$slider).addClass("slick-initialized"),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots()),null!==t.options.onInit&&t.options.onInit.call(this,t)},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&e("li",t.$dots).on("mouseenter.slick",function(){t.paused=!0,t.autoPlayClear()}).on("mouseleave.slick",function(){t.paused=!1,t.autoPlay()})},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),t.options.pauseOnHover===!0&&t.options.autoplay===!0&&(t.$list.on("mouseenter.slick",function(){t.paused=!0,t.autoPlayClear()}),t.$list.on("mouseleave.slick",function(){t.paused=!1,t.autoPlay()})),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.options.slide,t.$slideTrack).on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,function(){t.checkResponsive(),t.setPosition()}),e(window).on("resize.slick.slick-"+t.instanceUid,function(){e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.setPosition()},50))}),e("*[draggable!=true]",t.$slideTrack).on("dragstart",function(e){e.preventDefault()}),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),e.options.autoplay===!0&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;37===e.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:"previous"}}):39===e.keyCode&&t.options.accessibility===!0&&t.changeSlide({data:{message:"next"}})},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),n=e(this).attr("data-lazy");t.load(function(){t.animate({opacity:1},200)}).css({opacity:0}).attr("src",n).removeAttr("data-lazy").removeClass("slick-loading")})}var n,i,a,s,o=this;o.options.centerMode===!0?o.options.infinite===!0?(a=o.currentSlide+(o.options.slidesToShow/2+1),s=a+o.options.slidesToShow+2):(a=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),s=2+(o.options.slidesToShow/2+1)+o.currentSlide):(a=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,s=a+o.options.slidesToShow,o.options.fade===!0&&(a>0&&a--,o.slideCount>=s&&s++)),n=o.$slider.find(".slick-slide").slice(a,s),t(n),o.options.slidesToShow>=o.slideCount?(i=o.$slider.find(".slick-slide"),t(i)):o.currentSlide>=o.slideCount-o.options.slidesToShow?(i=o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow),t(i)):0===o.currentSlide&&(i=o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow),t(i))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.postSlide=function(e){var t=this;null!==t.options.onAfterChange&&t.options.onAfterChange.call(this,t,e),t.animating=!1,t.setPosition(),t.swipeLeft=null,t.options.autoplay===!0&&t.paused===!1&&t.autoPlay()},t.prototype.progressiveLazyLoad=function(){var t,n,i=this;t=e("img[data-lazy]",i.$slider).length,t>0&&(n=e("img[data-lazy]",i.$slider).first(),n.attr("src",n.attr("data-lazy")).removeClass("slick-loading").load(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad()}).error(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad()}))},t.prototype.refresh=function(){var t=this,n=t.currentSlide;t.destroy(),e.extend(t,t.initials),t.init(),t.changeSlide({data:{message:"index",index:n}},!0)},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.options.slidesToShow>=t.slideCount&&(t.currentSlide=0),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.options.focusOnSelect===!0&&e(t.options.slide,t.$slideTrack).on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),null!==t.options.onReInit&&t.options.onReInit.call(this,t)},t.prototype.removeSlide=function(e,t,n){var i=this;return"boolean"==typeof e?(t=e,e=t===!0?0:i.slideCount-1):e=t===!0?--e:e,1>i.slideCount||0>e||e>i.slideCount-1?!1:(i.unload(),n===!0?i.$slideTrack.children().remove():i.$slideTrack.children(this.options.slide).eq(e).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,void i.reinit())},t.prototype.setCSS=function(e){var t,n,i=this,a={};i.options.rtl===!0&&(e=-e),t="left"==i.positionProp?e+"px":"0px",n="top"==i.positionProp?e+"px":"0px",a[i.positionProp]=e,i.transformsEnabled===!1?i.$slideTrack.css(a):(a={},i.cssTransitions===!1?(a[i.animType]="translate("+t+", "+n+")",i.$slideTrack.css(a)):(a[i.animType]="translate3d("+t+", "+n+", 0px)",i.$slideTrack.css(a)))},t.prototype.setDimensions=function(){var t=this;if(t.options.vertical===!1?t.options.centerMode===!0&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),t.options.centerMode===!0&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),t.options.vertical===!1&&t.options.variableWidth===!1)t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length));
else if(t.options.variableWidth===!0){var n=0;t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.children(".slick-slide").each(function(){n+=Math.ceil(e(this).outerWidth(!0))}),t.$slideTrack.width(Math.ceil(n)+1)}else t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length));var i=t.$slides.first().outerWidth(!0)-t.$slides.first().width();t.options.variableWidth===!1&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-i)},t.prototype.setFade=function(){var t,n=this;n.$slides.each(function(i,a){t=n.slideWidth*i*-1,e(a).css(n.options.rtl===!0?{position:"relative",right:t,top:0,zIndex:800,opacity:0}:{position:"relative",left:t,top:0,zIndex:800,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:900,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),null!==e.options.onSetPosition&&e.options.onSetPosition.call(this,e)},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&e.options.useCSS===!0&&(e.cssTransitions=!0),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var t,n,i,a,s=this;s.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center"),n=s.$slider.find(".slick-slide"),s.options.centerMode===!0?(t=Math.floor(s.options.slidesToShow/2),s.options.infinite===!0&&(e>=t&&s.slideCount-1-t>=e?s.$slides.slice(e-t,e+t+1).addClass("slick-active"):(i=s.options.slidesToShow+e,n.slice(i-t+1,i+t+2).addClass("slick-active")),0===e?n.eq(n.length-1-s.options.slidesToShow).addClass("slick-center"):e===s.slideCount-1&&n.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(e).addClass("slick-center")):e>=0&&s.slideCount-s.options.slidesToShow>=e?s.$slides.slice(e,e+s.options.slidesToShow).addClass("slick-active"):s.options.slidesToShow>=n.length?n.addClass("slick-active"):(a=s.slideCount%s.options.slidesToShow,i=s.options.infinite===!0?s.options.slidesToShow+e:e,s.options.slidesToShow==s.options.slidesToScroll&&s.options.slidesToShow>s.slideCount-e?n.slice(i-(s.options.slidesToShow-a),i+a).addClass("slick-active"):n.slice(i,i+s.options.slidesToShow).addClass("slick-active")),"ondemand"===s.options.lazyLoad&&s.lazyLoad()},t.prototype.setupInfinite=function(){var t,n,i,a=this;if(a.options.fade===!0&&(a.options.centerMode=!1),a.options.infinite===!0&&a.options.fade===!1&&(n=null,a.slideCount>a.options.slidesToShow)){for(i=a.options.centerMode===!0?a.options.slidesToShow+1:a.options.slidesToShow,t=a.slideCount;t>a.slideCount-i;t-=1)n=t-1,e(a.$slides[n]).clone(!0).attr("id","").attr("index",n-a.slideCount).prependTo(a.$slideTrack).addClass("slick-cloned");for(t=0;i>t;t+=1)n=t,e(a.$slides[n]).clone(!0).attr("id","").attr("index",n+a.slideCount).appendTo(a.$slideTrack).addClass("slick-cloned");a.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.selectHandler=function(t){var n=this,i=parseInt(e(t.target).parents(".slick-slide").attr("index"));return i||(i=0),n.options.slidesToShow>=n.slideCount?(n.$slider.find(".slick-slide").removeClass("slick-active"),n.$slides.eq(i).addClass("slick-active"),n.options.centerMode===!0&&(n.$slider.find(".slick-slide").removeClass("slick-center"),n.$slides.eq(i).addClass("slick-center")),void n.asNavFor(i)):void n.slideHandler(i)},t.prototype.slideHandler=function(e,t,n){var i,a,s,o,r=null,l=this;return t=t||!1,l.animating===!0&&l.options.waitForAnimate===!0||l.options.fade===!0&&l.currentSlide===e||l.options.slidesToShow>=l.slideCount?void 0:(t===!1&&l.asNavFor(e),i=e,r=l.getLeft(i),o=l.getLeft(l.currentSlide),l.currentLeft=null===l.swipeLeft?o:l.swipeLeft,l.options.infinite===!1&&l.options.centerMode===!1&&(0>e||e>l.getDotCount()*l.options.slidesToScroll)?void(l.options.fade===!1&&(i=l.currentSlide,n!==!0?l.animateSlide(o,function(){l.postSlide(i)}):l.postSlide(i))):l.options.infinite===!1&&l.options.centerMode===!0&&(0>e||e>l.slideCount-l.options.slidesToScroll)?void(l.options.fade===!1&&(i=l.currentSlide,n!==!0?l.animateSlide(o,function(){l.postSlide(i)}):l.postSlide(i))):(l.options.autoplay===!0&&clearInterval(l.autoPlayTimer),a=0>i?l.slideCount%l.options.slidesToScroll!==0?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+i:i>=l.slideCount?l.slideCount%l.options.slidesToScroll!==0?0:i-l.slideCount:i,l.animating=!0,null!==l.options.onBeforeChange&&e!==l.currentSlide&&l.options.onBeforeChange.call(this,l,l.currentSlide,a),s=l.currentSlide,l.currentSlide=a,l.setSlideClasses(l.currentSlide),l.updateDots(),l.updateArrows(),l.options.fade===!0?void(n!==!0?l.fadeSlide(s,a,function(){l.postSlide(a)}):l.postSlide(a)):void(n!==!0?l.animateSlide(r,function(){l.postSlide(a)}):l.postSlide(a))))},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,n,i,a=this;return e=a.touchObject.startX-a.touchObject.curX,t=a.touchObject.startY-a.touchObject.curY,n=Math.atan2(t,e),i=Math.round(180*n/Math.PI),0>i&&(i=360-Math.abs(i)),45>=i&&i>=0?a.options.rtl===!1?"left":"right":360>=i&&i>=315?a.options.rtl===!1?"left":"right":i>=135&&225>=i?a.options.rtl===!1?"right":"left":"vertical"},t.prototype.swipeEnd=function(){var e=this;if(e.dragging=!1,e.shouldClick=e.touchObject.swipeLength>10?!1:!0,void 0===e.touchObject.curX)return!1;if(e.touchObject.swipeLength>=e.touchObject.minSwipe)switch(e.swipeDirection()){case"left":e.slideHandler(e.currentSlide+e.getSlideCount()),e.currentDirection=0,e.touchObject={};break;case"right":e.slideHandler(e.currentSlide-e.getSlideCount()),e.currentDirection=1,e.touchObject={}}else e.touchObject.startX!==e.touchObject.curX&&(e.slideHandler(e.currentSlide),e.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,n,i,a,s=this;return a=void 0!==e.originalEvent?e.originalEvent.touches:null,!s.dragging||a&&1!==a.length?!1:(t=s.getLeft(s.currentSlide),s.touchObject.curX=void 0!==a?a[0].pageX:e.clientX,s.touchObject.curY=void 0!==a?a[0].pageY:e.clientY,s.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(s.touchObject.curX-s.touchObject.startX,2))),n=s.swipeDirection(),"vertical"!==n?(void 0!==e.originalEvent&&s.touchObject.swipeLength>4&&e.preventDefault(),i=(s.options.rtl===!1?1:-1)*(s.touchObject.curX>s.touchObject.startX?1:-1),s.swipeLeft=s.options.vertical===!1?t+s.touchObject.swipeLength*i:t+s.touchObject.swipeLength*(s.$list.height()/s.listWidth)*i,s.options.fade===!0||s.options.touchMove===!1?!1:s.animating===!0?(s.swipeLeft=null,!1):void s.setCSS(s.swipeLeft)):void 0)},t.prototype.swipeStart=function(e){var t,n=this;return 1!==n.touchObject.fingerCount||n.options.slidesToShow>=n.slideCount?(n.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==t?t.pageX:e.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(n.dragging=!0))},t.prototype.unfilterSlides=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&"object"!=typeof t.options.prevArrow&&t.$prevArrow.remove(),t.$nextArrow&&"object"!=typeof t.options.nextArrow&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible").css("width","")},t.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.options.infinite!==!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.removeClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1?(t.$nextArrow.addClass("slick-disabled"),t.$prevArrow.removeClass("slick-disabled")):t.currentSlide>t.slideCount-t.options.slidesToShow+e&&t.options.centerMode===!0&&(t.$nextArrow.addClass("slick-disabled"),t.$prevArrow.removeClass("slick-disabled")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},e.fn.slick=function(e){var n=this;return n.each(function(n,i){i.slick=new t(i,e)})},e.fn.slickAdd=function(e,t,n){var i=this;return i.each(function(i,a){a.slick.addSlide(e,t,n)})},e.fn.slickCurrentSlide=function(){var e=this;return e.get(0).slick.getCurrent()},e.fn.slickFilter=function(e){var t=this;return t.each(function(t,n){n.slick.filterSlides(e)})},e.fn.slickGoTo=function(e,t){var n=this;return n.each(function(n,i){i.slick.changeSlide({data:{message:"index",index:parseInt(e)}},t)})},e.fn.slickNext=function(){var e=this;return e.each(function(e,t){t.slick.changeSlide({data:{message:"next"}})})},e.fn.slickPause=function(){var e=this;return e.each(function(e,t){t.slick.autoPlayClear(),t.slick.paused=!0})},e.fn.slickPlay=function(){var e=this;return e.each(function(e,t){t.slick.paused=!1,t.slick.autoPlay()})},e.fn.slickPrev=function(){var e=this;return e.each(function(e,t){t.slick.changeSlide({data:{message:"previous"}})})},e.fn.slickRemove=function(e,t){var n=this;return n.each(function(n,i){i.slick.removeSlide(e,t)})},e.fn.slickRemoveAll=function(){var e=this;return e.each(function(e,t){t.slick.removeSlide(null,null,!0)})},e.fn.slickGetOption=function(e){var t=this;return t.get(0).slick.options[e]},e.fn.slickSetOption=function(e,t,n){var i=this;return i.each(function(i,a){a.slick.options[e]=t,n===!0&&(a.slick.unload(),a.slick.reinit())})},e.fn.slickUnfilter=function(){var e=this;return e.each(function(e,t){t.slick.unfilterSlides()})},e.fn.unslick=function(){var e=this;return e.each(function(e,t){t.slick&&t.slick.destroy()})},e.fn.getSlick=function(){var e=null,t=this;return t.each(function(t,n){e=n.slick}),e}}),define("home/views/CarouselView",["jquery","underscore","backbone-marionette","home/templates/suggestions","slick"],function(e,t,n,i){var a=n.CompositeView.extend({template:i,itemViewContainer:"[data-role=cards-container]",ui:{carousel:"[data-role=carousel]",left:"[data-action=scroll-left]",right:"[data-action=scroll-right]"},onCompositeCollectionRendered:function(){this.children.length&&t.defer(t.bind(this.slickify,this))},slickify:function(){var e=Math.min(3,this.children.length);this.$(this.itemViewContainer).slick({infinite:!1,appendArrows:this.ui.carousel,prevArrow:'<div class="carousel-nav left" data-action="scroll-left"></div>',nextArrow:'<div class="carousel-nav right" data-action="scroll-right"></div>',slidesToShow:e,slidesToScroll:e,responsive:[{breakpoint:1024,settings:{slidesToShow:e,slidesToScroll:e}},{breakpoint:768,settings:{slidesToShow:Math.max(e-1,1),slidesToScroll:Math.max(e-1,1)}},{breakpoint:480,settings:{slidesToShow:Math.max(e-2,1),slidesToScroll:Math.max(e-2,1)}}]})}});return a}),define("home/views/BaseSuggestionCardView",["underscore","backbone-marionette","handlebars","home/views/CarouselView","home/mixins/withClickLinkTracking","home/mixins/withSubviews"],function(e,t,n,i,a,s){var o=t.ItemView,r=o.extend({className:"card suggestions",events:{"click a[data-link-name]":"trackClickLinkWithArea"},hideIfEmpty:function(){this.collection.length||this.$el.hide()},fetchSuggestions:function(){return this.collection.fetch({reset:!0,success:e.bind(this.hideIfEmpty,this)})},regions:{suggestionsRegion:"[data-role=suggestions]"},onRender:function(){this.activateRegion(this.suggestionsRegion,this.createSuggestionsView)},createSuggestionsView:function(){return new i({el:this.suggestionsRegion.el,collection:this.collection,itemView:this.CollectionItemViewClass,itemViewOptions:{className:"carousel-card"}})}}),l=r.prototype;return a.call(l,"carousel_card"),s.call(l),r}),define("home/views/BaseSuggestionView",["backbone-marionette","home/utils/mixpanelUtils"],function(e,t){return e.ItemView.extend({events:{"click [data-action=toggle-follow]":"toggleFollow"},modelEvents:{"change:name":"render","change:followed change:isFollowing":"handleFollowedClass"},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("followed"))},toggleFollow:function(e,n){e&&e.preventDefault(),t.track(n,e,{properties:{follow:!this.model.get("followed")}}),this.model.toggleFollowed()}})}),define("home/templates/forumSuggestion",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s="";return a=this.invokePartial(n.forumAvatar,"","forumAvatar",e,void 0,t,n,i),null!=a&&(s+=a),s},3:function(e,t,n,i){var a,s="";return a=this.invokePartial(n.defaultForumAvatar,"","defaultForumAvatar",e,void 0,t,n,i),null!=a&&(s+=a),s},5:function(){return" active"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="avatar-forum-big">';return a=t["if"].call(e,null!=e?e.hasFavicon:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+='</div>\n<h3 class="name"><a class="link-gray-dark" href="/home/forums/'+o(s(null!=e?e.id:e,e))+'/" data-link-name="forum_name">',a=this.invokePartial(n.forumName,"","forumName",e,void 0,t,n,i),null!=a&&(r+=a),r+='</a></h3>\n<button class="btn btn-light btn-follow',a=t["if"].call(e,null!=e?e.followed:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'" data-action="toggle-follow"><span class="symbol-default"><span class="icon-plus"></span></span><span class="text-default">'+o(t.gettext.call(e,"Follow",{name:"gettext",hash:{},data:i}))+'</span><span class="symbol-following"><span class="icon-checkmark"></span></span><span class="text-following">'+o(t.gettext.call(e,"Following",{name:"gettext",hash:{},data:i}))+"</span></button>\n"},usePartial:!0,useData:!0})}),define("home/views/ForumSuggestionView",["home/config","home/views/BaseSuggestionView","home/templates/forumSuggestion"],function(e,t,n){var i=t.extend({template:n,templateHelpers:function(){return{hasFavicon:this.model.hasFavicon()}},serializeData:function(){var e=t.prototype.serializeData.call(this);return"channel-talkshop"===e.id&&(e.favicon.cache="//media.disquscdn.com/home/talkshop_favicon.png"),e},toggleFollow:function(e){this.constructor.__super__.toggleFollow.call(this,e,"follow forum")}});return i}),define("home/templates/forumSuggestionCard",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<header class="suggestions-header">\n'+a(t.gettext.call(e,"Recommended Communities",{name:"gettext",hash:{},data:i}))+'\n</header>\n<div class="carousel-wrapper" data-role="suggestions"></div>\n'},useData:!0})}),define("home/views/ForumSuggestionCardView",["underscore","home/collections/RecommendedForumCollection","home/views/BaseSuggestionCardView","home/views/ForumSuggestionView","home/templates/forumSuggestionCard"],function(e,t,n,i,a){var s=n.extend({attributes:{"data-mix-location":"forum suggestion card"},template:a,initialize:function(e){e=e||{},this.collection=new t,this.CollectionItemViewClass=i,n.prototype.initialize.call(this,e)}});return s}),define("home/collections/RecommendedUserCollection",["backbone","home/models/common/UniqueModel","home/models/User","core/api"],function(e,t,n,i){return e.Collection.extend({url:i.getURL("users/recommendedUsersToFollow"),model:t.boundModel(n),addSpecial:function(e){return e.unshift({username:"emma_hager",name:"Emma Hager",avatar:{cache:"//a.disquscdn.com/uploads/users/3111/3876/avatar92.jpg?1413818726"}}),e.splice(5,0,{username:"atdorsia",name:"Eliza",avatar:{cache:"//a.disquscdn.com/uploads/users/10794/5672/avatar92.jpg?1414190241"}}),e},parse:function(e){return this.addSpecial(e.response)}})}),define("home/templates/userSuggestion",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" active"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o="";return a=this.invokePartial(n.userAvatar,"","userAvatar",e,void 0,t,n,i),null!=a&&(o+=a),o+='<h3 class="name">',a=this.invokePartial(n.userName,"","userName",e,void 0,t,n,i),null!=a&&(o+=a),o+='</h3>\n<button class="btn btn-light btn-follow',a=t["if"].call(e,null!=e?e.isFollowing:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'" data-action="toggle-follow"><span class="symbol-default"><span class="icon-plus"></span></span><span class="text-default">'+s(t.gettext.call(e,"Follow",{name:"gettext",hash:{},data:i}))+'</span><span class="symbol-following"><span class="icon-checkmark"></span></span><span class="text-following">'+s(t.gettext.call(e,"Following",{name:"gettext",hash:{},data:i}))+"</span></button>\n"},usePartial:!0,useData:!0})}),define("home/views/UserSuggestionView",["home/views/BaseSuggestionView","home/templates/userSuggestion"],function(e,t){return e.extend({template:t,toggleFollow:function(e){this.constructor.__super__.toggleFollow.call(this,e,"follow user")}})}),define("home/templates/userSuggestionCard",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"%(channelName)s Creators",{name:"gettext",hash:{channelName:null!=e?e.name:e},data:i}))},3:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"Recommended People",{name:"gettext",hash:{},data:i}))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<header class="suggestions-header">';return a=t["if"].call(e,null!=e?e.name:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),s+'</header>\n<div class="carousel-wrapper" data-role="suggestions"></div>\n'},useData:!0})}),define("home/views/UserSuggestionCardView",["underscore","home/collections/RecommendedUserCollection","home/views/BaseSuggestionCardView","home/views/UserSuggestionView","home/templates/userSuggestionCard"],function(e,t,n,i,a){return n.extend({attributes:{"data-mix-location":"user suggestion card"},template:a,initialize:function(e){e=e||{},this.collection=e.collection||new t,this.CollectionItemViewClass=i,n.prototype.initialize.call(this,e)}})}),define("home/utils/trackingUtils",["jquery","underscore","backbone","remote/config","home/models/Session","home/utils/mixpanelUtils","home/utils/sidebarUtils","home/utils/inspectletUtils","home/utils/navigationUtils","core/analytics/jester","core/config/urls","core/bus"],function(e,t,n,i,a,s,o,r,l,c,u,d){function h(t){if(!l.lastNavigateTime){var n=window.performance;if(n){var i=e.now()-n.timing.navigationStart;i=parseInt(i,10),0>i||((new Image).src=u.jester+"/telemetry/home.gif?"+t+"="+i)}}}function m(e,t){var n=t/100;return function(){Math.random()<n&&e.apply(this,arguments)}}var p=m(h,i.lounge.home_telemetry_sampling_percent),f={},g={showFirstCard:p,showDiscussionCover:p,viewSection:function(){b({verb:"view",object_type:"section",object_id:c.client.get("zone")+"/"+c.client.get("section")})},viewFeed:function(e){var t={verb:"open",object_type:"section",object_id:c.client.get("zone")+"/"+c.client.get("section")+"/page-1"};e._showingEmptyView?t.adjective="empty":e._showingErrorView&&(t.adjective="error"),b(t)},viewMoreFeed:function(e){b({verb:"open",object_type:"section",object_id:c.client.get("zone")+"/"+c.client.get("section")+"/page-"+e})},removeFollower:function(e){b({verb:"remove-follower",object_type:"user",object_id:e.get("id")})},"uiCallback:postCreated":function(e,n){n=n||{},t.extend(n,{object_type:"post",object_id:e.id,verb:"post"}),e.has("parent")&&(n.target_type="comment",n.target_id=e.get("parent")),b(n),r.tagSession("posted a comment")},"uiAction:postUpvote":function(e){b({verb:"like",object_type:"post",object_id:e.id}),r.tagSession("upvoted")},"uiAction:postUnvote":function(e){b({verb:"unlike",object_type:"post",object_id:e.id})},"uiAction:postDownvote":function(e){b({verb:"dislike",object_type:"post",object_id:e.id})},"uiAction:clickLink":function(n,i){var a=e(n.currentTarget),s=l.isInbound(a[0]);b(t.extend({verb:"click",object_type:"link",object_id:a.attr("href"),adverb:s?"internal":"external"},i))}},v={user:"profile",inbox:"notifications",discussion:"thread",discuss:"thread",edit:"thread",forum:"community",topic:"topic",channel:"channel","/home/?$":"activityfeed",preload:"DNT"},w="n/a",b=function(n){"DNT"!==n.zone&&(n.zone||"DNT"!==c.client.get("zone"))&&e.when(f).then(function(e){c.client.emit(t.defaults(n,e))})};return{init:function(){var e={experiment:"V2",variant:"active",product:this.productName(),page_referrer_url:document.referrer};c.client.set(e),d.on(g)},productName:function(){return o.isSidebar()?"bridge":"home"},jesterEmit:b,pageChanged:function(){this.urlChanged(),this.setSection(),f={}},urlChanged:function(){var e=document.location.href,n=t.find(v,function(t,n){return RegExp(n).test(e)})||w;c.client.set({page_url:e,zone:n})},setSection:function(e){c.client.set({section:e||"default"})},setPageParams:function(e){f=e},initUser:function(e){e&&c.client.set("user_id",e)},trackVisit:function(){s.track(o.isSidebar()?"visit_homeception":"visit",{target:e("body")}),c.client.has("zone")||this.urlChanged();var n=this.productName(),i=function(){b({verb:"view",object_type:"product",object_id:n})},r=a.get();r.loadPromise().always(t.bind(function(){this.initUser(r.user.get("id")),i()},this))}}}),define("home/views/common/TabbedView",["jquery","underscore","backbone","backbone-marionette","home/utils/layoutUtils","home/utils/trackingUtils","home/utils/navigationUtils"],function(e,t,n,i,a,s,o){var r=i.Layout.extend({defaultTab:void 0,getTabView:function(){throw"Not implemented"},getTrackingSection:function(){return null},regions:{contentRegion:"[data-role=content-area]"},events:{"click [data-action=switch-tab]":"switchTab"},initialize:function(e){this.activeTab=e&&e.activeTab},switchTab:function(n){if(n){n.preventDefault();var i=e(n.currentTarget).data("tab");if(i!==this.activeTab)return this.activeTab=i||t.result(this,"defaultTab"),o.navigate(e(n.target).closest("a")[0]),this.updateTab(),!1}},updateTab:function(){this.activeTab||(this.activeTab=t.result(this,"defaultTab"));var e=this.activeTab;s.setSection(this.getTrackingSection(e)),this.updateTabContent(e),this.updateTabClasses(),a.scrollShownChanged()},updateTabClasses:function(){this.activeTab||(this.activeTab=t.result(this,"defaultTab")),this.$(".active[data-action=switch-tab]").removeClass("active"),this.$("[data-tab="+this.activeTab+"]").addClass("active")},updateTabContent:function(t){var n=this.contentRegion.currentView,i=this.getTabView(t);if(n){n.onBeforeClose=function(){return!1};var a=e(window).scrollTop();if(a){var s=a+e(window).height()-n.$el.offset().top;i.$el.css("minHeight",s)}}this.contentRegion.show(i),n&&(n.onBeforeClose=null,n.close())},onDomRefresh:function(){this.$(this.contentRegion.el).length&&this.updateTab()}});return r}),define("home/templates/homeFeedEmptyCover",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return'<h3 class="headline">'+a(t.gettext.call(e,"You fed your feed %(happyFace)s",{name:"gettext",hash:{happyFace:t.tag.call(e,"span",{name:"tag",hash:{text:":)","class":"face face-happy"},data:i})},data:i}))+' </h3>\n<p class="description">'+a(t.gettext.call(e,"Refresh to see your newly filled feed.",{name:"gettext",hash:{},data:i}))+"</p>\n"},3:function(e,t,n,i){var a=this.escapeExpression;return'<h3 class="headline">'+a(t.gettext.call(e,"Your feed's empty! %(sadFace)s",{name:"gettext",hash:{sadFace:t.tag.call(e,"span",{name:"tag",hash:{text:":(","class":"face face-sad"},data:i})},data:i}))+' </h3>\n<p class="description">'+a(t.gettext.call(e,"To get the best experience, follow some communities. We recommend these:",{name:"gettext",hash:{},data:i}))+"</p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="cover">\n<div class="cover-message">\n';return a=t["if"].call(e,null!=e?e.numTotalFollowing:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),s+"</div>\n</div>\n"},useData:!0})}),define("home/views/HomeFeedEmptyCoverView",["backbone-marionette","home/models/Session","home/templates/homeFeedEmptyCover"],function(e,t,n){var i=e.ItemView.extend({template:n,templateHelpers:function(){var e=!this.model.isAnonymous()&&this.model.user;return{numTotalFollowing:e?e.get("numFollowing")+e.get("numForumsFollowing"):0}},modelEvents:{"change:numFollowing":"render","change:numForumsFollowing":"render","change:id":"render"}});return i}),define("home/templates/homeFeedEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div data-role="cover-area"></div>\n<header class="nav-tabs-container">\n<ul class="nav-tabs">\n<li class="active" data-action="switch-tab" data-tab="forums">\n<a href="#"><span class="text-wide">'+a(t.gettext.call(e,"Communities",{name:"gettext",hash:{},data:i}))+'</span></a>\n</li>\n<li data-action="switch-tab" data-tab="people">\n<a href="#">'+a(t.gettext.call(e,"People",{name:"gettext",hash:{},data:i}))+'</a>\n</li>\n</ul>\n</header>\n<div data-role="content-area"></div>\n'},useData:!0})}),define("home/views/HomeFeedEmptyView",["jquery","underscore","home/views/common/TabbedView","home/views/HomeFeedEmptyCoverView","home/views/ForumSuggestionCardView","home/views/UserSuggestionCardView","home/models/Session","home/templates/homeFeedEmpty"],function(e,t,n,i,a,s,o,r){var l=n.extend({className:"home-empty",defaultTab:"forums",template:r,regions:t.defaults({coverRegion:"[data-role=cover-area]"},n.prototype.regions),onDomRefresh:function(){this.$(this.coverRegion.el).length&&this.coverRegion.show(new i({model:o.get()})),n.prototype.onDomRefresh.apply(this,arguments),this.trigger("toggleHeight","content")},getTabView:function(e){var t;switch(e){case"forums":t=new a;break;case"people":t=new s;break;default:return}return t.fetchSuggestions(),t}});return l}),define("home/views/HomeCardCollectionView",["jquery","underscore","home/utils/layoutUtils","home/utils/mixpanelUtils","home/views/ActivityCardCollectionView","home/views/ForumSuggestionCardView","home/views/UserSuggestionCardView","home/views/HomeFeedEmptyView"],function(e,t,n,i,a,s,o,r){var l=a.extend({emptyView:r,attributes:{"data-mix-location":"home"},initialize:function(){a.prototype.initialize.apply(this,arguments),this.listenTo(this,"after:item:added",this.onShowCard)},onClose:function(){this.handleOnScroll&&t.each(this.handleOnScroll,function(t){e(window).off("scroll",t)})},onShowCard:function(){var e=this.insertionPoint=this.insertionPoint||Math.floor(.75*this.collection.length);this.forumSuggestionCardView||this.children.length!==e||(this.forumSuggestionCardView=this.insertSuggestionCard(s)),this.userSuggestionCardView||this.children.length!==2*e||(this.userSuggestionCardView=this.insertSuggestionCard(o))},insertSuggestionCard:function(n){var i=this.addItemView(this.model,n);i.fetchSuggestions(),this.handleOnScroll||(this.handleOnScroll={});var a=t.debounce(t.bind(this.trackViewSuggestionCard,this,i),200);return this.handleOnScroll[i.cid]=a,e(window).scroll(a),i},trackViewSuggestionCard:function(t){if(n.isElementInViewport(t.$el)){i.track("view infeed suggestion",{target:t.$el});var a=this.handleOnScroll[t.cid];e(window).off("scroll",a)}}});return l}),define("home/templates/spinner",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="spinner"></div>\n'},useData:!0})}),define("home/templates/moreButton",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<a href="#" class="btn btn-default btn-block" data-action="more-feed">\n<span>'+a(t.gettext.call(e,"More",{name:"gettext",hash:{},data:i}))+"</span>\n</a>\n"},useData:!0})}),define("home/templates/endOfItems",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="feed-end" data-role="end-message">\n'+a(t.gettext.call(e,"That's the end. Want more?",{name:"gettext",hash:{},data:i}))+' <a href="http://disqus.com/follow/facebook/">'+a(t.gettext.call(e,"Find and follow friends on %(disqus)s »",{name:"gettext",hash:{disqus:"Disqus"},data:i}))+"</a>\n</div>\n"},useData:!0})}),define("home/views/common/FetchableCollectionFooterView",["backbone-marionette","home/templates/spinner","home/templates/moreButton","home/templates/endOfItems"],function(e,t,n,i){var a=e.ItemView.extend({endOfItemsTemplate:i,template:function(e){return!e.collection.length||e.error?"":e.fetching?t(e):e.hasNext?n(e):e.endOfItemsTemplate(e)},templateHelpers:function(){return{endOfItemsTemplate:this.endOfItemsTemplate,collection:this.collection}},className:"more-wrapper feed-wrapper",events:{"click [data-action=more-feed]":"moreClicked"},modelEvents:{"change:fetching":"render"},moreClicked:function(e){e.preventDefault(),this.model.fetchItems()}});return a}),define("home/templates/fetchableCollectionLayout",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div data-role='content-area'></div>\n<div data-role='footer-area'></div>\n"},useData:!0})}),define("home/views/common/FetchableCollectionLayout",["underscore","backbone-marionette","home/views/common/FetchableCollectionView","home/views/common/FetchableCollectionFooterView","home/views/FetchingView","home/utils/layoutUtils","home/templates/fetchableCollectionLayout"],function(e,t,n,i,a,s,o){var r=t.Layout.extend({itemViewEventPrefix:"collectionview",template:o,regions:{contentRegion:"[data-role=content-area]",footerRegion:"[data-role=footer-area]"},fetchableCollectionFooterView:i,initialize:function(e){if(e.fetchableCollectionView&&(this.fetchableCollectionView=e.fetchableCollectionView),!this.fetchableCollectionView||!(this.fetchableCollectionView===n||this.fetchableCollectionView.prototype instanceof n))throw"A FetchableCollectionLayout must define a fetchableCollectionView";
if(e.fetchableCollectionFooterView&&(this.fetchableCollectionFooterView=e.fetchableCollectionFooterView),!this.contentRegion||!this.footerRegion)throw"A template for a FetchableCollectionLayout must define a content region and a footer region";this.options=e},onDomRefresh:function(){this.contentRegion.currentView&&this.stopListening(this.contentRegion.currentView);var n=new this.fetchableCollectionView(e.extend({},this.options));n.listenable.ensureFetched&&n.listenable.ensureFetched(),t.CollectionView.prototype.addChildViewEventForwarding.call(this,n),this.contentRegion.show(new a),e.defer(e.bind(function(){this.contentRegion.show(n),this.trigger("showCollection",n),this.footerRegion.show(new this.fetchableCollectionFooterView({model:this.model,collection:this.collection})),s.scrollShownChanged()},this))},getItemEvents:t.CollectionView.prototype.getItemEvents});return r}),define("home/templates/activityFeed",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="section-contained">\n<div class="cover" data-role="cover-area"></div>\n</div>\n<div class="section-contained" id="container-content" data-role="content-area"></div>\n<div class="section-contained" data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/ActivityFeedView",["jquery","underscore","home/views/ActivityCardCollectionView","home/views/common/FetchableCollectionLayout","home/templates/activityFeed"],function(e,t,n,i,a){var s=i.extend({template:a,attributes:{"data-mix-location":"feed"},regions:t.defaults({coverRegion:"[data-role=cover-area]"},i.prototype.regions),fetchableCollectionView:n,initialize:function(e){i.prototype.initialize.apply(this,arguments),e.coverView&&(this.coverView=e.coverView)},onDomRefresh:function(){if(i.prototype.onDomRefresh.apply(this,arguments),this.coverView){var e=this.coverView.getModel?this.coverView.getModel(this.model):this.model;this.coverRegion.show(new this.coverView({model:e}))}},getTitle:function(){var e=this.coverRegion.currentView;return e&&e.getTitle&&e.getTitle()||""}});return s}),define("home/mixins/withReason",["underscore","home/views/ActivityActorsHoverCard","core/utils"],function(e,t,n){var i=function(){if(!n.isPhone(window)){var e=this.$("[data-role=actors]");e.length&&(this.hoverCard&&this.hoverCard.remove(),this.hoverCard=t.create({targetElement:e,activityFeedItem:this.model,activityId:this.model.id,numShownActors:1}))}},a=function(){if(!this.model.actors||1!==this.model.actors.length)return 0;var e=this.model.get("totalActivities");return e>1?e:0},s=function(){this.initialize=e.wrap(this.initialize,function(t){t.apply(this,e.rest(arguments)),this.listenTo(this,"render",i)});var t=this.templateHelpers;this.templateHelpers=function(){return e.extend({relativeTime:this.model.getRelativeTimestamp(),numRemainingActors:this.model.get("totalActors")-1,numOccurences:a.call(this),firstActor:this.model.actors[0]&&this.model.actors[0].toJSON()},t?t.apply(this,arguments):{})}};return s}),define("home/mixins/asNotificationCard",["underscore"],function(e){var t=function(){var t=this.className;this.className=function(){var n=e.isFunction(t)?t.apply(this,arguments):t||"";return"card card-notif "+n};var n=this.initialize;this.initialize=function(){n.apply(this,arguments),this.listenTo(this.model,"change:isUnread",this.updateUnreadClass),this.updateUnreadClass()},this.updateUnreadClass=function(){this.$el.toggleClass("unread",!!this.model.get("isUnread"))};var i=this.serializeData;this.serializeData=function(){var t=i.apply(this,arguments);return e.defaults(t,{discussionRoute:this.model.thread&&this.model.thread.getDiscussionRoute()})}};return t}),define("home/templates/notificationCardUpvote",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression,s=this.lambda;return'<div class="card-reason">\n<svg class="icon icon-notif-upvote" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 12 7" enable-background="new 0 0 12 7" xml:space="preserve"><path d="M11 7c-0.3 0-0.5-0.1-0.7-0.3L6 2.4L1.7 6.7c-0.4 0.4-1 0.4-1.4 0c-0.4-0.4-0.4-1 0-1.4l5-5 c0.4-0.4 1-0.4 1.4 0l5 5c0.4 0.4 0.4 1 0 1.4C11.5 6.9 11.3 7 11 7z" class="style0"/></svg>'+a(t.gettext.call(e,"%(userNames)s upvoted you %(thread)s",{name:"gettext",hash:{thread:t.getPartial.call(e,"threadLink",{name:"getPartial",hash:{},data:i}),userNames:t.getPartial.call(e,"userGroupNames",{name:"getPartial",hash:{},data:i})},data:i}))+'\n\n<span class="time">'+a(s(null!=e?e.relativeTime:e,e))+'</span>\n</div>\n<div class="card-body">\n<div data-role="post"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationCardUpvoteView",["underscore","backbone-marionette","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withSubviews","home/views/TruncatedPostView","home/templates/notificationCardUpvote"],function(e,t,n,i,a,s,o){var r=t.ItemView,l=r.extend({className:"card-notif-upvote",template:o,regions:{postRegion:"[data-role=post]"},onRender:function(){this.activateRegion(this.postRegion,this.createPostView)},createPostView:function(){return new s({model:this.model.activities[0].target})}}),c=l.prototype;return n.call(c),i.call(c),a.call(c),l}),define("home/templates/notificationCardReply",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression,s=this.lambda;return'<div class="card-reason">\n<svg class="icon icon-notif-reply" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 13 10" enable-background="new 0 0 13 10" xml:space="preserve"><path d="M7.8 6.5v3.2L13 4.8L7.8 0v2.8C1.4 2.8 0 10 0 10 C1.8 6.8 4.3 6.5 7.8 6.5z" class="style0"/></svg>'+a(t.gettext.call(e,"%(userName)s replied to you on %(thread)s",{name:"gettext",hash:{thread:t.getPartial.call(e,"threadLink",{name:"getPartial",hash:{},data:i}),userName:t.getPartial.call(e,"userName",null!=e?e.firstActor:e,{name:"getPartial",hash:{},data:i})},data:i}))+'\n\n<span class="time">'+a(s(null!=e?e.relativeTime:e,e))+'</span>\n</div>\n<div class="card-body">\n<div class="card-comment" data-role="post"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationCardReplyView",["underscore","backbone","backbone-marionette","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withSubviews","home/views/PostActivityCollectionView","home/views/PostView","home/utils/domUtils","home/templates/notificationCardReply"],function(e,t,n,i,a,s,o,r,l,c){var u=n.ItemView,d=u.prototype,h=u.extend({className:"card-notif-reply",template:c,serializeData:function(){var t=d.serializeData.apply(this,arguments),n=t.activities[0].target;return e.extend(t,{plaintextParent:l.stripHtmlTags(n.message)})},regions:{postsRegion:"[data-role=post]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostCollectionView)},createPostCollectionView:function(){return new o({collection:new t.Collection(this.model.activities)})}}),m=h.prototype;return i.call(m),a.call(m),s.call(m),h}),define("home/templates/userCard",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="card-user">\n<div class="card-aside">\n';return a=this.invokePartial(n.userCardFollowButton,"","userCardFollowButton",e,void 0,t,n,i),null!=a&&(s+=a),s+='</div>\n<div class="card-body">\n',a=this.invokePartial(n.userCardBody,"","userCardBody",e,void 0,t,n,i),null!=a&&(s+=a),s+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/UserCardView",["backbone-marionette","home/utils/mixpanelUtils","home/templates/userCard","core/bus"],function(e,t,n,i){var a=e.ItemView.extend({template:n,templateHelpers:function(){return{isSessionUser:this.model.isSessionUser()}},className:"card",events:{"click [data-action=toggle-follow]":"toggleFollow"},modelEvents:{"change:isFollowing":"handleFollowedClass"},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},toggleFollow:function(e){e&&e.preventDefault(),t.track("follow user",e,{properties:{follow:!this.model.get("isFollowing")}}),this.model.get("isFollowing")?i.trigger("uiAction:unfollowUser",this.model,e):i.trigger("uiAction:followUser",this.model,e),this.model.toggleFollowed()}});return a}),define("home/templates/notificationCardFollow",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return'<div class="expandable">\n<div class="card-grouped-actions">\n<a href="#" data-action="toggle-collapsed" class="expandable card-expand">\n<div class="icon-more-vert"></div>\n'+a(t.gettext.call(e,"See More",{name:"gettext",hash:{},data:i}))+"\n</a>\n</div>\n</div>\n"},3:function(e,t,n,i){var a=this.lambda,s=this.escapeExpression;return'<div class="collapsible">\n<div class="card-grouped-actions">\n<a class="collapsible btn btn-light btn-follow" href="/by/'+s(a(null!=e?e.sessionUsername:e,e))+'/followers/">\n'+s(t.gettext.call(e,"See All Followers",{name:"gettext",hash:{},data:i}))+"\n</a>\n</div>\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="card-reason">\n<svg class="icon icon-notif-follow" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve"><path d="M11.6 11.2c-2.1-0.8-2.8-1.4-2.8-2.7c0-0.8 0.6-0.5 0.9-2 c0.1-0.6 0.7 0 0.8-1.4c0-0.6-0.3-0.7-0.3-0.7s0.2-0.8 0.2-1.5C10.5 2.1 9.9 0 7 0S3.5 2.1 3.6 2.8c0.1 0.6 0.2 1.5 0.2 1.5 S3.5 4.5 3.5 5c0.1 1.4 0.7 0.8 0.8 1.4c0.3 1.5 0.9 1.2 0.9 2c0 1.4-0.7 2-2.8 2.7C0.3 12 0 12.7 0 13.2V15h7h7v-1.8 C14 12.7 13.7 12 11.6 11.2z" class="style0"/><polygon points="18,7 16,7 16,5 15,5 15,7 13,7 13,8 15,8 15,10 16,10 16,8 18,8"/></svg>'+s(t.gettext.call(e,"%(userNames)s followed you",{name:"gettext",hash:{userNames:t.getPartial.call(e,"userGroupNames",{name:"getPartial",hash:{},data:i})},data:i}))+'\n\n<span class="time">'+s(o(null!=e?e.relativeTime:e,e))+'</span>\n</div>\n<div data-role="users"></div>\n\n';return a=t["if"].call(e,null!=e?e.shouldCollapse:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=t["if"].call(e,null!=e?e.hasOverflowActors:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})}),define("home/views/NotificationCardFollowView",["underscore","backbone","backbone-marionette","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/asCollapsibleCard","home/mixins/withSubviews","home/models/Session","home/views/UserCardView","home/templates/notificationCardFollow"],function(e,t,n,i,a,s,o,r,l,c){var u=n.ItemView,d=u.extend({className:function(){return"card-notif-follow"+(this.shouldCollapse()?" card-collapsed":"")},initialize:function(){this.session=r.get(),this.initializeShownActors()},initializeShownActors:function(){this.shownActors||(this.shownActors=e.pluck(this.model.activities,"actor"))},shouldCollapse:function(){return this.initializeShownActors(),this.shownActors.length>3},template:c,templateHelpers:function(){return{hasOverflowActors:this.model.get("totalActors")>this.model.actors.length,sessionUsername:this.session.user.get("username"),shouldCollapse:this.shouldCollapse()}},regions:{usersRegion:"[data-role=users]"},onRender:function(){this.activateRegion(this.usersRegion,this.createUsersView)},createUsersView:function(){return new n.CollectionView({el:this.usersRegion.el,itemView:l,itemViewOptions:function(e,t){return{className:"card-user-notif"+(t>2?" collapsible":"")}},collection:new t.Collection(this.shownActors)})}}),h=d.prototype;return i.call(h),a.call(h),s.call(h),o.call(h),d}),define("home/views/NotificationCardNoteView",["jquery","underscore","backbone-marionette","home/mixins/withReason","home/mixins/asNotificationCard","home/utils/navigationUtils","core/analytics/jester","core/bus"],function(e,t,n,i,a,s,o){var r=/\#.*/,l=function(n){var i=e("head");t.each(n,function(e,t){i.find("#"+t).length||i.append('<style type="text/css" id="'+t+'">'+e+"</style>")})},c=n.ItemView.extend({initialize:function(){this.activity=this.model.activities[0],this.object=this.activity.object},events:{"click a":"trackClick"},className:"card-notif-note",getTemplate:function(){return"<div>"+t.reduce(c.TEMPLATE_INTERPOLATION_TABLE,function(e,t,n){return e.replace(RegExp(n,"g"),t.call(this))},this.object.get("body"),this)+"</div>"},getAnalyticsPayload:function(e){var t={verb:e,object_type:"note",object_id:this.activity.get("backendId")},n=this.object.get("template");return n&&(t.note_template_id=n.id,t.note_template_name=n.name),t},trackClick:function(n){var i=e(n.currentTarget);if(this.shouldTrackClick(n,i)){var a=o.client.emit(this.getAnalyticsPayload("click"));if(a&&this.shouldDelayNavigation(n,i)){n.preventDefault(),n.stopPropagation();var s=t.once(function(){window.top.location=i[0].href});t.delay(s,1e3),a.always(s)}}},shouldTrackClick:function(e,t){if(e.isDefaultPrevented())return!1;var n=(t.attr("href")||"").replace(r,"");return n?!0:!1},shouldDelayNavigation:function(e,t){return s.isInbound(e.target)?!1:!("_blank"===t.attr("target")||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)},onRender:function(){l(this.object.get("styles")),this.activity.get("isUnread")&&o.client.emit(this.getAnalyticsPayload("view"))}},{TEMPLATE_INTERPOLATION_TABLE:{ACTIVITY_ID:function(){return this.activity.get("backendId")},RELATIVE_TIME:function(){return this.model.getRelativeTimestamp()}}});return i.call(c.prototype),a.call(c.prototype),c}),define("home/mixins/withTruncate",["jquery","underscore"],function(e,t){var n={onDomRefresh:function(t){t&&t.call(this),this.$(".truncate").each(function(t,n){e(n).trunk8({lines:e(n).data("truncateLines")||1})})}};return function(){this.onDomRefresh=t.wrap(this.onDomRefresh,n.onDomRefresh)}}),define("home/templates/notificationCardInvite",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="card-reason">\n<svg class="icon icon-notif-invite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 15 12" enable-background="new 0 0 15 12" xml:space="preserve"><path d="M14.7 3.2L8.3 7.4C8 7.5 7.8 7.6 7.5 7.6S7 7.5 6.7 7.4L0.3 3.2 C0 3 0 3.2 0 3.4V11c0 0.4 0.5 1 0.8 1h13.3c0.4 0 0.8-0.6 0.8-1V3.4C15 3.2 15 3 14.7 3.2z M0.5 1.1l6.2 4.2 c0.2 0.1 0.5 0.2 0.8 0.2s0.6-0.1 0.8-0.2l6.2-4.2c0.4-0.3 0.8-1.1 0-1.1H0.4C-0.3 0 0.1 0.9 0.5 1.1z" /></svg>'+s(t.gettext.call(e,"%(userName)s invited you to a new discussion on %(parent)s",{name:"gettext",hash:{parent:t.getPartial.call(e,"channelAwareForumLink",null!=e?e.thread:e,{name:"getPartial",hash:{},data:i}),userName:t.getPartial.call(e,"userName",null!=e?e.firstActor:e,{name:"getPartial",hash:{},data:i})},data:i}))+'\n\n<span class="time">'+s(o(null!=e?e.relativeTime:e,e))+'</span>\n</div>\n\n<div class="card-body">\n';return a=this.invokePartial(n.threadImage,"","threadImage",e,void 0,t,n,i),null!=a&&(r+=a),r+='\n<div class="card-content">\n',a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="card-content-description">\n<div class="truncate" data-truncate-lines="2" dir="auto">\n',a=o(null!=e?e.threadDescription:e,e),null!=a&&(r+=a),r+'\n</div>\n</div>\n<a href="'+s(o(null!=e?e.discussionRoute:e,e))+'" class="btn btn-light">\nJoin Discussion\n</a>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/NotificationCardInviteView",["backbone-marionette","home/mixins/withReason","home/mixins/asNotificationCard","home/utils/layoutUtils","home/mixins/withTruncate","home/templates/notificationCardInvite"],function(e,t,n,i,a,s){var o=e.Layout.extend({className:"card-notif-invite card-notif-note",template:s,templateHelpers:function(){return{threadDescription:this.model.thread.getDefaultDescription(),image:i.shouldShowImages()&&this.model.thread.getImage(),numTitleLines:3}},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)}});return t.call(o.prototype),n.call(o.prototype),a.call(o.prototype),o}),define("home/templates/notificationFeedEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-notifications" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 164.8 50" enable-background="new 0 0 164.8 50" xml:space="preserve"><path d="M0 11h13.7v3.6H0V11z" class="arm"/><path d="M15.4 11h4.2l18.1 37h-4.2L15.4 11z" class="arm"/><path d="M39 44.2h24.2V48H39V44.2z" class="arm"/><path d="M101.6 44.2h24.2V48h-24.2V44.2z" class="arm"/><path d="M145 11h4.2l-18.1 37h-4.2L145 11z" class="arm"/><path d="M151.1 11h13.7v3.6h-13.7V11z" class="arm"/><path d="M57.9 25c0-13.8 11.2-25 25-25s25 11.2 25 25s-11.2 25-25 25 S57.9 38.8 57.9 25z" class="body"/><path d="M71.1 20.7C71.8 26.5 76.8 31 82.9 31s11-4.5 11.8-10.3c-2.3 2.2-6.7 3-11.8 3S73.4 22.9 71.1 20.7z" class="mouth"/><path d="M63.3 16c0-2.1 1.8-3.9 4-3.9c2.2 0 4 1.7 4 3.9s-1.8 3.9-4 3.9 C65.1 19.9 63.3 18.1 63.3 16z" class="eye"/><path d="M94.4 15.6c0-2.1 1.8-3.8 4-3.8c2.2 0 4 1.7 4 3.8 c0 2.1-1.8 3.8-4 3.8C96.2 19.5 94.4 17.8 94.4 15.6z" class="eye"/></svg>\n\n<div class="notifications-empty-headline">'+a(t.gettext.call(e,"No Notifications",{name:"gettext",hash:{},data:i}))+"</div>\n"+a(t.gettext.call(e,"You must be new. Or quiet.",{name:"gettext",hash:{},data:i}))+"\n</div>\n"},useData:!0})}),define("home/views/NotificationFeedEmptyView",["backbone-marionette","home/templates/notificationFeedEmpty"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/views/NotificationCardCollectionView",["jquery","underscore","core/bus","home/views/ActivityCardCollectionView","home/views/NotificationCardUpvoteView","home/views/NotificationCardReplyView","home/views/NotificationCardFollowView","home/views/NotificationCardNoteView","home/views/NotificationCardInviteView","home/views/NotificationFeedEmptyView"],function(e,t,n,i,a,s,o,r,l,c){var u=i.extend({itemView:function(e){switch(e.model.get("verb")){case"favorite":return new a({model:e.model});case"reply":return new s({model:e.model});case"follow":return new o({model:e.model});case"send":return new r({model:e.model});case"invite":return new l({model:e.model})}},emptyView:c,initialize:function(){i.prototype.initialize.apply(this,arguments),this.listenTo(this,"after:item:added",this.onShowNotification);var e=t.debounce(t.bind(n.trigger,n,"after:render"),100);this.listenTo(this,"after:item:added",e),this.listenToOnce(this,"showFirstItem",function(){n.trigger("showFirstCard","notifications")})},onShowNotification:function(){this.isShowingNonItemView()||(this.model.trigger("clearUnreadCount"),this.stopListening(this,"after:item:added",this.onShowNotification))},appendHtml:function(t,n,i){t.isBuffering&&t._bufferedChildren.push(n);var a=t.isBuffering?e(t.elBuffer):t.$el,s=a.children();s.size()<=i?a.append(n.el):s.eq(i).before(n.el)}});return u}),define("home/templates/notifications",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="section-contained">\n<div class="nav-notifs sidebar-fixed notifs-fixed">\n<div class="nav-notifs-body">\n<h2 class="nav-notifs-title">'+a(t.gettext.call(e,"Notifications",{name:"gettext",hash:{},data:i}))+'</h2>\n<div class="nav-notifs-settings dropdown" data-action="toggle-dropdown" data-dropdown="notif-settings">\n<a data-toggle="dropdown" class="dropdown-toggle" href="#">\n<span class="icon-cog"></span>\n</a>\n<div class="dropdown-menu dropdown-notifs-settings">\n<header class="dropdown-notifs-settings-header">\n<h6>'+a(t.gettext.call(e,"Control Your Notifications",{name:"gettext",hash:{},data:i}))+"</h6>\n<p>"+a(t.gettext.call(e,"Use these settings to control what notifications you see from %(disqus)s. To change email notifications click %(here)s.",{name:"gettext",hash:{here:t.tag.call(e,"a",{name:"tag",hash:{text:t.gettext.call(e,"here",{name:"gettext",hash:{},data:i}),"data-action":"notification-settings",href:"#"},data:i}),disqus:"Disqus"},data:i}))+'</a></p>\n</header>\n<ul class="dropdown-notifs-settings-options">\n<li class="dropdown-notifs-settings-option">\n<label><input data-action="filter-toggle" data-filter="likepost" type="checkbox" name="upvotes" value="upvotes">'+a(t.gettext.call(e,"Hide upvotes",{name:"gettext",hash:{},data:i}))+'</label>\n</li>\n<li class="dropdown-notifs-settings-option">\n<label><input data-action="filter-toggle" data-filter="invite" type="checkbox" name="invite" value="invite">'+a(t.gettext.call(e,"Hide invitations",{name:"gettext",hash:{},data:i}))+'</label>\n</li>\n</ul>\n</div>\n</div>\n<div class="nav-notifs-refresh">\n<a class="nav-refresh" data-action="refresh-drawer" href="#">\n<svg class="icon-refresh" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="338.2 -95.3 790.6 790.6" enable-background="new 338.2 -95.3 790.6 790.6" xml:space="preserve"><path d="M976.8 454.2l152-172.8h-98.9c-4.7-74.4-35.9-143.6-88.7-195.9C885.7 30.3 812.4 0 734.8 0 C571.7 0 439.1 134.5 439.1 300s132.6 300 295.7 300c66.2 0 131-22.5 182.5-63.4l9.3-7.4l-63.9-69.6l-8 6.1 c-34.7 26.3-76.1 40.2-119.8 40.2c-111.8 0-202.6-92.4-202.6-206S623 94.2 734.8 94.2c52.5 0 102.3 20.6 140.3 57.8 c35.3 34.7 56.6 80.3 60.6 129.4H823.5L976.8 454.2z"/></svg>\n</a>\n</div>\n</div>\n<ul class="nav-tabs">\n<li class="active" data-action="switch-tab" data-tab="all"><a class="truncate-line" href="#">'+a(t.gettext.call(e,"Most Recent",{name:"gettext",hash:{},data:i}))+'</a></li>\n<li  data-action="switch-tab" data-tab="replies"><a class="truncate-line" href="#"><span class="icon-forward"></span>'+a(t.gettext.call(e,"Replies",{name:"gettext",hash:{},data:i}))+'</a></li>\n</ul>\n</div>\n<div class="sidebar-scrollable notifs-scrollable scrollable-measure-selector" data-role="content-area" data-mix-location="notifications"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationsView",["underscore","jquery","home/views/common/TabbedView","home/views/common/FetchableCollectionLayout","home/views/NotificationCardCollectionView","home/models/Session","home/utils/settingsUtils","home/utils/releaseUtils","home/templates/notifications","home/mixins/withClickLinkTracking"],function(e,t,n,i,a,s,o,r,l,c){var u=n.extend({defaultTab:"all",events:e.defaults({"click [data-action=filter-toggle]":"handleClickFilterCheckmark","click [data-action=notification-settings]":"openNotificationSettings","click a[data-link-name]":"trackClickLink"},n.prototype.events),template:l,initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this.model.filters,"sync",this.handleFiltersUpdate),this.model.filters.fetch()},openNotificationSettings:function(e){o.openNotificationPane(e)},handleClickFilterCheckmark:function(n){var i=t(n.currentTarget),a=i.is(":checked")?"addFilter":"removeFilter",s=i.attr("data-filter");this.model.filters[a](s).done(e.bind(this.model.refetch,this.model))},handleFiltersUpdate:function(){var e=this;this.$("[data-action=filter-toggle]").each(function(){var n=t(this),i=n.attr("data-filter");n.attr("checked",!!e.model.filters.get(i))})},getTrackingSection:function(e){return"replies"===e&&e},getTitle:function(){return"Notifications"},getTabView:function(e){var t=this.model[e],n=new i({model:t,collection:t.get("items"),fetchableCollectionView:a,infiniteScroll:!0});return n.collection.length&&this.model.refresh(t),n.$el.attr({"data-mix-location":e}),n}});return c.call(u.prototype),u}),define("home/templates/forumView",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="section-expanded sidebar-fixed">\n<div class="cover cover-forum" data-role="cover-area"></div>\n</div>\n<div class="section-contained sidebar-scrollable forum-scrollable scrollable-measure-selector" data-role="content-area" data-mix-location="feed">\n</div>\n'},useData:!0})}),define("home/templates/threadCardDefaultFooter",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"1 Comment",{name:"gettext",hash:{},data:i}))+"\n"},3:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"%(posts)s Comments",{name:"gettext",hash:{posts:null!=e?e.posts:e},data:i}))+"\n"},5:function(e,t,n,i){var a,s='<li class="action">\n<a class="action-favorite';return a=t["if"].call(e,null!=e?e.favorited:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'" href="#" data-action="favorite">\nFavorite<span class="active-text">d</span> <span class="icon icon-star"></span>\n</a>\n</li>\n'},6:function(){return" active"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<ul class="actions">\n<li class="action">\n<a href="'+o(s(null!=e?e.discussionRoute:e,e))+'" data-link-name="comment_count">\n';return a=t["if"].call(e,t.eq.call(e,null!=e?e.posts:e,1,{name:"eq",hash:{},data:i}),{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+='<span class="icon icon-comment"></span>\n</a>\n</li>\n',a=t["if"].call(e,null!=e?e.authenticated:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</ul>\n"},useData:!0})}),define("home/views/ThreadCardDefaultFooterView",["backbone-marionette","home/utils/mixpanelUtils","home/utils/inspectletUtils","home/models/Session","home/templates/threadCardDefaultFooter"],function(e,t,n,i,a){var s=e.ItemView.extend({template:a,templateHelpers:function(){var e=i.get();return{favorited:this.model.get("userScore")>0,discussionRoute:this.model.getDiscussionRoute(this.channel),authenticated:!e.isAnonymous()}},events:{"click [data-action=favorite]":"toggleThreadFavorited"},initialize:function(e){this.listenTo(this.model,"change:userScore",this.render),this.channel=e&&e.channel},toggleThreadFavorited:function(e){e&&e.preventDefault(),this.model.get("userScore")<1&&(t.track("like thread",e),n.tagSession("favorited")),this.model.toggleFavorited()}});return s}),define("home/mixins/withThreadCardDefaultFooter",["underscore","home/mixins/withSubviews","home/views/ThreadCardDefaultFooterView"],function(e,t,n){var i=function(){return this.model.thread||this.model},a={render:function(e){return e.call(this),this.footerRegion=this.addRegion("[data-role=footer]"),this.activateRegion(this.footerRegion,this.createThreadDefaultFooter),this},createThreadDefaultFooter:function(){var e=i.call(this);return new n({el:this.footerRegion.el,model:e,channel:this.channel})}};return function(){t.call(this),this.createThreadDefaultFooter=a.createThreadDefaultFooter,this.render=e.wrap(this.render,a.render)}}),define("home/mixins/asForumProfileCard",["jquery","underscore","home/utils/layoutUtils","home/mixins/withTruncate","home/mixins/withThreadCardDefaultFooter"],function(e,t,n,i,a){var s=function(){i.apply(this,arguments),a.apply(this,arguments),this.initialize=t.wrap(this.initialize,function(e){e.apply(this,t.rest(arguments));var n=this.model.thread||this.model;this.listenTo(n,"change:content",this.render),this.numTitleLines=3}),this.serializeData=t.wrap(this.serializeData,function(e){var i=e.apply(this,t.rest(arguments)),a=this.model.thread||this.model;return t.defaults(i,{image:a.getImage(),canShowThreadImage:n.shouldShowImages(),thread:a.toJSON(),numTitleLines:this.numTitleLines})})};return s}),define("home/templates/forumProfileCardRecent",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},4:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="discussion-image" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'">\n</a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="card-discussion';return a=t.unless.call(e,null!=e?e.image:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='">\n<div class="card-aside">\n',a=t["if"].call(e,null!=e?e.canShowThreadImage:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n<div class="card-body">\n<div class="card-reason">\n'+s(t.gettext.call(e,"Recent activity",{name:"gettext",hash:{},data:i}))+" "+s(o(null!=e?e.relativeTime:e,e))+"\n</div>\n",a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="2" dir="auto">\n',a=o(null!=e?e.threadDescription:e,e),null!=a&&(r+=a),r+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ForumProfileCardRecentView",["jquery","underscore","backbone","backbone-marionette","home/utils/layoutUtils","home/mixins/asForumProfileCard","home/templates/forumProfileCardRecent"],function(e,t,n,i,a,s,o){var r=i.ItemView,l=r.prototype,c=r.extend({className:"card card-profile card-profile-forum",template:o,serializeData:function(){var e=l.serializeData.apply(this,arguments),n=this.model.thread;return t.defaults(e,{relativeTime:this.model.getRelativeTimestamp(),target:this.model.activities[0].target.toJSON(),threadDescription:n.getDefaultDescription()})}});return s.call(c.prototype),c}),define("home/templates/forumProfileCardTopDiscussion",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},4:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="discussion-image" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'">\n</a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="card-discussion';return a=t.unless.call(e,null!=e?e.image:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='">\n<div class="card-aside">\n',a=t["if"].call(e,null!=e?e.canShowThreadImage:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n<div class="card-body">\n<div class="card-reason">\n'+s(t.gettext.call(e,"Published",{name:"gettext",hash:{},data:i}))+" "+s(o(null!=e?e.relativeTime:e,e))+"\n</div>\n",a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+'<div class="card-discussion-comments-title">'+s(t.gettext.call(e,"Top Comment",{name:"gettext",hash:{},data:i}))+'</div>\n<div class="card-discussion-comments" data-role="post"></div>\n<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ForumProfileCardTopDiscussionView",["jquery","underscore","backbone","backbone-marionette","home/utils/layoutUtils","home/utils/datetimeUtils","home/mixins/asForumProfileCard","home/mixins/withSubviews","home/models/Post","home/views/PostView","home/templates/forumProfileCardTopDiscussion"],function(e,t,n,i,a,s,o,r,l,c,u){var d=i.ItemView,h=d.extend({className:"card card-profile card-profile-forum card-profile-forum-top",template:u,regions:{postRegion:"[data-role=post]"},serializeData:function(){var e=i.Layout.prototype.serializeData.apply(this,arguments);
return t.defaults(e,{relativeTime:s.getRelativeDatetime(this.model.get("createdAt"))})},getPost:function(){var e=this.model.get("topPost");return e.thread=this.model,new l(e)},onRender:function(){this.activateRegion(this.postRegion,this.createPostView)},createPostView:function(){return new c({model:this.getPost()})}}),m=h.prototype;return o.call(m),r.call(m),h}),define("home/views/ForumProfileCardCollectionView",["jquery","backbone","home/views/common/FetchableCollectionView","home/views/ForumProfileCardRecentView","home/views/ForumProfileCardTopDiscussionView","home/mixins/withViewFeedTracking"],function(e,t,n,i,a,s){var o=n.extend({className:"cards",itemView:function(e){switch(e.model.get("verb")){case"trending":return new i(e);case"topdiscussion":return new a(e);default:return new t.View}}});return s.call(o.prototype),o}),define("home/templates/forumCover",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" active"},3:function(e){var t=this.lambda,n=this.escapeExpression;return'<p class="cover-description">\n'+n(t(null!=e?e.plainDescription:e,e))+"\n</p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="section-contained">\n<div class="cover-body">\n\n<div class="cover-body-left">\n\n<div class="cover-profile-content" dir="auto">\n<div class="cover-profile-name-wrapper">\n<a href="'+o(s(null!=e?e.url:e,e))+'"><img class="cover-favicon" src="'+o(s(null!=(a=null!=e?e.favicon:e)?a.cache:a,e))+'" alt="';return a=this.invokePartial(n.forumName,"","forumName",e,void 0,t,n,i),null!=a&&(r+=a),r+='"></a>\n<a href="'+o(s(null!=e?e.url:e,e))+'"><h1 class="cover-profile-name truncate-line">',a=this.invokePartial(n.forumName,"","forumName",e,void 0,t,n,i),null!=a&&(r+=a),r+='</h1></a>\n<div class="cover-profile-action">\n<a href="#" class="btn btn-primary btn-follow',a=t["if"].call(e,null!=e?e.followed:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='" data-action="toggle-follow">\n<span class="symbol-default"><span class="icon-plus"></span></span>\n<span class="text-default">'+o(t.gettext.call(e,"Follow",{name:"gettext",hash:{},data:i}))+'</span>\n<span class="symbol-following"><span class="icon-checkmark"></span></span>\n<span class="text-following">'+o(t.gettext.call(e,"Following",{name:"gettext",hash:{},data:i}))+"</span></a> \n</div>\n</div>\n\n",a=t["if"].call(e,null!=e?e.plainDescription:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n<ul class="cover-attributes">\n<li class="cover-attribute">\n<a href="'+o(s(null!=e?e.url:e,e))+'">'+o(s(null!=e?e.friendlyUrl:e,e))+'</a>\n</li>\n</ul>\n\n<div class="cover-profile-action-mobile">\n<a href="#" class="btn btn-primary btn-follow',a=t["if"].call(e,null!=e?e.followed:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'" data-action="toggle-follow">\n<span class="text-default">'+o(t.gettext.call(e,"Follow",{name:"gettext",hash:{},data:i}))+'</span>\n<span class="symbol-following"><span class="icon-checkmark"></span></span>\n<span class="text-following">'+o(t.gettext.call(e,"Following",{name:"gettext",hash:{},data:i}))+'</span></a> \n</div>\n\n</div>\n</div>\n</div>\n</div>\n\n<div class="cover-nav-wrapper">\n<div class="section-contained">\n<nav class="cover-nav cover-nav-profile-user">\n<ul class="cover-nav-options">\n<li class="cover-nav-option active" data-action="switch-tab" data-tab="top">\n<a class="truncate-line" href="/home/forum/'+o(s(null!=e?e.id:e,e))+'/">\n'+o(t.gettext.call(e,"Top Discussions",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n<li class="cover-nav-option" data-action="switch-tab" data-tab="recent">\n<a title="'+o(t.gettext.call(e,"Most Recent",{name:"gettext",hash:{},data:i}))+'" class="truncate-line" href="/home/forum/'+o(s(null!=e?e.id:e,e))+'/recent/">\n<span class="text-desktop">'+o(t.gettext.call(e,"Most Recent",{name:"gettext",hash:{},data:i}))+'</span><span class="text-mobile">'+o(t.gettext.call(e,"Recent",{name:"gettext",hash:{},data:i}))+'</span>\n</a>\n</li>\n<li class="cover-nav-option right" data-action="switch-tab" data-tab="commenters">\n<a title="'+o(t.gettext.call(e,"Top Commenters",{name:"gettext",hash:{},data:i}))+'" class="truncate-line" href="/home/forum/'+o(s(null!=e?e.id:e,e))+'/commenters/">\n<span class="text-desktop">'+o(t.gettext.call(e,"Top Commenters",{name:"gettext",hash:{},data:i}))+'</span><span class="text-mobile">'+o(t.gettext.call(e,"Commenters",{name:"gettext",hash:{},data:i}))+"</span>\n</a>\n</li>\n</ul>\n</nav>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ForumCoverView",["underscore","backbone-marionette","home/utils/mixpanelUtils","home/utils/backboneUtils","home/models/Session","home/templates/forumCover"],function(e,t,n,i,a,s){var o=t.ItemView.extend({attributes:{"data-mix-location":"cover"},template:s,templateHelpers:function(){return{friendlyUrl:this.model.getFriendlyUrl(),plainDescription:this.model.getPlainDescription()}},events:{"click [data-action=toggle-follow]":"toggleFollow"},modelEvents:{"change:name":"render","change:followed":"handleFollowedClass"},initialize:function(){this.session=a.get(),this.listenTo(this.session,"setModeratedForums",this.render)},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("followed"))},toggleFollow:function(e){e&&e.preventDefault(),n.track("follow forum",e,{properties:{follow:!this.model.get("followed")}}),this.model.toggleFollowed()}},{getModel:function(e){return e.forum||e}});return o}),define("home/templates/forumProfileRecentEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-community" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 94 128" enable-background="new 0 0 94 128" xml:space="preserve"><path class="house" d="M61 118.4l-9.8-10c-0.5-0.5-1.3-0.5-1.8 0l-9.8 10c-0.5 0.5-0.3 1 0.4 1h2v7.7c0 0.6 0 1 1 1h4.8v-7.7h5 v7.7h5c0.8 0 0.8-0.4 0.8-1v-7.7h2C61.3 119.3 61.5 118.9 61 118.4z" /><path class="bubble-top" d="M75.2 21C75.2 9.4 66.2 0 55 0C43.8 0 34.8 9.4 34.8 21c0 3.1 0.7 6.1 1.8 8.7l-3.4 8.5l8.7-1.2 c3.5 3.1 8.1 5 13.1 5C66.2 42 75.2 32.6 75.2 21z M56.4 26.6h-1.9V22h-5.1v4.5h-1.9V15.8h1.9v4.5h5.1v-4.5h1.9V26.6z M60.9 26.6 h-1.9v-8.1h1.9V26.6z M61 17.2h-2v-1.8h2V17.2z"/><path class="bubble-left" d="M79.3 47c-8 0-14.5 6.7-14.5 15c0 2.2 0.5 4.3 1.3 6.2l-2.4 6.1l6.2-0.9c2.5 2.2 5.8 3.6 9.3 3.6 c8 0 14.5-6.7 14.5-15S87.3 47 79.3 47z M80.5 66.6H79v-3.7h-4.2v3.7h-1.6v-8.9h1.6v3.7H79v-3.7h1.6V66.6z M84.3 66.6h-1.5v-6.7h1.5 V66.6z M84.3 58.9h-1.6v-1.5h1.6V58.9z" /><path class="bubble-right" d="M48.4 72c0-13.8-10.8-25-24.1-25C11 47 0.2 58.2 0.2 72S11 97 24.3 97c5.9 0 11.4-2.2 15.6-5.9l10.3 1.5 l-4-10.2C47.7 79.2 48.4 75.7 48.4 72z M26.4 78.6h-2.2v-5.3h-6v5.3H16V66h2.2v5.3h6V66h2.2V78.6z M31.7 78.6h-2.2v-9.5h2.2V78.6z M31.8 67.6h-2.3v-2.1h2.3V67.6z"/></svg>\n\n'+a(t.gettext.call(e,"This community hasn't been busy recently.",{name:"gettext",hash:{},data:i}))+'</br><a href="/home/">'+a(t.gettext.call(e,"Head back home to find interesting discussions »",{name:"gettext",hash:{},data:i}))+"</a>\n</div>\n"},useData:!0})}),define("home/views/ForumProfileRecentEmptyView",["backbone-marionette","home/templates/forumProfileRecentEmpty"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/templates/forumProfileTopCommentersEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-community" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 94 128" enable-background="new 0 0 94 128" xml:space="preserve"><path class="house" d="M61 118.4l-9.8-10c-0.5-0.5-1.3-0.5-1.8 0l-9.8 10c-0.5 0.5-0.3 1 0.4 1h2v7.7c0 0.6 0 1 1 1h4.8v-7.7h5 v7.7h5c0.8 0 0.8-0.4 0.8-1v-7.7h2C61.3 119.3 61.5 118.9 61 118.4z" /><path class="bubble-top" d="M75.2 21C75.2 9.4 66.2 0 55 0C43.8 0 34.8 9.4 34.8 21c0 3.1 0.7 6.1 1.8 8.7l-3.4 8.5l8.7-1.2 c3.5 3.1 8.1 5 13.1 5C66.2 42 75.2 32.6 75.2 21z M56.4 26.6h-1.9V22h-5.1v4.5h-1.9V15.8h1.9v4.5h5.1v-4.5h1.9V26.6z M60.9 26.6 h-1.9v-8.1h1.9V26.6z M61 17.2h-2v-1.8h2V17.2z"/><path class="bubble-left" d="M79.3 47c-8 0-14.5 6.7-14.5 15c0 2.2 0.5 4.3 1.3 6.2l-2.4 6.1l6.2-0.9c2.5 2.2 5.8 3.6 9.3 3.6 c8 0 14.5-6.7 14.5-15S87.3 47 79.3 47z M80.5 66.6H79v-3.7h-4.2v3.7h-1.6v-8.9h1.6v3.7H79v-3.7h1.6V66.6z M84.3 66.6h-1.5v-6.7h1.5 V66.6z M84.3 58.9h-1.6v-1.5h1.6V58.9z" /><path class="bubble-right" d="M48.4 72c0-13.8-10.8-25-24.1-25C11 47 0.2 58.2 0.2 72S11 97 24.3 97c5.9 0 11.4-2.2 15.6-5.9l10.3 1.5 l-4-10.2C47.7 79.2 48.4 75.7 48.4 72z M26.4 78.6h-2.2v-5.3h-6v5.3H16V66h2.2v5.3h6V66h2.2V78.6z M31.7 78.6h-2.2v-9.5h2.2V78.6z M31.8 67.6h-2.3v-2.1h2.3V67.6z"/></svg>\n\n'+a(t.gettext.call(e,"Darn. No one comments in this community.",{name:"gettext",hash:{},data:i}))+'</br><a href="/home/">'+a(t.gettext.call(e,"Head back home to find interesting discussions »",{name:"gettext",hash:{},data:i}))+"</a>\n</div>\n"},useData:!0})}),define("home/views/ForumProfileTopCommentersEmptyView",["backbone-marionette","home/templates/forumProfileTopCommentersEmpty"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/mixins/withItemRemovalSkipped",[],function(){var e=function(){var e=this.addItemView;this.addItemView=function(t){return this.children.findByModel(t)?void 0:e.apply(this,arguments)};var t=this.removeItemView;this.removeItemView=function(){return this.isShowingNonItemView&&this.isShowingNonItemView()?t.apply(this,arguments):void 0}};return e}),define("home/views/UserCollectionView",["underscore","home/utils/layoutUtils","home/utils/mixpanelUtils","home/mixins/withItemRemovalSkipped","home/views/UserCardView","home/views/common/FetchableCollectionView","home/mixins/withViewFeedTracking"],function(e,t,n,i,a,s,o){var r=s.extend({itemView:a,onShow:function(){var i=this;e.defer(function(){n.track("view feed",{target:i.$el})}),t.scrollShownChanged()},emptyViewOptions:function(){return{model:this.options.user}}});return i.call(r.prototype),o.call(r.prototype),r}),define("home/views/ForumProfileView",["underscore","home/templates/forumView","home/views/common/FetchableCollectionLayout","home/views/common/TabbedView","home/models/Session","home/utils/backboneUtils","home/views/ForumProfileCardCollectionView","home/views/ForumCoverView","home/views/ForumProfileRecentEmptyView","home/views/ForumProfileTopCommentersEmptyView","home/views/UserCollectionView","home/mixins/withClickLinkTracking"],function(e,t,n,i,a,s,o,r,l,c,u,d){var h=i.extend({defaultTab:"top",template:t,regions:e.defaults({coverRegion:"[data-role=cover-area]"},i.prototype.regions),events:e.defaults({"click a[data-link-name]":"trackClickLink"},i.prototype.events),initialize:function(){i.prototype.initialize.apply(this,arguments);var e=a.get();e.loadPromise().then(function(){e.userProfile.forumsFollowing.ensureFetched()})},getTabView:function(e){switch(e){case"top":return this.model.topThreads.ensureFetched(),new o({model:this.model.topThreads,collection:this.model.topThreads.get("items"),emptyView:l,infiniteScroll:!0});case"recent":return new n({model:this.model.recent,collection:this.model.recent.get("items"),fetchableCollectionView:o,emptyView:l,infiniteScroll:!0});case"commenters":return new n({user:this.model.user,model:this.model.mostLikedUsers,collection:this.model.mostLikedUsers.get("items"),fetchableCollectionView:u,emptyView:c,infiniteScroll:!0})}},getTrackingSection:function(e){switch(e){case"top":return"top_discussions";case"recent":return"recent_threads";case"commenters":return"top_commenters"}},renderCover:function(){var t=new r({model:this.model.forum});t.listenTo(t,"dom:refresh",e.bind(this.updateTabClasses,this)),this.coverRegion.show(t)},onDomRefresh:function(){return this.$(this.coverRegion.el).length&&this.renderCover(),i.prototype.onDomRefresh.apply(this,arguments)},getTitle:function(){return s.getPromiseFor(this.model.forum,"name").then(function(e){return"Conversations - "+e})}});return d.call(h.prototype),h}),define("home/templates/topicCover",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.lambda,s=this.escapeExpression;return'<div class="cover-body-left">\n<h1 class="cover-title">'+s(a(null!=e?e.name:e,e))+'</h1>\n<p class="cover-description">'+s(t.gettext.call(e,"Trending discussions",{name:"gettext",hash:{},data:i}))+"</p>\n</div>\n"},useData:!0})}),define("home/views/TopicCoverView",["backbone-marionette","home/utils/backboneUtils","home/templates/topicCover"],function(e,t,n){var i=e.ItemView.extend({className:"cover-body",template:n,getTitle:function(){return t.getPromiseFor(this.model,"name").then(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})}},{getModel:function(e){return e.topic||e}});return i}),define("home/templates/profileCover",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.lambda,s=this.escapeExpression;return'<div class="cover-profile-flag">\n<a href="https://help.disqus.com/customer/portal/articles/1752367-report-a-user?flagged='+s(a(null!=e?e.username:e,e))+"&reporter="+s(a(null!=e?e.sessionUserName:e,e))+'" class="tooltipped"\ndata-toggle="tooltip" data-placement="bottom" title="'+s(t.gettext.call(e,"Report User",{name:"gettext",hash:{},data:i}))+'">\n<span class="icon-flag"></span>\n</a>\n</div>\n'},3:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<img src="'+i(n(null!=(t=null!=e?e.avatar:e)?t.cache:t,e))+'" alt="'+i(n(null!=e?e.username:e,e))+'" />\n'},5:function(e){var t=this.lambda,n=this.escapeExpression;return'<img src="'+n(t(null!=e?e.CDN_ROOT:e,e))+'/img/avatar-default.png" />\n'},7:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.isPrivate:e,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(10,i),data:i}),null!=a&&(s+=a),s},8:function(e,t,n,i){var a=this.escapeExpression;return'<a href="#" class="btn btn-disabled">'+a(t.gettext.call(e,"Private",{name:"gettext",hash:{},data:i}))+'<span class="icon-lock"></span></a>\n'},10:function(e,t,n,i){var a,s=this.escapeExpression,o='<a href="#" class="btn btn-primary btn-follow';return a=t["if"].call(e,null!=e?e.isFollowing:e,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'" data-action="toggle-follow">\n<span class="symbol-default">\n<span class="icon-plus"></span>\n</span><span class="text-default">'+s(t.gettext.call(e,"Follow",{name:"gettext",hash:{},data:i}))+'</span><span class="symbol-following"><span class="icon-checkmark"></span></span><span class="text-following">'+s(t.gettext.call(e,"Following",{name:"gettext",hash:{},data:i}))+"</span>\n</a>\n"},11:function(){return" active"},13:function(e,t,n,i){var a=this.escapeExpression;return'<a href="#" class="btn btn-default cover-profile-action-edit" data-action="show-edit-profile">'+a(t.gettext.call(e,"Edit Profile",{name:"gettext",hash:{},data:i}))+"</a>\n"},15:function(e){var t=this.lambda,n=this.escapeExpression;return'<p class="cover-description">\n'+n(t(null!=e?e.about:e,e))+"\n</p>\n"},17:function(e,t,n,i){var a,s='<div class="cover-profile-action-mobile">\n';return a=t["if"].call(e,null!=e?e.isPrivate:e,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(18,i),data:i}),null!=a&&(s+=a),s+"</div>\n"},18:function(e,t,n,i){var a,s=this.escapeExpression,o='<a href="#" class="btn btn-primary btn-follow';return a=t["if"].call(e,null!=e?e.isFollowing:e,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'" data-action="toggle-follow">\n<span class="text-default">'+s(t.gettext.call(e,"Follow",{name:"gettext",hash:{},data:i}))+'</span>\n<span class="symbol-following"><span class="icon-checkmark"></span></span>\n<span class="text-following">'+s(t.gettext.call(e,"Following",{name:"gettext",hash:{},data:i}))+"</span>\n</a>\n"},20:function(e){var t=this.lambda,n=this.escapeExpression;return'<span class="cover-nav-option-count">'+n(t(null!=e?e.numPosts:e,e))+"</span>\n"},22:function(e){var t=this.lambda,n=this.escapeExpression;return'<span class="cover-nav-option-count" data-role="num-followers">'+n(t(null!=e?e.numFollowers:e,e))+"</span>\n"},24:function(e){var t=this.lambda,n=this.escapeExpression;return'<span class="cover-nav-option-count" data-role="num-following">'+n(t(null!=e?e.numTotalFollowing:e,e))+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="section-contained">\n<div class="cover-body">\n\n';return a=t.unless.call(e,null!=e?e.isSessionUser:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n<div class="cover-body-left">\n\n<div class="cover-profile-avatar-wrapper">\n<a href="/by/'+o(s(null!=e?e.username:e,e))+'/" class="cover-profile-avatar">\n',a=t["if"].call(e,null!=(a=null!=e?e.avatar:e)?a.cache:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(r+=a),r+='</a>\n</div>\n\n<div class="cover-profile-content" dir="auto">\n\n<div class="cover-profile-name-wrapper">\n<h1 class="cover-profile-name truncate-line">'+o(s(null!=e?e.name:e,e))+'</h1>\n<div class="cover-profile-action">\n',a=t.unless.call(e,null!=e?e.isSessionUser:e,{name:"unless",hash:{},fn:this.program(7,i),inverse:this.program(13,i),data:i}),null!=a&&(r+=a),r+="</div>\n</div>\n\n",a=t["if"].call(e,null!=e?e.about:e,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=this.invokePartial(n.profileCoverAttributes,"","profileCoverAttributes",e,void 0,t,n,i),null!=a&&(r+=a),r+="\n",a=t.unless.call(e,null!=e?e.isSessionUser:e,{name:"unless",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n</div>\n</div>\n</div>\n\n<div class="cover-nav-wrapper">\n<div class="section-contained">\n<nav class="cover-nav cover-nav-profile-user">\n<ul class="cover-nav-options">\n<li class="cover-nav-option active" data-action="switch-tab" data-tab="recent">\n<a class="truncate-line" href="/by/'+o(s(null!=e?e.username:e,e))+'/">\n<span class="text-desktop">'+o(t.gettext.call(e,"Recent Activity",{name:"gettext",hash:{},data:i}))+'</span><span class="text-mobile">'+o(t.gettext.call(e,"Recent",{name:"gettext",hash:{},data:i}))+'</span>\n</a>\n</li>\n<li class="cover-nav-option mobile-hidden" data-action="switch-tab" data-tab="comments">\n<a title="'+o(t.gettext.call(e,"Comments",{name:"gettext",hash:{},data:i}))+'" class="truncate-line" href="/by/'+o(s(null!=e?e.username:e,e))+'/comments/">\n'+o(t.gettext.call(e,"Comments",{name:"gettext",hash:{},data:i}))+"\n",a=t["if"].call(e,null!=e?e.showNumPosts:e,{name:"if",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</a>\n</li>\n<li class="cover-nav-option mobile-hidden" data-action="switch-tab" data-tab="favorites">\n<a title="'+o(t.gettext.call(e,"Favorites",{name:"gettext",hash:{},data:i}))+'" class="truncate-line" href="/by/'+o(s(null!=e?e.username:e,e))+'/favorites/">\n'+o(t.gettext.call(e,"Favorites",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n<li class="cover-nav-option right" data-action="switch-tab" data-tab="followers">\n<a title="'+o(t.gettext.call(e,"Followers",{name:"gettext",hash:{},data:i}))+'" class="truncate-line" href="/by/'+o(s(null!=e?e.username:e,e))+'/followers/">\n'+o(t.gettext.call(e,"Followers",{name:"gettext",hash:{},data:i}))+"\n",a=t["if"].call(e,null!=e?e.showNumFollowers:e,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</a>\n</li>\n<li class="cover-nav-option right" data-action="switch-tab" data-tab="following">\n<a title="'+o(t.gettext.call(e,"Following",{name:"gettext",hash:{},data:i}))+'" class="truncate-line" href="/by/'+o(s(null!=e?e.username:e,e))+'/following/">\n'+o(t.gettext.call(e,"Following",{name:"gettext",hash:{},data:i}))+"\n",a=t["if"].call(e,null!=e?e.showNumTotalFollowing:e,{name:"if",hash:{},fn:this.program(24,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</a>\n</li>\n</ul>\n</nav>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/spinnerTall",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="spinner-wrapper tall">\n<div class="spinner tall"></div>\n</div>\n'},useData:!0})}),define("home/views/ProfileCoverView",["jquery","backbone-marionette","home/utils/mixpanelUtils","home/utils/settingsUtils","home/templates/profileCover","home/templates/spinnerTall","home/models/Session"],function(e,t,n,i,a,s,o){var r=t.ItemView.extend({attributes:{"data-mix-location":"profile cover"},template:function(e){return e.name?a(e):s(e)},templateHelpers:function(){return{sessionUserName:o.get().user.get("username"),isSessionUser:this.model.isSessionUser(),numTotalFollowing:this.model.get("numFollowing")+this.model.get("numForumsFollowing"),showNumPosts:this.model.has("numPosts"),showNumFollowers:this.model.has("numFollowers"),showNumTotalFollowing:this.model.has("numFollowing")&&this.model.has("numForumsFollowing")}},events:{"click [data-action=toggle-follow]":"toggleFollow","click [data-action=show-edit-profile]":i.openProfilePane},modelEvents:{"change:name":"render","change:isFollowing":"handleFollowedClass","change:numFollowers":"updateNumFollowers","change:numFollowing":"updateNumFollowing","change:numForumsFollowing":"updateNumFollowing"},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},updateNumFollowers:function(){this.$("[data-role=num-followers]").text(this.model.get("numFollowers"))},updateNumFollowing:function(){this.$("[data-role=num-following]").text(this.model.get("numFollowing")+this.model.get("numForumsFollowing"))},toggleFollow:function(e){e&&e.preventDefault(),n.track("follow user",e,{properties:{follow:!this.model.get("isFollowing")}}),this.model.toggleFollowed()},onDomRefresh:function(){e(".tooltipped").tooltip()}});return r}),define("home/mixins/asProfileCard",["jquery","underscore","home/utils/layoutUtils","home/utils/mixpanelUtils","home/mixins/withTruncate"],function(e,t,n,i,a){var s=function(){a.apply(this,arguments);var e=this.events||{};this.events=t.extend({"click [data-role=thread-link]":"trackOpenedThread"},e),this.initialize=t.wrap(this.initialize,function(e){e.apply(this,t.rest(arguments)),this.listenTo(this.model.thread,"change:content",this.render),this.numTitleLines=3}),this.trackOpenedThread=function(e){i.track("click external article",e)},this.serializeData=t.wrap(this.serializeData,function(e){var i=e.apply(this,t.rest(arguments)),a=this.model.thread;return t.defaults(i,{discussionRoute:a&&a.getDiscussionRoute(),canShowThreadImage:n.shouldShowImages(),image:a&&a.getImage(),numTitleLines:this.numTitleLines,relativeTime:this.model.getRelativeTimestamp(),firstActor:this.model.actors[0]&&this.model.actors[0].toJSON()})})};return s}),define("home/templates/profileCardPost",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s='<span class="icon-forward"></span>\n';return a=this.invokePartial(n.userName,"","userName",null!=e?e.replyAuthor:e,void 0,t,n,i),null!=a&&(s+=a),s},3:function(e){var t=this.lambda,n=this.escapeExpression;return'<span class="label label-danger">'+n(t(null!=e?e.hiddenExplanation:e,e))+"</span>\n"},5:function(){return"hidden"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r="";return a=this.invokePartial(n.userAvatar,"","userAvatar",null!=e?e.author:e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="comment-body">\n<header class="comment-header">\n',a=this.invokePartial(n.userName,"","userName",null!=e?e.author:e,void 0,t,n,i),null!=a&&(r+=a),a=t["if"].call(e,null!=e?e.replyAuthor:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<a class="link-gray time" href="'+o(s(null!=e?e.discussionRoute:e,e))+"#comment-"+o(s(null!=e?e.id:e,e))+'" data-link-name="timestamp">'+o(s(null!=e?e.relativeTime:e,e))+"</a>\n",a=t["if"].call(e,null!=e?e.isHidden:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</header>\n<div data-role="post-content"></div>\n<footer class="comment-actions ',a=t["if"].call(e,null!=e?e.isHidden:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'" data-role="post-actions">\n</footer>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ProfilePostView",["jquery","underscore","home/views/PostView","home/templates/profileCardPost"],function(e,t,n,i){var a=n.extend({template:i,initialize:function(e){n.prototype.initialize.apply(this,arguments),this.replyAuthor=e.replyAuthor},templateHelpers:function(){var e=n.prototype.templateHelpers.apply(this,arguments);return e.replyAuthor=this.replyAuthor&&this.replyAuthor.toJSON(),e}});return a}),define("home/views/ProfilePostCollectionView",["underscore","backbone-marionette","home/views/ProfilePostView"],function(e,t,n){var i=t.CollectionView.extend({getItemView:function(){return n},itemViewOptions:function(t,n){var i=t.object,a=this.getItemView(t).prototype.className;a=e.isFunction(a)?a.call({model:t}):a||"";var s=a;n>2&&(s+=" collapsible");var o={model:i,className:s};return"reply"===t.get("verb")&&(o.replyAuthor=t.target.author),o}});return i}),define("home/templates/profileCardComments",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},4:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="discussion-image" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'">\n</a>\n'},6:function(e,t,n,i){var a=this.escapeExpression;return'<div class="expandable">\n<div class="card-grouped-actions">\n<a href="#" data-action="toggle-collapsed" class="expandable card-expand">\n<div class="icon-more-vert"></div>\n'+a(t.gettext.call(e,"See More",{name:"gettext",hash:{},data:i}))+"\n</a>\n</div>\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="card-discussion';return a=t.unless.call(e,null!=e?e.image:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='">\n<div class="card-aside">\n',a=t["if"].call(e,null!=e?e.canShowThreadImage:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='</div>\n<div class="card-body">\n',a=this.invokePartial(n.profileCardReason,"","profileCardReason",e,void 0,t,n,i),null!=a&&(s+=a),a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(s+=a),s+='<div class="card-comment" data-role="post"></div>\n',a=t["if"].call(e,null!=e?e.shouldCollapse:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ProfileCardCommentsView",["underscore","backbone","backbone-marionette","home/mixins/asProfileCard","home/mixins/asCollapsibleCard","home/mixins/withSubviews","home/views/ProfilePostCollectionView","home/templates/profileCardComments"],function(e,t,n,i,a,s,o,r){var l=n.ItemView,c=l.prototype,u=l.extend({className:function(){return"card card-profile card-profile-post"+(this.shouldCollapse()?" card-collapsed":"")},template:r,serializeData:function(){var t=c.serializeData.apply(this,arguments);return e.defaults(t,{shouldCollapse:this.shouldCollapse()})},regions:{postsRegion:"[data-role=post]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostCollectionView)},createPostCollectionView:function(){return new o({el:this.postsRegion.el,collection:new t.Collection(this.model.activities)})},shouldCollapse:function(){return this.model.activities.length>3}}),d=u.prototype;return a.call(d),i.call(d),s.call(d),u}),define("home/templates/profileCardFavorite",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},4:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="discussion-image" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'">\n</a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="card-discussion';return a=t.unless.call(e,null!=e?e.image:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='">\n<div class="card-aside">\n',a=t["if"].call(e,null!=e?e.canShowThreadImage:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n<div class="card-body">\n',a=this.invokePartial(n.profileCardReason,"","profileCardReason",e,void 0,t,n,i),null!=a&&(r+=a),a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="card-profile-activity">\n',a=this.invokePartial(n.userAvatar,"","userAvatar",null!=e?e.firstActor:e,void 0,t,n,i),null!=a&&(r+=a),r+s(t.gettext.call(e,"%(userName)s favorited",{name:"gettext",hash:{userName:t.getPartial.call(e,"userName",null!=e?e.firstActor:e,{name:"getPartial",hash:{},data:i})},data:i}))+' <span class="bullet">'+s(o(null!=e?e.relativeTime:e,e))+"</span>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ProfileCardFavoriteView",["underscore","backbone","backbone-marionette","home/mixins/asProfileCard","home/templates/profileCardFavorite"],function(e,t,n,i,a){var s=n.ItemView.extend({className:"card card-profile card-profile-favorite",template:a});return i.call(s.prototype),s}),define("home/templates/profileCardCreateDiscussion",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},4:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="discussion-image" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'">\n</a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="card-discussion';return a=t.unless.call(e,null!=e?e.image:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='">\n<div class="card-aside">\n',a=t["if"].call(e,null!=e?e.canShowThreadImage:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n<div class="card-body">\n',a=this.invokePartial(n.profileCardReason,"","profileCardReason",e,void 0,t,n,i),null!=a&&(r+=a),a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="card-profile-activity">\n',a=this.invokePartial(n.userAvatar,"","userAvatar",null!=e?e.firstActor:e,void 0,t,n,i),null!=a&&(r+=a),r+s(t.gettext.call(e,"%(userName)s created a discussion",{name:"gettext",hash:{userName:t.getPartial.call(e,"userName",null!=e?e.firstActor:e,{name:"getPartial",hash:{},data:i})},data:i}))+' <span class="bullet">'+s(o(null!=e?e.relativeTime:e,e))+"</span>\n</div>\n</div>\n</div>\n"
},usePartial:!0,useData:!0})}),define("home/views/ProfileCardCreateDiscussionView",["underscore","backbone","backbone-marionette","home/mixins/asProfileCard","home/templates/profileCardCreateDiscussion"],function(e,t,n,i,a){var s=n.ItemView.extend({className:"card card-profile card-profile-discussion",template:a});return i.call(s.prototype),s}),define("home/views/ProfileCardCollectionView",["jquery","backbone","core/bus","home/views/common/FetchableCollectionView","home/views/ProfileCardCommentsView","home/views/ProfileCardFavoriteView","home/views/ProfileCardCreateDiscussionView","home/mixins/withViewFeedTracking"],function(e,t,n,i,a,s,o,r){var l=i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.listenToOnce(this,"showFirstItem",function(){n.trigger("showFirstCard","profile")})},itemView:function(e){switch(e.model.get("verb")){case"reply":case"post":return new a(e);case"favorite":return new s(e);case"create":return new o(e);default:return new t.View}},emptyViewOptions:function(){return{model:this.options.user}}});return r.call(l.prototype),l}),define("home/templates/profileCommentsEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-user" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 284 78" enable-background="new 0 0 284 78" xml:space="preserve"><path d="M202.9 42.3c-9.2-24.6-33-42.2-60.9-42.2S90.4 17.7 81.1 42.3H91c0-0.2 0-0.3 0-0.5c0-5.5 4.7-10 10.5-10 c2.9 0 5.6 1.2 7.5 3c1.9 1.8 3 4.3 3 7c0 0.1 0 0.1 0 0.2c0 0.1 0 0.2 0 0.3h60.1h0c-0.1-0.5-0.1-1-0.1-1.5c0-2.6 1-4.9 2.7-6.6 c1.9-2.1 4.7-3.4 7.8-3.4c5.8 0 10.5 4.5 10.5 10c0 0.5-0.1 1-0.1 1.5H202.9z"/><path class="finger" d="M39 42c0-3.3 2.7-6 6-6H45c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H45c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M58.2 51.8c-3.3 0-6-2.6-6-5.9v-0.3c0-3.2 2.7-5.9 6-5.9H66 c3.3 0 6 2.6 6 5.9V46c0 3.2-2.7 5.9-6 5.9H58.2z" /><path class="finger" d="M0 42.7c0-3.3 2.7-6 5.9-6h0.1c3.3 0 5.9 2.7 5.9 6v15.4 c0 3.3-2.7 6-5.9 6H5.9c-3.3 0-5.9-2.7-5.9-6V42.7z" /><path class="finger" d="M13 42c0-3.3 2.7-6 6-6H19c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H19c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M26 39.8c0-3.3 2.7-6 6-6H32c3.3 0 6 2.7 6 6v32.1 c0 3.3-2.7 6-6 6H32c-3.3 0-6-2.7-6-6V39.8z" /><path class="finger" d="M245 42c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v20.9 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V42z" /><path class="finger" d="M225.8 51.8c3.3 0 6-2.6 6-5.9v-0.3c0-3.2-2.7-5.9-6-5.9H218 c-3.3 0-6 2.6-6 5.9V46c0 3.2 2.7 5.9 6 5.9H225.8z" /><path class="finger" d="M284 42.7c0-3.3-2.7-6-6-6H278c-3.3 0-6 2.7-6 6v15.4 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42.7z" /><path class="finger" d="M271 42c0-3.3-2.7-6-6-6H265c-3.3 0-6 2.7-6 6v20.9 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42z" /><path class="finger" d="M258 39.8c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v32.1 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V39.8z" /></svg>\n\n<div class="empty-user-line"></div>\n\n<div> \n'+a(t.gettext.call(e,"%(name)s is a quiet soul.",{name:"gettext",hash:{name:null!=e?e.name:e},data:i}))+"\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileCommentsEmptyView",["backbone-marionette","home/templates/profileCommentsEmpty"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/templates/profileFavoritesEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-user" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 284 78" enable-background="new 0 0 284 78" xml:space="preserve"><path d="M202.9 42.3c-9.2-24.6-33-42.2-60.9-42.2S90.4 17.7 81.1 42.3H91c0-0.2 0-0.3 0-0.5c0-5.5 4.7-10 10.5-10 c2.9 0 5.6 1.2 7.5 3c1.9 1.8 3 4.3 3 7c0 0.1 0 0.1 0 0.2c0 0.1 0 0.2 0 0.3h60.1h0c-0.1-0.5-0.1-1-0.1-1.5c0-2.6 1-4.9 2.7-6.6 c1.9-2.1 4.7-3.4 7.8-3.4c5.8 0 10.5 4.5 10.5 10c0 0.5-0.1 1-0.1 1.5H202.9z"/><path class="finger" d="M39 42c0-3.3 2.7-6 6-6H45c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H45c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M58.2 51.8c-3.3 0-6-2.6-6-5.9v-0.3c0-3.2 2.7-5.9 6-5.9H66 c3.3 0 6 2.6 6 5.9V46c0 3.2-2.7 5.9-6 5.9H58.2z" /><path class="finger" d="M0 42.7c0-3.3 2.7-6 5.9-6h0.1c3.3 0 5.9 2.7 5.9 6v15.4 c0 3.3-2.7 6-5.9 6H5.9c-3.3 0-5.9-2.7-5.9-6V42.7z" /><path class="finger" d="M13 42c0-3.3 2.7-6 6-6H19c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H19c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M26 39.8c0-3.3 2.7-6 6-6H32c3.3 0 6 2.7 6 6v32.1 c0 3.3-2.7 6-6 6H32c-3.3 0-6-2.7-6-6V39.8z" /><path class="finger" d="M245 42c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v20.9 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V42z" /><path class="finger" d="M225.8 51.8c3.3 0 6-2.6 6-5.9v-0.3c0-3.2-2.7-5.9-6-5.9H218 c-3.3 0-6 2.6-6 5.9V46c0 3.2 2.7 5.9 6 5.9H225.8z" /><path class="finger" d="M284 42.7c0-3.3-2.7-6-6-6H278c-3.3 0-6 2.7-6 6v15.4 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42.7z" /><path class="finger" d="M271 42c0-3.3-2.7-6-6-6H265c-3.3 0-6 2.7-6 6v20.9 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42z" /><path class="finger" d="M258 39.8c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v32.1 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V39.8z" /></svg>\n\n<div class="empty-user-line"></div>\n\n<div> \n'+a(t.gettext.call(e,"%(name)s hasn't favorited discussions yet.",{name:"gettext",hash:{name:null!=e?e.name:e},data:i}))+"\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFavoritesEmptyView",["backbone-marionette","home/templates/profileFavoritesEmpty"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/templates/profileFollowersEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-user" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 284 78" enable-background="new 0 0 284 78" xml:space="preserve"><path d="M202.9 42.3c-9.2-24.6-33-42.2-60.9-42.2S90.4 17.7 81.1 42.3H91c0-0.2 0-0.3 0-0.5c0-5.5 4.7-10 10.5-10 c2.9 0 5.6 1.2 7.5 3c1.9 1.8 3 4.3 3 7c0 0.1 0 0.1 0 0.2c0 0.1 0 0.2 0 0.3h60.1h0c-0.1-0.5-0.1-1-0.1-1.5c0-2.6 1-4.9 2.7-6.6 c1.9-2.1 4.7-3.4 7.8-3.4c5.8 0 10.5 4.5 10.5 10c0 0.5-0.1 1-0.1 1.5H202.9z"/><path class="finger" d="M39 42c0-3.3 2.7-6 6-6H45c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H45c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M58.2 51.8c-3.3 0-6-2.6-6-5.9v-0.3c0-3.2 2.7-5.9 6-5.9H66 c3.3 0 6 2.6 6 5.9V46c0 3.2-2.7 5.9-6 5.9H58.2z" /><path class="finger" d="M0 42.7c0-3.3 2.7-6 5.9-6h0.1c3.3 0 5.9 2.7 5.9 6v15.4 c0 3.3-2.7 6-5.9 6H5.9c-3.3 0-5.9-2.7-5.9-6V42.7z" /><path class="finger" d="M13 42c0-3.3 2.7-6 6-6H19c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H19c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M26 39.8c0-3.3 2.7-6 6-6H32c3.3 0 6 2.7 6 6v32.1 c0 3.3-2.7 6-6 6H32c-3.3 0-6-2.7-6-6V39.8z" /><path class="finger" d="M245 42c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v20.9 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V42z" /><path class="finger" d="M225.8 51.8c3.3 0 6-2.6 6-5.9v-0.3c0-3.2-2.7-5.9-6-5.9H218 c-3.3 0-6 2.6-6 5.9V46c0 3.2 2.7 5.9 6 5.9H225.8z" /><path class="finger" d="M284 42.7c0-3.3-2.7-6-6-6H278c-3.3 0-6 2.7-6 6v15.4 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42.7z" /><path class="finger" d="M271 42c0-3.3-2.7-6-6-6H265c-3.3 0-6 2.7-6 6v20.9 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42z" /><path class="finger" d="M258 39.8c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v32.1 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V39.8z" /></svg>\n\n<div class="empty-user-line"></div>\n\n<div> \n'+a(t.gettext.call(e,"Nobody is following %(name)s yet.",{name:"gettext",hash:{name:null!=e?e.name:e},data:i}))+"\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFollowersEmptyView",["backbone-marionette","home/templates/profileFollowersEmpty"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/templates/profileRecentEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-user" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 284 78" enable-background="new 0 0 284 78" xml:space="preserve"><path d="M202.9 42.3c-9.2-24.6-33-42.2-60.9-42.2S90.4 17.7 81.1 42.3H91c0-0.2 0-0.3 0-0.5c0-5.5 4.7-10 10.5-10 c2.9 0 5.6 1.2 7.5 3c1.9 1.8 3 4.3 3 7c0 0.1 0 0.1 0 0.2c0 0.1 0 0.2 0 0.3h60.1h0c-0.1-0.5-0.1-1-0.1-1.5c0-2.6 1-4.9 2.7-6.6 c1.9-2.1 4.7-3.4 7.8-3.4c5.8 0 10.5 4.5 10.5 10c0 0.5-0.1 1-0.1 1.5H202.9z"/><path class="finger" d="M39 42c0-3.3 2.7-6 6-6H45c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H45c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M58.2 51.8c-3.3 0-6-2.6-6-5.9v-0.3c0-3.2 2.7-5.9 6-5.9H66 c3.3 0 6 2.6 6 5.9V46c0 3.2-2.7 5.9-6 5.9H58.2z" /><path class="finger" d="M0 42.7c0-3.3 2.7-6 5.9-6h0.1c3.3 0 5.9 2.7 5.9 6v15.4 c0 3.3-2.7 6-5.9 6H5.9c-3.3 0-5.9-2.7-5.9-6V42.7z" /><path class="finger" d="M13 42c0-3.3 2.7-6 6-6H19c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H19c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M26 39.8c0-3.3 2.7-6 6-6H32c3.3 0 6 2.7 6 6v32.1 c0 3.3-2.7 6-6 6H32c-3.3 0-6-2.7-6-6V39.8z" /><path class="finger" d="M245 42c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v20.9 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V42z" /><path class="finger" d="M225.8 51.8c3.3 0 6-2.6 6-5.9v-0.3c0-3.2-2.7-5.9-6-5.9H218 c-3.3 0-6 2.6-6 5.9V46c0 3.2 2.7 5.9 6 5.9H225.8z" /><path class="finger" d="M284 42.7c0-3.3-2.7-6-6-6H278c-3.3 0-6 2.7-6 6v15.4 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42.7z" /><path class="finger" d="M271 42c0-3.3-2.7-6-6-6H265c-3.3 0-6 2.7-6 6v20.9 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42z" /><path class="finger" d="M258 39.8c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v32.1 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V39.8z" /></svg>\n\n<div class="empty-user-line"></div>\n\n<div> \n'+a(t.gettext.call(e,"%(name)s is a quiet soul.",{name:"gettext",hash:{name:null!=e?e.name:e},data:i}))+'\n<a href="//disqus.com/follow/facebook/">'+a(t.gettext.call(e,"Find and follow more vocal friends on %(disqus)s »",{name:"gettext",hash:{disqus:"Disqus"},data:i}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileRecentEmptyView",["backbone-marionette","home/templates/profileRecentEmpty"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/templates/userFeedEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-user" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 284 78" enable-background="new 0 0 284 78" xml:space="preserve"><path d="M202.9 42.3c-9.2-24.6-33-42.2-60.9-42.2S90.4 17.7 81.1 42.3H91c0-0.2 0-0.3 0-0.5c0-5.5 4.7-10 10.5-10 c2.9 0 5.6 1.2 7.5 3c1.9 1.8 3 4.3 3 7c0 0.1 0 0.1 0 0.2c0 0.1 0 0.2 0 0.3h60.1h0c-0.1-0.5-0.1-1-0.1-1.5c0-2.6 1-4.9 2.7-6.6 c1.9-2.1 4.7-3.4 7.8-3.4c5.8 0 10.5 4.5 10.5 10c0 0.5-0.1 1-0.1 1.5H202.9z"/><path class="finger" d="M39 42c0-3.3 2.7-6 6-6H45c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H45c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M58.2 51.8c-3.3 0-6-2.6-6-5.9v-0.3c0-3.2 2.7-5.9 6-5.9H66 c3.3 0 6 2.6 6 5.9V46c0 3.2-2.7 5.9-6 5.9H58.2z" /><path class="finger" d="M0 42.7c0-3.3 2.7-6 5.9-6h0.1c3.3 0 5.9 2.7 5.9 6v15.4 c0 3.3-2.7 6-5.9 6H5.9c-3.3 0-5.9-2.7-5.9-6V42.7z" /><path class="finger" d="M13 42c0-3.3 2.7-6 6-6H19c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H19c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M26 39.8c0-3.3 2.7-6 6-6H32c3.3 0 6 2.7 6 6v32.1 c0 3.3-2.7 6-6 6H32c-3.3 0-6-2.7-6-6V39.8z" /><path class="finger" d="M245 42c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v20.9 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V42z" /><path class="finger" d="M225.8 51.8c3.3 0 6-2.6 6-5.9v-0.3c0-3.2-2.7-5.9-6-5.9H218 c-3.3 0-6 2.6-6 5.9V46c0 3.2 2.7 5.9 6 5.9H225.8z" /><path class="finger" d="M284 42.7c0-3.3-2.7-6-6-6H278c-3.3 0-6 2.7-6 6v15.4 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42.7z" /><path class="finger" d="M271 42c0-3.3-2.7-6-6-6H265c-3.3 0-6 2.7-6 6v20.9 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42z" /><path class="finger" d="M258 39.8c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v32.1 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V39.8z" /></svg>\n\n<div class="empty-user-line"></div>\n\n<div> \n'+a(t.gettext.call(e,"%(name)s is a quiet soul.",{name:"gettext",hash:{name:null!=e?e.name:e},data:i}))+' <a href="//disqus.com/follow/facebook/">'+a(t.gettext.call(e,"Find and follow more vocal friends on %(disqus)s »",{name:"gettext",hash:{disqus:"Disqus"},data:i}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/UserActivityCardCollectionView",["underscore","home/views/ActivityCardCollectionView","home/views/FeedEmptyView","home/templates/userFeedEmpty"],function(e,t,n,i){return t.extend({initialize:function(e){t.prototype.initialize.apply(this,arguments),this.user=e.user},emptyViewOptions:function(){return{model:this.user}},emptyView:n.extend({template:i})})}),define("home/templates/forumCard",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" active"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="card-forum">\n<div class="card-aside">\n<button class="btn btn-light btn-follow';return a=t["if"].call(e,null!=e?e.followed:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='" data-action="toggle-follow">\n<span class="symbol-default"><span class="icon-plus"></span></span><span class="text-default">'+s(t.gettext.call(e,"Follow",{name:"gettext",hash:{},data:i}))+'</span><span class="symbol-following"><span class="icon-checkmark"></span></span><span class="text-following">'+s(t.gettext.call(e,"Following",{name:"gettext",hash:{},data:i}))+'</span>\n</button>\n</div>\n<div class="card-body">\n',a=this.invokePartial(n.forumAvatar,"","forumAvatar",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="forum-info">\n<a class="link-gray-dark name" href="/home/forums/'+s(o(null!=e?e.id:e,e))+'/" data-link-name="forum_name">',a=this.invokePartial(n.forumName,"","forumName",e,void 0,t,n,i),null!=a&&(r+=a),r+'</a>\n<p class="description">\n<a href="'+s(o(null!=e?e.url:e,e))+'" class="link-gray" data-link-name="forum_description">'+s(o(null!=e?e.url:e,e))+"</a>\n</p>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ForumCardView",["backbone-marionette","home/utils/mixpanelUtils","home/templates/forumCard"],function(e,t,n){var i=e.ItemView.extend({template:n,className:"card",events:{"click [data-action=toggle-follow]":"toggleFollow"},modelEvents:{"change:followed":"handleFollowedClass"},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("followed"))},toggleFollow:function(e){e&&e.preventDefault(),t.track("follow forum",e,{properties:{follow:!this.model.get("followed")}}),this.model.toggleFollowed()}});return i}),define("home/views/ForumCardCollectionView",["underscore","home/utils/layoutUtils","home/utils/mixpanelUtils","home/mixins/withItemRemovalSkipped","home/mixins/withViewFeedTracking","home/models/Session","home/views/ForumCardView","home/views/common/FetchableCollectionView"],function(e,t,n,i,a,s,o,r){var l=r.extend({itemView:o,initialize:function(){r.prototype.initialize.apply(this,arguments);var e=s.get();e.loadPromise().then(function(){e.userProfile.forumsFollowing.ensureFetched()})},onShow:function(){var t=this;e.defer(function(){n.track("view feed",{target:t.$el})})},emptyViewOptions:function(){return{model:this.options.user}}});return i.call(l.prototype),a.call(l.prototype),l}),define("home/templates/profileFollowingPeopleEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-user" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 284 78" enable-background="new 0 0 284 78" xml:space="preserve"><path d="M202.9 42.3c-9.2-24.6-33-42.2-60.9-42.2S90.4 17.7 81.1 42.3H91c0-0.2 0-0.3 0-0.5c0-5.5 4.7-10 10.5-10 c2.9 0 5.6 1.2 7.5 3c1.9 1.8 3 4.3 3 7c0 0.1 0 0.1 0 0.2c0 0.1 0 0.2 0 0.3h60.1h0c-0.1-0.5-0.1-1-0.1-1.5c0-2.6 1-4.9 2.7-6.6 c1.9-2.1 4.7-3.4 7.8-3.4c5.8 0 10.5 4.5 10.5 10c0 0.5-0.1 1-0.1 1.5H202.9z"/><path class="finger" d="M39 42c0-3.3 2.7-6 6-6H45c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H45c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M58.2 51.8c-3.3 0-6-2.6-6-5.9v-0.3c0-3.2 2.7-5.9 6-5.9H66 c3.3 0 6 2.6 6 5.9V46c0 3.2-2.7 5.9-6 5.9H58.2z" /><path class="finger" d="M0 42.7c0-3.3 2.7-6 5.9-6h0.1c3.3 0 5.9 2.7 5.9 6v15.4 c0 3.3-2.7 6-5.9 6H5.9c-3.3 0-5.9-2.7-5.9-6V42.7z" /><path class="finger" d="M13 42c0-3.3 2.7-6 6-6H19c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H19c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M26 39.8c0-3.3 2.7-6 6-6H32c3.3 0 6 2.7 6 6v32.1 c0 3.3-2.7 6-6 6H32c-3.3 0-6-2.7-6-6V39.8z" /><path class="finger" d="M245 42c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v20.9 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V42z" /><path class="finger" d="M225.8 51.8c3.3 0 6-2.6 6-5.9v-0.3c0-3.2-2.7-5.9-6-5.9H218 c-3.3 0-6 2.6-6 5.9V46c0 3.2 2.7 5.9 6 5.9H225.8z" /><path class="finger" d="M284 42.7c0-3.3-2.7-6-6-6H278c-3.3 0-6 2.7-6 6v15.4 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42.7z" /><path class="finger" d="M271 42c0-3.3-2.7-6-6-6H265c-3.3 0-6 2.7-6 6v20.9 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42z" /><path class="finger" d="M258 39.8c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v32.1 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V39.8z" /></svg>\n\n<div class="empty-user-line"></div>\n\n<div> \n'+a(t.gettext.call(e,"%(name)s doesn't follow any commenters.",{name:"gettext",hash:{name:null!=e?e.name:e},data:i}))+"\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFollowingPeopleEmptyView",["backbone-marionette","home/templates/profileFollowingPeopleEmpty"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/templates/profileFollowingCommunitiesEmpty",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-user" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 284 78" enable-background="new 0 0 284 78" xml:space="preserve"><path d="M202.9 42.3c-9.2-24.6-33-42.2-60.9-42.2S90.4 17.7 81.1 42.3H91c0-0.2 0-0.3 0-0.5c0-5.5 4.7-10 10.5-10 c2.9 0 5.6 1.2 7.5 3c1.9 1.8 3 4.3 3 7c0 0.1 0 0.1 0 0.2c0 0.1 0 0.2 0 0.3h60.1h0c-0.1-0.5-0.1-1-0.1-1.5c0-2.6 1-4.9 2.7-6.6 c1.9-2.1 4.7-3.4 7.8-3.4c5.8 0 10.5 4.5 10.5 10c0 0.5-0.1 1-0.1 1.5H202.9z"/><path class="finger" d="M39 42c0-3.3 2.7-6 6-6H45c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H45c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M58.2 51.8c-3.3 0-6-2.6-6-5.9v-0.3c0-3.2 2.7-5.9 6-5.9H66 c3.3 0 6 2.6 6 5.9V46c0 3.2-2.7 5.9-6 5.9H58.2z" /><path class="finger" d="M0 42.7c0-3.3 2.7-6 5.9-6h0.1c3.3 0 5.9 2.7 5.9 6v15.4 c0 3.3-2.7 6-5.9 6H5.9c-3.3 0-5.9-2.7-5.9-6V42.7z" /><path class="finger" d="M13 42c0-3.3 2.7-6 6-6H19c3.3 0 6 2.7 6 6v20.9c0 3.3-2.7 6-6 6 H19c-3.3 0-6-2.7-6-6V42z" /><path class="finger" d="M26 39.8c0-3.3 2.7-6 6-6H32c3.3 0 6 2.7 6 6v32.1 c0 3.3-2.7 6-6 6H32c-3.3 0-6-2.7-6-6V39.8z" /><path class="finger" d="M245 42c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v20.9 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V42z" /><path class="finger" d="M225.8 51.8c3.3 0 6-2.6 6-5.9v-0.3c0-3.2-2.7-5.9-6-5.9H218 c-3.3 0-6 2.6-6 5.9V46c0 3.2 2.7 5.9 6 5.9H225.8z" /><path class="finger" d="M284 42.7c0-3.3-2.7-6-6-6H278c-3.3 0-6 2.7-6 6v15.4 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42.7z" /><path class="finger" d="M271 42c0-3.3-2.7-6-6-6H265c-3.3 0-6 2.7-6 6v20.9 c0 3.3 2.7 6 6 6h0.1c3.3 0 6-2.7 6-6V42z" /><path class="finger" d="M258 39.8c0-3.3-2.7-6-5.9-6h-0.1c-3.3 0-5.9 2.7-5.9 6v32.1 c0 3.3 2.7 6 5.9 6h0.1c3.3 0 5.9-2.7 5.9-6V39.8z" /></svg>\n\n<div class="empty-user-line"></div>\n\n<div> \n'+a(t.gettext.call(e,"%(name)s doesn't follow any communities.",{name:"gettext",hash:{name:null!=e?e.name:e},data:i}))+"\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFollowingCommunitiesEmptyView",["backbone-marionette","home/templates/profileFollowingCommunitiesEmpty"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/templates/profileFollowing",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<ul class="nav-tabs">\n<li class="active" data-action="switch-tab" data-tab="following">\n<a href="#">\n'+a(t.gettext.call(e,"People %(numberFollowing)s",{name:"gettext",hash:{numberFollowing:t.tag.call(e,"span",{name:"tag",hash:{text:null!=e?e.numFollowing:e,"data-role":"num-following","class":"nav-tab-stat"},data:i})},data:i}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="forumsFollowing">\n<a href="#">\n'+a(t.gettext.call(e,"Communities %(numberFollowing)s",{name:"gettext",hash:{numberFollowing:t.tag.call(e,"span",{name:"tag",hash:{text:null!=e?e.numForumsFollowing:e,"data-role":"num-forums-following","class":"nav-tab-stat"},data:i})},data:i}))+'\n</a>\n</li>\n</ul>\n<div data-role="content-area" data-mix-location="following"></div>\n<div data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/ProfileFollowingView",["underscore","home/utils/layoutUtils","home/utils/trackingUtils","home/views/common/TabbedView","home/views/UserCollectionView","home/views/ForumCardCollectionView","home/views/common/FetchableCollectionFooterView","home/views/ProfileFollowingPeopleEmptyView","home/views/ProfileFollowingCommunitiesEmptyView","home/templates/profileFollowing"],function(e,t,n,i,a,s,o,r,l,c){var u=i.extend({defaultTab:"following",template:c,regions:e.defaults({footerRegion:"[data-role=footer-area]"},i.prototype.regions),modelEvents:{"change:numFollowing":"updateNumFollowing","change:numForumsFollowing":"updateNumForumsFollowing"},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.userProfile=e.userProfile},getDefaultOptions:function(e){return{user:this.model,model:this.userProfile[e],collection:this.userProfile[e].get("items"),emptyView:"following"===e?r:l,infiniteScroll:!0}},updateTabContent:function(e){i.prototype.updateTabContent.apply(this,arguments),this.footerRegion.show(new o(this.getDefaultOptions(e)))},updateNumFollowing:function(){this.$("[data-role=num-following]").text(this.model.get("numFollowing"))},updateNumForumsFollowing:function(){this.$("[data-role=num-forums-following]").text(this.model.get("numForumsFollowing"))},getTrackingSection:function(e){return"forumsFollowing"===e?"following-communities":"following-default"},getTabView:function(e){var t,n=this.getDefaultOptions(e);switch(e){case"following":t=new a(n),t.$el.attr({"data-mix-location":"users"});break;case"forumsFollowing":t=new s(n),t.$el.attr({"data-mix-location":"forums"})}return t.model.ensureFetched(),t}});return u}),define("home/templates/followerCard",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression,s=this.lambda;return'<button class="profile-remove btn btn-light"\ntitle="'+a(t.gettext.call(e,"Remove Follower",{name:"gettext",hash:{},data:i}))+'"\ndata-action="remove-follower"\ndata-user="'+a(s(null!=e?e.id:e,e))+'">\n<span class="icon-cancel"></span>\n</button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="card-user">\n<div class="card-aside">\n';return a=t["if"].call(e,null!=e?e.showRemoveButton:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=this.invokePartial(n.userCardFollowButton,"","userCardFollowButton",e,void 0,t,n,i),null!=a&&(s+=a),s+='</div>\n<div class="card-body">\n',a=this.invokePartial(n.userCardBody,"","userCardBody",e,void 0,t,n,i),null!=a&&(s+=a),s+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/FollowerCardView",["home/views/UserCardView","home/templates/followerCard"],function(e,t){return e.extend({initialize:function(t){e.prototype.initialize.call(this,t),this.showRemoveButton=t.showRemoveButton},template:t,templateHelpers:function(){var t=e.prototype.templateHelpers.call(this);return t.showRemoveButton=this.showRemoveButton,t}})}),define("home/views/FollowerCollectionView",["underscore","jquery","core/strings","core/bus","home/views/FollowerCardView","home/views/common/FetchableCollectionView"],function(e,t,n,i,a,s){var o=n.get;return s.extend({initialize:function(e){s.prototype.initialize.call(this,e),this.user=e.user},events:e.defaults({"click [data-action=remove-follower]":"removeFollower"},s.prototype.events),itemView:a,itemViewOptions:function(){return{showRemoveButton:this.user.isSessionUser()}},removeFollower:function(e){if(this.user.isSessionUser()){e.preventDefault();var a=t(e.currentTarget),s=a.attr("data-user"),r=this.collection.findWhere({id:s}),l=window.confirm(n.interpolate(o("Remove %(follower)s as a follower?"),{follower:r.getDisplayName()}));if(l)return this.collection.remove(r),i.trigger("removeFollower",r),this.user.removeFollower(r)}}})}),define("home/templates/profileView",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="section-expanded sidebar-fixed">\n<div class="cover cover-profile" data-role="cover-area"></div>\n</div>\n<div class="section-contained sidebar-scrollable profile-scrollable scrollable-measure-selector" data-role="content-area" data-mix-location="feed">\n</div>\n'},useData:!0})}),define("home/templates/privateProfile",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="empty-message empty-message-private">\n<div class="empty-message-private-face-wrapper">\n<svg class="art-private-sunglasses"xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 150.5 25" enable-background="new 0 0 150.5 25" xml:space="preserve">\n<polygon points="10.5,0 10.5,5 31.5,5 31.5,10 35.5,10 35.5,15 40.5,15 40.5,20 45.5,20 45.5,25 80.5,25 80.5,20 85.5,20 85.5,15 90.5,15 90.5,10 100.5,10 100.5,15 105.5,15 105.5,20 140.5,20 140.5,15 145.5,15 145.5,10 150.5,10 150.5,5 150.5,0"/>\n<rect x="0.5" y="5" width="10" height="5"/>\n<rect x="40.5" y="5" width="5" height="5" class="shading"/>\n<rect x="45.5" y="10" width="5" height="5" class="shading"/>\n<rect x="50.5" y="15" width="5" height="5" class="shading"/>\n<rect x="60.5" y="15" width="5" height="5" class="shading"/>\n<rect x="55.5" y="10" width="5" height="5" class="shading"/>\n<rect x="110.5" y="10" width="5" height="5" class="shading"/>\n<rect x="120.5" y="10" width="5" height="5" class="shading"/>\n<rect x="50.5" y="5" width="5" height="5" class="shading"/>\n<rect x="105.5" y="5" width="5" height="5" class="shading"/>\n<rect x="115.5" y="5" width="5" height="5" class="shading"/>\n</svg>\n<svg class="art-private-face" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 130 130" enable-background="new 0 0 130 130" xml:space="preserve"><circle cx="65" cy="65" r="65"/><path d="M14 41.6c0-5.5 4.7-10 10.5-10S35 36.1 35 41.6s-4.7 10-10.5 10 S14 47.2 14 41.6z"/><path d="M95 40.6c0-5.5 4.7-10 10.5-10s10.5 4.5 10.5 10s-4.7 10-10.5 10 S95 46.2 95 40.6z"/><rect x="51" y="62.6" width="46" height="4"/></svg>\n</div>\n<div> \n<svg class="art-private-text" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 240 35" enable-background="new 0 0 240 35" xml:space="preserve">\n<rect x="80" width="5" height="35"/>\n<polygon points="165,0 160,0 160,10 155,10 155,15 160,15 160,35 165,35 165,15 170,15 170,10 165,10"/>\n<polygon points="180,10 180,0 175,0 175,35 180,35 180,15 190,15 190,10"/>\n<rect x="190" y="15" width="5" height="20"/>\n<polygon points="5,30 5,5 20,5 20,0 0,0 0,35 20,35 20,30"/>\n<polygon points="45,20 35,20 35,15 30,15 30,30 35,30 35,25 50,25 50,15 45,15"/>\n<rect x="35" y="10" width="10" height="5"/>\n<polygon points="60,10 60,15 70,15 70,30 60,30 60,35 75,35 75,10"/>\n<rect x="105" y="10" width="5" height="20"/>\n<rect x="120" y="10" width="5" height="20"/>\n<rect x="135" y="10" width="5" height="20"/>\n<rect x="145" y="10" width="5" height="25"/>\n<rect x="145" width="5" height="5"/>\n<polygon points="235,10 235,0 230,0 230,10 225,10 225,15 230,15 230,35 235,35 235,15 240,15 240,10"/>\n<rect x="215" y="10" width="5" height="25"/>\n<rect x="215" width="5" height="5"/>\n<rect x="110" y="30" width="10" height="5"/>\n<rect x="125" y="30" width="10" height="5"/>\n<rect x="35" y="30" width="10" height="5"/>\n<rect x="55" y="15" width="5" height="15"/>\n<rect x="20" y="5" width="5" height="25"/>\n</svg>\n</div>\nThis user\'s activity is private <span class="icon-lock"></span>\n</div>\n'},useData:!0})}),define("home/views/ProfileView",["jquery","underscore","backbone","backbone-marionette","home/utils/layoutUtils","home/utils/backboneUtils","home/views/common/TabbedView","home/views/ProfileCoverView","home/views/ProfileCardCollectionView","home/views/ProfileCommentsEmptyView","home/views/ProfileFavoritesEmptyView","home/views/ProfileFollowersEmptyView","home/views/ProfileRecentEmptyView","home/views/common/FetchableCollectionLayout","home/views/UserCollectionView","home/views/UserActivityCardCollectionView","home/views/ProfileFollowingView","home/views/FollowerCollectionView","home/templates/profileView","home/templates/spinnerTall","home/templates/privateProfile","home/mixins/withClickLinkTracking"],function(e,t,n,i,a,s,o,r,l,c,u,d,h,m,p,f,g,v,w,b,y,x){var k=o.extend({defaultTab:"recent",template:function(e){return e.user.name?w:b},regions:t.defaults({coverRegion:"[data-role=cover-area]"},o.prototype.regions),events:t.defaults({"click a[data-link-name]":"trackClickLinkWithArea"},o.prototype.events),initialize:function(){o.prototype.initialize.apply(this,arguments),this.listenTo(this.model.user,"sync",this.render)},getTitle:function(){return s.getPromiseFor(this.model.user,"name").then(function(e){return"Profile - "+e})},updateTabContent:function(){if(this.model.isPrivate()){this.contentRegion.show(new i.ItemView({template:y}));var e=this;t.defer(function(){e.$(".empty-message-private").addClass("loaded")})}else o.prototype.updateTabContent.apply(this,arguments)},onDomRefresh:function(){this.$(this.coverRegion.el).length&&this.coverRegion.show(new r({model:this.model.user})),o.prototype.onDomRefresh.apply(this,arguments)},getTrackingSection:function(e){switch(e){case"following":return"following";case"followers":return"followers";case"comments":return"comments";case"favorites":return"favorites"}},getTabView:function(e){var t;switch(e){case"following":return new g({model:this.model.user,userProfile:this.model});case"followers":return t=new m({user:this.model.user,model:this.model.followers,collection:this.model.followers.get("items"),fetchableCollectionView:v,emptyView:d,infiniteScroll:!0}),t.$el.attr({"data-mix-location":"followers"}),t;case"comments":return t=this.getProfileCardCollectionView(this.model.user,this.model.posts,c),t.$el.attr({"data-mix-location":"posts"}),t;
case"favorites":return t=this.getProfileCardCollectionView(this.model.user,this.model.favorites,u),t.$el.attr({"data-mix-location":"favorites"}),t;case"recent":return t=this.getProfileCardCollectionView(this.model.user,this.model.profileFeed,h),t.$el.attr({"data-mix-location":"profile"}),t}},getProfileCardCollectionView:function(e,t,n){return new m({model:t,collection:t.get("items"),user:e,fetchableCollectionView:l,emptyView:n,infiniteScroll:!0})}});return x.call(k.prototype),k}),define("home/templates/discussionForm",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return'<div class="alert-discussion-formatting">\n<div class="alert-discussion-text">\n'+a(t.gettext.call(e,"%(firstDiscussion)s Check out these %(formatTips)s to make sure it's the best it can be.",{name:"gettext",hash:{formatTips:t.tag.call(e,"a",{name:"tag",hash:{text:t.gettext.call(e,"formatting tips",{name:"gettext",hash:{},data:i}),"data-action":"show-formatting",href:"#"},data:i}),firstDiscussion:t.tag.call(e,"strong",{name:"tag",hash:{text:t.gettext.call(e,"First time creating a discussion?",{name:"gettext",hash:{},data:i})},data:i})},data:i}))+'\n</div>\n<button class="btn btn-large btn-primary-inverted" data-action="show-formatting">\n'+a(t.gettext.call(e,"Formatting",{name:"gettext",hash:{},data:i}))+' <span class="icon-formatting-help">A</span>\n</button>\n</div>\n'},3:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"Create a new discussion on",{name:"gettext",hash:{},data:i}))+"\n"},5:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"Update your discussion on",{name:"gettext",hash:{},data:i}))+"\n"},7:function(e,t,n,i){var a=this.escapeExpression;return"<li>\n"+a(t.gettext.call(e,"%(emailMods)s channel mods if you have concerns.",{name:"gettext",hash:{emailMods:t.tag.call(e,"a",{name:"tag",hash:{text:t.gettext.call(e,"Email",{name:"gettext",hash:{},data:i}),href:null!=e?e.emailHref:e},data:i})},data:i}))+"\n</li>\n"},9:function(e,t,n,i){var a=this.escapeExpression;return'<div class="discussion-guidelines">\n<button class="btn btn-light btn-wide" data-action="show-guidelines">\n'+a(t.gettext.call(e,"Channel Specific Rules",{name:"gettext",hash:{},data:i}))+"\n</button>\n</div>\n"},11:function(e,t,n,i){var a=this.escapeExpression;return'<p class="discussion-form-explain media-body">\n<strong>'+a(t.gettext.call(e,"You must %(verifyYourEmailAddress)s in order to post on this forum.",{name:"gettext",hash:{verifyYourEmailAddress:t.tag.call(e,"a",{name:"tag",hash:{text:t.gettext.call(e,"verify your email address",{name:"gettext",hash:{},data:i}),href:"https://disqus.com/next/verify/?f=channel-discussdisqus"},data:i})},data:i}))+"</strong>\n</p>\n"},13:function(e,t,n,i){var a=this.escapeExpression;return'<span class="text-desktop">'+a(t.gettext.call(e,"Create Discussion",{name:"gettext",hash:{},data:i}))+'</span>\n<span class="text-mobile">'+a(t.gettext.call(e,"Create",{name:"gettext",hash:{},data:i}))+"</span>\n"},15:function(e,t,n,i){var a=this.escapeExpression;return'<span class="text-desktop">'+a(t.gettext.call(e,"Update Discussion",{name:"gettext",hash:{},data:i}))+'</span>\n<span class="text-mobile">'+a(t.gettext.call(e,"Update",{name:"gettext",hash:{},data:i}))+"</span>\n"},17:function(e,t,n,i){var a=this.escapeExpression;return'<div class="pull-left">\n<input id="dicussion-form-invite-checkbox" type="checkbox" name="invite-active-users">\n</div>\n<div class="media-body">\n<label for="dicussion-form-invite-checkbox">\n'+a(t.gettext.call(e,"Invite most active users",{name:"gettext",hash:{},data:i}))+"\n</label>\n<p>\n"+a(t.gettext.call(e,"This will invite the most active users on %(channelName)s when you submit this discussion. Do this ONLY when the thread is final and ready for publishing.",{name:"gettext",hash:{channelName:null!=e?e.channelName:e},data:i}))+"\n</p>\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="discussion-form-wrapper">\n<div class="section-contained">\n';return a=t.unless.call(e,null!=e?e.sessionUserNumPosts:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<div class="discussion-form-heading discussion-form-header">\n<h1 class="pull-left">\n',a=t["if"].call(e,null!=e?e.isNew:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(r+=a),r+='</h1>\n<div data-role="channel-info" class="discussion-origin"></div>\n</div>\n<div class="container-3-col">\n<div class="col-left">\n<div class="discussion-rules">\n<strong>'+s(t.gettext.call(e,"Basic Rules:",{name:"gettext",hash:{},data:i}))+'</strong>\n<ul class="list-bullet">\n<li>'+s(t.gettext.call(e,"Stay on topic for the selected channel.",{name:"gettext",hash:{},data:i}))+"</li>\n",a=t["if"].call(e,null!=e?e.emailHref:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="<li>\n"+s(t.gettext.call(e,"Follow the %(disqus)s posting %(guidelines)s.",{name:"gettext",hash:{guidelines:t.tag.call(e,"a",{name:"tag",hash:{text:t.gettext.call(e,"guidelines",{name:"gettext",hash:{},data:i}),href:"https://help.disqus.com/customer/portal/articles/1753105-basic-rules-for-disqus-powered-profiles-and-discussions"},data:i}),disqus:"Disqus"},data:i}))+"\n</li>\n</ul>\n</div>\n",a=t["if"].call(e,null!=(a=null!=e?e.forum:e)?a.guidelines:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n<div class="col-middle">\n<form class="discussion-form">\n<h3 class="discussion-form-heading small">'+s(t.gettext.call(e,"Title",{name:"gettext",hash:{},data:i}))+'</h3>\n<section data-attribute="title" class="form-attribute-input">\n<input class="discussion-form-title" name="title" type="text" placeholder="'+s(t.gettext.call(e,"Title your discussion",{name:"gettext",hash:{},data:i}))+'" value="'+s(o(null!=e?e.title:e,e))+'">\n<div data-role="attribute-error" class="form-message-error"></div>\n</section>\n<div class="media hidden-phone">\n<a data-action="show-formatting" class="btn btn-light pull-right btn-icon-formatting" href="#"><span class="icon-formatting-help">A</span></a>\n<div class="media-body">\n<h3 class="discussion-form-heading small">\n'+s(t.gettext.call(e,"Caption or Link %(optional)s",{name:"gettext",hash:{optional:t.tag.call(e,"small",{name:"tag",hash:{text:t.gettext.call(e,"(Optional)",{name:"gettext",hash:{},data:i})},data:i})},data:i}))+'\n</h3>\n</div>\n</div>\n<div data-role="postbox"></div>\n<div class="media">\n<a data-action="show-formatting" class="btn btn-light pull-right btn-icon-formatting visible-phone" href="#"><span class="icon-formatting-help">A</span></a>\n',a=t.unless.call(e,null!=e?e.sessionUserVerified:e,{name:"unless",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n<div class="discussion-form-submit-section">\n<div class="discussion-form-actions">\n<div class="spinner-small"></div>\n<button type="button" data-action="cancel-create" class="discussion-form-action btn btn-light-solid">Cancel</button>\n<button type="submit" class="discussion-form-action discussion-form-post btn btn-default">\n',a=t["if"].call(e,null!=e?e.isNew:e,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(15,i),data:i}),null!=a&&(r+=a),r+='</button>\n</div>\n<div class="discussion-form-subscribe media">\n<div class="pull-left">\n<input id="discussion-form-subscribe-checkbox" type="checkbox" name="subscribe" checked>\n</div>\n<div class="media-body">\n<label for="discussion-form-subscribe-checkbox">\n'+s(t.gettext.call(e,"Subscribe to this discussion",{name:"gettext",hash:{},data:i}))+' <span class="icon-mail"></span>\n</label>\n<p>\n'+s(t.gettext.call(e,"This will send email notifications for every new comment on a discussion. You can unsubscribe at any time.",{name:"gettext",hash:{},data:i}))+"\n</p>\n</div>\n",a=t["if"].call(e,null!=e?e.canInviteActiveUsers:e,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</div>\n</div>\n</form>\n</div>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/templates/discussionChannelInfo",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<img class="favicon" src="'+i(n(null!=(t=null!=e?e.options:e)?t.favicon:t,e))+'" alt="'+i(n(null!=e?e.name:e,e))+'"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a class="discussion-origin-name truncate-line" href="/home/channel/'+o(s(null!=e?e.slug:e,e))+'/">\n';return a=t["if"].call(e,null!=(a=null!=e?e.options:e)?a.favicon:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+o(s(null!=e?e.name:e,e))+"\n</a>\n"},useData:!0})}),define("home/templates/guidelines",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="guidelines-modal">\n<div class="guidelines-modal-header">\n<div class="discussion-origin">\n';return a=this.invokePartial(n.channelAvatar,"","channelAvatar",e,void 0,t,n,i),null!=a&&(r+=a),r+=" ",a=this.invokePartial(n.channelLink,"","channelLink",e,void 0,t,n,i),null!=a&&(r+=a),r+"\n</div>\n<h4>"+s(t.gettext.call(e,"Community Guidelines",{name:"gettext",hash:{},data:i}))+'</h4>\n</div>\n<div class="guidelines-modal-description">'+s(o(null!=(a=null!=e?e.primaryForum:e)?a.raw_guidelines:a,e))+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/formatting",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="modal-formatting">\n<div class="modal-body modal-formatting-body">\n<h1 class="modal-formatting-heading"><span class="icon-formatting-help">A</span> '+a(t.gettext.call(e,"Formatting Tips",{name:"gettext",hash:{},data:i}))+'</h1>\n<div class="media">\n<label class="pull-left">'+a(t.gettext.call(e,"Inserting an image",{name:"gettext",hash:{},data:i}))+'</label>\n<div class="media-body"><img src="'+a(t.urlfor.call(e,"cdn",{name:"urlfor",hash:{},data:i}))+'/img/howto-postimages.gif" class="img-responsive img-border" alt="'+a(t.gettext.call(e,"How to insert an image",{name:"gettext",hash:{},data:i}))+'" width="380" height="200" /></div>\n</div>\n<div class="media">\n<label class="pull-left"><a>'+a(t.gettext.call(e,"Linking text",{name:"gettext",hash:{},data:i}))+'</a></label>\n<div class="media-body">\n<textarea>&lt;a href="https://www.website.com/"&gt;'+a(t.gettext.call(e,"This is a link",{name:"gettext",hash:{},data:i}))+'&lt;/a&gt;</textarea>\n</div>\n</div>\n<div class="media">\n<label class="pull-left">'+a(t.gettext.call(e,"Line Break",{name:"gettext",hash:{},data:i}))+'</label>\n<div class="media-body">\n<textarea>&lt;br&gt;</textarea>\n</div>\n</div>\n<div class="media">\n<label class="pull-left"><strong>'+a(t.gettext.call(e,"Bold",{name:"gettext",hash:{},data:i}))+'</strong></label>\n<div class="media-body">\n<textarea>&lt;strong&gt;'+a(t.gettext.call(e,"Defines bold text",{name:"gettext",hash:{},data:i}))+'&lt;/strong&gt;</textarea>\n</div>\n</div>\n<div class="media">\n<label class="pull-left"><blockquote>'+a(t.gettext.call(e,"Block Quote",{name:"gettext",hash:{},data:i}))+'</blockquote></label>\n<div class="media-body">\n<textarea>&lt;blockquote&gt;'+a(t.gettext.call(e,"Defines a long quotation",{name:"gettext",hash:{},data:i}))+'&lt;/blockquote&gt;</textarea>\n</div>\n</div>\n<div class="media">\n<label class="pull-left"><em>'+a(t.gettext.call(e,"Italic",{name:"gettext",hash:{},data:i}))+'</em></label>\n<div class="media-body">\n<textarea>&lt;em&gt;'+a(t.gettext.call(e,"Defines italic text",{name:"gettext",hash:{},data:i}))+'&lt;/em&gt;</textarea>\n</div>\n</div>\n<div class="media">\n<label class="pull-left"><strike>'+a(t.gettext.call(e,"Strikethrough",{name:"gettext",hash:{},data:i}))+'</strike></label>\n<div class="media-body">\n<textarea>&lt;strike&gt;'+a(t.gettext.call(e,"Defines strikethrough text",{name:"gettext",hash:{},data:i}))+'&lt;/strike&gt;</textarea>\n</div>\n</div>\n<div class="media">\n<label class="pull-left"><u>'+a(t.gettext.call(e,"Underlined",{name:"gettext",hash:{},data:i}))+'</u></label>\n<div class="media-body">\n<textarea>&lt;u&gt;'+a(t.gettext.call(e,"Defines underlined text",{name:"gettext",hash:{},data:i}))+"&lt;/u&gt;</textarea>\n</div>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/templates/threadSubmitError",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda;return'<div class="modal-header">\n<h4 class="modal-title">'+s(t.gettext.call(e,"Uh oh, we weren't unable to save your discussion",{name:"gettext",hash:{},data:i}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+s(o(null!=(a=null!=e?e.responseJSON:e)?a.response:a,e))+"</p>\n</div>\n"},useData:!0})}),define("home/views/DiscussionFormView",["underscore","backbone","backbone-marionette","core/strings","home/mixins/withSubviews","home/models/common/UniqueModel","home/models/Thread","home/templates/discussionForm","home/utils/features","home/utils/backboneUtils","home/utils/confirmModal","home/utils/trackingUtils","home/models/Post","home/views/PostReplyView","home/utils/releaseUtils","home/templates/discussionChannelInfo","home/templates/guidelines","home/templates/formatting","home/templates/threadSubmitError"],function(e,t,n,i,a,s,o,r,l,c,u,d,h,m,p,f,g,v,w){var b=i.get,y=n.ItemView,x=y.prototype,k=y.extend({template:r,templateHelpers:function(){var t=this.model.forum.channel.get("options").modEmail,n=e.contains(this.session.moderatedForums,this.model.forum.id);return{isNew:this.model.isNew(),sessionUserNumPosts:this.session.user.get("numPosts"),sessionUserVerified:this.session.user.get("isVerified"),emailHref:t?"mailto:"+t:"",channelName:this.model.forum.channel.get("name"),canInviteActiveUsers:n}},events:{submit:"submitThread","click [data-action=show-guidelines]":"showGuidelines","click [data-action=show-formatting]":"showFormatting","click [data-action=cancel-create]":"navigateBack","blur input[name=title]":"updateTitle"},ui:{title:"[name=title]",subscribe:"[name=subscribe]",inviteActiveUsers:"[name=invite-active-users]"},initialize:function(e){e.thread?(this.model=e.thread,d.setSection("edit")):(this.model=new o({forum:e.forum}),d.setSection("create")),this.listenTo(this.model,"invalid",this.handleValidationError),this.session=e.session,this.model.forum.shouldFetch()&&this.model.forum.fetch(),this.listenToOnce(this.model,"change:id",function(){s.set(o,this.model)})},regions:{postboxRegion:"[data-role=postbox]",channelInfoRegion:"[data-role=channel-info]"},getThread:function(){return this.model},getTitle:function(){return c.getPromiseFor(this.model.forum,"name").then(function(e){return"- Create new discussion on "+e})},render:function(){return x.render.call(this),this.session.fetched?(this.activateRegion(this.postboxRegion,this.createPostbox),this.model.forum.channel&&this.activateRegion(this.channelInfoRegion,this.createChannelView),this):void this.session.fetch().then(e.bind(this.render,this))},createChannelView:function(){return new n.ItemView({el:this.channelInfoRegion.el,model:this.model.forum.channel,template:f})},submitThread:function(t){t.preventDefault();var n,i;this._submitLocked||(n=this.postboxRegion.currentView,i=n.textarea.get(),this._submitLocked=this.model.save({title:this.ui.title.val(),message:i},{success:e.bind(this.handleThreadCreate,this),error:e.bind(this.handleSaveError,this)}),this._submitLocked&&this.$el.find("form").addClass("is-submitting"))},createPostbox:function(){var e=new h({thread:this.model,author:this.session.user.id,message:this.model.get("raw_message")||this.model.get("message")});return new m({model:e,placeholder:b("Add your thoughts, images, or gifs here."),session:this.session,canUseContentEditable:l.canUseContentEditable(),showSubmitButton:!1,showAvatar:!1})},handleThreadCreate:function(){var e=this.ui.subscribe.prop("checked");e&&this.model.subscribe();var t=this.ui.inviteActiveUsers.prop("checked");t&&this.model.inviteUserGroup("good_forum_commenters"),this.trigger("createThread")},updateTitle:function(){this.model.set({title:this.ui.title.val()}),this.updateValidationErrors()},updateValidationErrors:function(){this.$(".form-attribute-input").removeClass("is-errored"),this.model.isValid()},handleValidationError:function(e,t){this.$(".form-attribute-input[data-attribute="+t.attrName+"]").addClass("is-errored").find("[data-role=attribute-error]").text(t.message)},handleSaveError:function(e,t){this._submitLocked=!1,this.$("form").removeClass("is-submitting"),u.confirmationPromise(u.TYPES.CLOSE,w(t))},showGuidelines:function(){u.confirmationPromise(u.TYPES.CLOSE,g(this.model.forum.channel.toJSON()))},showFormatting:function(){u.confirmationPromise(u.TYPES.CLOSE,v(this.model.forum.channel.toJSON()))},navigateBack:function(){window.history.back()},getPageTrackingParams:function(){return{forum:this.model.forum.id}}});return a.call(k.prototype),k}),define("home/models/ForumFeed",["underscore","backbone","home/collections/FeedItemCollection","home/models/common/UniqueModel","home/models/Feed","core/api"],function(e,t,n,i,a,s){var o=a.extend({initialize:function(){a.prototype.initialize.call(this,{},{collectionClass:n,collectionUrl:s.getURL("timelines/activities?type=profile")}),this.set({fetchOptions:{target:"forum:"+this.id}})},shouldFetch:function(){return!this.get("items").length&&!this.get("fetching")},fetch:function(e){this.get("items").length||this.get("fetching")||this.fetchItems(e)},parse:function(e){return e.response}});return i.addType("ForumFeed",o),o}),define("home/models/ChannelProfile",["jquery","underscore","backbone","remote/config","home/models/common/UniqueModel","home/models/Feed","home/models/Channel","home/collections/FeedItemCollection","home/collections/UserCollection","home/collections/ForumCollection","home/utils/backboneUtils","core/api"],function(e,t,n,i,a,s,o,r,l,c,u,d){var h=n.Model.extend({defaults:{channel:void 0},initialize:function(e,n){this.initializeRelated("channel",n,o);var a={target:"channel:"+this.channel.id};this.recentActivities=new s({fetchOptions:a},{collectionClass:r,collectionUrl:d.getURL("timelines/activities?type=profile")}),this.topActivities=new s({fetchOptions:a},{collectionClass:r,collectionUrl:d.getURL("timelines/ranked?type="+(t.contains(i.lounge.home_curated_channels,this.channel.id)?"curated":"profile"))}),this.createActivities=new s({fetchOptions:a},{collectionClass:r,collectionUrl:d.getURL("timelines/activities?type=profile&index=user_created_threads")}),a={channel:this.channel.id},this.userSources=new s({fetchOptions:a},{collectionClass:l,collectionUrl:d.getURL("channels/listSourceUsers")}),this.forumSources=new s({fetchOptions:a},{collectionClass:c,collectionUrl:d.getURL("channels/listSourceForums")}),this.channel.primaryForum?a={forum:this.channel.primaryForum.id}:(this.listenToOnce(this.channel,"changeRelated:primaryForum",function(){this.followers.set({fetchOptions:{forum:this.channel.primaryForum.id}})}),a=null),this.followers=new s({fetchOptions:a},{collectionClass:l,collectionUrl:d.getURL("forums/listFollowers")})},toJSON:function(){var e=n.Model.prototype.toJSON.apply(this,arguments);return t.defaults({channel:this.channel.toJSON(),recentActivities:this.recentActivities.toJSON(),topActivities:this.topActivities.toJSON(),createActivities:this.createActivities.toJSON()},e)},ensureFetched:function(){this.channel.shouldFetch()&&this.channel.fetch(),this.recentActivities.get("fetched")||this.recentActivities.fetchItems(),this.ensureFetchedTopActivities(),this.createActivities.get("fetched")||this.createActivities.fetchItems(),this.userSources.get("fetched")||(this.userSourcesPromise=this.userSources.fetchItems()),this.forumSources.get("fetched")||(this.forumSourcesPromise=this.forumSources.fetchItems()),this.followers.get("fetched")||this.ensureFetchedFollowers()},ensureFetchedTopActivities:function(){this.topActivities.get("fetched")||this.topActivities.fetchItems()},ensureFetchedFollowers:function(){if(this.followers.get("fetchOptions"))return void(this.followersPromise=this.followers.fetchItems());var e=this.followers;this.followersPromise=u.getPromiseFor(e,"fetchOptions").then(function(){return e.fetchItems()})}});return a.addType("ChannelProfile",h),h}),define("home/collections/common/SelectiveCollection",["jquery","underscore","backbone"],function(e,t,n){var i=n.Collection.extend({initialize:function(t,i){if(t)throw"SelectiveCollection should be initialized with undefined models to be allowed to populate itself from a given toSelect collection";if(!(i&&i.toSelect&&i.toSelect instanceof n.Collection))throw"SelectiveCollection must be initialized with a toSelect collection";this.toSelect=i.toSelect,this.shouldSelect=i.shouldSelect||this.shouldSelect,this.maxSize=i.maxSize,this.order=i.order||this.order,this.selectComplete=e.Deferred(),this.toSelect.length?this.selectFrom(this.toSelect):this.toSelect.once("sync",this.selectFrom,this)},selectFrom:function(e){if(!e.length)return void this.completeSelection();this.maxSize=t.isNumber(this.maxSize)?this.maxSize:e.length;var n=this.order(e);this.resolveSelectability(n.shift(),n)},resolveSelectability:function(t,n){if(!t)return void this.completeSelection();var i=this;e.when(this.shouldSelect(t)).then(function(e){e&&i.select(t),i.maxSize>i.length?i.resolveSelectability(n.shift(),n):i.completeSelection()})},isComplete:function(){return this.selectComplete.promise()},completeSelection:function(){this.selectComplete.resolve()},select:function(e){return this.length>=this.maxSize?void this.completeSelection():void this.add(e)},shouldSelect:function(){return!0},order:function(e){return e.toArray()}});return i}),define("home/mixins/asGenericCard",["jquery","underscore","home/utils/layoutUtils","home/mixins/withThreadCardDefaultFooter","home/mixins/withTruncate"],function(e,t,n,i,a){var s={className:function(e){return t.isFunction(e)&&(e=e.apply(this,t.rest(arguments))),e=e||"",["card card-generic","card-generic-"+this.model.get("verb"),e].join(" ")},initialize:function(e,t){t=t||{},e.call(this,t),this.channel=t.channel,this.hideImage=t.hideImage,this.listenTo(this.model.thread,"change:content",this.render),this.numTitleLines=t.numTitleLines||3},serializeData:function(e){var i=e.call(this),a=this.model.thread;return t.defaults(i,{discussionRoute:a.getDiscussionRoute(this.channel),threadDescription:a.getDefaultDescription(),image:!this.hideImage&&n.shouldShowImages()&&a.getImage(),numTitleLines:this.numTitleLines})}};return function(){i.apply(this,arguments),a.apply(this,arguments),this.className=t.wrap(this.className,s.className),this.initialize=t.wrap(this.initialize,s.initialize),this.serializeData=t.wrap(this.serializeData,s.serializeData)}}),define("home/templates/genericCardCreate",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" no-image"},3:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="discussion-image" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'">\n</a>\n'},5:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a class="card-avatar" href="/by/'+o(s(null!=e?e.username:e,e))+'/" data-link-name="user_avatar">\n<img\nsrc="'+o(s(null!=(a=null!=e?e.avatar:e)?a.cache:a,e))+'"\nalt="';return a=t["if"].call(e,null!=e?e.name:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(r+=a),r+'" />\n</a>\n'},6:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.name:e,e))},8:function(e,t,n,i){var a;return a=t["if"].call(e,null!=e?e.username:e,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a?a:""},9:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.username:e,e))},11:function(){return"Guest"},13:function(e,t,n,i){var a=this.escapeExpression;return'<div class="card-discussion-comments-title">'+a(t.gettext.call(e,"Recent Comments",{name:"gettext",hash:{},data:i}))+'</div>\n<div class="card-discussion-comments" data-role="posts"></div>\n'},15:function(e){var t,n=this.lambda,i='<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="3" dir="auto">\n';return t=n(null!=e?e.threadDescription:e,e),null!=t&&(i+=t),i+"\n</div>\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o='<div class="card-discussion';return a=t.unless.call(e,null!=e?e.image:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='">\n<div class="card-aside">\n',a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='</div>\n<div class="card-body">\n',a=t["with"].call(e,null!=e?e.firstActor:e,{name:"with",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='<div class="card-reason">\n'+s(t.gettext.call(e,"%(group)s authored",{name:"gettext",hash:{group:t.getPartial.call(e,"userGroupNames",{name:"getPartial",hash:{},data:i})},data:i}))+"\n</div>\n",a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(o+=a),a=t["if"].call(e,null!=e?e.recentPostCount:e,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(15,i),data:i}),null!=a&&(o+=a),o+'<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/GenericCardCreateView",["backbone-marionette","home/mixins/asGenericCard","home/mixins/withReason","home/mixins/withSubviews","home/views/PostCollectionView","home/templates/genericCardCreate"],function(e,t,n,i,a,s){var o=e.ItemView,r=o.extend({template:s,templateHelpers:function(){return{recentPostCount:this.model.thread.recentPosts.length}},regions:{postsRegion:"[data-role=posts]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostsView)},createPostsView:function(){return new a({el:this.postsRegion.el,collection:this.model.thread.recentPosts})}}),l=r.prototype;return t.call(l),n.call(l),i.call(l),r}),define("home/templates/genericCardFavorite",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" no-image"},3:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="discussion-image" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'">\n</a>\n'},5:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a class="card-avatar" href="/by/'+o(s(null!=e?e.username:e,e))+'/" data-link-name="user_avatar">\n<img\nsrc="'+o(s(null!=(a=null!=e?e.avatar:e)?a.cache:a,e))+'"\nalt="';return a=t["if"].call(e,null!=e?e.name:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(r+=a),r+'" />\n</a>\n'},6:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.name:e,e))},8:function(e,t,n,i){var a;return a=t["if"].call(e,null!=e?e.username:e,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a?a:""},9:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.username:e,e))},11:function(){return"Guest"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="card-discussion';return a=t.unless.call(e,null!=e?e.image:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='">\n<div class="card-aside">\n',a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n<div class="card-body">\n',a=t["with"].call(e,null!=e?e.firstActor:e,{name:"with",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<div class="card-reason">\n'+s(t.gettext.call(e,"%(group)s favorited",{name:"gettext",hash:{group:t.getPartial.call(e,"userGroupNames",{name:"getPartial",hash:{},data:i})},data:i}))+'\non\n<a class="name-community" href="/home/forums/'+s(o(null!=(a=null!=(a=null!=e?e.thread:e)?a.forum:a)?a.id:a,e))+'/" data-link-name="forum_name">',a=this.invokePartial(n.forumName,"","forumName",null!=(a=null!=e?e.thread:e)?a.forum:a,void 0,t,n,i),null!=a&&(r+=a),r+="</a>\n</div>\n",a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="3" dir="auto">\n',a=o(null!=e?e.threadDescription:e,e),null!=a&&(r+=a),r+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/GenericCardFavoriteView",["backbone-marionette","home/mixins/asGenericCard","home/mixins/withReason","home/templates/genericCardFavorite"],function(e,t,n,i){var a=e.ItemView.extend({template:i});return t.call(a.prototype),n.call(a.prototype),a}),define("home/templates/genericCardTrending",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" no-image"},3:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="discussion-image" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'">\n</a>\n'},5:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a class="card-avatar" href="/home/forums/'+o(s(null!=e?e.id:e,e))+'/" data-link-name="forum_name">\n<img src="'+o(s(null!=(a=null!=e?e.favicon:e)?a.cache:a,e))+'" alt="';return a=this.invokePartial(n.forumName,"","forumName",e,void 0,t,n,i),null!=a&&(r+=a),r+'" />\n</a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="card-discussion';return a=t.unless.call(e,null!=e?e.image:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='">\n<div class="card-aside">\n',a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n<div class="card-body">\n',a=t["with"].call(e,null!=(a=null!=e?e.thread:e)?a.forum:a,{name:"with",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<div class="card-reason">\n'+s(t.gettext.call(e,"%(forum)s recently published",{name:"gettext",hash:{forum:t.getPartial.call(e,"forumLink",null!=(a=null!=e?e.thread:e)?a.forum:a,{name:"getPartial",hash:{},data:i})},data:i}))+"\n</div>\n",a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="3" dir="auto">\n',a=o(null!=e?e.threadDescription:e,e),null!=a&&(r+=a),r+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/GenericCardTrendingView",["backbone-marionette","home/mixins/asGenericCard","home/templates/genericCardTrending"],function(e,t,n){var i=e.ItemView.extend({template:n});return t.call(i.prototype),i}),define("home/views/GenericCardCollectionView",["jquery","underscore","backbone","home/utils/layoutUtils","home/views/common/FetchableCollectionView","home/views/GenericCardCreateView","home/views/GenericCardFavoriteView","home/views/GenericCardTrendingView"],function(e,t,n,i,a,s,o,r){var l=a.extend({itemView:function(e){switch(e.model.get("verb")){case"favorite":return new o(e);
case"create":return new s(e);case"trending":return new r(e);case"share":return e.model.thread.author?(e.model.actors.length||(e.model.actors=[e.model.thread.author],e.model.set({totalActors:1})),new s(e)):new r(e);default:return new n.View}},itemViewOptions:function(){var e=a.prototype.itemViewOptions;t.isFunction(e)&&(e=e.apply(this,arguments));var n=t.defaults({channel:this.channel,hideImage:this.hideImage},e);return n},initialize:function(e){this.channel=e&&e.channel,this.hideImage=e&&e.hideImage,a.prototype.initialize.apply(this,arguments)}});return l}),define("home/templates/relatedWrapper",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s=this.escapeExpression,o="";return a=t["if"].call(e,null!=(a=null!=e?e.options:e)?a.favicon:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'<h2 data-role="featured-title">\n'+s(t.gettext.call(e,"More from %(source)s",{name:"gettext",hash:{source:t.getPartial.call(e,"channelLink",e,{name:"getPartial",hash:{},data:i})},data:i}))+"\n</h2>\n"},2:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a class="discussion-origin-name" href="/home/channel/'+i(n(null!=e?e.slug:e,e))+'/">\n<img class="favicon" src="'+i(n(null!=(t=null!=e?e.options:e)?t.favicon:t,e))+'" alt="'+i(n(null!=e?e.name:e,e))+'"/>\n</a>\n'},4:function(e,t,n,i){var a,s=this.escapeExpression,o="";return a=t["if"].call(e,null!=e?e.favicon:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'<h2 data-role="featured-title">\n'+s(t.gettext.call(e,"More from %(source)s",{name:"gettext",hash:{source:t.getPartial.call(e,"forumLink",e,{name:"getPartial",hash:{},data:i})},data:i}))+"\n</h2>\n"},5:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a class="discussion-origin-name" href="/home/forums/'+i(n(null!=e?e.id:e,e))+"/\">\n<img class='favicon' src=\""+i(n(null!=(t=null!=e?e.favicon:e)?t.cache:t,e))+"\" alt='"+i(n(null!=e?e.name:e,e))+"'/>\n</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="cards-featured-header">\n';return a=t["if"].call(e,null!=e?e.hasChannel:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(4,i),data:i}),null!=a&&(s+=a),s+'</div>\n<div class="cards-featured" data-role="cards" style="margin-top: 0"></div>\n'},useData:!0})}),define("home/views/RelatedWrapperView",["backbone-marionette","home/mixins/withSubviews","home/views/GenericCardCollectionView","home/views/FetchingView","home/templates/relatedWrapper"],function(e,t,n,i,a){var s=e.ItemView,o=s.extend({className:"threads-related",template:a,templateHelpers:function(){return{hasChannel:this.channel}},modelEvents:{change:"render"},initialize:function(e){this.channel=e.channel,this.relatedCollection=e.relatedCollection,this.hideImage=e.hideImage},regions:{relatedLinksRegion:"[data-role=cards]"},onRender:function(){this.activateRegion(this.relatedLinksRegion,this.createRelatedCards)},createRelatedCards:function(){return new n({channel:this.channel,collection:this.relatedCollection,emptyView:i,hideImage:this.hideImage})}});return t.call(o.prototype),o}),define("home/mixins/withChannelFollowing",["underscore","home/utils/mixpanelUtils"],function(e,t){function n(t){var n=t||function(){return this.model},a=this.initialize;this.initialize=function(e){a.call(this,e),i.initialize.call(this,e)};var s=this.templateHelpers;this.templateHelpers=function(){var t=e.isFunction(s)?s.call(this):s;return e.extend(i.templateHelpers.call(this,n),t)},this.events=e.extend({},i.events,this.events),e.extend(this,e.chain(i).pick("bindToPrimaryForum","updateFollowedState","toggleFollow").map(function(t,i){return[i,e.partial(t,n)]}).object().value())}var i={events:{"click [data-action=toggle-follow]":"toggleFollow"},initialize:function(){this.bindToPrimaryForum()},templateHelpers:function(e){var t=e.call(this);return{followed:t.primaryForum&&t.primaryForum.get("followed")}},bindToPrimaryForum:function(e){var t=e.call(this);return t.primaryForum?void this.listenTo(t.primaryForum,"change:followed",this.updateFollowedState):void this.listenToOnce(t,"changeRelated:primaryForum",this.bindToPrimaryForum)},updateFollowedState:function(e){var t=e.call(this);t.primaryForum&&this.$("[data-action=toggle-follow]").toggleClass("active",t.primaryForum.get("followed"))},toggleFollow:function(e,n){n&&n.preventDefault();var i=e.call(this);i.primaryForum&&(t.track("follow channel",n,{properties:{follow:!i.primaryForum.get("followed")}}),i.primaryForum.toggleFollowed())}};return n}),define("home/templates/discussionBanner",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="banner-follow media banner-follow-bg" style="background: url(\''+o(s(null!=(a=null!=e?e.options:e)?a.alertBackground:a,e))+'\');">\n<a class="discussion-banner-link" href="/home/channel/'+o(s(null!=e?e.slug:e,e))+'/"></a>\n<div class="pull-right banner-follow-btn">\n';return a=this.invokePartial(n.followButton,"","followButton",e,void 0,t,n,i),null!=a&&(r+=a),r+'</div>\n<div class="media-body media">\n<div class="media-left banner-follow-logo">\n<img src="'+o(s(null!=(a=null!=(a=null!=e?e.options:e)?a.titleLogo:a)?a.small:a,e))+'" alt="Discuss Disqus" class="img-logo-sm" />\n</div>\n<div class="media-body banner-follow-description hidden-phone media-heading">\n'+o(s(null!=(a=null!=e?e.options:e)?a.description:a,e))+"\n</div>\n</div>\n</div>\n"},3:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="banner-follow media banner-follow-no-bg">\n<a class="discussion-banner-link" href="/home/channel/'+o(s(null!=e?e.slug:e,e))+'/"></a>\n<div class="pull-right banner-follow-btn">\n';return a=this.invokePartial(n.followButton,"","followButton",e,void 0,t,n,i),null!=a&&(r+=a),r+='</div>\n<div class="media-body media">\n<div class="media-left banner-follow-logo discussion-origin-name">\n',a=t["if"].call(e,null!=(a=null!=e?e.options:e)?a.favicon:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'<a href="/home/channel/'+o(s(null!=e?e.slug:e,e))+'/">'+o(s(null!=e?e.name:e,e))+"</a>\n</div>\n</div>\n</div>\n"},4:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<img class="favicon" src="'+i(n(null!=(t=null!=e?e.options:e)?t.favicon:t,e))+'" class="favicon" alt="'+i(n(null!=(t=null!=e?e.channel:e)?t.name:t,e))+'"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=(a=null!=e?e.options:e)?a.alertBackground:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(s+=a),s},usePartial:!0,useData:!0})}),define("home/views/DiscussionBannerView",["jquery","backbone-marionette","home/mixins/withChannelFollowing","home/mixins/withClickLinkTracking","home/templates/discussionBanner"],function(e,t,n,i,a){var s=t.ItemView.extend({template:a,events:{"click a":"trackClickLinkWithArea"}});return n.call(s.prototype),i.call(s.prototype,"discussion_top_banner"),s}),define("home/views/common/DiscussionCoverBaseView",["backbone-marionette","home/views/RelatedWrapperView","home/views/DiscussionBannerView","home/mixins/withTruncate","home/mixins/withSubviews","core/bus"],function(e,t,n,i,a,s){var o=e.ItemView,r=o.extend({modelEvents:{sync:"render","change:extending":"render"},events:{"click [data-role=message] a":"trackClickLink"},trackClickLink:function(e){s.trigger("uiAction:clickLink",e,{adjective:"message"})},templateHelpers:function(){var e=this.getChannel();return{relativeTime:this.model.getRelativeCreatedAt(),channel:e&&e.toJSON(),image:this.model.getImage()}},initialize:function(e){this.channel=e.channel,this.channel&&this.listenTo(this.channel,"change",this.render),this.relatedCollection=e.relatedCollection},regions:{bannerRegion:"[data-role=banner]",relatedStoriesRegion:"[data-role=related-stories]"},onRender:function(){this.getChannel()&&this.activateRegion(this.bannerRegion,this.createBanner),this.activateRegion(this.relatedStoriesRegion,this.createRelatedLinksView)},createRelatedLinksView:function(){return new t({relatedCollection:this.relatedCollection,model:this.channel||this.model.forum,channel:this.channel,hideImage:!0})},createBanner:function(){return new n({el:this.bannerRegion.el,model:this.getChannel()})},getChannel:function(){return this.channel||this.model.forum.channel}}),l=r.prototype;return i.call(l),a.call(l),r}),define("home/templates/networkDiscussionCover",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return'<div class="discussion-meta banner-network-has-channel">\n'},3:function(){return'<div class="discussion-meta banner-network-only">\n'},5:function(e){var t,n=this.lambda,i=this.escapeExpression;return"<img class='favicon' src=\""+i(n(null!=(t=null!=(t=null!=e?e.forum:e)?t.favicon:t)?t.cache:t,e))+"\" alt='"+i(n(null!=(t=null!=e?e.forum:e)?t.name:t,e))+"'/>\n"},7:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"1 Comment",{name:"gettext",hash:{},data:i}))+"\n"},9:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"%(number)s Comments",{name:"gettext",hash:{number:null!=e?e.posts:e},data:i}))+"\n"},11:function(){return" no-image"},13:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<div class="card-link-aside">\n<div class="card-link-image-wrap">\n<img class="card-link-image" src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'">\n</div>\n</div>\n'},15:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div>\n<p class="card-link-description truncate" data-truncate-lines="3">\n'+o(s(null!=e?e.description:e,e))+"\n</p>\n</div>\n";return a=t["if"].call(e,null!=e?e.forumFriendlyUrl:e,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},16:function(e){var t=this.lambda,n=this.escapeExpression;return'<div class="card-link-forum-url">('+n(t(null!=e?e.forumFriendlyUrl:e,e))+")</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="discussion-cover-wrapper network">\n<div class="section-contained">\n\n<section data-role="banner"></section>\n<div class="container-3-col discussion-cover">\n<div class="col-left">\n';return a=t["if"].call(e,null!=e?e.channel:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+='<div class="pull-right banner-follow-btn">\n',a=this.invokePartial(n.followButton,"","followButton",e,void 0,t,n,i),null!=a&&(r+=a),r+='</div>\n<div class="discussion-origin">\n<div class="discussion-origin-what">\n'+s(t.gettext.call(e,"Community",{name:"gettext",hash:{},data:i}))+'\n</div>\n<a class="discussion-origin-name truncate-line" href="/home/forums/'+s(o(null!=(a=null!=e?e.forum:e)?a.id:a,e))+'/" data-role="publisher-link">\n',a=t["if"].call(e,null!=e?e.hasFavicon:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+=s(o(null!=(a=null!=e?e.forum:e)?a.name:a,e))+'\n</a>\n</div>\n</div>\n</div>\n\n<div class="col-middle">\n<div class="discussion-post-details">\n<span class="discussion-post-count">\n<a class="link-gray" href="#disqus_thread">\n<strong>\n',a=t["if"].call(e,t.eq.call(e,null!=e?e.posts:e,1,{name:"eq",hash:{},data:i}),{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r+='</strong>\n</a>\n</span>\n<span class="discussion-timestamp time">\nCreated '+s(o(null!=e?e.relativeTime:e,e))+'\n</span>\n</div>\n<a href="'+s(o(null!=e?e.link:e,e))+'"\nclass="card-link',a=t.unless.call(e,null!=e?e.image:e,{name:"unless",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='"\ndata-role="article-link"\ndata-mix-location="title">\n\n',a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n<div class="card-link-body">\n<h3 class="card-link-title">',a=o(null!=e?e.clean_title:e,e),null!=a&&(r+=a),r+="</h3>\n",a=t["if"].call(e,null!=e?e.description:e,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'</div>\n</a>\n\n</div>\n\n<div class="col-right discussion-related-links" data-role="related-stories" data-jester-area="related_sidebar">\n</div>\n</div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/NetworkDiscussionCoverView",["underscore","home/utils/layoutUtils","home/views/common/DiscussionCoverBaseView","home/templates/networkDiscussionCover"],function(e,t,n,i){var a=n.extend({template:i,templateHelpers:function(){var t=n.prototype.templateHelpers.apply(this,arguments);return e.defaults({hasFavicon:this.model.forum.hasFavicon(),forumFriendlyUrl:this.model.forum.getFriendlyUrl(),description:this.model.getShortDescription()},t)},onShow:t.scrollShownChanged});return a}),define("home/templates/userGeneratedDiscussionCover",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return"is-deleted"},3:function(e,t,n,i){var a=this.escapeExpression;return'<div class="discussion-guidelines">\n<button class="btn btn-light" data-action="show-guidelines">'+a(t.gettext.call(e,"Read Guidelines",{name:"gettext",hash:{},data:i}))+"</button>\n</div>\n"},5:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression;return'<div class="discussion-action">\n<a href="/home/edit/'+o(s(null!=(a=null!=e?e.forum:e)?a.id:a,e))+"/"+o(s(null!=e?e.slug:e,e))+'/" class="btn btn-light-solid">'+o(t.gettext.call(e,"Edit",{name:"gettext",hash:{},data:i}))+"</a>\n</div>\n"},7:function(e,t,n,i){var a=this.escapeExpression;return'<div class="discussion-action">\n<a href="#" data-action="delete-thread" class="btn btn-light-solid">'+a(t.gettext.call(e,"Delete",{name:"gettext",hash:{},data:i}))+"</a>\n</div>\n"},9:function(e,t,n,i){var a=this.escapeExpression;return'<div class="alert-message alert-message-red alert-message-side">\n<h4>'+a(t.gettext.call(e,"This discussion has been removed",{name:"gettext",hash:{},data:i}))+"</h4>\n<p>"+a(t.gettext.call(e,"Seem wrong? Contact %(support)s.",{name:"gettext",hash:{support:t.tag.call(e,"a",{name:"tag",hash:{text:t.gettext.call(e,"%(disqus)s Support",{name:"gettext",hash:{disqus:"Disqus"},data:i}),href:"http://disqus.com/support"},data:i})},data:i}))+"</p>\n</div>\n"},11:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"1 Comment",{name:"gettext",hash:{},data:i}))+"\n"},13:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"%(number)s Comments",{name:"gettext",hash:{number:null!=e?e.posts:e},data:i}))+"\n"},15:function(e){var t,n=this.lambda,i='<div class="discussion-description" data-role="message">\n';return t=n(null!=e?e.description:e,e),null!=t&&(i+=t),i+"\n</div>\n"},17:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a href="'+o(s(null!=e?e.embedlyLink:e,e))+'"\nclass="card-link';return a=t.unless.call(e,null!=e?e.image:e,{name:"unless",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='"\ndata-role="article-link"\ndata-mix-location="title">\n\n',a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n<div class="card-link-body">\n',a=t["if"].call(e,null!=(a=null!=e?e.content:e)?a.title:a,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=t["if"].call(e,null!=(a=null!=e?e.content:e)?a.description:a,{name:"if",hash:{},fn:this.program(24,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=t["if"].call(e,null!=e?e.forumFriendlyUrl:e,{name:"if",hash:{},fn:this.program(26,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</div>\n</a>\n"},18:function(){return" no-image"},20:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<div class="card-link-aside">\n<div class="card-link-image-wrap">\n<img class="card-link-image" src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'">\n</div>\n</div>\n'},22:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<h3 class="card-link-title">'+i(n(null!=(t=null!=e?e.content:e)?t.title:t,e))+"</h3>\n"},24:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<div>\n<p class="card-link-description truncate" data-truncate-lines="3">\n'+i(n(null!=(t=null!=e?e.content:e)?t.description:t,e))+"\n</p>\n</div>\n"},26:function(e){var t=this.lambda,n=this.escapeExpression;return'<div class="card-link-forum-url">('+n(t(null!=e?e.forumFriendlyUrl:e,e))+")</div>\n"},28:function(e,t,n,i){var a=this.escapeExpression;return'<div class="discussion-action">\n<button class="btn btn-light" data-action="show-guidelines">'+a(t.gettext.call(e,"Read Guidelines",{name:"gettext",hash:{},data:i}))+"</button>\n</div>\n"},30:function(e,t,n,i){var a=this.escapeExpression;return'<div class="alert-message alert-message-red alert-message-side">\n<h4>'+a(t.gettext.call(e,"This discussion has been removed",{name:"gettext",hash:{},data:i}))+"</h4>\n<p>"+a(t.gettext.call(e,"Seem wrong? Contact %(support)s.",{name:"gettext",hash:{support:t.tag.call(e,"a",{name:"tag",hash:{text:t.gettext.call(e,"%(disqus)s Support",{name:"gettext",hash:{disqus:"Disqus"},data:i}),href:"http://disqus.com/support/"},data:i})},data:i}))+"</p>\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.escapeExpression,o=this.lambda,r='<div class="discussion-cover-wrapper">\n<div class="section-contained">\n\n<section data-role="banner"></section>\n\n<div class="container-3-col discussion-cover ';return a=t["if"].call(e,null!=e?e.isDeleted:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='">\n\n<div class="col-left">\n<div class="discussion-meta">\n<div class="clearfix">\n<div class="discussion-origin">\n<div class="discussion-origin-what">\n'+s(t.gettext.call(e,"Creator",{name:"gettext",hash:{},data:i}))+'\n</div>\n<a class="discussion-origin-name truncate-line" href="/by/'+s(o(null!=(a=null!=e?e.author:e)?a.username:a,e))+'/">\n<img class="favicon" src="'+s(o(null!=(a=null!=(a=null!=e?e.author:e)?a.avatar:a)?a.cache:a,e))+'" alt="'+s(o(null!=(a=null!=e?e.author:e)?a.name:a,e))+'" />\n'+s(o(null!=(a=null!=e?e.author:e)?a.name:a,e))+'\n</a>\n</div>\n</div>\n<div class="discussion-actions">\n',a=t["if"].call(e,null!=e?e.guidelines:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=t["if"].call(e,null!=e?e.canEdit:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=t["if"].call(e,null!=e?e.canDelete:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=t["if"].call(e,null!=e?e.isDeleted:e,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n</div>\n</div>\n\n<div class="col-middle">\n<div class="discussion-post-details">\n<span class="discussion-post-count">\n<a class="link-gray" href="#disqus_thread">\n<strong>\n',a=t["if"].call(e,t.eq.call(e,null!=e?e.posts:e,1,{name:"eq",hash:{},data:i}),{name:"if",hash:{},fn:this.program(11,i),inverse:this.program(13,i),data:i}),null!=a&&(r+=a),r+='</strong>\n</a>\n</span>\n<span class="discussion-timestamp time">\nCreated '+s(o(null!=e?e.relativeTime:e,e))+'\n</span>\n</div>\n<h1 class="discussion-page-title">',a=o(null!=e?e.clean_title:e,e),null!=a&&(r+=a),r+='</h1>\n\n<div class="visible-mobile discussion-byline">\nAuthored by\n<a class="discussion-origin-name" href="/by/'+s(o(null!=(a=null!=e?e.author:e)?a.username:a,e))+'/">\n'+s(o(null!=(a=null!=e?e.author:e)?a.name:a,e))+"\n</a>\n</div>\n\n",a=t["if"].call(e,null!=e?e.description:e,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=t["if"].call(e,null!=e?e.hasEmbedlyData:e,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<div class="discussion-actions">\n',a=t["if"].call(e,null!=e?e.guidelines:e,{name:"if",hash:{},fn:this.program(28,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=t["if"].call(e,null!=e?e.canEdit:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=t["if"].call(e,null!=e?e.canDelete:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=t["if"].call(e,null!=e?e.isDeleted:e,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'</div>\n</div>\n\n<div class="col-right discussion-related-links" data-role="related-stories" data-jester-area="related_sidebar">\n</div>\n</div>\n</div>\n</div>\n'},useData:!0})}),define("core/models/LegacyMedia",["backbone"],function(e){var t=e.Model.extend({defaults:{type:null,location:"",metadata:{}}});return t}),define("core/models/RichMedia",["backbone"],function(e){var t=e.Model.extend({idAttribute:"url",defaults:{mediaType:null,html:"",htmlWidth:null,htmlHeight:null,thumbnailUrl:"",thumbnailWidth:null,thumbnailHeight:null,url:"",resolvedUrl:"",title:"",description:"",providerName:""}});return t}),define("core/models/Media",["underscore","backbone","core/models/LegacyMedia","core/models/RichMedia"],function(e,t,n,i){var a=t.Model.extend(e.extend({},i.prototype,n.prototype,{idAttribute:"id"}),{MEDIA_TYPES:{IMAGE:"1",IMAGE_UPLOAD:"2",YOUTUBE_VIDEO:"3",WEBPAGE:"4",TWITTER_STATUS:"5",FACEBOOK_PAGE:"6",FACEBOOK_POST:"7",FACEBOOK_PHOTO:"8",FACEBOOK_VIDEO:"9",SOUNDCLOUD_SOUND:"10",GOOGLE_MAP:"11",VIMEO_VIDEO:"12",VINE_VIDEO:"14"},WEBPAGE_TYPES:["4","6","7"]});return a}),define("core/collections/MediaCollection",["backbone","core/models/Media"],function(e,t){var n=e.Collection.extend({model:t});return n}),define("core/mediaConfig",["underscore","backbone"],function(e,t){function n(){var t=document.body.offsetWidth,n=i,a=n.length;return e.find(n,function(e,i){return i+1===a||Math.abs(n[i+1]-t)>Math.abs(n[i]-t)})}var i=[320,480,600,800],a=new t.Model({collapsed:!1,defaultIframeHeight:300,mediaPersistedWidths:i,loadedThumbnailWidth:n()});return a.findClosestThumbnailSize=n,a}),define("core/models/RichMediaViewModel",["backbone"],function(e){return e.Model.extend({defaults:{deferred:!0,showButtons:!0,activated:!1,kind:"image",deferredHeight:0,providerExpandMessage:"",providerCollapseMessage:"",providerIcon:"icon-proceed",respectSettings:!0}})}),define("core/templates/postMediaInlineLink",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=e?e.hasUserText:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},2:function(e){var t=this.lambda,n=this.escapeExpression;return'<a href="'+n(t(null!=e?e.href:e,e))+'" rel="nofollow">'+n(t(null!=e?e.text:e,e))+"</a>\n"},4:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a href="'+o(s(null!=e?e.href:e,e))+'" class="post-media-link" data-action="expand-collapse-media" rel="nofollow">';return a=t["if"].call(e,null!=(a=null!=e?e.model:e)?a.providerIcon:a,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+=o(s(null!=e?e.mediaLinkText:e,e)),a=t["if"].call(e,null!=e?e.domain:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</a>\n"},5:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<i class="'+i(n(null!=(t=null!=e?e.model:e)?t.providerIcon:t,e))+'"></i>'},7:function(e){var t=this.lambda,n=this.escapeExpression;return'<span class="post-media-link-domain"> &mdash; '+n(t(null!=e?e.domain:e,e))+"</span>"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t["if"].call(e,null!=(a=null!=e?e.model:e)?a.deferred:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(4,i),data:i}),null!=a&&(s+=a),s},useData:!0})}),define("core/views/RichMediaLinkView",["backbone","handlebars","core/utils","core/templates/postMediaInlineLink"],function(e,t,n,i){return e.View.extend({tagName:"span",events:{"click [data-action=expand-collapse-media]":"handleToggle"},initialize:function(e){this.media=e.media;var t=e.$link;this.linkText=t.text(),this.linkHref=t.attr("href"),this.linkDomain=n.getDomain(this.linkHref),this.linkHasUserText=this.isUserText(t),this.hasGenericMessage=!1,this.linkHasUserText?this.mediaLinkText=this.linkText:this.media.get("title")?this.mediaLinkText=n.niceTruncate(this.media.get("title"),60):(this.hasGenericMessage=!0,this.mediaLinkText=this.model.get("providerExpandMessage")),this.listenTo(this.model,"change:deferred",this.render),this.listenTo(this.model,"change:activated",this.onChangeActivated)},isUserText:function(e){if("A"!==e[0].nodeName)return!1;var t=(e.text()||"").toLowerCase();if(!t)return!1;if(0===t.indexOf("http")||0===t.indexOf("www"))return!1;t=t.replace(/\.\.\.$/,"");var n=(e.attr("href")||"").toLowerCase();return-1===n.indexOf(t)},render:function(){var e=this.mediaLinkText;this.hasGenericMessage&&this.model.get("activated")&&(e=this.model.get("providerCollapseMessage")),this.$el.html(i({model:this.model.toJSON(),text:this.linkText,href:this.linkHref,mediaLinkText:e,domain:this.linkDomain,hasUserText:this.linkHasUserText}))},onChangeActivated:function(){this.hasGenericMessage&&this.render()},handleToggle:function(e){this.model.get("deferred")||(this.model.set("activated",!this.model.get("activated")),e&&e.preventDefault&&e.preventDefault())}})}),define("core/templates/postMedia",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r="";return a=t["if"].call(e,null!=(a=null!=e?e.media:e)?a.providerName:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+o(s(null!=(a=null!=e?e.media:e)?a.title:a,e))},2:function(e){var t,n=this.lambda,i=this.escapeExpression;return i(n(null!=(t=null!=e?e.media:e)?t.providerName:t,e))+" &ndash; "},4:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<i class="'+i(n(null!=(t=null!=e?e.model:e)?t.providerIcon:t,e))+' publisher-background-color"></i>'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='\n<a class="media-button media-button-expand publisher-color publisher-border-color" href="'+o(s(null!=(a=null!=e?e.media:e)?a.url:a,e))+'" rel="nofollow" target="_blank" data-action="expand"\ntitle="';return a=t["if"].call(e,null!=(a=null!=e?e.media:e)?a.title:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='">\n',a=t["if"].call(e,null!=(a=null!=e?e.model:e)?a.providerIcon:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"+o(s(null!=(a=null!=e?e.model:e)?a.providerExpandMessage:a,e))+'\n</a>\n<a class="media-button media-button-contract publisher-color publisher-border-color" href="#" target="_blank" data-action="contract">\n<i class="icon-cancel publisher-background-color"></i> '+o(s(null!=(a=null!=e?e.model:e)?a.providerCollapseMessage:a,e))+'\n</a>\n<div class="media-content-loader" data-role="content-loader"></div>\n<div data-role="content-placeholder" class="media-content-placeholder"></div>\n'},useData:!0})}),define("core/templates/postMediaPlaceholder",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="#" class="media-force-load" data-action="force-load"><i class="'+i(n(null!=(t=null!=e?e.model:e)?t.providerIcon:t,e))+'"></i></a>\n'},useData:!0})}),define("core/views/RichMediaView",["underscore","jquery","backbone","core/utils","core/mediaConfig","core/views/RichMediaLinkView","core/templates/postMedia","core/templates/postMediaPlaceholder"],function(e,t,n,i,a,s,o,r){var l=i.preventDefaultHandler,c=function(e,t,n,i){e[t.get(n)?"addClass":"removeClass"](i)};return n.View.extend({className:"media-container",events:{"click [data-action=expand]":"handleExpand","click [data-action=contract]":"handleContract","click [data-action=force-load]":"handleForceLoad"},template:o,initialize:function(e){this.options=e,this.media=e.media,this.template=e.template||this.template,this.$linkEl=null,this.setupMode(),this.listenTo(this.model,"change:activated",this.applyState),this.listenTo(this.model,"change:deferredHeight",this.onChangeDeferredHeight),this.listenTo(this.model,"change:showButtons",this.updateElementClass),this.listenTo(this.model,"change:deferred",this.render),this.listenTo(a,"change:collapsed",this.setupMode)},getMediaDimensions:function(){return{width:null,height:null}},getAvailableWidth:function(){return this.$el.parent().width()||a.get("loadedThumbnailWidth")},updateDeferredHeight:function(){this.model.set("deferredHeight",this.calculateDeferredHeight())},calculateDeferredHeight:function(){var e=this.getMediaDimensions(),t=e.width,n=e.height;if(!t||!n)return n;var i=this.getAvailableWidth(),a=i*n/t;return a},convertToButton:function(e){this.model.set("showButtons",!1),this.linkSubview&&this.linkSubview.remove(),this.linkSubview=new s({model:this.model,media:this.media,$link:e}),e.replaceWith(this.linkSubview.$el),this.linkSubview.render()},applyContentNodeHeight:function(e){this.contentNode.height(e||"auto")},shouldAutoplay:function(){return!this.model.get("deferred")},generateContentHtml:function(){return this.media.get("html")},createContentNode:function(e){return t(e)},insertContentNode:function(e){this.contentNode.html(e)},prepareElementEvents:function(){},displayContent:function(){this.updateDeferredHeight();var e=this.generateContentHtml(),t=this.createContentNode(e);this.prepareElementEvents(t),this.insertContentNode(t),this.applyContentNodeHeight(null)},configureDeferred:function(){this.enterViewport()},configureContentFromActivated:function(){this.model.get("activated")?this.displayContent():this.displayPlaceholder()},displayPlaceholder:function(){this.contentNode.html(r({model:this.model.toJSON()}))},updateElementClass:function(){var e=this.$el,t=this.model;c(e,t,"deferred","media-mode-deferred"),c(e,t,"activated","media-activated"),c(e,t,"showButtons","media-show-buttons")},applyState:function(){this.configureDeferred(),this.configureContentFromActivated(),this.updateElementClass()},render:function(){this.$el.html(this.template({model:this.model.toJSON(),media:this.media.toJSON()})),this.contentNode=this.$el.find("[data-role=content-placeholder]"),this.applyState()},remove:function(){this.linkSubview&&this.linkSubview.remove(),n.View.prototype.remove.apply(this,arguments)},enterViewport:function(){this.model.get("deferred")&&this.activate()},activate:function(){this.model.set("activated",!0)},setupMode:function(){if(this.model.get("respectSettings")){this.model.set("activated",!1);var e=a.get("collapsed");e?this.model.set("deferred",!1):this.model.set("deferred",!0)}},onChangeDeferredHeight:function(){this.model.get("deferred")&&!this.model.get("activated")&&this.applyContentNodeHeight(this.model.get("deferredHeight"))},handleExpand:l(function(){this.model.set("activated",!0)}),handleContract:l(function(){this.model.set("activated",!1)}),handleForceLoad:l(function(){this.model.get("deferred")&&this.model.set("activated",!0)})})}),define("core/templates/postMediaImage",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e){var t,n=this.lambda,i=this.escapeExpression;return' height="'+i(n(null!=(t=null!=e?e.model:e)?t.deferredHeight:t,e))+'" '},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a href="'+o(s(null!=e?e.imageUrl:e,e))+'" target="_blank" rel="nofollow">\n<img src="'+o(s(null!=e?e.thumbnailUrl:e,e))+'" alt="'+o(t.gettext.call(e,"Thumbnail",{name:"gettext",hash:{},data:i}))+'" ';return a=t["if"].call(e,null!=(a=null!=e?e.model:e)?a.deferredHeight:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+">\n</a>\n"},useData:!0})}),define("core/views/ImageRichMediaView",["core/views/RichMediaView","core/utils","core/config","core/mediaConfig","core/templates/postMediaImage"],function(e,t,n,i,a){return e.extend({getMediaDimensions:function(){return{width:this.media.get("thumbnailWidth"),height:this.media.get("thumbnailHeight")}
},getImageUrl:function(){return this.media.get("resolvedUrl")||this.media.get("url")||this.media.get("thumbnailUrl")},getImageThumbnailUrl:function(){var e=this.media.get("thumbnailUrl");return t.getDomain(e)===t.getDomain(n.urls.media)&&(e=t.serialize(e,{w:i.get("loadedThumbnailWidth"),h:this.model.get("deferredHeight")})),e},generateContentHtml:function(){return a({model:this.model.toJSON(),media:this.media.toJSON(),thumbnailUrl:this.getImageThumbnailUrl(),imageUrl:this.getImageUrl()})},prepareElementEvents:function(e){var t=this,n=e.find("img"),i=function(e){return function(){t.trigger(e),n.off(".richMediaView")}};n.on("load.richMediaView",i("load")),n.on("error.richMediaView",i("error"))},calculateDeferredHeight:function(){var t=Math.floor(e.prototype.calculateDeferredHeight.apply(this,arguments)),n=this.getMediaDimensions().height;return Math.min(n,t)||null}})}),define("core/views/IframeRichMediaView",["underscore","core/mediaConfig","core/views/RichMediaView"],function(e,t,n){return n.extend({getMediaDimensions:function(){return{width:this.media.get("htmlWidth"),height:this.media.get("htmlHeight")}},_findIframe:function(e){return e.is("iframe")?e:e.find("iframe")},configureContentFromActivated:function(){n.prototype.configureContentFromActivated.apply(this,arguments),this.model.get("activated")||this.$el.removeClass("media-loading")},createContentNode:function(){var e=n.prototype.createContentNode.apply(this,arguments);return e.attr({width:"100%",height:this.model.get("deferredHeight")}),e},insertContentNode:function(e){this.loaderNode=this.$el.find("[data-role=content-loader]"),this.loaderHeight=this.model.get("deferredHeight")||t.get("defaultIframeHeight"),this.loaderNode.height(this.loaderHeight),this.$el.addClass("media-loading"),n.prototype.insertContentNode.call(this,e)},prepareElementEvents:function(t){var n=this._findIframe(t);n.one("load",e.bind(this.finishLoad,this,n))},finishLoad:function(e){this.$el.removeClass("media-loading"),e.height(this.loaderHeight),this.trigger("load")}})}),define("core/views/FacebookPhotoRichMediaView",["core/views/ImageRichMediaView"],function(e){return e.extend({getImageThumbnailUrl:function(){return this.media.get("metadata").imageUrl||e.prototype.getImageThumbnailUrl.call(this)}})}),define("core/views/AutoplayRichMediaView",["underscore","jquery","core/utils","core/views/IframeRichMediaView"],function(e,t,n,i){return i.extend({createContentNode:function(){var e=i.prototype.createContentNode.apply(this,arguments),t=e.attr("src");return this.shouldAutoplay()&&t&&!this.model.get("playerjs")&&(t=n.serialize(t,{auto_play:!0,autoplay:1}),e.attr("src",t)),e},insertContentNode:function(n){if(this.model.get("playerjs")){var a=this._findIframe(n),s=a.attr("src");"//"===s.substr(0,2)&&(s=window.location.protocol+s);var o=s.split("/");o=o[0]+"//"+o[2],this.playerjs={ready:!1,queue:[],origin:o,$iframe:a},this.model.get("mute")&&this.send("mute"),this.shouldAutoplay()&&this.send("play");var r=e.once(e.bind(function(){this.playerjs.ready=!0;var t=this.playerjs.queue;this.playerjs.queue=[],e.each(t,this.send,this)},this));t(window).on("message",function(e){if(e=e.originalEvent,e.origin===o){var t;try{t=JSON.parse(e.data)}catch(n){return}"ready"===t.event&&t.value&&t.value.src===s&&r()}})}return i.prototype.insertContentNode.apply(this,arguments)},send:function(e){if(this.playerjs){if(!this.playerjs.ready)return void this.playerjs.queue.push(e);var t={context:"player.js",version:"0.0.10",method:e};this.playerjs.$iframe[0].contentWindow.postMessage(JSON.stringify(t),this.playerjs.origin)}}})}),define("core/views/DynamicHeightRichMediaView",["underscore","core/views/RichMediaView"],function(e,t){return t.extend({insertContentNode:function(){t.prototype.insertContentNode.apply(this,arguments),this.finishLoad()},finishLoad:function(){var t=this,n=0,i=150,a=20,s=function(){++n,a>n?e.delay(s,i):t.trigger("load")};s()}})}),define("core/templates/postMediaTwitterContent",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t=this.lambda,n=this.escapeExpression;return'<meta name="twitter:widgets:csp" content="on">\n<blockquote class="twitter-tweet" data-theme="'+n(t(null!=e?e.theme:e,e))+'" data-link-color="'+n(t(null!=e?e.linkColor:e,e))+'" lang="'+n(t(null!=e?e.language:e,e))+'">\n<a href="'+n(t(null!=e?e.url:e,e))+'"></a>\n</blockquote>\n<script src="//platform.twitter.com/widgets.js"></script>\n'},useData:!0})}),define("core/views/TwitterRichMediaView",["underscore","core/views/DynamicHeightRichMediaView","core/templates/postMediaTwitterContent","core/utils"],function(e,t,n,i){var a=t.extend({generateContentHtml:function(){var t=document.documentElement.lang;t=t&&t.substring(0,2);var s=this.media.get("url");return-1!==this.media.get("resolvedUrl").indexOf("/status")&&(s=this.media.get("resolvedUrl")),n({url:s,theme:e.result(a,"theme"),linkColor:i.escapeColor(e.result(a,"linkColor")),language:t})}},{theme:"light",linkColor:"rgb(46, 159, 255)"});return a}),define("core/views/SoundCloudRichMediaView",["core/views/AutoplayRichMediaView"],function(e){return e.extend({getMediaDimensions:function(){return{width:null,height:this.media.get("htmlHeight")}}})}),define("core/views/VineRichMediaView",["core/views/AutoplayRichMediaView","core/utils"],function(e,t){return e.extend({createContentNode:function(){var n=e.prototype.createContentNode.apply(this,arguments),i=n.attr("src");return this.shouldAutoplay()&&i&&(i=t.serialize(i,{audio:1}),n.attr("src",i)),n}})}),define("core/templates/unknownMediaIframe",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t=this.lambda,n=this.escapeExpression;return'<iframe src="'+n(t(null!=e?e.url:e,e))+'" frameborder="0"></iframe>\n'},useData:!0})}),define("core/views/UnknownRichMediaView",["core/views/IframeRichMediaView","core/templates/unknownMediaIframe"],function(e,t){return e.extend({generateContentHtml:function(){return t({url:this.media.get("url")})}})}),define("core/media",["underscore","core/strings","core/mediaConfig","core/models/Media","core/models/RichMediaViewModel","core/views/RichMediaView","core/views/ImageRichMediaView","core/views/IframeRichMediaView","core/views/FacebookPhotoRichMediaView","core/views/AutoplayRichMediaView","core/views/TwitterRichMediaView","core/views/SoundCloudRichMediaView","core/views/VineRichMediaView","core/views/UnknownRichMediaView"],function(e,t,n,i,a,s,o,r,l,c,u,d,h,m){var p=t.get,f=function(t){var n={PLAY_HIDE:{kind:"html",providerExpandMessage:p("Play"),providerCollapseMessage:p("Hide")},VIEW_HIDE:{kind:"html",providerExpandMessage:p("View"),providerCollapseMessage:p("Hide")},VIEW_IMAGE:{kind:"image",providerIcon:"icon-images",providerExpandMessage:p("View"),providerCollapseMessage:p("Hide")}},s=function(t,i){return e.extend(n[t],{providerIcon:i})},f=null,g=null,v=i.MEDIA_TYPES;switch(t.get("mediaType")){case v.IMAGE:case v.IMAGE_UPLOAD:f=n.VIEW_IMAGE;break;case v.FACEBOOK_PHOTO:g=l,f=n.VIEW_IMAGE;break;case v.VIMEO_VIDEO:case v.YOUTUBE_VIDEO:g=c,f=s("PLAY_HIDE","icon-video");break;case v.TWITTER_STATUS:g=u,f=s("VIEW_HIDE","icon-twitter");break;case v.VINE_VIDEO:g=h,f=s("PLAY_HIDE","icon-video");break;case v.FACEBOOK_VIDEO:f=s("VIEW_HIDE","icon-video");break;case v.SOUNDCLOUD_SOUND:g=d,f=s("PLAY_HIDE","icon-music");break;case v.GOOGLE_MAP:f=s("VIEW_HIDE","icon-map");break;case v.UNKNOWN:g=m,f=s("VIEW_HIDE");break;default:return null}if(null===g)switch(f.kind){case"webpage":return null;case"html":g=r;break;case"image":g=o}var w=new a(f);return{Cls:g,mediaViewModel:w}},g=function(e){var t=f(e);return t?new t.Cls({model:t.mediaViewModel,media:e}):null};return{instantiateRichMediaView:g,getRichMediaViewConfig:f}}),define("home/mixins/withRichMedia",["underscore","jquery","core/collections/MediaCollection","core/media"],function(e,t,n,i){function a(){e.extend(this,s)}var s={getLinks:function(e){var n={};return e.length?(e.find("a").each(function(e,i){var a=i.href;n[a]||(n[a]=t(i))}),n):n},renderRichMedia:function(e){var a=this.getLinks(this.$("[data-role=message]"));e=new n(e),e.each(function(e){var n=e.get("url"),s=i.instantiateRichMediaView(e);if(s){var o=a[n];o?o.replaceWith(s.$el):t("<li>").append(s.$el).appendTo(this.$(["data-role=post-media-list"])),s.render()}},this)},getHighestAncestor:function(e){return e.closest("[data-role=message] > *")}};return a}),define("home/views/UserGeneratedDiscussionCoverView",["underscore","home/models/Session","home/views/common/DiscussionCoverBaseView","home/templates/userGeneratedDiscussionCover","home/templates/guidelines","home/mixins/withRichMedia","home/utils/confirmModal","home/utils/releaseUtils","home/utils/layoutUtils"],function(e,t,n,i,a,s,o,r,l){var c=n,u=n.prototype,d=c.extend({template:i,templateHelpers:function(){var t=u.templateHelpers.apply(this,arguments),n=this.model.get("content"),i=this.model.canEdit(this.session),a=this.getChannel(),s=a.primaryForum&&a.primaryForum.get("raw_guidelines");return e.defaults({description:this.model.getFullDescription(),hasEmbedlyData:n.title||n.description||n.image.url,embedlyLink:this.model.getLinks()[0],canEdit:i,guidelines:s,canDelete:i&&(e.contains(this.session.moderatedForums,this.model.forum.id)||r.isDisqusAdmin(this.session.user))},t)},events:e.defaults({"click [data-action=delete-thread]":"deleteThread","click [data-action=show-guidelines]":"showGuidelines"},u.events),initialize:function(){u.initialize.apply(this,arguments),this.session=t.get(),this.listenTo(this.session,"setModeratedForums",this.render),this.model.author?this.bindToAuthor():this.model.fetchAuthor().then(e.bind(function(){this.bindToAuthor(),this.render()},this))},bindToAuthor:function(){this.listenTo(this.model.author,"change",this.render)},onRender:function(){u.onRender.call(this);var e=this.model.get("message")?this.model.get("media"):this.model.post&&this.model.post.get("media");e&&e.length&&this.renderRichMedia(e),l.scrollShownChanged()},deleteThread:function(){this.model.confirmDelete()},showGuidelines:function(){o.confirmationPromise(o.TYPES.CLOSE,a(this.model.forum.channel.toJSON()))}});return s.call(d.prototype),d}),define("home/utils/embed",["jquery","home/utils/mixpanelUtils","home/models/Session"],function(e,t,n){var i=function(){var i=(new n).user;i.set({numPosts:i.get("numPosts")+1}),t.track("post post",{target:e("[data-role=embed]")})},a=function(){};return{onEmbedComment:i,onEmbedLoaded:a}}),define("home/templates/embedContainer",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="story-thread" id="disqus_thread" data-role="embed" data-mix-location="embed"></div>\n'},useData:!0})}),define("home/views/EmbedContainerView",["underscore","backbone-marionette","core/utils/cookies","home/utils/embed","home/utils/layoutUtils","home/templates/embedContainer"],function(e,t,n,i,a,s){function o(e){var t=this;t.discovery={disable_all:!0},t.forum=e.forum.id,t.page.slug=e.get("slug"),t.page.title=e.get("title"),t.page.url=e.get("link"),t.experiment.force_auto_styles=!0,t.experiment.enable_scroll_container=!0,t.callbacks.onNewComment.push(i.onEmbedComment),t.callbacks.onReady.push(a.scrollShownChanged)}return t.ItemView.extend({className:"col-middle",template:s,onShow:function(){window.DISQUS.reset({reload:!0,config:e.partial(o,this.model)})}})}),define("home/templates/discussionPage",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<section id="discussion-cover"></section>\n<div class="section-contained">\n<section class="container-3-col discussion-comments" id="discussion-comments"></section>\n<section class="hidden" data-role="related" data-jester-area="related_footer"></section>\n</div>\n'},useData:!0})}),define("home/views/DiscussionPageView",["jquery","underscore","backbone-marionette","core/bus","home/models/common/UniqueModel","home/models/ForumFeed","home/models/ChannelProfile","home/collections/common/SelectiveCollection","home/utils/backboneUtils","home/utils/layoutUtils","home/views/NetworkDiscussionCoverView","home/views/UserGeneratedDiscussionCoverView","home/views/EmbedContainerView","home/views/FetchingView","home/views/RelatedWrapperView","home/templates/discussionPage","home/mixins/withClickLinkTracking"],function(e,t,n,i,a,s,o,r,l,c,u,d,h,m,p,f,g){var v=n.Layout.extend({className:"discussion-page",template:f,regions:{cover:"#discussion-cover",comments:"#discussion-comments",relatedRegion:"[data-role=related]"},initialize:function(e){this.channel=e.channel,this.listenToOnce(this.cover,"show",function(){i.trigger("showDiscussionCover","discussion")}),this.buildRelatedCollections()},modelEvents:{sync:"render"},events:{"click a[data-link-name]":"trackClickLinkWithArea"},onDomRefresh:function(){this.showCover(),this.comments.show(new h({model:this.model})),this.showRelated()},showCover:function(){if(this.model.shouldFetch())return void this.cover.show(new m);var e=this.model.get("isUserGenerated")?d:u;this.cover.show(new e({model:this.model,channel:this.getChannel(),relatedCollection:this.coverRelatedCollection}))},getChannel:function(){return this.channel||this.model.forum.channel},buildRelatedCollections:function(){var e=this.getRelatedThreads(),t=this;this.coverRelatedCollection=new r(void 0,{toSelect:e,maxSize:5,shouldSelect:function(e){return e.thread!==t.model},order:function(e){return e.shuffle()}}),this.footerRelatedCollection=new r(void 0,{toSelect:e,maxSize:3,shouldSelect:function(e){return e.thread!==t.model&&!t.coverRelatedCollection.contains(e)},order:function(e){return e.shuffle()}}),this.footerRelatedCollection.isComplete().then(function(){t.footerRelatedCollection.length&&t.$(t.relatedRegion.el).removeClass("hidden")})},getRelatedThreads:function(){var e,t,n,i=this.getChannel();return i?(t=new a(o,{channel:i}),t.ensureFetchedTopActivities(),e=t.topActivities.get("items")):(n=new a(s,{id:this.model.forum.id}),n.fetch(),e=n.get("items")),e},showRelated:function(){this.relatedRegion.show(new p({relatedCollection:this.footerRelatedCollection,model:this.getChannel()||this.model.forum,channel:this.getChannel(),hideImage:!0}))},getTitle:function(){return e.when(l.getPromiseFor(this.model,"title"),l.getPromiseFor(this.model.forum,"name")).then(function(e,t){return"- "+e+" - "+t})},getPageTrackingParams:function(){var n={forum:this.model.forum.id},i=this.getChannel();if(i)return n.channel_slug=i.get("slug"),n;if(!this.model.shouldFetch())return n;var a=e.Deferred();return this.model.fetch().then(t.bind(function(){i=this.getChannel(),i&&(n.channel_slug=i.get("slug")),a.resolve(n)},this)),a.promise()}});return g.call(v.prototype),v}),define("home/templates/onboarding",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="welcome-page-wrapper">\n<div class="welcome-page">\n<header>\n<h2>A Home for <img src="//a.disquscdn.com/dotcom/current/img/brand/disqus-logo-light-transparent.png" alt="DISQUS"></h2>\n<p>The web\'s community of communities now has one central hub.</p>\n</header>\n<ul class="marketing-blocks thirds">\n<li>\n<svg class="icon-notif" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path class="outline" d="M20.7 40c-4.4 0-8.7-1.6-12.1-4.4l-7.2 1c-0.4 0.1-0.9-0.1-1.2-0.5c-0.3-0.3-0.3-0.8-0.2-1.2l2.8-7.1 c-1-2.5-1.5-5.1-1.5-7.8C1.4 9 10 0 20.7 0C31.3 0 40 9 40 20S31.3 40 20.7 40z M9 33.1c0.3 0 0.6 0.1 0.8 0.3 c3 2.7 6.9 4.1 10.9 4.1c9.3 0 16.8-7.9 16.8-17.5S30 2.5 20.7 2.5C11.4 2.5 3.9 10.4 3.9 20c0 2.5 0.5 5 1.5 7.3 c0.1 0.3 0.1 0.7 0 1l-2.2 5.6l5.6-0.8C8.9 33.1 8.9 33.1 9 33.1z"/><path class="fill" d="M20.7 0C10 0 1.4 9 1.4 20c0 2.7 0.5 5.3 1.5 7.8l-2.8 7.1c-0.2 0.4-0.1 0.9 0.2 1.2 c0.3 0.3 0.7 0.5 1.2 0.5l7.2-1C12 38.4 16.3 40 20.7 40C31.3 40 40 31 40 20S31.3 0 20.7 0z"/><path class="dot" d="M11.2 20c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5s-1.1 2.5-2.5 2.5 S11.2 21.4 11.2 20z"/><path class="dot" d="M18.7 20c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5s-1.1 2.5-2.5 2.5 S18.7 21.4 18.7 20z"/><path class="dot" d="M26.2 20c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5s-1.1 2.5-2.5 2.5 S26.2 21.4 26.2 20z"/></svg>\n<h3>Notifications</h3>\n<p>All of your notifications, including upvotes, replies, and new followers.</p>\n</li>\n<li>\n<svg class="icon-home-line" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 35 32" enable-background="new 0 0 35 32" xml:space="preserve"><path d="M28.7 32h-7.5c-0.6 0-1-0.4-1-1V20.5h-5.5V31c0 0.6-0.4 1-1 1H6.6c-2.5 0-2.5-1.8-2.5-2.5V19H2 c-1.3 0-1.8-0.7-1.9-1c-0.1-0.3-0.3-1.1 0.6-2.1l14.7-15c1.1-1.1 3.1-1.2 4.2 0l14.7 15c0.9 1 0.7 1.8 0.6 2.1 c-0.1 0.3-0.6 1-1.9 1h-2.1v10.5C30.9 30.2 30.9 32 28.7 32z M22.2 30h6.5c0.1 0 0.1 0 0.1 0c0-0.1 0-0.4 0-0.5V18 c0-0.6 0.4-1 1-1h2.7L18.2 2.3c-0.4-0.4-1-0.4-1.3 0L2.4 17h2.7c0.6 0 1 0.4 1 1v11.5c0 0.1 0 0.4 0 0.5c0 0 0.2 0 0.5 0h6.1 V19.5c0-0.6 0.4-1 1-1h7.5c0.6 0 1 0.4 1 1V30z" /></svg>\n<h3>One Feed</h3>\n<p>All of the conversations you\'re interested in, all in one place.</p>\n</li>\n<li>\n<svg class="icon-face-line" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><path d="M16 0C7.2 0 0 7.2 0 16s7.2 16 16 16s16-7.2 16-16S24.8 0 16 0z M16 30C8.3 30 2 23.7 2 16S8.3 2 16 2s14 6.3 14 14S23.7 30 16 30z"/><path d="M9.4 14.6c0.4 3.3 3.2 5.8 6.6 5.8s6.2-2.5 6.6-5.8 c-1.3 1.3-3.8 1.7-6.6 1.7S10.7 15.8 9.4 14.6z"/><ellipse cx="7.3" cy="12" rx="2.3" ry="2.1"/><path d="M24.7 9.6c-1.2 0-2.3 1-2.3 2.2c0 1.2 1 2.1 2.3 2.1 s2.3-1 2.3-2.1C27 10.6 26 9.6 24.7 9.6z"/></svg>\n<h3>Discovery</h3>\n<p>Find discussions and communities about whatever you\'re interested in.</p>\n</li>\n</ul>\n</div>\n</div>\n'},useData:!0})}),define("home/views/OnboardingView",["backbone-marionette","home/templates/onboarding"],function(e,t){return e.ItemView.extend({template:t,templateHelpers:function(){return{user:this.session.user.toJSON()}},initialize:function(e){this.session=e.session,this.listenTo(this.session,"change:id",this.render)},getTitle:function(){return"Welcome"}})}),define("home/models/SearchManager",["underscore","backbone","home/models/common/UniqueModel","home/models/Feed","home/models/ActivityFeedItem","home/models/Thread","home/models/User","home/models/Forum","home/models/Post","home/models/activities/TrendingThreadActivity","home/collections/FeedItemCollection","core/api"],function(e,t,n,i,a,s,o,r,l,c,u,d){var h=t.Collection.extend({parse:function(e){return e.response}}),m=function(e){e=new s(e);var t=new a({verb:"trending"},{activities:[new c({id:e.id,target:e})]});return t.thread=e,t},p=u.extend({parse:function(t){return e.map(t.response,m)},fetch:function(e){return t.Collection.prototype.fetch.call(this,e)}});return t.Model.extend({initialize:function(e){var t=d.getURL("users/search"),a=e.query;this.threads=new i({fetchOptions:{obj_type:"thread",query:a}},{collection:new p,collectionUrl:t}),this.forums=new i({fetchOptions:{obj_type:"forum",query:a}},{collection:new h(null,{model:n.boundModel(r)}),collectionUrl:t}),this.users=new i({fetchOptions:{obj_type:"user",query:a}},{collection:new h(null,{model:n.boundModel(o)}),collectionUrl:t}),this.posts=new i({fetchOptions:{obj_type:"post",query:a}},{collection:new h(null,{model:n.boundModel(l)}),collectionUrl:t}),this.myposts=new i({fetchOptions:{obj_type:"post",query:a,user:e.userId}},{collection:new h(null,{model:n.boundModel(l)}),collectionUrl:t})},fetchSearchResults:function(){this.threads.fetchItems({reset:!0}),this.forums.fetchItems({reset:!0}),this.users.fetchItems({reset:!0}),this.posts.fetchItems({reset:!0}),this.myposts.fetchItems({reset:!0})}})}),define("home/templates/searchResults",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<ul class="nav-tabs tabs-5">\n<li data-action="switch-tab" data-tab="threads" class="active">\n<a href="#">\n'+a(t.gettext.call(e,"Threads",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="forums">\n<a href="#">\n'+a(t.gettext.call(e,"Communities",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="users">\n<a href="#">\n'+a(t.gettext.call(e,"Users",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="posts">\n<a href="#">\n'+a(t.gettext.call(e,"Comments",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="myposts">\n<a href="#">\n'+a(t.gettext.call(e,"My Comments",{name:"gettext",hash:{},data:i}))+'\n</a>\n</li>\n</ul>\n\n<div data-role="content-area"></div>\n<div data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/SearchResultsView",["home/views/common/TabbedView","home/views/ForumCardCollectionView","home/views/UserCollectionView","home/views/FeedEmptyView","home/views/ActivityCardView","home/views/PostCollectionView","home/views/ActivityCardCollectionView","home/templates/searchResults"],function(e,t,n,i,a,s,o,r){return e.extend({defaultTab:"threads",template:r,getTabView:function(e){var r=this.model[e];switch(e){case"threads":return new o({itemView:a.extend({className:"card"}),model:r,collection:r.get("items")});case"forums":return new t({emptyView:i,model:r,collection:r.get("items")});case"users":return new n({emptyView:i,model:r,collection:r.get("items")});case"posts":return new s({className:"cards",emptyView:i,model:r,collection:r.get("items")});case"myposts":return new s({className:"cards",emptyView:i,model:r,collection:r.get("items")})}}})}),define("home/templates/searchPage",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="cover section-contained" data-role="cover-area">\n<div class="cover-body search">\n<form>\n<span class="icon-search"></span>\n<input class="search-input" type="text" placeholder="Search" data-role="search-query">\n</div>\n</form>\n</div>\n<div id="container-content" class="section-contained">\n<div data-role="search-results"></div>\n</div>\n'},useData:!0})}),define("home/views/SearchPageLayout",["backbone-marionette","home/models/SearchManager","home/views/SearchResultsView","home/templates/searchPage"],function(e,t,n,i){return e.Layout.extend({template:i,ui:{query:"[data-role=search-query]"},events:{submit:"handleSearchRequest"},regions:{resultsRegion:"[data-role=search-results]"},initialize:function(e){this.session=e.session},getTitle:function(){return"Search"},handleSearchRequest:function(e){e.preventDefault();var i=new t({query:this.ui.query.val(),userId:this.session.user.get("id")});i.fetchSearchResults(),this.resultsRegion.show(new n({model:i}))}})}),define("home/templates/channelCover",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='\n<div class="grad-overlay">\n<div class="section-contained">\n<div class="channel-banner channel-banner--tall">\n<div class="channel-banner__title">\n';return a=t["if"].call(e,null!=(a=null!=e?e.options:e)?a.titleLogo:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(r+=a),r+'</div>\n<div class="channel-banner__action">\n<a href="/home/discuss/'+o(s(null!=(a=null!=e?e.primaryForum:e)?a.id:a,e))+'/"\nclass="btn btn-primary-inverted btn-lnk btn-large" data-link-name="create">\n<span class="hidden-phone icon__item icon__label">\n'+o(t.gettext.call(e,"Create Discussion",{name:"gettext",hash:{},data:i}))+'\n</span>\n<span class="icon-create-discussion icon__item"></span>\n</a>\n<button\nclass="btn-channel-info btn-outline feed-content"\ntitle='+o(t.gettext.call(e,"Info",{name:"gettext",hash:{},data:i}))+'\ndata-action="show-metadata"\n>\n'+o(t.gettext.call(e,"About",{name:"gettext",hash:{},data:i}))+'\n</button>\n</div>\n<div class="channel-banner__meta">\n<button\nclass="btn-lnk-inverted btn-channel-feed"\ntitle='+o(t.gettext.call(e,"Feed",{name:"gettext",hash:{},data:i}))+'\ndata-action="hide-metadata"\n>\n<span class="icon icon-left-bracket text-large"></span>\n</button>\n<h1 class="metadata-heading">'+o(t.gettext.call(e,"About this Channel",{name:"gettext",hash:{},data:i}))+"</h1>\n</div>\n</div>\n</div>\n</div>\n"},2:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<div class="img-logo-md">\n<img src="'+i(n(null!=(t=null!=(t=null!=e?e.options:e)?t.titleLogo:t)?t.cache:t,e))+'" class="img-responsive" />\n</div>\n'},4:function(e){var t=this.lambda,n=this.escapeExpression;return'<h1 class="text-headline">'+n(t(null!=e?e.name:e,e))+"</h1>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t.unless.call(e,null!=e?e.shouldFetch:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},useData:!0})}),define("home/views/ChannelCoverView",["backbone-marionette","home/utils/mixpanelUtils","home/models/Session","home/templates/channelCover"],function(e,t,n,i){var a=e.ItemView,s=a.extend({className:"cover-band",template:i,templateHelpers:function(){return{shouldFetch:this.model.shouldFetch()}},events:{"click [data-action=show-metadata]":"showMetadata","click [data-action=hide-metadata]":"hideMetadata"},initialize:function(){this.session=n.get(),this.listenTo(this.session,"change:id",this.render),this.listenTo(this.model,"changeRelated:primaryForum",this.render)},modelEvents:{sync:"render"},onRender:function(){var e=this.model.get("options").alertBackground;e&&this.$el.css({"background-image":"url("+e+")","background-position":"0% 0px;"}).addClass("cover-band--beautified")},showMetadata:function(){this.trigger("showMetadata",!0)},hideMetadata:function(){this.trigger("showMetadata",!1)}});return s}),define("home/templates/channelLeadingUser",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<div class="avatar-flag">\n<div class="avatar-flag__img">';return a=this.invokePartial(n.userAvatar,"","userAvatar",e,void 0,t,n,i),null!=a&&(s+=a),s+='</div>\n<div class="avatar-flag__name">',a=this.invokePartial(n.userName,"","userName",e,void 0,t,n,i),null!=a&&(s+=a),s+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelLeadingUserView",["backbone-marionette","home/templates/channelLeadingUser"],function(e,t){var n=e.ItemView.extend({template:t});return n}),define("home/templates/channelMetadata",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<div class="avatar-flag__img">\n<img src="'+i(n(null!=(t=null!=(t=null!=e?e.channel:e)?t.options:t)?t.favicon:t,e))+'" class="img-round-sm" />\n</div>\n'},3:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression;return'<a href="'+o(s(null!=(a=null!=(a=null!=e?e.channel:e)?a.options:a)?a.aboutUrlPath:a,e))+'" data-link-name="about">\n'+o(t.gettext.call(e,"Read more",{name:"gettext",hash:{},data:i}))+'\n<span class="icon icon-arrow-forward icon-tiny"></span>\n</a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="metadata-wrapper">\n<div class="metadata-inner">\n<div class="metadata__follow">\n<h2 class="avatar-flag__name pull-left">\n';return a=t["if"].call(e,null!=(a=null!=(a=null!=e?e.channel:e)?a.options:a)?a.favicon:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<div class="avatar-flag__name text-large">\n'+o(s(null!=(a=null!=e?e.channel:e)?a.name:a,e))+'\n</div>\n</h2>\n<div class="pull-right">\n',a=this.invokePartial(n.followButton,"","followButton",e,void 0,t,n,i),null!=a&&(r+=a),r+="</div>\n</div>\n<p>"+o(s(null!=(a=null!=(a=null!=e?e.channel:e)?a.options:a)?a.description:a,e))+"</p>\n",a=t["if"].call(e,null!=(a=null!=(a=null!=e?e.channel:e)?a.options:a)?a.aboutUrlPath:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n<div class="metadata-inner">\n<h2 class="text-large">'+o(t.gettext.call(e,"Community Leaders",{name:"gettext",hash:{},data:i}))+'</h2>\n<div data-role="user-sources"></div>\n</div>\n</div>\n<div class="metadata-wrapper">\n<div class="metadata-inner metadata-guidelines" data-role="guidelines-section">\n<h2 class="text-large">'+o(t.gettext.call(e,"Community Guidelines",{name:"gettext",hash:{},data:i}))+'</h2>\n<div class="guidelines" data-role="guidelines">\n',a=s(null!=(a=null!=(a=null!=e?e.channel:e)?a.primaryForum:a)?a.guidelines:a,e),null!=a&&(r+=a),r+'\n</div>\n<a data-link-name="guidelines" class="curtain-truncate text-small" data-action="expand" data-target="[data-role=guidelines]" href="#">\n<span class="icon__item">\n'+o(t.gettext.call(e,"Show guidelines",{name:"gettext",hash:{},data:i}))+'\n</span>\n<span class="icon__item icon-arrow icon"></span>\n</a>\n<a data-action="collapse" data-target="[data-role=guidelines]" class="hidden text-small" href="#">\n<span class="icon__item icon-arrow-2 icon"></span>\n<span class="icon__item icon__label">\n'+o(t.gettext.call(e,"Collapse guidelines",{name:"gettext",hash:{},data:i}))+"\n</span>\n</a>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelMetadataView",["underscore","backbone-marionette","home/views/ChannelLeadingUserView","home/mixins/withChannelFollowing","home/mixins/withCollapsing","home/templates/channelMetadata"],function(e,t,n,i,a,s){var o=t.Layout.extend({regions:{userSourcesRegion:"[data-role=user-sources]"},template:s,initialize:function(){this.listenTo(this.model.channel,"sync",this.render)},onDomRefresh:function(){var i=new t.CollectionView({itemView:n,collection:this.model.userSources.items});this.listenTo(i,"after:item:added",e.bind(this.showExperts,this,i)),this.userSourcesRegion.show(i)},showExperts:function(e){e._showingEmptyView||(this.$("[data-role=experts]").removeClass("hidden"),this.stopListening(e,"after:item:added"))}});return i.call(o.prototype,function(){return this.model.channel}),a.call(o.prototype,{maxHeight:200,collapsibleSelector:"[data-role=guidelines-section]"}),o}),define("home/templates/channelCardFooter",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"1 Comment",{name:"gettext",hash:{},data:i}))+"\n"},3:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"%(posts)s Comments",{name:"gettext",hash:{posts:null!=e?e.posts:e},data:i}))+"\n"},5:function(e,t,n,i){var a,s='<li class="action__item">\n<a class="action__lnk action-favorite';return a=t["if"].call(e,null!=e?e.favorited:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" href="#" data-action="favorite">\n<span class="icon icon-star"></span>\n<strong>\n',a=t.unless.call(e,t.eq.call(e,null!=e?e.likes:e,0,{name:"eq",hash:{},data:i}),{name:"unless",hash:{},fn:this.program(8,i),inverse:this.program(13,i),data:i}),null!=a&&(s+=a),s+"</strong>\n</a>\n</li>\n"},6:function(){return" active"},8:function(e,t,n,i){var a,s="";return a=t["if"].call(e,t.eq.call(e,null!=e?e.likes:e,1,{name:"eq",hash:{},data:i}),{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(s+=a),s},9:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"1 Favorite",{name:"gettext",hash:{},data:i}))+"\n"},11:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"%(likes)s Favorites",{name:"gettext",hash:{likes:null!=e?e.likes:e},data:i}))+"\n"},13:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"Favorite",{name:"gettext",hash:{},data:i}))+"\n"
},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<ul class="actions">\n<li class="action__item">\n<a class="action__lnk" href="'+o(s(null!=e?e.discussionRoute:e,e))+'" data-link-name="comment_count">\n<span class="icon icon-comment"></span>\n<strong>\n';return a=t["if"].call(e,t.eq.call(e,null!=e?e.posts:e,1,{name:"eq",hash:{},data:i}),{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="</strong>\n</a>\n</li>\n",a=t["if"].call(e,null!=e?e.authenticated:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</ul>\n"},useData:!0})}),define("home/views/ChannelCardFooterView",["home/views/ThreadCardDefaultFooterView","home/templates/channelCardFooter"],function(e,t){var n=e.extend({template:t});return n}),define("home/mixins/asChannelCard",["underscore","home/views/ChannelCardFooterView","home/mixins/withTruncate","home/mixins/withSubviews"],function(e,t,n,i){var a={regions:{footerRegion:"[data-role=footer]",tabletFooterRegion:"[data-role=tablet-footer]"},className:function(t){return e.isFunction(t)&&(t=t.apply(this,e.rest(arguments))),t=t||"",["card-wrap card--channel",t].join(" ")},initialize:function(e,t){t=t||{},e.call(this,t),this.channel=t.channel,this.hideImage=t.hideImage,this.listenTo(this.model.thread,"change:content",this.render),this.numTitleLines=t.numTitleLines||3},serializeData:function(t){var n=t.call(this),i=this.model.thread;return e.defaults(n,{discussionRoute:i.getDiscussionRoute(this.channel),threadDescription:i.getDefaultDescription(),image:i.getImage(),numTitleLines:this.numTitleLines})},render:function(e){return e.call(this),this.activateRegion(this.footerRegion,a.createFooter),this.activateRegion(this.tabletFooterRegion,a.createTabletFooter),this},_createFooter:function(e){return new t({el:e,model:this.model.thread,channel:this.channel})},createFooter:function(){return a._createFooter.call(this,this.footerRegion.el)},createTabletFooter:function(){return a._createFooter.call(this,this.tabletFooterRegion.el)}};return function(){n.apply(this,arguments),i.call(this),this.regions=e.extend({},a.regions,this.regions),this.className=e.wrap(this.className,a.className),this.initialize=e.wrap(this.initialize,a.initialize),this.serializeData=e.wrap(this.serializeData,a.serializeData),this.render=e.wrap(this.render,a.render)}}),define("home/templates/channelCardFavorite",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a class="avatar--card" href="/by/'+o(s(null!=e?e.username:e,e))+'/" data-link-name="user_avatar">\n<img\nclass="img-round-sm"\nsrc="'+o(s(null!=(a=null!=e?e.avatar:e)?a.cache:a,e))+'"\nalt="';return a=t["if"].call(e,null!=e?e.name:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(r+=a),r+'" />\n</a>\n'},2:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.name:e,e))},4:function(e,t,n,i){var a;return a=t["if"].call(e,null!=e?e.username:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a?a:""},5:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.username:e,e))},7:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"Guest",{name:"gettext",hash:{},data:i}))},9:function(){return"c-reason-byline"},11:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="card-media-figure" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'" class="img-cards">\n</a>\n'},13:function(){return" hidden-phone"},15:function(e,t,n,i){var a=this.escapeExpression;return'<div class="card__additional">\n<h3 class="text-subheading">'+a(t.gettext.call(e,"Recent Comments",{name:"gettext",hash:{},data:i}))+'</h3>\n<div data-role="posts"></div>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="card__header">\n<time class="pull-right text-small">'+o(s(null!=e?e.relativeTime:e,e))+"</time>\n";return a=t["with"].call(e,null!=e?e.firstActor:e,{name:"with",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<div class="',a=t["if"].call(e,null!=(a=null!=e?e.avatar:e)?a.cache:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+=' media-body">\n'+o(t.gettext.call(e,"%(group)s favorited on %(forumLink)s",{name:"gettext",hash:{forumLink:t.tag.call(e,"a",{name:"tag",hash:{"data-link-name":"forum_name","class":"name-community",href:null!=e?e.forumHref:e,text:t.getPartial.call(e,"forumName",null!=(a=null!=e?e.thread:e)?a.forum:a,{name:"getPartial",hash:{},data:i})},data:i}),group:t.getPartial.call(e,"userGroupNames",{name:"getPartial",hash:{},data:i})},data:i}))+'\n</div>\n</div>\n<div class="card-media card__content">\n',a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<div class="card-media-body">\n<div class="card-content__info">\n',a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="card-content__summary',a=t["if"].call(e,null!=e?e.recentPostCount:e,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n',a=s(null!=e?e.threadDescription:e,e),null!=a&&(r+=a),r+='\n</div>\n</div>\n</div>\n<div class="card--actions hidden-phone" data-role="footer"></div>\n</div>\n</div>\n',a=t["if"].call(e,null!=e?e.recentPostCount:e,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'<div class="card__footer card--actions visible-phone" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ChannelCardFavoriteView",["backbone-marionette","home/mixins/asChannelCard","home/mixins/withReason","home/templates/channelCardFavorite"],function(e,t,n,i){var a=e.ItemView.extend({template:i,templateHelpers:function(){return{forumHref:"/home/forums/"+this.model.thread.forum.id+"/"}}});return t.call(a.prototype),n.call(a.prototype),a}),define("home/templates/channelCardPostActions",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" active"},3:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.likes:e,e))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s='<a href="#" class="vote__item vote--up';return a=t["if"].call(e,null!=e?e.sessionUserHasUpvoted:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='"\ndata-action="vote" data-vote="1">\n<span class="vote__count" data-role="upvotes">\n',a=t["if"].call(e,null!=e?e.likes:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='\n</span>\n<span class="icon icon-arrow-2"></span>\n</a>\n\n<a href="#" class="vote__item vote__seperator vote--down',a=t["if"].call(e,null!=e?e.sessionUserHasDownvoted:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+' hidden-phone"\ndata-action="vote" data-vote="-1">\n<span class="icon icon-arrow"></span>\n</a>\n'},useData:!0})}),define("home/views/ChannelCardPostActionsView",["jquery","home/views/PostActionsView","home/templates/channelCardPostActions"],function(e,t,n){var i=t.extend({template:n,initializeReplyViewManager:e.noop});return i}),define("home/templates/channelCardPost",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e){var t=this.lambda,n=this.escapeExpression;return'<span class="label label-danger">'+n(t(null!=e?e.hiddenExplanation:e,e))+"</span>\n"},3:function(){return"hidden"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="post-comments">\n<div> \n<a href="'+o(s(null!=e?e.discussionRoute:e,e))+"#comment-"+o(s(null!=e?e.id:e,e))+'" class="truncate link-gray-dark post-comments__lnk" data-link-name="message" dir="auto" data-truncate-lines="'+o(s(null!=e?e.numLines:e,e))+'">\n';return a=s(null!=e?e.message:e,e),null!=a&&(r+=a),r+='\n</a>\n</div>\n<div class="post-comments__footer">\n<div class="post-comments__reason">\n',a=this.invokePartial(n.userAvatar,"","userAvatar",null!=e?e.author:e,void 0,t,n,i),null!=a&&(r+=a),a=this.invokePartial(n.userName,"","userName",null!=e?e.author:e,void 0,t,n,i),null!=a&&(r+=a),r+='<a class="link-gray time" href="'+o(s(null!=e?e.discussionRoute:e,e))+"#comment-"+o(s(null!=e?e.id:e,e))+'" data-link-name="timestamp">'+o(s(null!=e?e.relativeTime:e,e))+"</a>\n",a=t["if"].call(e,null!=e?e.isHidden:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='</div>\n<div class="comment-actions post-comments__actions ',a=t["if"].call(e,null!=e?e.isHidden:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'" data-role="post-actions">\n</div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ChannelCardPostView",["jquery","underscore","backbone-marionette","core/strings","home/views/ChannelCardPostActionsView","home/mixins/withTruncate","home/mixins/withSubviews","home/utils/domUtils","home/utils/datetimeUtils","home/templates/channelCardPost"],function(e,t,n,i,a,s,o,r,l,c){var u=i.get,d=n.ItemView,h=d.extend({className:"post-comments__wrapper",template:c,regions:{postActionsRegion:"[data-role=post-actions]"},templateHelpers:function(){var t=this.model.get("state");return{isHidden:"visible"!==t,hiddenExplanation:{flagged:u("Pending"),pending:u("Pending"),spam:u("Detected as spam"),deleted:u("Removed")}[t],message:this.replaceLinks(this.model.get("message")),discussionRoute:this.model.thread.getDiscussionRoute(),relativeTime:l.getRelativeDatetime(this.model.get("createdAt")),numLines:e(window).width()<=875?4:2}},replaceLinks:function(t){var n=e("<div>").html(t);return n.find("a").replaceWith('<span class="icon-images"></span>'),n.html()},onRender:function(){this.activateRegion(this.postActionsRegion,this.createPostActionsView)},createPostActionsView:function(){return new a({model:this.model})}});return s.call(h.prototype),o.call(h.prototype),h}),define("home/templates/channelCardCreate",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a class="avatar--card" href="/by/'+o(s(null!=e?e.username:e,e))+'/" data-link-name="user_avatar">\n<img\nclass="img-round-sm"\nsrc="'+o(s(null!=(a=null!=e?e.avatar:e)?a.cache:a,e))+'"\nalt="';return a=t["if"].call(e,null!=e?e.name:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(r+=a),r+'" />\n</a>\n'},2:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.name:e,e))},4:function(e,t,n,i){var a;return a=t["if"].call(e,null!=e?e.username:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a?a:""},5:function(e){var t=this.lambda,n=this.escapeExpression;return n(t(null!=e?e.username:e,e))},7:function(e,t,n,i){var a=this.escapeExpression;return a(t.gettext.call(e,"Guest",{name:"gettext",hash:{},data:i}))},9:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="card-media-figure" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'" class="img-cards">\n</a>\n'},11:function(){return" hidden-phone"},13:function(e,t,n,i){var a=this.escapeExpression;return'<div class="card__additional">\n<h3 class="text-subheading">'+a(t.gettext.call(e,"Recent Comments",{name:"gettext",hash:{},data:i}))+'</h3>\n<div class="card-comment-band" data-role="posts"></div>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="card__header">\n<time class="pull-right text-small">'+o(s(null!=e?e.relativeTime:e,e))+"</time>\n";return a=t["with"].call(e,null!=e?e.firstActor:e,{name:"with",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<div class="card__reason media-body">\n'+o(t.gettext.call(e,"%(group)s authored",{name:"gettext",hash:{group:t.getPartial.call(e,"userGroupNames",{name:"getPartial",hash:{},data:i})},data:i}))+'\n</div>\n</div>\n<div class="card-media card__content">\n',a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<div class="card-media-body">\n<div class="card-content__info">\n',a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="card-content__summary',a=t["if"].call(e,null!=e?e.recentPostCount:e,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n',a=s(null!=e?e.threadDescription:e,e),null!=a&&(r+=a),r+='\n</div>\n</div>\n</div>\n<div class="card-actions hidden-tablet" data-role="footer"></div>\n</div>\n</div>\n',a=t["if"].call(e,null!=e?e.recentPostCount:e,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'<div class="card__footer card-actions visible-tablet" data-role="tablet-footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ChannelCardCreateView",["backbone-marionette","home/views/ChannelCardPostView","home/mixins/asChannelCard","home/mixins/withReason","home/mixins/withSubviews","home/templates/channelCardCreate"],function(e,t,n,i,a,s){var o=e.ItemView,r=o.extend({template:s,templateHelpers:function(){return{recentPostCount:this.model.thread.recentPosts.length}},regions:{postsRegion:"[data-role=posts]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostsView)},createPostsView:function(){return new e.CollectionView({itemView:t,collection:this.model.thread.recentPosts})}}),l=r.prototype;return n.call(l),i.call(l),a.call(l),r}),define("home/templates/channelCardTrending",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<a class="avatar--card" href="/home/forums/'+o(s(null!=e?e.id:e,e))+'/" data-link-name="forum_name">\n<img src="'+o(s(null!=(a=null!=e?e.favicon:e)?a.cache:a,e))+'" alt="';return a=this.invokePartial(n.forumName,"","forumName",e,void 0,t,n,i),null!=a&&(r+=a),r+'" class="img-round-sm" />\n</a>\n'},3:function(e){var t,n=this.lambda,i=this.escapeExpression;return'<a href="'+i(n(null!=(t=null!=e?e.thread:e)?t.link:t,e))+'" class="card-media-figure" data-link-name="image">\n<img src="'+i(n(null!=(t=null!=e?e.image:e)?t.src:t,e))+'" alt="'+i(n(null!=(t=null!=e?e.image:e)?t.title:t,e))+'" class="img-cards">\n</a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression,r='<div class="card__header">\n<time class="pull-right">'+o(s(null!=e?e.relativeTime:e,e))+"</time>\n";return a=t["with"].call(e,null!=(a=null!=e?e.thread:e)?a.forum:a,{name:"with",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<div class="card__reason media-body">\n'+o(t.gettext.call(e,"%(forum)s recently published",{name:"gettext",hash:{forum:t.getPartial.call(e,"forumLink",null!=(a=null!=e?e.thread:e)?a.forum:a,{name:"getPartial",hash:{},data:i})},data:i}))+'\n</div>\n</div>\n<div class="card-media card__content">\n',a=t["if"].call(e,null!=e?e.image:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='<div class="card-media-body">\n<div class="card-content__info">\n',a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(r+=a),r+='<div class="card-content__summary">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n',a=s(null!=e?e.threadDescription:e,e),null!=a&&(r+=a),r+'\n</div>\n</div>\n</div>\n<div class="card-actions card-actions--trending" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ChannelCardTrendingView",["backbone-marionette","home/mixins/asChannelCard","home/templates/channelCardTrending"],function(e,t,n){var i=e.ItemView.extend({template:n});return t.call(i.prototype),i}),define("home/views/ChannelCardCollectionView",["underscore","backbone","core/bus","home/views/GenericCardCollectionView","home/views/ChannelCardFavoriteView","home/views/ChannelCardCreateView","home/views/ChannelCardTrendingView","home/mixins/withViewFeedTracking","home/utils/mixpanelUtils"],function(e,t,n,i,a,s,o,r,l){var c=i.extend({itemView:function(e){switch(e.model.get("verb")){case"favorite":return new a(e);case"create":return new s(e);case"trending":return new o(e);case"share":return e.model.thread.author?(e.model.actors.length||(e.model.actors=[e.model.thread.author],e.model.set({totalActors:1})),new s(e)):new o(e);default:return new t.View}},initialize:function(){i.prototype.initialize.apply(this,arguments),this.listenToOnce(this,"showFirstItem",function(){n.trigger("showFirstCard","channel")})},onShow:function(){var t=this;e.defer(function(){l.track("view feed",{target:t.$el})})}});return r.call(c.prototype),c}),define("home/templates/channelFeedEndOfItems",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a=this.escapeExpression;return'<div class="feed-end" data-role="end-message">\n<a href="#content-area">'+a(t.gettext.call(e,"Back to Top",{name:"gettext",hash:{},data:i}))+"</a>\n</div>\n"},useData:!0})}),define("home/views/ChannelFeedFooterView",["home/views/common/FetchableCollectionFooterView","home/templates/channelFeedEndOfItems"],function(e,t){var n=e.extend({endOfItemsTemplate:t});return n}),define("templates/channelTabTooltip",["handlebars","handlebars.partials"],function(e){return e.template({1:function(e,t,n,i){var a=this.escapeExpression,s=this.lambda;return'<div class="alert alert-tips text-small">\n<button class="close" aria-hidden="true" title="'+a(t.gettext.call(e,"Don't show this message again",{name:"gettext",hash:{},data:i}))+'" data-action="hide-alert">\n<span class="icon-cancel"></span>\n</button>\n'+a(t.gettext.call(e,"Top stories are curated by moderators and by what's popular.",{name:"gettext",hash:{},data:i}))+'\n<a href="'+a(s(null!=e?e.recentUrl:e,e))+'">\n'+a(t.gettext.call(e,"See most recent posts",{name:"gettext",hash:{},data:i}))+'\n<span class="icon icon-arrow-forward icon-tiny"></span>\n</a>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s="";return a=t.unless.call(e,null!=e?e.alertHidden:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},useData:!0})}),define("home/views/ChannelTabTooltipView",["underscore","home/views/common/AlertView","templates/channelTabTooltip"],function(e,t,n){return t.extend({template:n,templateHelpers:function(){var n=t.prototype.templateHelpers;return e.isFunction(n)&&(n=n.call(this)),e.defaults({recentUrl:"/home/channels/"+this.model.get("slug")+"/recent/"},n)},alertViewName:"channelTabTooltipRemaining"})}),define("home/templates/channelTopTab",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<section data-role=\"top-tab-tooltip\"></section>\n<div data-role='content-area'></div>\n<div data-role='footer-area'></div>\n"},useData:!0})}),define("home/views/ChannelTopTabView",["underscore","home/views/common/FetchableCollectionLayout","home/views/ChannelTabTooltipView","home/templates/channelTopTab"],function(e,t,n,i){var a=t.extend({template:i,regions:e.defaults({topTabTooltipRegion:"[data-role=top-tab-tooltip]"},t.prototype.regions),initialize:function(e){t.prototype.initialize.call(this,e),this.channel=e.channel},onDomRefresh:function(){t.prototype.onDomRefresh.call(this),this.topTabTooltipRegion.show(new n({model:this.channel}))}});return a}),define("home/templates/channelProfile",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o=this.escapeExpression;return'<header data-role="cover"></header>\n<div class="nav-wrapper feed-content" id="content-area">\n<div class="section-contained">\n<ul class="nav-list">\n<li data-action="switch-tab" data-tab="top" class="nav-list__item">\n<a href="/home/channels/'+o(s(null!=(a=null!=e?e.channel:e)?a.slug:a,e))+'/top/" class="nav-list__lnk">\n<strong>'+o(t.gettext.call(e,"Top Stories",{name:"gettext",hash:{},data:i}))+'</strong>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="recent" class="nav-list__item">\n<a href="/home/channels/'+o(s(null!=(a=null!=e?e.channel:e)?a.slug:a,e))+'/recent/" class="nav-list__lnk">\n<strong>'+o(t.gettext.call(e,"Most Recent",{name:"gettext",hash:{},data:i}))+'</strong>\n</a>\n</li>\n</ul>\n</div>\n</div>\n<div class="section-contained">\n<div class="layout">\n<div class="layout__content feed-content" data-role="content-area">\n</div>\n<aside class="layout__aside metadata-content" data-role="metadata">\n</aside>\n</div>\n</div>\n'},useData:!0})}),define("home/views/ChannelProfileView",["jquery","underscore","backbone","backbone-marionette","home/utils/layoutUtils","home/utils/backboneUtils","home/utils/confirmModal","home/views/common/TabbedView","home/views/ChannelCoverView","home/views/ChannelMetadataView","home/views/ChannelCardCollectionView","home/views/common/FetchableCollectionLayout","home/views/ChannelFeedFooterView","home/views/UserCollectionView","home/views/ChannelTopTabView","home/templates/channelProfile","home/templates/guidelines","home/templates/spinnerTall","home/mixins/withClickLinkTracking"],function(e,t,n,i,a,s,o,r,l,c,u,d,h,m,p,f,g,v,w){var b=r.extend({className:"channel-profile",defaultTab:function(){return"top"},template:function(e){return e.channel.name?f(e):v(e)},regions:t.defaults({coverRegion:"[data-role=cover]",metadataRegion:"[data-role=metadata]"},r.prototype.regions),initialize:function(e){e&&"guidelines"===e.activeTab&&(e.activeTab=t.result(this,"defaultTab"),this.listenToOnce(this,"show",this.showGuidelines)),r.prototype.initialize.apply(this,arguments),this.listenTo(this.model.channel,"sync",this.render)},events:t.defaults({"click a[data-link-name]":"trackClickLinkWithArea","click [data-action=show-guidelines]":"showGuidelines"},r.prototype.events),showGuidelines:function(){return this.model.channel.primaryForum?void(this.model.channel.primaryForum.get("raw_guidelines")&&o.confirmationPromise(o.TYPES.CLOSE,g(this.model.channel.toJSON()))):void this.listenToOnce(this.model.channel,"changeRelated:primaryForum",this.showGuidelines)},onDomRefresh:function(){if(this.$(this.coverRegion.el).length){var e=new l({model:this.model.channel});this.listenTo(e,"showMetadata",this.showMetadata),this.coverRegion.show(e),this.metadataRegion.show(new c({model:this.model})),r.prototype.onDomRefresh.apply(this,arguments)}},showMetadata:function(e){this.$el.toggleClass("metadata-view",e)},getTrackingSection:function(e){return e},getTabView:function(e){var t;switch(e){case"recent":return t=new d({model:this.model.recentActivities,collection:this.model.recentActivities.items,fetchableCollectionView:u,fetchableCollectionFooterView:h,channel:this.model.channel,infiniteScroll:!0}),t.$el.attr({"data-mix-location":"recent"}),t;case"top":return t=new p({model:this.model.topActivities,collection:this.model.topActivities.items,fetchableCollectionView:u,fetchableCollectionFooterView:h,channel:this.model.channel,infiniteScroll:!0}),t.$el.attr({"data-mix-location":"top"}),t;case"followers":return t=new d({model:this.model.followers,collection:this.model.followers.items,fetchableCollectionView:m,fetchableCollectionFooterView:h,infiniteScroll:!0}),t.$el.attr({"data-mix-location":"followers","class":"card-wrap"}),t}},getTitle:function(){return s.getPromiseFor(this.model.channel,"name").then(function(e){return"Channel - "+e})},getPageTrackingParams:function(){return{channel_slug:this.model.channel.get("slug")}}});return w.call(b.prototype),b}),define("home/templates/curatedCard",["handlebars","handlebars.partials"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t,n,i){var a,s="";return a=this.invokePartial(n.boostTimeRemaining,"","boostTimeRemaining",e,void 0,t,n,i),null!=a&&(s+=a),s},5:function(e,t,n,i){var a=this.escapeExpression;return'<button class="btn btn-light-solid" data-action="dismiss">\n'+a(t.gettext.call(e,"Dismiss",{name:"gettext",hash:{},data:i}))+"\n</button>\n"},7:function(e,t,n,i){var a=this.escapeExpression;return'<button class="btn btn-light-solid" data-action="configure-curation">\n'+a(t.gettext.call(e,"Configure",{name:"gettext",hash:{},data:i}))+"\n</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var a,s=this.lambda,o='<div class="overlay"></div>\n<div class="card-discussion';return a=t.unless.call(e,null!=e?e.image:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='">\n<div class="curated-settings" data-role="boost-message">\n',a=t["if"].call(e,null!=e?e.boostedScore:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='</div>\n<div class="media curate-body">\n<div class="card-aside pull-right">\n',a=this.invokePartial(n.threadImage,"","threadImage",e,void 0,t,n,i),null!=a&&(o+=a),o+='</div>\n<div class="card-body media-body">\n<section data-role="author-avatar"></section>\n<span class="text-small">\n<section data-role="author-link"></section>\n</span>\n\n',a=this.invokePartial(n.threadTitle,"","threadTitle",e,void 0,t,n,i),null!=a&&(o+=a),o+='\n<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="3">\n',a=s(null!=e?e.threadDescription:e,e),null!=a&&(o+=a),o+='\n</div>\n</div>\n</div>\n<div class="media">\n<div class="curate-actions pull-right">\n',a=t["if"].call(e,null!=e?e.showDismiss:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),a=t["if"].call(e,null!=e?e.showSettings:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'</div>\n<footer class="card-footer media-body" data-role="footer"></footer>\n</div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/CuratedCardView",["handlebars","underscore","backbone-marionette","home/utils/navigationUtils","home/utils/datetimeUtils","home/mixins/asGenericCard","home/templates/curatedCard"],function(e,t,n,i,a,s,o){var r=n.Layout.extend({template:o,templateHelpers:function(){return{showUnboost:this.model.get("fixedUntil")&&this.supportsUnboost,showDismiss:this.supportsDimiss,showSettings:this.supportsSettings,boostTimeRemaining:this.model.getRelativeBoostTimeRemaining(),showBoostTimeSelector:!this.model.get("fixedUntil")}},events:{mouseover:"onHover",mouseout:"onHoverEnd","click [data-action=configure-curation]":"goToConfigurationPageForActivityItem","click [data-action=dismiss]":"dismiss","click [data-action=unboost]":"unboost","click [data-action=choose-boost-time]":"chooseBoostTime"},modelEvents:{"change:boostedScore":"renderBoostTimeRemaining","change:fixedUntil":"renderBoostTimeRemaining"},initialize:function(e){e=e||{};var n=e.supportedActions||[];this.supportsUnboost=t.contains(n,"unboost"),this.supportsDimiss=t.contains(n,"dismiss"),this.supportsSettings=t.contains(n,"settings")},onClose:function(){this.interval&&window.clearInterval(this.interval)},goToConfigurationPageForActivityItem:function(){var e=this.model.collection.indexOf(this.model);i.navigate(window.location.pathname+e+"/",{trigger:!0})},onHover:function(){this.$el.addClass("hovered")},onHoverEnd:function(){this.$el.removeClass("hovered")},onRender:function(){this.handleBoostTimeRemainingUpdates(),this.renderAuthor()},renderAuthor:function(){this.model.thread.author?(this.$("[data-role=author-avatar]").replaceWith(e.partials.userAvatar(this.model.thread.author.toJSON())),this.$("[data-role=author-link]").replaceWith(e.partials.userName(this.model.thread.author.toJSON()))):(this.$("[data-role=author-avatar]").replaceWith(e.partials.forumAvatar(this.model.thread.forum.toJSON())),this.$("[data-role=author-link]").replaceWith(e.partials.forumLink(this.model.thread.forum.toJSON())))},handleBoostTimeRemainingUpdates:function(){this.interval&&window.clearInterval(this.interval),this.model.get("boostedScore")&&(this.interval=window.setInterval(t.bind(this.renderBoostTimeRemaining,this),6e4),this.renderBoostTimeRemaining())},chooseBoostTime:function(){this.$("[data-role=boost-message]").html(e.partials.boostTimeRemaining(t.extend(this.templateHelpers(),{showBoostTimeSelector:!0}))),this.handleSelectBoostTime()},renderBoostTimeRemaining:function(){var t=this.$("[data-role=boost-message]");this.model.get("boostedScore")?(t.html(e.partials.boostTimeRemaining(this.templateHelpers())),this.handleSelectBoostTime()):t.empty()},handleSelectBoostTime:function(){var e=this.$("select[name=time]");if(e.length){var t=this,n=function(){var n=parseInt(e.val(),10);t.trigger("updateBoostTime",1e3*n),e.attr({size:0}).removeClass("open")};e.attr({size:5}).addClass("open").change(n)}},dismiss:function(){this.trigger("dismiss")},unboost:function(){this.trigger("unboost")}});return s.call(r.prototype),r}),define("home/templates/curateActivity",["handlebars","handlebars.partials"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="header">\n<div class="preview" data-role="preview">\n</div>\n<button class="btn btn-primary" data-action="save">Save</button>\n<a class="btn btn-danger" href="/home/curate">Cancel</a>\n<ul class="tabs">\n<li data-action="switch-tab" data-tab="posts">\n<a href="#">Posts</a>\n</li>\n</ul>\n</div>\n<section data-role="content-area"></section>\n'},useData:!0})}),define("home/views/CurateActivityView",["underscore","backbone-marionette","home/views/common/TabbedView","home/views/CuratedCardView","home/templates/curateActivity"],function(e,t,n,i,a){var s=n.extend({defaultTab:"posts",template:a,regions:e.defaults({previewRegion:"[data-role=preview]"},n.prototype.regions),onDomRefresh:function(){n.prototype.onDomRefresh.call(this),this.previewRegion.show(new i({model:this.model}))},getTabView:function(e){switch(e){case"posts":return new t.ItemView({template:function(){return"Highlighted Post Chooser"}})}}});return s}),define("home/models/Topic",["underscore","backbone","home/models/common/UniqueModel"],function(e,t,n){var i=t.Model.extend({defaults:{name:null},initialize:function(){if(!this.get("name"))throw"Topic must be initialized with a name"},getTitle:function(){return this.get("name")}});return n.addType("Topic",i),i}),define("home/collections/TopicCollection",["backbone","home/models/common/UniqueModel","home/models/Topic"],function(e,t,n){var i=e.Collection.extend({model:t.boundModel(n)});return i}),define("home/models/ActivityFeed",["underscore","home/models/Feed","home/collections/FeedItemCollection"],function(e,t,n){var i=t.extend({initialize:function(i,a){t.prototype.initialize.call(this,i,e.extend({collectionClass:n},a))}});return i}),define("home/models/TopicFeed",["underscore","backbone","home/collections/FeedItemCollection","home/models/common/UniqueModel","home/models/Topic","home/models/Feed","core/api"],function(e,t,n,i,a,s,o){var r=s.extend({initialize:function(t,i){this.initializeRelated("topic",e.defaults({topic:{id:this.id}},i),a),s.prototype.initialize.call(this,{},{collectionClass:n,collectionUrl:o.getURL("timelines/activities?type=profile")}),this.set({fetchOptions:{target:"topic:"+this.id}})},shouldFetch:function(){return!this.get("items").length},fetch:function(e){this.get("items").length||this.fetchItems(e)},parse:function(e){return e.response}});return i.addType("TopicFeed",r),r}),define("home/collections/TopThreadCollection",["backbone","underscore","core/api","home/models/common/UniqueModel","home/collections/common/ExtensibleCollection","home/models/Thread"],function(e,t,n,i,a,s){var o=a.extend({model:i.boundModel(s),url:n.getURL("threads/listPopular"),initialize:function(e,t){a.prototype.initialize.call(this,arguments),this.forum=t.forum,this.limit=t.limit
},set:function(n,i){i.parse&&(n=this.parse(n,i),delete i.parse),t.isArray(n)||(n=n?[n]:[]),n=t.reject(n,function(e){return e.title.match(/^http/i)}),e.Collection.prototype.set.call(this,n,i)},parse:function(e){var n=e.response;return t.each(n,function(e){e.verb="topdiscussion"}),e.response},fetch:function(n){return n=n||{},n.data=t.defaults({forum:this.forum,limit:10,interval:"7d",with_top_post:!0},n.data),e.Collection.prototype.fetch.call(this,n)}});return o}),define("home/collections/MostLikedUserCollection",["underscore","core/api","core/collections/PaginatedCollection","home/models/common/UniqueModel","home/models/User"],function(e,t,n,i,a){return n.extend({initialize:function(e,t){this.forum=t.forum},model:i.boundModel(a),url:t.getURL("forums/listMostLikedUsers"),fetch:function(t){return t=t||{},t.data=e.defaults({forum:this.forum,limit:20},t.data),n.prototype.fetch.call(this,t)},parse:function(){var t=n.prototype.parse.apply(this,arguments);return e.each(t,function(e){e.verb="topcommenter"}),e.filter(t,function(e){return parseFloat(e.rep)>.7?e:void 0})}})}),define("home/models/ForumProfile",["underscore","backbone","home/collections/TopThreadCollection","home/collections/MostLikedUserCollection","home/collections/FeedItemCollection","home/models/Feed","home/models/Forum","home/models/ForumFeed","home/models/common/UniqueModel"],function(e,t,n,i,a,s,o,r,l){var c=t.Model.extend({initialize:function(t,a){this.initializeRelated("forum",e.defaults({forum:{id:this.id}},a),o),this.recent=new l(r,{id:this.id});var c={forum:this.id};this.topThreads=new s({fetchOptions:c},{collectionClass:n}),this.mostLikedUsers=new s({fetchOptions:c},{collectionClass:i})},toJSON:function(){return e.defaults({forum:this.forum.toJSON(),recent:this.recent.toJSON(),mostLikedUsers:this.mostLikedUsers.toJSON(),topThreads:this.topThreads.toJSON()},this.attributes)}});return l.addType("ForumProfile",c),c}),define("home/collections/CuratedCollection",["underscore","backbone","home/collections/FeedItemCollection"],function(e,t,n){var i=n.extend({comparator:function(e){return-1*e.get("score")},initialize:function(e,t){n.prototype.initialize.call(this,e,t),this.listenTo(this,"change:score",this.updateActivityIndex),this.activityFunctions=t.activityFunctions},updateActivityIndex:function(t){this.remove(t);var n=e.sortedIndex(this.models,t,this.comparator);this.add(t,{at:n})},getNaturalIndex:function(t){return e.sortedIndex(this.map(this.comparator),-1*t.get("naturalScore"))},calculateBoostScore:function(e,t){var n=0===e?2*this.first().get("score"):this.at(e-1).get("score"),i=e===this.length?.5*this.last().get("score"):this.at(e).get("score");return t>=i&&n>=t?t:(n+i)/2},boost:function(e,t){var n=e.get("naturalScore"),i=this.calculateBoostScore(t,n);n>i&&(i=n),i>n?this.activityFunctions.boost.call(e,i):e.get("boostedScore")&&this.activityFunctions.unboost.call(e)}});return i}),define("home/models/CuratedFeedProfile",["underscore","backbone","core/api","home/models/common/UniqueModel","home/models/ActivityFeed","home/models/ActivityFeedItem","home/models/Feed","home/collections/CuratedCollection","home/models/Channel"],function(e,t,n,i,a,s,o,r,l){var c=t.Model.extend({initialize:function(t,i){var c,u;this.get("channel")&&(this.initializeRelated("channel",i,l),c="timelines/ranked?type=source&target=channel:"+this.channel.id,u="timelines/ranked?type=curated&target=channel:"+this.channel.id,this.activityFunctions={boost:e.partial(s.prototype.boostInChannel,this.channel.id),unboost:e.partial(s.prototype.unboostInChannel,this.channel.id)}),this.suggestions=new a({},{collectionUrl:n.getURL(c)}),this.curated=new o({},{collectionClass:r,collectionUrl:n.getURL(u),collectionOptions:{activityFunctions:this.activityFunctions}})},ensureFetched:function(){this.channel&&this.channel.shouldFetch()&&this.channel.fetch(),this.suggestions.get("fetched")||this.suggestions.ensureFetched(),this.curated.get("fetched")||this.curated.ensureFetched()},url:function(e){return n.getURL("timelines/curation/"+this.urls[e])},urls:{dismiss:"hideThreadFromSourceTimeline",share:"shareThreadToChannel",unshare:"unshareThreadFromChannel"},sync:function(n,i,a){return a=a||{},a.url=i.url(n),a.type="POST",a.processData=!0,a.emulateHTTP=!0,a.data=e.defaults({channel:i.channel.id},a.data),t.sync(n,i,a)},refreshFeeds:function(){this.refreshFeed("source",this.suggestions),this.refreshFeed("curated",this.curated)},refreshFeed:function(e,i){t.ajax({url:n.getURL("timelines/rank"),type:"GET",data:{target:"channel:"+this.channel.id,type:e}}).then(function(){i.fetchItems.call(i,{reset:!0})})},dismissFromSuggestions:function(e){this.dismiss(e,this.suggestions.items,"dismiss")},dismissFromCurated:function(e){this.dismiss(e,this.curated.items,"unshare")},dismiss:function(e,t,n){t.remove(e),e.get("boostedScore")&&this.activityFunctions.unboost.call(e),this.sync(n,this,{data:{thread:e.thread.id}})},share:function(e){this.suggestions.items.remove(e),this.curated.items.add(e),this.sync("share",this,{data:{thread:e.thread.id}})},boost:function(e,t){this.curated.items.boost(e,t)},updateBoostTime:function(e,t){this.activityFunctions.boost.call(e,e.get("score"),t)},unboost:function(e){e.get("boostedScore")&&this.activityFunctions.unboost.call(e)}},{buildId:function(e){return e.channel?"channel:"+e.channel.id:void 0}});return i.addType("CuratedFeedProfile",c),c}),define("core/extensions/handlebars.helpers",["handlebars","core/strings","core/config/urls"],function(e,t,n){var i=e.Utils;return e.registerHelper("any",function(){for(var e=arguments.length,t=0;e-1>t;t++)if(arguments[t])return arguments[t]}),e.registerHelper("eq",function(e,t){return e===t}),e.registerHelper("ne",function(e,t){return e!==t}),e.registerHelper("gt",function(e,t){return e>t}),e.registerHelper("lt",function(e,t){return t>e}),e.registerHelper("ge",function(e,t){return e>=t}),e.registerHelper("le",function(e,t){return t>=e}),e.registerHelper("typeof",function(e,t){return typeof e===t}),e.registerHelper("notNull",function(e){return null!==e}),e.registerHelper("if_any",function(){for(var e=arguments.length,t=arguments[e-1],n=0;e-1>n;n++)if(arguments[n])return t.fn(this);return t.inverse(this)}),e.registerHelper("if_all",function(){for(var e=arguments.length,t=arguments[e-1],n=0;e-1>n;n++)if(!arguments[n])return t.inverse(this);return t.fn(this)}),e.registerHelper("getPartial",function(t,n,i){return void 0===i&&(i=n,n=this,e.Utils.extend(n,i.hash)),new e.SafeString(e.partials[t](n,i))}),e.registerHelper("gettext",function(){var n,a,s,o,r=arguments.length,l=arguments[r-1],c=l.hash,u=arguments[0],d=e.partials;u=t.get(u);for(s in c)c.hasOwnProperty(s)&&(a=RegExp("%\\(("+s+")\\)s","gm"),n=c[s],o=n&&n.executePartial,o&&(n=d[n.partial].call(this,n.context,l)),void 0===n||null===n||"number"==typeof n&&isNaN(n)?n="":o||(n=i.escapeExpression(n)),u=u.replace(a,""+n));return new e.SafeString(u)}),e.registerHelper("urlfor",function(e){for(var t=e.split("."),i=t.length,a=n,s=0;a.hasOwnProperty(t[s])&&i>s;)a=a[t[s]],s++;return a}),e.registerHelper("html",function(t){return new e.SafeString(t||"")}),e.registerHelper("partial",function(t,n){e.registerPartial(t,n.fn)}),e.registerHelper("with",function(){var e=arguments.length,t=arguments[e-1],n=arguments[0];return 3===e?(n={},n[arguments[0]]=arguments[1]):"_window_"===n&&(n=window),t.fn(n)}),e.registerHelper("each",function(t,n){var i,a=n.fn,s=n.inverse,o=0,r="";if(n.data&&(i=e.createFrame(n.data)),t&&"object"==typeof t)if("[object Array]"===Object.prototype.toString.call(t))for(var l=t.length;l>o;o++)i&&(i.index=o,i.length=t.length),r+=a(t[o],{data:i});else for(var c in t)t.hasOwnProperty(c)&&(i&&(i.key=c),r+=a(t[c],{data:i}),o++);return 0===o&&(r=s(this)),r}),e.registerHelper("log",function(e){window.console.log(e,this)}),e.registerHelper("debug",function(){}),e.registerHelper("geturl",function(e){return e}),e.registerHelper("truncate",function(t,n){return n>=t.length?t:new e.SafeString(i.escapeExpression(t.slice(0,n))+"&hellip;")}),e.registerHelper("tag",function(t,n){var i=["<"+t],a=n.hash.text;delete n.hash.text;for(var s in n.hash)n.hash.hasOwnProperty(s)&&i.push(" "+s+'="'+n.hash[s]+'"');return i.push(">"+a+"</"+t+">"),new e.SafeString(i.join(""))}),e}),define("home/backbone.overrides",["underscore","backbone","core/api","home/models/common/UniqueModel"],function(e,t,n,i){t.ajax=e.wrap(t.ajax,function(e,t){return t.traditional=!0,/disqus\.com\/api/.test(t.url)?n.call(t.url,t):e(t)}),t.Model.prototype.initializeRelated=function(t,n,a){var s=n&&n[t]||this.get(t);if(!s)throw"missing the id, attributes, or model for related model "+t;if(e.isString(s)||e.isNumber(s)){var o=s;s={},s[a.prototype.idAttribute||"id"]=o}s instanceof a||(s=new i(a,s,n)),this.unset(t),this[t]=s}}),define("home/overrides/marionette.overrides",["jquery","backbone-marionette"],function(e,t){t.CompositeView.prototype.rerenderModel=function(){var e=this.$(this.itemViewContainer).detach();this.$el.html(this.renderModel()),this.$(this.itemViewContainer).replaceWith(e),this.triggerMethod("render",this)}}),define("Router",["underscore","jquery","modernizr","backbone","backbone-marionette","home/templates/preload","home/views/MainLayout","home/views/HomeFeedCoverView","home/views/HomeCardCollectionView","home/views/ActivityFeedView","home/views/NotificationsView","home/views/ForumProfileView","home/views/TopicCoverView","home/views/ProfileView","home/views/DiscussionFormView","home/views/DiscussionPageView","home/views/OnboardingView","home/views/SearchPageLayout","home/views/ChannelProfileView","home/views/CurateActivityView","home/collections/common/ExtensibleCollection","home/collections/TopicCollection","home/collections/FollowingUserCollection","home/models/Session","home/models/common/UniqueModel","home/models/ActivityFeed","home/models/Notifications","home/models/UserProfile","home/models/TopicFeed","home/models/Topic","home/models/Thread","home/models/Forum","home/models/Channel","home/models/ChannelProfile","home/models/ForumProfile","home/models/CuratedFeedProfile","home/utils/mixpanelUtils","home/utils/inspectletUtils","home/utils/settingsUtils","home/utils/navigationUtils","home/utils/trackingUtils","home/utils/releaseUtils","core/utils/cookies","core/api","core/bus","core/strings","remote/config","core/config/urls","core/extensions/handlebars.helpers","home/backbone.overrides","home/overrides/marionette.overrides","disqus.sdk"],function(e,t,n,i,a,s,o,r,l,c,u,d,h,m,p,f,g,v,w,b,y,x,k,C,T,S,_,E,F,P,M,D,V,A,R,N,U,O,I,H,z,L,j,$,q,B,W,Y){var G=function(e){(new Image).src=Y.jester+"/stat.gif?event="+e},J=B.get,X=i.Router.extend({name:"home",routes:{"home/discuss/:forum(/)":"startDiscussion","home/edit/:forum/:thread(/)":"editDiscussion","home/search(/)":"search","home/user(s)(/:username)(/:feed)(/)":"profile","by/:username(/:feed)(/)":"profile","home/inbox(/)":"inbox","home/preload(/)":"preload","home/account(/)":"account","home/notifications(/)":"notifications","home/topic(s)/:topicId(/)":"topics","home/forum(s)/:forumId(/:feed)(/)":"forums","home/discussion(s)/:forum/:thread(/:permalink)(/)":"discussion","home/follow/channel(s)/:channelId(/)":"followChannel","home/channel(s)/:channelId(/:feed)(/)":"channels","home/channel(s)/:channelId/discussion(s)/:forumId/:thread(/:permalink)(/)":"channelDiscussion","home/curate/channel/:channelId(/:activityIndex)(/)":"curate","home/welcome(/)":"onboarding","home/":"home"},TOPICS:["Business","Celebrity","Culture","Entertainment","Games","Living","News","Sports","Style","Tech"],initialize:function(e){this.CDN_ROOT=e.CDN_ROOT,this.feeds={},this.listenTo(this,"route",this.handleRouteChange),this.listenTo(this,"route",this.logRouteChange),this.messages=[]},bootstrap:function(){this.initSession(),this.initTopics(),this.initTracking(),this.initLinkHandling()},initTracking:function(){z.init(),z.trackVisit(),O.init()},initLinkHandling:function(){t("body").on("click","a[href]",e.bind(H.handleLinkClicks,H))},initSession:function(){var t=this.session=C.get();return t.load(),t.loadPromise().then(e.bind(function(){window.Raven&&window.Raven.setUser({id:t.user.get("id"),username:t.user.get("username")}),this.loadModeratedForums()},this)),t.loadPromise().fail(function(){var e=t.provider();e&&G("home.session.rejected."+("disqus"===e?"disqus":"remote"))}),this.initUserProfile(),t},loadModeratedForums:function(){this.session.loadModeratedForums()},logRouteChange:function(e){G(this.name+".route."+e)},initUserProfile:function(){var e=this.session.fromCookie().username;e?this.session.initUserProfile(e):this.session.once("change:id",function(e){this.session.initUserProfile(e.get("username"))},this)},initTopics:function(){e.each(this.TOPICS,function(e){return new T(P,{id:e.toLowerCase(),name:e})})},execute:function(){$.off("error",H.navigateToLoginOnAuthFail),z.pageChanged(),i.Router.prototype.execute.apply(this,arguments)},ensureAuthenicated:function(t){return $.off("error",H.navigateToLoginOnAuthFail),this.isLoggedOut()?this.navigateToOnboarding():($.on("error",H.navigateToLoginOnAuthFail),void this.session.loadPromise().then(e.bind(t,this,e.tail(arguments)),H.navigateToLogin))},ensureHasChannel:function(t,n){var i=new T(D,{id:n});return i.shouldFetch()?(i.fetch(),void this.listenToOnce(i,"sync",e.bind.apply(e,[this.ensureHasChannel,this].concat(e.toArray(arguments))))):i.channel||"gabalafou-test"===n?void t.apply(this,e.tail(arguments)):this.notFound()},preventBlacklisted:function(t){e.contains(W.timelines.BLACKLISTED_FORUMS,t.forum)&&(window.top.location="https://help.disqus.com/customer/portal/articles/1689402-redirected-from-home")},curate:function(t,n){this.ensureAdmin(function(){var i={channel:t};i.id=N.buildId(i);var a=new T(N,i);return null===n||a.curated.get("fetched")?(a.ensureFetched(),void(null!==n?this.showViews(o,{content:new b({model:a.curated.items.at(n)})}):require(["home/views/CurationView"],e.bind(function(e){this.showViews(o,{content:new e({model:a})})},this)))):void H.navigate("/home/curate/channel/"+t+"/",{trigger:!0,replace:!0})})},preload:function(){this.preloadView=new(a.ItemView.extend({template:s})),this.showViews(o,{content:this.preloadView})},handleRouteChange:function(){H.coerceTrailingSlash(window.location)},navigateToOnboarding:function(){window.top.location="https://disqus.com/profile/login/?next="+encodeURIComponent("https://disqus.com/home/")},onboarding:function(){U.track("view welcome page",{target:t("body")},{skipUserProperties:this.isLoggedOut()}),this.showViews(o,{content:new g({session:this.session})})},renavigateToProfile:function(e){var t=e.get("username");return t?(H.navigate("/by/"+t+"/",{replace:!0}),void this.profile(t)):(H.navigate("/home/",{replace:!0}),void this.home())},search:function(){this.showViews(o,{content:new v({session:this.session})})},profile:function(n,i){if(-1!==window.location.pathname.indexOf("home/user")&&H.navigate(window.location,{replace:!0,silent:!0}),!n)return this.ensureAuthenicated(function(){var e=this.session,t=e.user;return t.get("username")?void this.renavigateToProfile(t):void this.listenToOnce(e,"change:id",this.renavigateToProfile)});var a=e.find(T.pool(E),function(e){return e.user.get("username")===n});a||(a=new T(E,{username:n})),a.fetchUser(),U.track("view user profile",{target:t("body")}),O.tagSession("viewed a user profile"),this.showViews(o,{content:new m({model:a,activeTab:i})})},home:function(e){this.ensureAuthenicated(function(){var t=this.feeds.activityFeed;t||(t=this.feeds.activityFeed=new S,t.fetchItems({reset:!0})),this.showViews(o,{content:new c({model:t,collection:t.get("items"),coverView:r,fetchableCollectionView:l,infiniteScroll:!0})}),e&&e()})},account:function(){this.home(function(){I.openProfilePane()})},notifications:function(){this.home(function(){I.openNotificationPane()})},ensureAdmin:function(t,n){var i=this.session;return i.fetched?L.isDisqusAdmin(i.user)?t.apply(this,n):this.notFound():void i.fetch().then(e.bind(this.ensureAdmin,this,t,n),e.bind(this.notFound,this))},followChannel:function(e){return"disqusfun"===e?this.ensureAdmin(this._followChannel,arguments):this._followChannel.apply(this,arguments)},_followChannel:function(e){this.ensureAuthenicated(function(){var t=new T(V,{slug:e});t.primaryForum&&!t.primaryForum.get("followed")?t.primaryForum.follow():this.listenToOnce(t,"changeRelated:primaryForum",function(){t.primaryForum.get("followed")||t.primaryForum.follow()}),H.navigate("/home/channel/"+e+"/",{trigger:!0,replace:!0})})},channels:function(e){return"disqusfun"===e||"gabalafou-test"===e?this.ensureAdmin(this._channels,arguments):this._channels.apply(this,arguments)},_channels:function(e,n){var i=new T(A,{id:e,channel:e});i.ensureFetched(),U.track("view channel profile",{target:t("body")}),O.tagSession("viewed a channel profile"),this.showViews(o,{content:new w({model:i,activeTab:n})})},_forums:function(e,n){var i=new T(R,{id:e}),a=i.forum,s=this;if(a.channel)return void H.navigate("/home/channel/"+a.channel.id+"/",{trigger:!0,replace:!0});a.fetch().then(function(){a.channel&&s._forums(e)},this.notFound),U.track("view forum profile",{target:t("body")}),O.tagSession("viewed a community profile");var r=new d({model:i,activeTab:n});this.showViews(o,{content:r})},forums:function(e){return this.preventBlacklisted({forum:e}),"disqus-disqusfun"===e?this.ensureAdmin(this._forums,arguments):this._forums.apply(this,arguments)},topics:function(e){var n=new T(F,{id:e});n.shouldFetch()&&n.fetch(),U.track("view forum profile",{target:t("body")});var i=new c({coverView:h,model:n,collection:n.get("items")});i.$el.attr({"data-mix-location":"feed topic"}),this.showViews(o,{content:i})},inbox:function(){this.ensureAuthenicated(function(){var e=this.session.getOrCreateNotifications();if(U.track("view notifications",{target:t("body")}),O.tagSession("viewed notifications"),window.location.search.indexOf("email_verified")>-1){var n=B.interpolate(J("Your email's verified! Have a look around -- %(Disqus)s is a lot more than comments"),{Disqus:"Disqus"});this.messages.push({message:n})}this.showViews(o,{content:new u({model:e})})})},_showDiscussionForm:function(t,n){var i=new p(e.extend({forum:t,session:this.session},n));this.listenTo(i,"createThread",function(){(new y).add(i.getThread()),H.navigate("/home/discussion/"+t+"/"+i.model.get("slug"),{trigger:!0})}),this.showViews(o,{content:i})},startDiscussion:function(e){return this.ensureAuthenicated(function(){this.ensureHasChannel(function(){this._showDiscussionForm.apply(this,arguments)},e)},arguments)},editDiscussion:function(n,i){var a=this.session,s=this.getOrCreateThread(n,i),o=[];return a.fetched||o.push(a.fetch()),s.shouldFetch()&&o.push(s.fetch()),a.moderatedForums||o.push(a.loadModeratedForums()),o.length?void t.when.apply(t,o).then(e.bind(this.editDiscussion,this,n,i),e.bind(this.notFound,this)):s.canEdit(a)?void this._showDiscussionForm(n,{thread:s}):void H.navigate(s.getDiscussionRoute(),{trigger:!0,replace:!0})},discussionPage:function(n,i,a){var s=this.getOrCreateThread(n,i);U.track("view discussion thread",{target:t("body")}),O.tagSession("viewed a discussion page"),this.showViews(o,{content:new f(e.extend({model:s,session:this.session},a))})},_discussion:function(e,t){this.discussionPage(e,t)},discussion:function(e){return this.preventBlacklisted({forum:e}),"disqus-disqusfun"===e?this.ensureAdmin(this._discussion,arguments):this._discussion.apply(this,arguments)},channelDiscussion:function(e,t,n){var i=new T(V,{slug:e});return i.shouldFetch()&&i.fetch(),this.discussionPage(t,n,{channel:i})},showLayout:function(e){this.layout instanceof e||(this.layout&&this.layout.close(),this.layout=new e({session:this.session,app:this}).render(),t(this.getLayoutContainer()).html(this.layout.$el),this.layout.trigger("show"))},getLayoutContainer:function(){return"body"},isLoggedOut:function(){return"disqus.com"===window.location.host&&!this.session.fromCookie().id},getOrCreateThread:function(t,n,i){var a=T.pool(M),s=e.find(a,function(e){return e.get("slug")===n&&e.forum.get("id")===t});if(!s){var o=new y;s=new M({slug:n,forum:{id:t}}),o.add(s),s.fetch(i).then(function(){T.set(M,s)})}return s},notFound:H.notFoundRouteHandler,showViews:function(e,n){n.content.getPageTrackingParams&&z.setPageParams(n.content.getPageTrackingParams()),this.showLayout(e),this.layout.showViews(n),n.content.getTitle&&t.when(n.content.getTitle()).then(function(e){document.title="Disqus"+(e?" "+e:"")}),q.trigger("viewSection")}});return X}),define("home/mixins/asEmbedApp",["jquery","underscore","backbone","modernizr","core/api","core/frameBus","core/bus","core/utils","core/utils/cookies","home/utils/mixpanelUtils","home/utils/navigationUtils"],function(e,t,n,i,a,s,o,r,l,c,u){var d,h={initialize:function(n){d=e.Deferred(),this.name="embed_sidebar";var i=t.bind(c.track,c,"visit_homeception",{target:e("body")});c.trackError=e.noop,c.track=e.noop,this.mainLayoutIsRendered=e.Deferred(),this.listenTo(s,"mainlayoutRendered",this.mainLayoutIsRendered.resolve),this.listenTo(o,"after:render",function(){s.sendHostMessage("after:render")}),d.done(i),n.apply(this,arguments),this.listenTo(s,"showPath",this.loadPath),this.listenTo(s,"open",this.openDrawer),s.sendHostMessage("ready")},initUserProfile:function(e){d.done(e)},loadModeratedForums:e.noop,setSsoHeaders:function(e){a.headers({"X-Disqus-Publisher-API-Key":e.apiKey,"X-Disqus-Remote-Auth":e.remoteAuthS3})},loadPath:function(e){e.sso&&e.sso.apiKey&&e.sso.remoteAuthS3&&this.setSsoHeaders(e.sso),d.resolveWith(this);var t=e.path,n=this;this.mainLayoutIsRendered.done(function(){n.navigateToPath(t),s.sendHostMessage("openReady")})},openDrawer:function(){var t=e("body");t.addClass("active"),t.one(r.transitionEndEvent,function(){s.sendHostMessage("after:render")})},navigateToPath:function(e){var t="/home/"+e;u.navigate(t,!0)}},m={fetch:function(e,n){return d.then(t.bind(e,this,n))},fetchFollowedForums:e.noop},p=function(e,n){e.initialize=t.wrap(e.initialize,h.initialize),e.initUserProfile=t.wrap(e.initUserProfile,h.initUserProfile),e.loadModeratedForums=h.loadModeratedForums,e.setSsoHeaders=h.setSsoHeaders,e.loadPath=h.loadPath,e.openDrawer=h.openDrawer,e.navigateToPath=h.navigateToPath,n.fetch=t.wrap(n.fetch,m.fetch),n.fetchFollowedForums=m.fetchFollowedForums};return p}),+function(e){function t(t){e(i).remove(),e(a).each(function(){var i=n(e(this)),a={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",a)),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",a))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}var i=".dropdown-backdrop",a="[data-toggle=dropdown]",s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.prototype.toggle=function(i){var a=e(this);if(!a.is(".disabled, :disabled")){var s=n(a),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var r={relatedTarget:this};if(s.trigger(i=e.Event("show.bs.dropdown",r)),i.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown",r),a.focus()}return!1}},s.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&s.find(a).focus(),i.click();var r=" li:not(.divider):visible a",l=s.find("[role=menu]"+r+", [role=listbox]"+r);if(l.length){var c=l.index(l.filter(":focus"));38==t.keyCode&&c>0&&c--,40==t.keyCode&&l.length-1>c&&c++,~c||(c=0),l.eq(c).focus()}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,s.prototype.toggle).on("keydown.bs.dropdown.data-api",a+", [role=menu], [role=listbox]",s.prototype.keydown)}(jQuery),define("bootstrap/dropdown",["jquery"],function(){}),+function(e){var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i);for(var a=this.options.trigger.split(" "),s=a.length;s--;){var o=a[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var r="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,o=s.test(a);o&&(a=a.replace(s,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(a),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var r=this.getPosition(),l=i[0].offsetWidth,c=i[0].offsetHeight;if(o){var u=this.$element.parent(),d=a,h=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:u.outerWidth(),p="body"==this.options.container?window.innerHeight:u.outerHeight(),f="body"==this.options.container?0:u.offset().left;a="bottom"==a&&r.top+r.height+c-h>p?"top":"top"==a&&0>r.top-h-c?"bottom":"right"==a&&r.right+l>m?"left":"left"==a&&f>r.left-l?"right":a,i.removeClass(d).addClass(a)}var g=this.getCalculatedOffset(a,r,l,c);this.applyPlacement(g,a),this.hoverState=null;var v=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,v).emulateTransitionEnd(150):v()}},t.prototype.applyPlacement=function(t,n){var i,a=this.tip(),s=a[0].offsetWidth,o=a[0].offsetHeight,r=parseInt(a.css("margin-top"),10),l=parseInt(a.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(l)&&(l=0),t.top=t.top+r,t.left=t.left+l,e.offset.setOffset(a[0],e.extend({using:function(e){a.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),a.addClass("in");var c=a[0].offsetWidth,u=a[0].offsetHeight;if("top"==n&&u!=o&&(i=!0,t.top=t.top+o-u),/bottom|top/.test(n)){var d=0;0>t.left&&(d=-2*t.left,t.left=0,a.offset(t),c=a[0].offsetWidth,u=a[0].offsetHeight),this.replaceArrow(d-s+c,c,"left")}else this.replaceArrow(u-o,u,"top");i&&a.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),a=i.data("bs.tooltip"),s="object"==typeof n&&n;(a||"destroy"!=n)&&(a||i.data("bs.tooltip",a=new t(this,s)),"string"==typeof n&&a[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),define("bootstrap/tooltip",["jquery"],function(){}),+function(e){var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});i?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(a)
}).emulateTransitionEnd(300):n.$element.focus().trigger(a)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,i){return this.each(function(){var a=e(this),s=a.data("bs.modal"),o=e.extend({},t.DEFAULTS,a.data(),"object"==typeof n&&n);s||a.data("bs.modal",s=new t(this,o)),"string"==typeof n?s[n](i):o.show&&s.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),a=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},a.data(),n.data());n.is("a")&&t.preventDefault(),a.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),define("bootstrap/modal",["jquery"],function(){}),function(e){function t(t){this.$element=e(t),this.original_text=this.$element.html(),this.settings=e.extend({},e.fn.trunk8.defaults)}function n(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText}function i(e){if(n(e)===e)return e.split(/\s/g);for(var t,a,s=[],o=/<([a-z]+)([^<]*)(?:>(.*?(?!<\1>)*)<\/\1>|\s+\/>)(['.?!,]*)|((?:[^<>\s])+['.?!,]*\w?|<br\s?\/?>)/gi,r=o.exec(e);r&&t!==o.lastIndex;)t=o.lastIndex,r[5]?s.push(r[5]):r[1]&&s.push({tag:r[1],attribs:r[2],content:r[3],after:r[4]}),r=o.exec(e);for(a=0;s.length>a;a++)"string"!=typeof s[a]&&s[a].content&&(s[a].content=i(s[a].content));return s}function a(t,n,i){t=t.replace(i,"");var a=function(n,s){var o,r,l,c,u="";for(c=0;n.length>c;c++)o=n[c],l=e.trim(t).split(" ").length,e.trim(t).length&&("string"==typeof o?(/<br\s*\/?>/.test(o)||(1===l&&e.trim(t).length<=o.length?(o=t,("p"===s||"div"===s)&&(o+=i),t=""):t=t.replace(o,"")),u+=e.trim(o)+(c===n.length-1||1>=l?"":" ")):(r=a(o.content,o.tag),o.after&&(t=t.replace(o.after,"")),r&&(o.after||(o.after=" "),u+="<"+o.tag+o.attribs+">"+r+"</"+o.tag+">"+o.after)));return u},s=a(n);return s.slice(s.length-i.length)===i&&(s+=i),s}function s(){var t,s,o,l,u,d,h=this.data("trunk8"),m=h.settings,p=m.width,f=m.side,g=m.fill,v=m.parseHTML,w=r.getLineHeight(this)*m.lines,b=h.original_text,y=b.length,x="";if(this.html(b),u=this.text(),v&&n(b)!==b&&(d=i(b),b=n(b),y=b.length),p===c.auto){if(this.height()<=w)return;for(t=0,s=y-1;s>=t;)o=t+(s-t>>1),l=r.eatStr(b,f,y-o,g),v&&d&&(l=a(l,d,g)),this.html(l),this.height()>w?s=o-1:(t=o+1,x=x.length>l.length?x:l);this.html(""),this.html(x),m.tooltip&&this.attr("title",u)}else isNaN(p)?e.error('Invalid width "'+p+'".'):(o=y-p,l=r.eatStr(b,f,o,g),this.html(l),m.tooltip&&this.attr("title",b))}var o,r,l={center:"center",left:"left",right:"right"},c={auto:"auto"};t.prototype.updateSettings=function(t){this.settings=e.extend(this.settings,t)},o={init:function(n){return this.each(function(){var i=e(this),a=i.data("trunk8");a||i.data("trunk8",a=new t(this)),a.updateSettings(n),s.call(i)})},update:function(t){return this.each(function(){var n=e(this);t&&(n.data("trunk8").original_text=t),s.call(n)})},revert:function(){return this.each(function(){var t=e(this).data("trunk8").original_text;e(this).html(t)})},getSettings:function(){return e(this.get(0)).data("trunk8").settings}},r={eatStr:function(t,n,i,a){var s,o,c=t.length,u=r.eatStr.generateKey.apply(null,arguments);if(r.eatStr.cache[u])return r.eatStr.cache[u];if(("string"!=typeof t||0===c)&&e.error('Invalid source string "'+t+'".'),0>i||i>c)e.error('Invalid bite size "'+i+'".');else if(0===i)return t;switch("string"!=typeof(a+"")&&e.error("Fill unable to be converted to a string."),n){case l.right:return r.eatStr.cache[u]=e.trim(t.substr(0,c-i))+a;case l.left:return r.eatStr.cache[u]=a+e.trim(t.substr(i));case l.center:return s=c>>1,o=i>>1,r.eatStr.cache[u]=e.trim(r.eatStr(t.substr(0,c-s),l.right,i-o,""))+a+e.trim(r.eatStr(t.substr(c-s),l.left,o,""));default:e.error('Invalid side "'+n+'".')}},getLineHeight:function(t){var n=e(t).css("float");"none"!==n&&e(t).css("float","none");var i=e(t).css("position");"absolute"===i&&e(t).css("position","static");var a,s=e(t).html();return e(t).html("i"),a=e(t).parent().innerHeight(),e(t).html(s).css({"float":n,position:i}),a}},r.eatStr.cache={},r.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,"")},e.fn.trunk8=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.trunk8"):o.init.apply(this,arguments)},e.fn.trunk8.defaults={fill:"&hellip;",lines:1,side:l.right,tooltip:!0,width:c.auto,parseHTML:!1}}(jQuery),define("jquery.trunk8",["jquery"],function(){}),define("home/apps/dashboard/app",["home/config","home/utils/layoutUtils","Router","home/models/Session","core/config/urls","jquery","backbone","home/mixins/asEmbedApp","home/utils/sidebarUtils","home/utils/navigationUtils","bootstrap/dropdown","bootstrap/tooltip","bootstrap/modal","jquery.trunk8"],function(e,t,n,i,a,s,o,r,l,c){function u(){var e=window.location;if(e.hash.length>1&&("/home"===e.pathname||"/home/"===e.pathname)){var t={pathname:"/home/"+e.hash.slice(1).replace(/^\//,""),search:e.search,hash:""};if(c.matchesRoute(t))return c.navigate(t,!0)}return o.history.loadUrl()}var d=function(e){"9000"===window.location.port?require(["fixtures/fixtures"],e):e()};return{_init:function(i){var a=new n(i);a.bootstrap(),t.getScreenWidth()<=480&&(s.fn.tooltip=function(){}),window.DISQUS=window.DISQUS||{},window.DISQUS.home={app:a},d(function(){o.history.start({pushState:!0,hashChange:!1,root:e.appRoot,silent:!0}),u()||a.notFound()})},init:function(e){a.cdn=e.CDN_ROOT;var t=this;l.isSidebar()&&r(n.prototype,i.prototype),s(function(){t._init(e)})}}});
//# sourceMappingURL=app.js.map